(self.webpackChunkarches=self.webpackChunkarches||[]).push([[1882],{91882:function(z,Y,q){z.exports=function e(z,Y,q){function r(W,K){if(!Y[W]){if(!z[W]){if(X)return X(W,!0);var H=new Error("Cannot find module '"+W+"'");throw H.code="MODULE_NOT_FOUND",H}var Z=Y[W]={exports:{}};z[W][0].call(Z.exports,(function(Y){return r(z[W][1][Y]||Y)}),Z,Z.exports,e,z,Y,q)}return Y[W].exports}for(var X=void 0,W=0;W<q.length;W++)r(q[W]);return r}({1:[function(z,Y,q){"use strict";var X=z("./src/setup"),W=z("./src/options"),K=z("./src/api"),H=z("./src/constants"),a=function(z,Y){var q={options:z=W(z)};Y=K(q,Y),q.api=Y;var Z=X(q);return Y.onAdd=Z.onAdd,Y.onRemove=Z.onRemove,Y.types=H.types,Y.options=z,Y};Y.exports=function(z){a(z,this)},Y.exports.modes=z("./src/modes")},{"./src/api":22,"./src/constants":23,"./src/modes":56,"./src/options":61,"./src/setup":63}],2:[function(z,Y,q){function o(z){if(!(this instanceof o))return new o(z);this._bbox=z||[1/0,1/0,-1/0,-1/0],this._valid=!!z}Y.exports=o,o.prototype.include=function(z){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],z[0]),this._bbox[1]=Math.min(this._bbox[1],z[1]),this._bbox[2]=Math.max(this._bbox[2],z[0]),this._bbox[3]=Math.max(this._bbox[3],z[1]),this},o.prototype.equals=function(z){var Y;return Y=z instanceof o?z.bbox():z,this._bbox[0]==Y[0]&&this._bbox[1]==Y[1]&&this._bbox[2]==Y[2]&&this._bbox[3]==Y[3]},o.prototype.center=function(z){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},o.prototype.union=function(z){var Y;return this._valid=!0,Y=z instanceof o?z.bbox():z,this._bbox[0]=Math.min(this._bbox[0],Y[0]),this._bbox[1]=Math.min(this._bbox[1],Y[1]),this._bbox[2]=Math.max(this._bbox[2],Y[2]),this._bbox[3]=Math.max(this._bbox[3],Y[3]),this},o.prototype.bbox=function(){return this._valid?this._bbox:null},o.prototype.contains=function(z){if(!z)return this._fastContains();if(!this._valid)return null;var Y=z[0],q=z[1];return this._bbox[0]<=Y&&this._bbox[1]<=q&&this._bbox[2]>=Y&&this._bbox[3]>=q},o.prototype.intersect=function(z){return this._valid?(Y=z instanceof o?z.bbox():z,!(this._bbox[0]>Y[2]||this._bbox[2]<Y[0]||this._bbox[3]<Y[1]||this._bbox[1]>Y[3])):null;var Y},o.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var z="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",z)},o.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],3:[function(z,Y,q){function o(z){var Y,q=0;switch(z.type){case"Polygon":return r(z.coordinates);case"MultiPolygon":for(Y=0;Y<z.coordinates.length;Y++)q+=r(z.coordinates[Y]);return q;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Y=0;Y<z.geometries.length;Y++)q+=o(z.geometries[Y]);return q}}function r(z){var Y=0;if(z&&z.length>0){Y+=Math.abs(i(z[0]));for(var q=1;q<z.length;q++)Y-=Math.abs(i(z[q]))}return Y}function i(z){var Y,q,W,K,H,Z,Q=0,tt=z.length;if(tt>2){for(Z=0;Z<tt;Z++)Z===tt-2?(W=tt-2,K=tt-1,H=0):Z===tt-1?(W=tt-1,K=0,H=1):(W=Z,K=Z+1,H=Z+2),Y=z[W],q=z[K],Q+=(s(z[H][0])-s(Y[0]))*Math.sin(s(q[1]));Q=Q*X.RADIUS*X.RADIUS/2}return Q}function s(z){return z*Math.PI/180}var X=z("wgs84");Y.exports.geometry=o,Y.exports.ring=i},{wgs84:20}],4:[function(z,Y,q){Y.exports=function(z){function t(z){return Array.isArray(z)&&z.length&&"number"==typeof z[0]?[z]:z.reduce((function(z,Y){return Array.isArray(Y)&&Array.isArray(Y[0])?z.concat(t(Y)):(z.push(Y),z)}),[])}return t(z)}},{}],5:[function(z,Y,q){var X=z("@mapbox/geojson-normalize"),W=z("geojson-flatten"),K=z("./flatten");Y.exports=function(z){if(!z)return[];var Y=[];return W(X(z)).features.forEach((function(z){z.geometry&&(Y=Y.concat(K(z.geometry.coordinates)))})),Y}},{"./flatten":4,"@mapbox/geojson-normalize":7,"geojson-flatten":13}],6:[function(z,Y,q){function o(z){for(var Y=K(),q=X(z),W=0;W<q.length;W++)Y.include(q[W]);return Y}var X=z("@mapbox/geojson-coords"),W=z("traverse"),K=z("@mapbox/extent"),H={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Z=Object.keys(H);Y.exports=function(z){return o(z).bbox()},Y.exports.polygon=function(z){return o(z).polygon()},Y.exports.bboxify=function(z){return W(z).map((function(z){z&&Z.some((function(Y){return!!z[Y]&&-1!==H[Y].indexOf(z.type)}))&&(z.bbox=o(z).bbox(),this.update(z))}))}},{"@mapbox/extent":2,"@mapbox/geojson-coords":5,traverse:19}],7:[function(z,Y,q){Y.exports=function(z){if(!z||!z.type)return null;var Y=X[z.type];return Y?"geometry"===Y?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:z}]}:"feature"===Y?{type:"FeatureCollection",features:[z]}:"featurecollection"===Y?z:void 0:null};var X={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],8:[function(z,Y,q){var X=z("jsonlint-lines"),W=z("./object");Y.exports.hint=function(z,Y){var q,K=[];if("object"==typeof z)q=z;else{if("string"!=typeof z)return[{message:"Expected string or object as input",line:0}];try{q=X.parse(z)}catch(z){var H=z.message.match(/line (\d+)/);return[{line:parseInt(H[1],10)-1,message:z.message,error:z}]}}return K.concat(W.hint(q,Y))}},{"./object":9,"jsonlint-lines":15}],9:[function(z,Y,q){var X=z("./rhr");Y.exports.hint=function(z,Y){function n(z){if(Y&&!1===Y.noDuplicateMembers||!z.__duplicateProperties__||q.push({message:"An object contained duplicate members, making parsing ambigous: "+z.__duplicateProperties__.join(", "),line:z.__line__}),!i(z,"type","string"))if(Z[z.type])z&&Z[z.type](z);else{var X=Q[z.type.toLowerCase()];void 0!==X?q.push({message:"Expected "+X+" but got "+z.type+" (case sensitive)",line:z.__line__}):q.push({message:"The type "+z.type+" is unknown",line:z.__line__})}}function r(z,Y){return z.every((function(z){return null!==z&&typeof z===Y}))}function i(z,Y,X){if(void 0===z[Y])return q.push({message:'"'+Y+'" member required',line:z.__line__});if("array"===X){if(!Array.isArray(z[Y]))return q.push({message:'"'+Y+'" member should be an array, but is an '+typeof z[Y]+" instead",line:z.__line__})}else{if("object"===X&&z[Y]&&"Object"!==z[Y].constructor.name)return q.push({message:'"'+Y+'" member should be '+X+", but is an "+z[Y].constructor.name+" instead",line:z.__line__});if(X&&typeof z[Y]!==X)return q.push({message:'"'+Y+'" member should be '+X+", but is an "+typeof z[Y]+" instead",line:z.__line__})}}function s(z,X){if(!Array.isArray(z))return q.push({message:"position should be an array, is a "+typeof z+" instead",line:z.__line__||X});if(z.length<2)return q.push({message:"position must have 2 or more elements",line:z.__line__||X});if(z.length>3)return q.push({message:"position should not have more than 3 elements",level:"message",line:z.__line__||X});if(!r(z,"number"))return q.push({message:"each element in a position must be a number",line:z.__line__||X});if(Y&&Y.precisionWarning){if(W===K)return W+=1,q.push({message:"truncated warnings: we've encountered coordinate precision warning "+K+" times, no more warnings will be reported",level:"message",line:z.__line__||X});W<K&&z.forEach((function(Y){var K=0,Z=String(Y).split(".")[1];if(void 0!==Z&&(K=Z.length),K>H)return W+=1,q.push({message:"precision of coordinates should be reduced",level:"message",line:z.__line__||X})}))}}function a(z,Y,X,W){if(void 0===W&&void 0!==z.__line__&&(W=z.__line__),0===X)return s(z,W);if(1===X&&Y)if("LinearRing"===Y){if(!Array.isArray(z[z.length-1]))return q.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:W}),!0;if(z.length<4&&q.push({message:"a LinearRing of coordinates needs to have four or more positions",line:W}),z.length&&(z[z.length-1].length!==z[0].length||!z[z.length-1].every((function(Y,q){return z[0][q]===Y}))))return q.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:W}),!0}else if("Line"===Y&&z.length<2)return q.push({message:"a line needs to have two or more coordinates to be valid",line:W});if(Array.isArray(z))return z.map((function(z){return a(z,Y,X-1,z.__line__||W)})).some((function(z){return z}));q.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:W})}function c(z){z.crs&&("object"==typeof z.crs&&z.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===z.crs.properties.name?q.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:z.__line__}):q.push({message:"old-style crs member is not recommended",line:z.__line__}))}function u(z){if(z.bbox)return Array.isArray(z.bbox)?(r(z.bbox,"number")||q.push({message:"each element in a bbox member must be a number",line:z.bbox.__line__}),4!==z.bbox.length&&6!==z.bbox.length&&q.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:z.bbox.__line__}),q.length):void q.push({message:"bbox member must be an array of numbers, but is a "+typeof z.bbox,line:z.__line__})}function l(z){void 0!==z.properties&&q.push({message:'geometry object cannot contain a "properties" member',line:z.__line__}),void 0!==z.geometry&&q.push({message:'geometry object cannot contain a "geometry" member',line:z.__line__}),void 0!==z.features&&q.push({message:'geometry object cannot contain a "features" member',line:z.__line__})}function p(z){c(z),u(z),void 0!==z.id&&"string"!=typeof z.id&&"number"!=typeof z.id&&q.push({message:'Feature "id" member must have a string or number value',line:z.__line__}),void 0!==z.features&&q.push({message:'Feature object cannot contain a "features" member',line:z.__line__}),void 0!==z.coordinates&&q.push({message:'Feature object cannot contain a "coordinates" member',line:z.__line__}),"Feature"!==z.type&&q.push({message:"GeoJSON features must have a type=feature member",line:z.__line__}),i(z,"properties","object"),i(z,"geometry","object")||z.geometry&&n(z.geometry)}var q=[],W=0,K=10,H=6,Z={Point:function(z){c(z),u(z),l(z),i(z,"coordinates","array")||s(z.coordinates)},Feature:p,MultiPoint:function(z){c(z),u(z),i(z,"coordinates","array")||a(z.coordinates,"",1)},LineString:function(z){c(z),u(z),i(z,"coordinates","array")||a(z.coordinates,"Line",1)},MultiLineString:function(z){c(z),u(z),i(z,"coordinates","array")||a(z.coordinates,"Line",2)},FeatureCollection:function(z){if(c(z),u(z),void 0!==z.properties&&q.push({message:'FeatureCollection object cannot contain a "properties" member',line:z.__line__}),void 0!==z.coordinates&&q.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:z.__line__}),!i(z,"features","array")){if(!r(z.features,"object"))return q.push({message:"Every feature must be an object",line:z.__line__});z.features.forEach(p)}},GeometryCollection:function(z){c(z),u(z),i(z,"geometries","array")||(r(z.geometries,"object")||q.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:z.__line__}),1===z.geometries.length&&q.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:z.geometries.__line__}),z.geometries.forEach((function(Y){Y&&("GeometryCollection"===Y.type&&q.push({message:"GeometryCollection should avoid nested geometry collections",line:z.geometries.__line__}),n(Y))})))},Polygon:function(z){c(z),u(z),i(z,"coordinates","array")||a(z.coordinates,"LinearRing",2)||X(z,q)},MultiPolygon:function(z){c(z),u(z),i(z,"coordinates","array")||a(z.coordinates,"LinearRing",3)||X(z,q)}},Q=Object.keys(Z).reduce((function(z,Y){return z[Y.toLowerCase()]=Y,z}),{});return"object"!=typeof z||null==z?(q.push({message:"The root of a GeoJSON object must be an object.",line:0}),q):(n(z),q.forEach((function(z){({}).hasOwnProperty.call(z,"line")&&void 0===z.line&&delete z.line})),q)}},{"./rhr":10}],10:[function(z,Y,q){function o(z){return z*Math.PI/180}function r(z){var Y=0;if(z.length>2)for(var q,X,W=0;W<z.length-1;W++)q=z[W],Y+=o((X=z[W+1])[0]-q[0])*(2+Math.sin(o(q[1]))+Math.sin(o(X[1])));return Y>=0}function i(z){if(z&&z.length>0){if(r(z[0]))return!1;if(!z.slice(1,z.length).every(r))return!1}return!0}function s(z){return"Polygon"===z.type?i(z.coordinates):"MultiPolygon"===z.type?z.coordinates.every(i):void 0}Y.exports=function(z,Y){s(z)||Y.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:z.__line__})}},{}],11:[function(z,Y,q){"use strict";function o(z,Y){this.x=z,this.y=Y}Y.exports=o,o.prototype={clone:function(){return new o(this.x,this.y)},add:function(z){return this.clone()._add(z)},sub:function(z){return this.clone()._sub(z)},multByPoint:function(z){return this.clone()._multByPoint(z)},divByPoint:function(z){return this.clone()._divByPoint(z)},mult:function(z){return this.clone()._mult(z)},div:function(z){return this.clone()._div(z)},rotate:function(z){return this.clone()._rotate(z)},rotateAround:function(z,Y){return this.clone()._rotateAround(z,Y)},matMult:function(z){return this.clone()._matMult(z)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(z){return this.x===z.x&&this.y===z.y},dist:function(z){return Math.sqrt(this.distSqr(z))},distSqr:function(z){var Y=z.x-this.x,q=z.y-this.y;return Y*Y+q*q},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(z){return Math.atan2(this.y-z.y,this.x-z.x)},angleWith:function(z){return this.angleWithSep(z.x,z.y)},angleWithSep:function(z,Y){return Math.atan2(this.x*Y-this.y*z,this.x*z+this.y*Y)},_matMult:function(z){var Y=z[0]*this.x+z[1]*this.y,q=z[2]*this.x+z[3]*this.y;return this.x=Y,this.y=q,this},_add:function(z){return this.x+=z.x,this.y+=z.y,this},_sub:function(z){return this.x-=z.x,this.y-=z.y,this},_mult:function(z){return this.x*=z,this.y*=z,this},_div:function(z){return this.x/=z,this.y/=z,this},_multByPoint:function(z){return this.x*=z.x,this.y*=z.y,this},_divByPoint:function(z){return this.x/=z.x,this.y/=z.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var z=this.y;return this.y=this.x,this.x=-z,this},_rotate:function(z){var Y=Math.cos(z),q=Math.sin(z),X=Y*this.x-q*this.y,W=q*this.x+Y*this.y;return this.x=X,this.y=W,this},_rotateAround:function(z,Y){var q=Math.cos(z),X=Math.sin(z),W=Y.x+q*(this.x-Y.x)-X*(this.y-Y.y),K=Y.y+X*(this.x-Y.x)+q*(this.y-Y.y);return this.x=W,this.y=K,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(z){return z instanceof o?z:Array.isArray(z)?new o(z[0],z[1]):z}},{}],12:[function(z,Y,q){},{}],13:[function(z,Y,q){function o(z){switch(z&&z.type||null){case"FeatureCollection":return z.features=z.features.reduce((function(z,Y){return z.concat(o(Y))}),[]),z;case"Feature":return z.geometry?o(z.geometry).map((function(Y){return{type:"Feature",properties:JSON.parse(JSON.stringify(z.properties)),geometry:Y}})):z;case"MultiPoint":return z.coordinates.map((function(z){return{type:"Point",coordinates:z}}));case"MultiPolygon":return z.coordinates.map((function(z){return{type:"Polygon",coordinates:z}}));case"MultiLineString":return z.coordinates.map((function(z){return{type:"LineString",coordinates:z}}));case"GeometryCollection":return z.geometries.map(o).reduce((function(z,Y){return z.concat(Y)}),[]);case"Point":case"Polygon":case"LineString":return[z]}}Y.exports=o},{}],14:[function(z,Y,q){var X=Y.exports=function(z,Y){if(Y||(Y=16),void 0===z&&(z=128),z<=0)return"0";for(var q=Math.log(Math.pow(2,z))/Math.log(Y),W=2;q===1/0;W*=2)q=Math.log(Math.pow(2,z/W))/Math.log(Y)*W;var K=q-Math.floor(q),H="";for(W=0;W<Math.floor(q);W++)H=(Q=Math.floor(Math.random()*Y).toString(Y))+H;if(K){var Z=Math.pow(Y,K),Q=Math.floor(Math.random()*Z).toString(Y);H=Q+H}var tt=parseInt(H,Y);return tt!==1/0&&tt>=Math.pow(2,z)?X(z,Y):H};X.rack=function(z,Y,q){var r=function(K){var H=0;do{if(H++>10){if(!q)throw new Error("too many ID collisions, use more bits");z+=q}var Z=X(z,Y)}while(Object.hasOwnProperty.call(W,Z));return W[Z]=K,Z},W=r.hats={};return r.get=function(z){return r.hats[z]},r.set=function(z,Y){return r.hats[z]=Y,r},r.bits=z||128,r.base=Y||16,r}},{}],15:[function(z,Y,q){(function(X){var W=function(){function e(){this.yy={}}var t=function(z,Y,q,X){for(q=q||{},X=z.length;X--;q[z[X]]=Y);return q},z=[1,12],Y=[1,13],q=[1,9],X=[1,10],W=[1,11],K=[1,14],H=[1,15],Z=[14,18,22,24],Q=[18,22],tt=[22,24],et={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(z,Y,q,X,W,K,H){var Z=K.length-1;switch(W){case 1:this.$=z.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(z);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=K[Z-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=K[Z-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[K[Z-2],K[Z]];break;case 16:this.$={},this.$[K[Z][0]]=K[Z][1];break;case 17:this.$=K[Z-2],void 0!==K[Z-2][K[Z][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(K[Z][0])),K[Z-2][K[Z][0]]=K[Z][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[K[Z]];break;case 21:this.$=K[Z-2],K[Z-2].push(K[Z])}},table:[{3:5,4:z,5:6,6:Y,7:3,8:q,9:4,10:X,11:W,12:1,13:2,15:7,16:8,17:K,23:H},{1:[3]},{14:[1,16]},t(Z,[2,7]),t(Z,[2,8]),t(Z,[2,9]),t(Z,[2,10]),t(Z,[2,11]),t(Z,[2,12]),t(Z,[2,3]),t(Z,[2,4]),t(Z,[2,5]),t([14,18,21,22,24],[2,1]),t(Z,[2,2]),{3:20,4:z,18:[1,17],19:18,20:19},{3:5,4:z,5:6,6:Y,7:3,8:q,9:4,10:X,11:W,13:23,15:7,16:8,17:K,23:H,24:[1,21],25:22},{1:[2,6]},t(Z,[2,13]),{18:[1,24],22:[1,25]},t(Q,[2,16]),{21:[1,26]},t(Z,[2,18]),{22:[1,28],24:[1,27]},t(tt,[2,20]),t(Z,[2,14]),{3:20,4:z,20:29},{3:5,4:z,5:6,6:Y,7:3,8:q,9:4,10:X,11:W,13:30,15:7,16:8,17:K,23:H},t(Z,[2,19]),{3:5,4:z,5:6,6:Y,7:3,8:q,9:4,10:X,11:W,13:31,15:7,16:8,17:K,23:H},t(Q,[2,17]),t(Q,[2,15]),t(tt,[2,21])],defaultActions:{16:[2,6]},parseError:function(z,Y){function n(z,Y){this.message=z,this.hash=Y}if(!Y.recoverable)throw n.prototype=Error,new n(z,Y);this.trace(z)},parse:function(z){var Y=this,q=[0],X=[null],W=[],K=this.table,H="",Z=0,Q=0,tt=0,et=W.slice.call(arguments,1),nt=Object.create(this.lexer),ot={yy:{}};for(var rt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rt)&&(ot.yy[rt]=this.yy[rt]);nt.setInput(z,ot.yy),ot.yy.lexer=nt,ot.yy.parser=this,void 0===nt.yylloc&&(nt.yylloc={});var it=nt.yylloc;W.push(it);var st=nt.options&&nt.options.ranges;"function"==typeof ot.yy.parseError?this.parseError=ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var at,ct,ut,lt,pt,ht,ft,dt,gt,O=function(){var z;return"number"!=typeof(z=nt.lex()||1)&&(z=Y.symbols_[z]||z),z},yt={};;){if(ut=q[q.length-1],this.defaultActions[ut]?lt=this.defaultActions[ut]:(null!=at||(at=O()),lt=K[ut]&&K[ut][at]),void 0===lt||!lt.length||!lt[0]){var mt="";for(ht in gt=[],K[ut])this.terminals_[ht]&&ht>2&&gt.push("'"+this.terminals_[ht]+"'");mt=nt.showPosition?"Parse error on line "+(Z+1)+":\n"+nt.showPosition()+"\nExpecting "+gt.join(", ")+", got '"+(this.terminals_[at]||at)+"'":"Parse error on line "+(Z+1)+": Unexpected "+(1==at?"end of input":"'"+(this.terminals_[at]||at)+"'"),this.parseError(mt,{text:nt.match,token:this.terminals_[at]||at,line:nt.yylineno,loc:it,expected:gt})}if(lt[0]instanceof Array&&lt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ut+", token: "+at);switch(lt[0]){case 1:q.push(at),X.push(nt.yytext),W.push(nt.yylloc),q.push(lt[1]),at=null,ct?(at=ct,ct=null):(Q=nt.yyleng,H=nt.yytext,Z=nt.yylineno,it=nt.yylloc,tt>0&&tt--);break;case 2:if(ft=this.productions_[lt[1]][1],yt.$=X[X.length-ft],yt._$={first_line:W[W.length-(ft||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(ft||1)].first_column,last_column:W[W.length-1].last_column},st&&(yt._$.range=[W[W.length-(ft||1)].range[0],W[W.length-1].range[1]]),void 0!==(pt=this.performAction.apply(yt,[H,Q,Z,ot.yy,lt[1],X,W].concat(et))))return pt;ft&&(q=q.slice(0,-1*ft*2),X=X.slice(0,-1*ft),W=W.slice(0,-1*ft)),q.push(this.productions_[lt[1]][0]),X.push(yt.$),W.push(yt._$),dt=K[q[q.length-2]][q[q.length-1]],q.push(dt);break;case 3:return!0}}return!0}},nt={EOF:1,parseError:function(z,Y){if(!this.yy.parser)throw new Error(z);this.yy.parser.parseError(z,Y)},setInput:function(z,Y){return this.yy=Y||this.yy||{},this._input=z,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var z=this._input[0];return this.yytext+=z,this.yyleng++,this.offset++,this.match+=z,this.matched+=z,z.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),z},unput:function(z){var Y=z.length,q=z.split(/(?:\r\n?|\n)/g);this._input=z+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Y),this.offset-=Y;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),q.length-1&&(this.yylineno-=q.length-1);var W=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:q?(q.length===X.length?this.yylloc.first_column:0)+X[X.length-q.length].length-q[0].length:this.yylloc.first_column-Y},this.options.ranges&&(this.yylloc.range=[W[0],W[0]+this.yyleng-Y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(z){this.unput(this.match.slice(z))},pastInput:function(){var z=this.matched.substr(0,this.matched.length-this.match.length);return(z.length>20?"...":"")+z.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var z=this.match;return z.length<20&&(z+=this._input.substr(0,20-z.length)),(z.substr(0,20)+(z.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var z=this.pastInput(),Y=new Array(z.length+1).join("-");return z+this.upcomingInput()+"\n"+Y+"^"},test_match:function(z,Y){var q,X,W;if(this.options.backtrack_lexer&&(W={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(W.yylloc.range=this.yylloc.range.slice(0))),(X=z[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+z[0].length},this.yytext+=z[0],this.match+=z[0],this.matches=z,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(z[0].length),this.matched+=z[0],q=this.performAction.call(this,this.yy,this,Y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),q)return q;if(this._backtrack){for(var K in W)this[K]=W[K];return!1}return!1},next:function(){if(this.done)return this.EOF;var z,Y,q,X;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var W=this._currentRules(),K=0;K<W.length;K++)if((q=this._input.match(this.rules[W[K]]))&&(!Y||q[0].length>Y[0].length)){if(Y=q,X=K,this.options.backtrack_lexer){if(!1!==(z=this.test_match(q,W[K])))return z;if(this._backtrack){Y=!1;continue}return!1}if(!this.options.flex)break}return Y?!1!==(z=this.test_match(Y,W[X]))&&z:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(z){this.conditionStack.push(z)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(z){return(z=this.conditionStack.length-1-Math.abs(z||0))>=0?this.conditionStack[z]:"INITIAL"},pushState:function(z){this.begin(z)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(z,Y,q,X){switch(q){case 0:break;case 1:return 6;case 2:return Y.yytext=Y.yytext.substr(1,Y.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return et.lexer=nt,e.prototype=et,et.Parser=e,new e}();void 0!==z&&void 0!==q&&(q.parser=W,q.Parser=W.Parser,q.parse=function(){return W.parse.apply(W,arguments)},q.main=function(Y){Y[1]||(console.log("Usage: "+Y[0]+" FILE"),X.exit(1));var W=z("fs").readFileSync(z("path").normalize(Y[1]),"utf8");return q.parser.parse(W)},void 0!==Y&&z.main===Y&&q.main(X.argv.slice(1)))}).call(this,z("_process"))},{_process:18,fs:12,path:17}],16:[function(z,Y,X){(function(z){function o(z,Y){for(var q=-1,X=null==z?0:z.length,W=0,K=[];++q<X;){var H=z[q];Y(H,q,z)&&(K[W++]=H)}return K}function r(z,Y){for(var q=-1,X=Y.length,W=z.length;++q<X;)z[W+q]=Y[q];return z}function i(z,Y){for(var q=-1,X=null==z?0:z.length;++q<X;)if(Y(z[q],q,z))return!0;return!1}function s(z,Y){for(var q=-1,X=Array(z);++q<z;)X[q]=Y(q);return X}function a(z,Y){return z.has(Y)}function c(z,Y){return null==z?void 0:z[Y]}function u(z){var Y=-1,q=Array(z.size);return z.forEach((function(z,X){q[++Y]=[X,z]})),q}function l(z){var Y=-1,q=Array(z.size);return z.forEach((function(z){q[++Y]=z})),q}function p(z){var Y=-1,q=null==z?0:z.length;for(this.clear();++Y<q;){var X=z[Y];this.set(X[0],X[1])}}function f(z){var Y=-1,q=null==z?0:z.length;for(this.clear();++Y<q;){var X=z[Y];this.set(X[0],X[1])}}function h(z){var Y=-1,q=null==z?0:z.length;for(this.clear();++Y<q;){var X=z[Y];this.set(X[0],X[1])}}function d(z){var Y=-1,q=null==z?0:z.length;for(this.__data__=new h;++Y<q;)this.add(z[Y])}function g(z){var Y=this.__data__=new f(z);this.size=Y.size}function y(z,Y){var q=he(z),X=!q&&pe(z),W=!q&&!X&&fe(z),K=!q&&!X&&!W&&de(z),H=q||X||W||K,Z=H?s(z.length,String):[],Q=Z.length;for(var tt in z)!Y&&!Rt.call(z,tt)||H&&("length"==tt||W&&("offset"==tt||"parent"==tt)||K&&("buffer"==tt||"byteLength"==tt||"byteOffset"==tt)||A(tt,Q))||Z.push(tt);return Z}function m(z,Y){for(var q=z.length;q--;)if(D(z[q][0],Y))return q;return-1}function _(z,Y,q){var X=Y(z);return he(z)?X:r(X,q(z))}function v(z){return null==z?void 0===z?yt:ut:Yt&&Yt in Object(z)?N(z):k(z)}function b(z){return $(z)&&v(z)==Q}function E(z,Y,q,X,W){return z===Y||(null==z||null==Y||!$(z)&&!$(Y)?z!=z&&Y!=Y:T(z,Y,q,X,E,W))}function T(z,Y,q,X,W,H){var Z=he(z),et=he(Y),nt=Z?tt:le(z),ot=et?tt:le(Y),rt=(nt=nt==Q?lt:nt)==lt,it=(ot=ot==Q?lt:ot)==lt,st=nt==ot;if(st&&fe(z)){if(!fe(Y))return!1;Z=!0,rt=!1}if(st&&!rt)return H||(H=new g),Z||de(z)?O(z,Y,q,X,W,H):C(z,Y,nt,q,X,W,H);if(!(q&K)){var at=rt&&Rt.call(z,"__wrapped__"),ct=it&&Rt.call(Y,"__wrapped__");if(at||ct){var ut=at?z.value():z,pt=ct?Y.value():Y;return H||(H=new g),W(ut,pt,q,X,H)}}return!!st&&(H||(H=new g),I(z,Y,q,X,W,H))}function x(z){return!(!B(z)||F(z))&&(V(z)?Vt:bt).test(R(z))}function S(z){if(!j(z))return Wt(z);var Y=[];for(var q in Object(z))Rt.call(z,q)&&"constructor"!=q&&Y.push(q);return Y}function O(z,Y,q,X,W,Z){var Q=q&K,tt=z.length,et=Y.length;if(tt!=et&&!(Q&&et>tt))return!1;var nt=Z.get(z);if(nt&&Z.get(Y))return nt==Y;var ot=-1,rt=!0,it=q&H?new d:void 0;for(Z.set(z,Y),Z.set(Y,z);++ot<tt;){var st=z[ot],at=Y[ot];if(X)var ct=Q?X(at,st,ot,Y,z,Z):X(st,at,ot,z,Y,Z);if(void 0!==ct){if(ct)continue;rt=!1;break}if(it){if(!i(Y,(function(z,Y){if(!a(it,Y)&&(st===z||W(st,z,q,X,Z)))return it.push(Y)}))){rt=!1;break}}else if(st!==at&&!W(st,at,q,X,Z)){rt=!1;break}}return Z.delete(z),Z.delete(Y),rt}function C(z,Y,q,X,W,Z,Q){switch(q){case _t:if(z.byteLength!=Y.byteLength||z.byteOffset!=Y.byteOffset)return!1;z=z.buffer,Y=Y.buffer;case mt:return!(z.byteLength!=Y.byteLength||!Z(new $t(z),new $t(Y)));case nt:case ot:case ct:return D(+z,+Y);case rt:return z.name==Y.name&&z.message==Y.message;case ht:case dt:return z==Y+"";case at:var tt=u;case ft:var et=X&K;if(tt||(tt=l),z.size!=Y.size&&!et)return!1;var it=Q.get(z);if(it)return it==Y;X|=H,Q.set(z,Y);var st=O(tt(z),tt(Y),X,W,Z,Q);return Q.delete(z),st;case gt:if(ce)return ce.call(z)==ce.call(Y)}return!1}function I(z,Y,q,X,W,H){var Z=q&K,Q=L(z),tt=Q.length;if(tt!=L(Y).length&&!Z)return!1;for(var et=tt;et--;){var nt=Q[et];if(!(Z?nt in Y:Rt.call(Y,nt)))return!1}var ot=H.get(z);if(ot&&H.get(Y))return ot==Y;var rt=!0;H.set(z,Y),H.set(Y,z);for(var it=Z;++et<tt;){var st=z[nt=Q[et]],at=Y[nt];if(X)var ct=Z?X(at,st,nt,Y,z,H):X(st,at,nt,z,Y,H);if(!(void 0===ct?st===at||W(st,at,q,X,H):ct)){rt=!1;break}it||(it="constructor"==nt)}if(rt&&!it){var ut=z.constructor,lt=Y.constructor;ut!=lt&&"constructor"in z&&"constructor"in Y&&!("function"==typeof ut&&ut instanceof ut&&"function"==typeof lt&&lt instanceof lt)&&(rt=!1)}return H.delete(z),H.delete(Y),rt}function L(z){return _(z,J,ue)}function M(z,Y){var q=z.__data__;return P(Y)?q["string"==typeof Y?"string":"hash"]:q.map}function w(z,Y){var q=c(z,Y);return x(q)?q:void 0}function N(z){var Y=Rt.call(z,Yt),q=z[Yt];try{z[Yt]=void 0;var X=!0}catch(z){}var W=Ut.call(z);return X&&(Y?z[Yt]=q:delete z[Yt]),W}function A(z,Y){return!!(Y=null==Y?Z:Y)&&("number"==typeof z||Et.test(z))&&z>-1&&z%1==0&&z<Y}function P(z){var Y=typeof z;return"string"==Y||"number"==Y||"symbol"==Y||"boolean"==Y?"__proto__"!==z:null===z}function F(z){return!!Dt&&Dt in z}function j(z){var Y=z&&z.constructor;return z===("function"==typeof Y&&Y.prototype||Ft)}function k(z){return Ut.call(z)}function R(z){if(null!=z){try{return kt.call(z)}catch(z){}try{return z+""}catch(z){}}return""}function D(z,Y){return z===Y||z!=z&&Y!=Y}function U(z){return null!=z&&G(z.length)&&!V(z)}function V(z){if(!B(z))return!1;var Y=v(z);return Y==it||Y==st||Y==et||Y==pt}function G(z){return"number"==typeof z&&z>-1&&z%1==0&&z<=Z}function B(z){var Y=typeof z;return null!=z&&("object"==Y||"function"==Y)}function $(z){return null!=z&&"object"==typeof z}function J(z){return U(z)?y(z):S(z)}var q=200,W="__lodash_hash_undefined__",K=1,H=2,Z=9007199254740991,Q="[object Arguments]",tt="[object Array]",et="[object AsyncFunction]",nt="[object Boolean]",ot="[object Date]",rt="[object Error]",it="[object Function]",st="[object GeneratorFunction]",at="[object Map]",ct="[object Number]",ut="[object Null]",lt="[object Object]",pt="[object Proxy]",ht="[object RegExp]",ft="[object Set]",dt="[object String]",gt="[object Symbol]",yt="[object Undefined]",mt="[object ArrayBuffer]",_t="[object DataView]",vt=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Et=/^(?:0|[1-9]\d*)$/,Tt={};Tt["[object Float32Array]"]=Tt["[object Float64Array]"]=Tt["[object Int8Array]"]=Tt["[object Int16Array]"]=Tt["[object Int32Array]"]=Tt["[object Uint8Array]"]=Tt["[object Uint8ClampedArray]"]=Tt["[object Uint16Array]"]=Tt["[object Uint32Array]"]=!0,Tt[Q]=Tt[tt]=Tt[mt]=Tt[nt]=Tt[_t]=Tt[ot]=Tt[rt]=Tt[it]=Tt[at]=Tt[ct]=Tt[lt]=Tt[ht]=Tt[ft]=Tt[dt]=Tt["[object WeakMap]"]=!1;var xt="object"==typeof z&&z&&z.Object===Object&&z,St="object"==typeof self&&self&&self.Object===Object&&self,Ot=xt||St||Function("return this")(),Ct="object"==typeof X&&X&&!X.nodeType&&X,It=Ct&&"object"==typeof Y&&Y&&!Y.nodeType&&Y,Lt=It&&It.exports===Ct,Mt=Lt&&xt.process,wt=function(){try{return Mt&&Mt.binding&&Mt.binding("util")}catch(z){}}(),Nt=wt&&wt.isTypedArray,At=Array.prototype,Pt=Function.prototype,Ft=Object.prototype,jt=Ot["__core-js_shared__"],kt=Pt.toString,Rt=Ft.hasOwnProperty,Dt=function(){var z=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),Ut=Ft.toString,Vt=RegExp("^"+kt.call(Rt).replace(vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=Lt?Ot.Buffer:void 0,Bt=Ot.Symbol,$t=Ot.Uint8Array,Jt=Ft.propertyIsEnumerable,zt=At.splice,Yt=Bt?Bt.toStringTag:void 0,qt=Object.getOwnPropertySymbols,Xt=Gt?Gt.isBuffer:void 0,Wt=function(z,Y){return function(q){return z(Y(q))}}(Object.keys,Object),Kt=w(Ot,"DataView"),Ht=w(Ot,"Map"),Zt=w(Ot,"Promise"),Qt=w(Ot,"Set"),te=w(Ot,"WeakMap"),ee=w(Object,"create"),ne=R(Kt),oe=R(Ht),re=R(Zt),ie=R(Qt),se=R(te),ae=Bt?Bt.prototype:void 0,ce=ae?ae.valueOf:void 0;p.prototype.clear=function(){this.__data__=ee?ee(null):{},this.size=0},p.prototype.delete=function(z){var Y=this.has(z)&&delete this.__data__[z];return this.size-=Y?1:0,Y},p.prototype.get=function(z){var Y=this.__data__;if(ee){var q=Y[z];return q===W?void 0:q}return Rt.call(Y,z)?Y[z]:void 0},p.prototype.has=function(z){var Y=this.__data__;return ee?void 0!==Y[z]:Rt.call(Y,z)},p.prototype.set=function(z,Y){var q=this.__data__;return this.size+=this.has(z)?0:1,q[z]=ee&&void 0===Y?W:Y,this},f.prototype.clear=function(){this.__data__=[],this.size=0},f.prototype.delete=function(z){var Y=this.__data__,q=m(Y,z);return!(q<0||(q==Y.length-1?Y.pop():zt.call(Y,q,1),--this.size,0))},f.prototype.get=function(z){var Y=this.__data__,q=m(Y,z);return q<0?void 0:Y[q][1]},f.prototype.has=function(z){return m(this.__data__,z)>-1},f.prototype.set=function(z,Y){var q=this.__data__,X=m(q,z);return X<0?(++this.size,q.push([z,Y])):q[X][1]=Y,this},h.prototype.clear=function(){this.size=0,this.__data__={hash:new p,map:new(Ht||f),string:new p}},h.prototype.delete=function(z){var Y=M(this,z).delete(z);return this.size-=Y?1:0,Y},h.prototype.get=function(z){return M(this,z).get(z)},h.prototype.has=function(z){return M(this,z).has(z)},h.prototype.set=function(z,Y){var q=M(this,z),X=q.size;return q.set(z,Y),this.size+=q.size==X?0:1,this},d.prototype.add=d.prototype.push=function(z){return this.__data__.set(z,W),this},d.prototype.has=function(z){return this.__data__.has(z)},g.prototype.clear=function(){this.__data__=new f,this.size=0},g.prototype.delete=function(z){var Y=this.__data__,q=Y.delete(z);return this.size=Y.size,q},g.prototype.get=function(z){return this.__data__.get(z)},g.prototype.has=function(z){return this.__data__.has(z)},g.prototype.set=function(z,Y){var X=this.__data__;if(X instanceof f){var W=X.__data__;if(!Ht||W.length<q-1)return W.push([z,Y]),this.size=++X.size,this;X=this.__data__=new h(W)}return X.set(z,Y),this.size=X.size,this};var ue=qt?function(z){return null==z?[]:(z=Object(z),o(qt(z),(function(Y){return Jt.call(z,Y)})))}:function(){return[]},le=v;(Kt&&le(new Kt(new ArrayBuffer(1)))!=_t||Ht&&le(new Ht)!=at||Zt&&"[object Promise]"!=le(Zt.resolve())||Qt&&le(new Qt)!=ft||te&&"[object WeakMap]"!=le(new te))&&(le=function(z){var Y=v(z),q=Y==lt?z.constructor:void 0,X=q?R(q):"";if(X)switch(X){case ne:return _t;case oe:return at;case re:return"[object Promise]";case ie:return ft;case se:return"[object WeakMap]"}return Y});var pe=b(function(){return arguments}())?b:function(z){return $(z)&&Rt.call(z,"callee")&&!Jt.call(z,"callee")},he=Array.isArray,fe=Xt||function(){return!1},de=Nt?function(z){return function(Y){return z(Y)}}(Nt):function(z){return $(z)&&G(z.length)&&!!Tt[v(z)]};Y.exports=function(z,Y){return E(z,Y)}}).call(this,void 0!==q.g?q.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(z,Y,q){(function(z){function t(z,Y){for(var q=0,X=z.length-1;X>=0;X--){var W=z[X];"."===W?z.splice(X,1):".."===W?(z.splice(X,1),q++):q&&(z.splice(X,1),q--)}if(Y)for(;q--;q)z.unshift("..");return z}function o(z,Y){if(z.filter)return z.filter(Y);for(var q=[],X=0;X<z.length;X++)Y(z[X],X,z)&&q.push(z[X]);return q}var Y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(z){return Y.exec(z).slice(1)};q.resolve=function(){for(var Y="",q=!1,X=arguments.length-1;X>=-1&&!q;X--){var W=X>=0?arguments[X]:z.cwd();if("string"!=typeof W)throw new TypeError("Arguments to path.resolve must be strings");W&&(Y=W+"/"+Y,q="/"===W.charAt(0))}return Y=t(o(Y.split("/"),(function(z){return!!z})),!q).join("/"),(q?"/":"")+Y||"."},q.normalize=function(z){var Y=q.isAbsolute(z),X="/"===s(z,-1);return(z=t(o(z.split("/"),(function(z){return!!z})),!Y).join("/"))||Y||(z="."),z&&X&&(z+="/"),(Y?"/":"")+z},q.isAbsolute=function(z){return"/"===z.charAt(0)},q.join=function(){var z=Array.prototype.slice.call(arguments,0);return q.normalize(o(z,(function(z,Y){if("string"!=typeof z)throw new TypeError("Arguments to path.join must be strings");return z})).join("/"))},q.relative=function(z,Y){function o(z){for(var Y=0;Y<z.length&&""===z[Y];Y++);for(var q=z.length-1;q>=0&&""===z[q];q--);return Y>q?[]:z.slice(Y,q-Y+1)}z=q.resolve(z).substr(1),Y=q.resolve(Y).substr(1);for(var X=o(z.split("/")),W=o(Y.split("/")),K=Math.min(X.length,W.length),H=K,Z=0;Z<K;Z++)if(X[Z]!==W[Z]){H=Z;break}var Q=[];for(Z=H;Z<X.length;Z++)Q.push("..");return(Q=Q.concat(W.slice(H))).join("/")},q.sep="/",q.delimiter=":",q.dirname=function(z){var Y=i(z),q=Y[0],X=Y[1];return q||X?(X&&(X=X.substr(0,X.length-1)),q+X):"."},q.basename=function(z,Y){var q=i(z)[2];return Y&&q.substr(-1*Y.length)===Y&&(q=q.substr(0,q.length-Y.length)),q},q.extname=function(z){return i(z)[3]};var s=function(z,Y,q){return z.substr(Y,q)}}).call(this,z("_process"))},{_process:18}],18:[function(z,Y,q){function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(z){if(X===setTimeout)return setTimeout(z,0);if((X===o||!X)&&setTimeout)return X=setTimeout,setTimeout(z,0);try{return X(z,0)}catch(Y){try{return X.call(null,z,0)}catch(Y){return X.call(this,z,0)}}}function s(z){if(W===clearTimeout)return clearTimeout(z);if((W===r||!W)&&clearTimeout)return W=clearTimeout,clearTimeout(z);try{return W(z)}catch(Y){try{return W.call(null,z)}catch(Y){return W.call(this,z)}}}function a(){Q&&H&&(Q=!1,H.length?Z=H.concat(Z):tt=-1,Z.length&&c())}function c(){if(!Q){var z=i(a);Q=!0;for(var Y=Z.length;Y;){for(H=Z,Z=[];++tt<Y;)H&&H[tt].run();tt=-1,Y=Z.length}H=null,Q=!1,s(z)}}function u(z,Y){this.fun=z,this.array=Y}function l(){}var X,W,K=Y.exports={};!function(){try{X="function"==typeof setTimeout?setTimeout:o}catch(z){X=o}try{W="function"==typeof clearTimeout?clearTimeout:r}catch(z){W=r}}();var H,Z=[],Q=!1,tt=-1;K.nextTick=function(z){var Y=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)Y[q-1]=arguments[q];Z.push(new u(z,Y)),1!==Z.length||Q||i(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},K.title="browser",K.browser=!0,K.env={},K.argv=[],K.version="",K.versions={},K.on=l,K.addListener=l,K.once=l,K.off=l,K.removeListener=l,K.removeAllListeners=l,K.emit=l,K.prependListener=l,K.prependOnceListener=l,K.listeners=function(z){return[]},K.binding=function(z){throw new Error("process.binding is not supported")},K.cwd=function(){return"/"},K.chdir=function(z){throw new Error("process.chdir is not supported")},K.umask=function(){return 0}},{}],19:[function(z,Y,q){function o(z){this.value=z}function r(z,Y,q){var X=[],Z=[],Q=!0;return function e(z){function c(){if("object"==typeof nt.node&&null!==nt.node){nt.keys&&nt.node_===nt.node||(nt.keys=W(nt.node)),nt.isLeaf=0==nt.keys.length;for(var Y=0;Y<Z.length;Y++)if(Z[Y].node_===z){nt.circular=Z[Y];break}}else nt.isLeaf=!0,nt.keys=null;nt.notLeaf=!nt.isLeaf,nt.notRoot=!nt.isRoot}var tt={},et=!0,nt={node:q?i(z):z,node_:z,path:[].concat(X),parent:Z[Z.length-1],parents:Z,key:X.slice(-1)[0],isRoot:0===X.length,level:X.length,circular:null,update:function(z,Y){nt.isRoot||(nt.parent.node[nt.key]=z),nt.node=z,Y&&(et=!1)},delete:function(z){delete nt.parent.node[nt.key],z&&(et=!1)},remove:function(z){K(nt.parent.node)?nt.parent.node.splice(nt.key,1):delete nt.parent.node[nt.key],z&&(et=!1)},keys:null,before:function(z){tt.before=z},after:function(z){tt.after=z},pre:function(z){tt.pre=z},post:function(z){tt.post=z},stop:function(){Q=!1},block:function(){et=!1}};if(!Q)return nt;c();var ot=Y.call(nt,nt.node);return void 0!==ot&&nt.update&&nt.update(ot),tt.before&&tt.before.call(nt,nt.node),et?("object"!=typeof nt.node||null===nt.node||nt.circular||(Z.push(nt),c(),y(nt.keys,(function(z,Y){X.push(z),tt.pre&&tt.pre.call(nt,nt.node[z],z);var W=e(nt.node[z]);q&&H.call(nt.node,z)&&(nt.node[z]=W.node),W.isLast=Y==nt.keys.length-1,W.isFirst=0==Y,tt.post&&tt.post.call(nt,W),X.pop()})),Z.pop()),tt.after&&tt.after.call(nt,nt.node),nt):nt}(z).node}function i(z){if("object"==typeof z&&null!==z){var Y;if(K(z))Y=[];else if(a(z))Y=new Date(z.getTime?z.getTime():z);else if(c(z))Y=new RegExp(z);else if(u(z))Y={message:z.message};else if(l(z))Y=new Boolean(z);else if(p(z))Y=new Number(z);else if(f(z))Y=new String(z);else if(Object.create&&Object.getPrototypeOf)Y=Object.create(Object.getPrototypeOf(z));else if(z.constructor===Object)Y={};else{var q=z.constructor&&z.constructor.prototype||z.__proto__||{},o=function(){};o.prototype=q,Y=new o}return y(W(z),(function(q){Y[q]=z[q]})),Y}return z}function s(z){return Object.prototype.toString.call(z)}function a(z){return"[object Date]"===s(z)}function c(z){return"[object RegExp]"===s(z)}function u(z){return"[object Error]"===s(z)}function l(z){return"[object Boolean]"===s(z)}function p(z){return"[object Number]"===s(z)}function f(z){return"[object String]"===s(z)}var X=Y.exports=function(z){return new o(z)};o.prototype.get=function(z){for(var Y=this.value,q=0;q<z.length;q++){var X=z[q];if(!Y||!H.call(Y,X)){Y=void 0;break}Y=Y[X]}return Y},o.prototype.has=function(z){for(var Y=this.value,q=0;q<z.length;q++){var X=z[q];if(!Y||!H.call(Y,X))return!1;Y=Y[X]}return!0},o.prototype.set=function(z,Y){for(var q=this.value,X=0;X<z.length-1;X++){var W=z[X];H.call(q,W)||(q[W]={}),q=q[W]}return q[z[X]]=Y,Y},o.prototype.map=function(z){return r(this.value,z,!0)},o.prototype.forEach=function(z){return this.value=r(this.value,z,!1),this.value},o.prototype.reduce=function(z,Y){var q=1===arguments.length,X=q?this.value:Y;return this.forEach((function(Y){this.isRoot&&q||(X=z.call(this,X,Y))})),X},o.prototype.paths=function(){var z=[];return this.forEach((function(Y){z.push(this.path)})),z},o.prototype.nodes=function(){var z=[];return this.forEach((function(Y){z.push(this.node)})),z},o.prototype.clone=function(){var z=[],Y=[];return function n(q){for(var X=0;X<z.length;X++)if(z[X]===q)return Y[X];if("object"==typeof q&&null!==q){var K=i(q);return z.push(q),Y.push(K),y(W(q),(function(z){K[z]=n(q[z])})),z.pop(),Y.pop(),K}return q}(this.value)};var W=Object.keys||function(z){var Y=[];for(var q in z)Y.push(q);return Y},K=Array.isArray||function(z){return"[object Array]"===Object.prototype.toString.call(z)},y=function(z,Y){if(z.forEach)return z.forEach(Y);for(var q=0;q<z.length;q++)Y(z[q],q,z)};y(W(o.prototype),(function(z){X[z]=function(Y){var q=[].slice.call(arguments,1),X=new o(Y);return X[z].apply(X,q)}}));var H=Object.hasOwnProperty||function(z,Y){return Y in z}},{}],20:[function(z,Y,q){Y.exports.RADIUS=6378137,Y.exports.FLATTENING=1/298.257223563,Y.exports.POLAR_RADIUS=6356752.3142},{}],21:[function(z,Y,q){Y.exports=function(){for(var z={},Y=0;Y<arguments.length;Y++){var q=arguments[Y];for(var W in q)X.call(q,W)&&(z[W]=q[W])}return z};var X=Object.prototype.hasOwnProperty},{}],22:[function(z,Y,q){"use strict";var X=z("lodash.isequal"),W=z("@mapbox/geojson-normalize"),K=z("hat"),H=z("./lib/features_at"),Z=z("./lib/string_sets_are_equal"),Q=z("@mapbox/geojsonhint"),tt=z("./constants"),et=z("./lib/string_set"),nt={Polygon:z("./feature_types/polygon"),LineString:z("./feature_types/line_string"),Point:z("./feature_types/point"),MultiPolygon:z("./feature_types/multi_feature"),MultiLineString:z("./feature_types/multi_feature"),MultiPoint:z("./feature_types/multi_feature")};Y.exports=function(z,Y){return Y.modes=tt.modes,Y.getFeatureIdsAt=function(Y){return H.click({point:Y},null,z).map((function(z){return z.properties.id}))},Y.getSelectedIds=function(){return z.store.getSelectedIds()},Y.getSelected=function(){return{type:tt.geojsonTypes.FEATURE_COLLECTION,features:z.store.getSelectedIds().map((function(Y){return z.store.get(Y)})).map((function(z){return z.toGeoJSON()}))}},Y.getSelectedPoints=function(){return{type:tt.geojsonTypes.FEATURE_COLLECTION,features:z.store.getSelectedCoordinates().map((function(z){return{type:tt.geojsonTypes.FEATURE,properties:{},geometry:{type:tt.geojsonTypes.POINT,coordinates:z.coordinates}}}))}},Y.set=function(q){if(void 0===q.type||q.type!==tt.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(q.features))throw new Error("Invalid FeatureCollection");var X=z.store.createRenderBatch(),W=z.store.getAllIds().slice(),K=Y.add(q),H=new et(K);return(W=W.filter((function(z){return!H.has(z)}))).length&&Y.delete(W),X(),K},Y.add=function(Y){var q=Q.hint(Y,{precisionWarning:!1}).filter((function(z){return"message"!==z.level}));if(q.length)throw new Error(q[0].message);var H=JSON.parse(JSON.stringify(W(Y))).features.map((function(Y){if(Y.id=Y.id||K(),null===Y.geometry)throw new Error("Invalid geometry: null");if(void 0===z.store.get(Y.id)||z.store.get(Y.id).type!==Y.geometry.type){var q=nt[Y.geometry.type];if(void 0===q)throw new Error("Invalid geometry type: ".concat(Y.geometry.type,"."));var W=new q(z,Y);z.store.add(W)}else{var H=z.store.get(Y.id);H.properties=Y.properties,X(H.getCoordinates(),Y.geometry.coordinates)||H.incomingCoords(Y.geometry.coordinates)}return Y.id}));return z.store.render(),H},Y.get=function(Y){var q=z.store.get(Y);if(q)return q.toGeoJSON()},Y.getAll=function(){return{type:tt.geojsonTypes.FEATURE_COLLECTION,features:z.store.getAll().map((function(z){return z.toGeoJSON()}))}},Y.delete=function(q){return z.store.delete(q,{silent:!0}),Y.getMode()!==tt.modes.DIRECT_SELECT||z.store.getSelectedIds().length?z.store.render():z.events.changeMode(tt.modes.SIMPLE_SELECT,void 0,{silent:!0}),Y},Y.deleteAll=function(){return z.store.delete(z.store.getAllIds(),{silent:!0}),Y.getMode()===tt.modes.DIRECT_SELECT?z.events.changeMode(tt.modes.SIMPLE_SELECT,void 0,{silent:!0}):z.store.render(),Y},Y.changeMode=function(q){var X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q===tt.modes.SIMPLE_SELECT&&Y.getMode()===tt.modes.SIMPLE_SELECT?(Z(X.featureIds||[],z.store.getSelectedIds())||(z.store.setSelected(X.featureIds,{silent:!0}),z.store.render()),Y):(q===tt.modes.DIRECT_SELECT&&Y.getMode()===tt.modes.DIRECT_SELECT&&X.featureId===z.store.getSelectedIds()[0]||z.events.changeMode(q,X,{silent:!0}),Y)},Y.getMode=function(){return z.events.getMode()},Y.trash=function(){return z.events.trash({silent:!0}),Y},Y.combineFeatures=function(){return z.events.combineFeatures({silent:!0}),Y},Y.uncombineFeatures=function(){return z.events.uncombineFeatures({silent:!0}),Y},Y.setFeatureProperty=function(q,X,W){return z.store.setFeatureProperty(q,X,W),Y},Y}},{"./constants":23,"./feature_types/line_string":26,"./feature_types/multi_feature":27,"./feature_types/point":28,"./feature_types/polygon":29,"./lib/features_at":37,"./lib/string_set":47,"./lib/string_sets_are_equal":48,"@mapbox/geojson-normalize":7,"@mapbox/geojsonhint":8,hat:14,"lodash.isequal":16}],23:[function(z,Y,q){"use strict";Y.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},{}],24:[function(z,Y,q){"use strict";var X=z("./lib/mode_handler"),W=z("./lib/get_features_and_set_cursor"),K=z("./lib/features_at"),H=z("./lib/is_click"),Z=z("./lib/is_tap"),Q=z("./constants"),tt=z("./modes/object_to_mode");Y.exports=function(z){function t(q,W){var K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rt.stop();var H=Y[q];if(void 0===H)throw new Error("".concat(q," is not valid"));ot=q;var Z=H(z,W);rt=X(Z,z),K.silent||z.map.fire(Q.events.MODE_CHANGE,{mode:q}),z.store.setDirty(),z.store.render()}var Y=Object.keys(z.options.modes).reduce((function(Y,q){return Y[q]=tt(z.options.modes[q]),Y}),{}),q={},et={},nt={},ot=null,rt=null;nt.drag=function(Y,q){q({point:Y.point,time:(new Date).getTime()})?(z.ui.queueMapClasses({mouse:Q.cursors.DRAG}),rt.drag(Y)):Y.originalEvent.stopPropagation()},nt.mousedrag=function(z){nt.drag(z,(function(z){return!H(q,z)}))},nt.touchdrag=function(z){nt.drag(z,(function(z){return!Z(et,z)}))},nt.mousemove=function(Y){if(1===(void 0!==Y.originalEvent.buttons?Y.originalEvent.buttons:Y.originalEvent.which))return nt.mousedrag(Y);var q=W(Y,z);Y.featureTarget=q,rt.mousemove(Y)},nt.mousedown=function(Y){q={time:(new Date).getTime(),point:Y.point};var X=W(Y,z);Y.featureTarget=X,rt.mousedown(Y)},nt.mouseup=function(Y){var X=W(Y,z);Y.featureTarget=X,H(q,{point:Y.point,time:(new Date).getTime()})?rt.click(Y):rt.mouseup(Y)},nt.mouseout=function(z){rt.mouseout(z)},nt.touchstart=function(Y){if(Y.originalEvent.preventDefault(),z.options.touchEnabled){et={time:(new Date).getTime(),point:Y.point};var q=K.touch(Y,null,z)[0];Y.featureTarget=q,rt.touchstart(Y)}},nt.touchmove=function(Y){if(Y.originalEvent.preventDefault(),z.options.touchEnabled)return rt.touchmove(Y),nt.touchdrag(Y)},nt.touchend=function(Y){if(Y.originalEvent.preventDefault(),z.options.touchEnabled){var q=K.touch(Y,null,z)[0];Y.featureTarget=q,Z(et,{time:(new Date).getTime(),point:Y.point})?rt.tap(Y):rt.touchend(Y)}};var g=function(z){return!(8===z||46===z||z>=48&&z<=57)};nt.keydown=function(Y){"mapboxgl-canvas"===(Y.srcElement||Y.target).classList[0]&&(8!==Y.keyCode&&46!==Y.keyCode||!z.options.controls.trash?g(Y.keyCode)?rt.keydown(Y):49===Y.keyCode&&z.options.controls.point?t(Q.modes.DRAW_POINT):50===Y.keyCode&&z.options.controls.line_string?t(Q.modes.DRAW_LINE_STRING):51===Y.keyCode&&z.options.controls.polygon&&t(Q.modes.DRAW_POLYGON):(Y.preventDefault(),rt.trash()))},nt.keyup=function(z){g(z.keyCode)&&rt.keyup(z)},nt.zoomend=function(){z.store.changeZoom()},nt.data=function(Y){if("style"===Y.dataType){var q=z.setup,X=z.map,W=z.options,K=z.store;W.styles.some((function(z){return X.getLayer(z.id)}))||(q.addLayers(),K.setDirty(),K.render())}};var it={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){ot=z.options.defaultMode,rt=X(Y[ot](z),z)},changeMode:t,actionable:function(Y){var q=!1;Object.keys(Y).forEach((function(z){if(void 0===it[z])throw new Error("Invalid action type");it[z]!==Y[z]&&(q=!0),it[z]=Y[z]})),q&&z.map.fire(Q.events.ACTIONABLE,{actions:it})},currentModeName:function(){return ot},currentModeRender:function(z,Y){return rt.render(z,Y)},fire:function(z,Y){nt[z]&&nt[z](Y)},addEventListeners:function(){z.map.on("mousemove",nt.mousemove),z.map.on("mousedown",nt.mousedown),z.map.on("mouseup",nt.mouseup),z.map.on("data",nt.data),z.map.on("touchmove",nt.touchmove),z.map.on("touchstart",nt.touchstart),z.map.on("touchend",nt.touchend),z.container.addEventListener("mouseout",nt.mouseout),z.options.keybindings&&(z.container.addEventListener("keydown",nt.keydown),z.container.addEventListener("keyup",nt.keyup))},removeEventListeners:function(){z.map.off("mousemove",nt.mousemove),z.map.off("mousedown",nt.mousedown),z.map.off("mouseup",nt.mouseup),z.map.off("data",nt.data),z.map.off("touchmove",nt.touchmove),z.map.off("touchstart",nt.touchstart),z.map.off("touchend",nt.touchend),z.container.removeEventListener("mouseout",nt.mouseout),z.options.keybindings&&(z.container.removeEventListener("keydown",nt.keydown),z.container.removeEventListener("keyup",nt.keyup))},trash:function(z){rt.trash(z)},combineFeatures:function(){rt.combineFeatures()},uncombineFeatures:function(){rt.uncombineFeatures()},getMode:function(){return ot}}}},{"./constants":23,"./lib/features_at":37,"./lib/get_features_and_set_cursor":38,"./lib/is_click":39,"./lib/is_tap":41,"./lib/mode_handler":43,"./modes/object_to_mode":59}],25:[function(z,Y,q){"use strict";var X=z("hat"),W=z("../constants"),i=function(z,Y){this.ctx=z,this.properties=Y.properties||{},this.coordinates=Y.geometry.coordinates,this.id=Y.id||X(),this.type=Y.geometry.type};i.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},i.prototype.incomingCoords=function(z){this.setCoordinates(z)},i.prototype.setCoordinates=function(z){this.coordinates=z,this.changed()},i.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},i.prototype.setProperty=function(z,Y){this.properties[z]=Y},i.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:W.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},i.prototype.internal=function(z){var Y={id:this.id,meta:W.meta.FEATURE,"meta:type":this.type,active:W.activeStates.INACTIVE,mode:z};if(this.ctx.options.userProperties)for(var q in this.properties)Y["user_".concat(q)]=this.properties[q];return{type:W.geojsonTypes.FEATURE,properties:Y,geometry:{coordinates:this.getCoordinates(),type:this.type}}},Y.exports=i},{"../constants":23,hat:14}],26:[function(z,Y,q){"use strict";var X=z("./feature"),r=function(z,Y){X.call(this,z,Y)};(r.prototype=Object.create(X.prototype)).isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(z,Y,q){this.changed();var X=parseInt(z,10);this.coordinates.splice(X,0,[Y,q])},r.prototype.getCoordinate=function(z){var Y=parseInt(z,10);return JSON.parse(JSON.stringify(this.coordinates[Y]))},r.prototype.removeCoordinate=function(z){this.changed(),this.coordinates.splice(parseInt(z,10),1)},r.prototype.updateCoordinate=function(z,Y,q){var X=parseInt(z,10);this.coordinates[X]=[Y,q],this.changed()},Y.exports=r},{"./feature":25}],27:[function(z,Y,q){"use strict";var X=z("./feature"),W=z("../constants"),K=z("hat"),H={MultiPoint:z("./point"),MultiLineString:z("./line_string"),MultiPolygon:z("./polygon")},a=function(z,Y,q,X,W){var K=q.split("."),H=parseInt(K[0],10),Z=K[1]?K.slice(1).join("."):null;return z[H][Y](Z,X,W)},c=function(z,Y){if(X.call(this,z,Y),delete this.coordinates,this.model=H[Y.geometry.type],void 0===this.model)throw new TypeError("".concat(Y.geometry.type," is not a valid type"));this.features=this._coordinatesToFeatures(Y.geometry.coordinates)};(c.prototype=Object.create(X.prototype))._coordinatesToFeatures=function(z){var Y=this,q=this.model.bind(this);return z.map((function(z){return new q(Y.ctx,{id:K(),type:W.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:z,type:Y.type.replace("Multi","")}})}))},c.prototype.isValid=function(){return this.features.every((function(z){return z.isValid()}))},c.prototype.setCoordinates=function(z){this.features=this._coordinatesToFeatures(z),this.changed()},c.prototype.getCoordinate=function(z){return a(this.features,"getCoordinate",z)},c.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(z){return z.type===W.geojsonTypes.POLYGON?z.getCoordinates():z.coordinates}))))},c.prototype.updateCoordinate=function(z,Y,q){a(this.features,"updateCoordinate",z,Y,q),this.changed()},c.prototype.addCoordinate=function(z,Y,q){a(this.features,"addCoordinate",z,Y,q),this.changed()},c.prototype.removeCoordinate=function(z){a(this.features,"removeCoordinate",z),this.changed()},c.prototype.getFeatures=function(){return this.features},Y.exports=c},{"../constants":23,"./feature":25,"./line_string":26,"./point":28,"./polygon":29,hat:14}],28:[function(z,Y,q){"use strict";var X=z("./feature"),r=function(z,Y){X.call(this,z,Y)};(r.prototype=Object.create(X.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},r.prototype.updateCoordinate=function(z,Y,q){this.coordinates=3===arguments.length?[Y,q]:[z,Y],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},Y.exports=r},{"./feature":25}],29:[function(z,Y,q){"use strict";var X=z("./feature"),r=function(z,Y){X.call(this,z,Y),this.coordinates=this.coordinates.map((function(z){return z.slice(0,-1)}))};(r.prototype=Object.create(X.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(z){return z.length>2}))},r.prototype.incomingCoords=function(z){this.coordinates=z.map((function(z){return z.slice(0,-1)})),this.changed()},r.prototype.setCoordinates=function(z){this.coordinates=z,this.changed()},r.prototype.addCoordinate=function(z,Y,q){this.changed();var X=z.split(".").map((function(z){return parseInt(z,10)}));this.coordinates[X[0]].splice(X[1],0,[Y,q])},r.prototype.removeCoordinate=function(z){this.changed();var Y=z.split(".").map((function(z){return parseInt(z,10)})),q=this.coordinates[Y[0]];q&&(q.splice(Y[1],1),q.length<3&&this.coordinates.splice(Y[0],1))},r.prototype.getCoordinate=function(z){var Y=z.split(".").map((function(z){return parseInt(z,10)})),q=this.coordinates[Y[0]];return JSON.parse(JSON.stringify(q[Y[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map((function(z){return z.concat([z[0]])}))},r.prototype.updateCoordinate=function(z,Y,q){this.changed();var X=z.split("."),W=parseInt(X[0],10),K=parseInt(X[1],10);void 0===this.coordinates[W]&&(this.coordinates[W]=[]),this.coordinates[W][K]=[Y,q]},Y.exports=r},{"./feature":25}],30:[function(z,Y,q){"use strict";var X=z("../constants");Y.exports={isOfMetaType:function(z){return function(Y){var q=Y.featureTarget;return!!q&&!!q.properties&&q.properties.meta===z}},isShiftMousedown:function(z){return!!z.originalEvent&&!!z.originalEvent.shiftKey&&0===z.originalEvent.button},isActiveFeature:function(z){return!!z.featureTarget&&!!z.featureTarget.properties&&z.featureTarget.properties.active===X.activeStates.ACTIVE&&z.featureTarget.properties.meta===X.meta.FEATURE},isInactiveFeature:function(z){return!!z.featureTarget&&!!z.featureTarget.properties&&z.featureTarget.properties.active===X.activeStates.INACTIVE&&z.featureTarget.properties.meta===X.meta.FEATURE},noTarget:function(z){return void 0===z.featureTarget},isFeature:function(z){return!!z.featureTarget&&!!z.featureTarget.properties&&z.featureTarget.properties.meta===X.meta.FEATURE},isVertex:function(z){var Y=z.featureTarget;return!!Y&&!!Y.properties&&Y.properties.meta===X.meta.VERTEX},isShiftDown:function(z){return!!z.originalEvent&&!0===z.originalEvent.shiftKey},isEscapeKey:function(z){return 27===z.keyCode},isEnterKey:function(z){return 13===z.keyCode},true:function(){return!0}}},{"../constants":23}],31:[function(z,Y,q){"use strict";var X=z("@mapbox/geojson-extent"),W=z("../constants"),K=W.LAT_MIN,H=W.LAT_MAX,Z=W.LAT_RENDERED_MIN,Q=W.LAT_RENDERED_MAX,tt=W.LNG_MIN,et=W.LNG_MAX;Y.exports=function(z,Y){var q=K,W=H,nt=K,ot=H,rt=et,it=tt;z.forEach((function(z){var Y=X(z),K=Y[1],H=Y[3],Z=Y[0],Q=Y[2];K>q&&(q=K),H<W&&(W=H),H>nt&&(nt=H),K<ot&&(ot=K),Z<rt&&(rt=Z),Q>it&&(it=Q)}));var st=Y;return q+st.lat>Q&&(st.lat=Q-q),nt+st.lat>H&&(st.lat=H-nt),W+st.lat<Z&&(st.lat=Z-W),ot+st.lat<K&&(st.lat=K-ot),rt+st.lng<=tt&&(st.lng+=360*Math.ceil(Math.abs(st.lng)/360)),it+st.lng>=et&&(st.lng-=360*Math.ceil(Math.abs(st.lng)/360)),st}},{"../constants":23,"@mapbox/geojson-extent":6}],32:[function(z,Y,q){"use strict";var X=z("../constants");Y.exports=function(z,Y,q,W){var K=Y.geometry.coordinates,H=q.geometry.coordinates;if(K[1]>X.LAT_RENDERED_MAX||K[1]<X.LAT_RENDERED_MIN||H[1]>X.LAT_RENDERED_MAX||H[1]<X.LAT_RENDERED_MIN)return null;var Z=W.project([K[0],K[1]]),Q=W.project([H[0],H[1]]),tt=W.unproject([(Z.x+Q.x)/2,(Z.y+Q.y)/2]);return{type:X.geojsonTypes.FEATURE,properties:{meta:X.meta.MIDPOINT,parent:z,lng:tt.lng,lat:tt.lat,coord_path:q.properties.coord_path},geometry:{type:X.geojsonTypes.POINT,coordinates:[tt.lng,tt.lat]}}}},{"../constants":23}],33:[function(z,Y,q){"use strict";function o(z){function t(z,q){var K="",H=null;z.forEach((function(z,Z){var Q=null!=q?"".concat(q,".").concat(Z):String(Z),nt=X(tt,z,Q,n(Q));if(Y.midpoints&&H){var ot=W(tt,H,nt,Y.map);ot&&et.push(ot)}H=nt;var rt=JSON.stringify(z);K!==rt&&et.push(nt),0===Z&&(K=rt)}))}function n(z){return!!Y.selectedPaths&&-1!==Y.selectedPaths.indexOf(z)}var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,H=z.geometry,Z=H.type,Q=H.coordinates,tt=z.properties&&z.properties.id,et=[];return Z===K.geojsonTypes.POINT?et.push(X(tt,Q,q,n(q))):Z===K.geojsonTypes.POLYGON?Q.forEach((function(z,Y){t(z,null!==q?"".concat(q,".").concat(Y):String(Y))})):Z===K.geojsonTypes.LINE_STRING?t(Q,q):0===Z.indexOf(K.geojsonTypes.MULTI_PREFIX)&&function(){var q=Z.replace(K.geojsonTypes.MULTI_PREFIX,"");Q.forEach((function(X,W){var H={type:K.geojsonTypes.FEATURE,properties:z.properties,geometry:{type:q,coordinates:X}};et=et.concat(o(H,Y,W))}))}(),et}var X=z("./create_vertex"),W=z("./create_midpoint"),K=z("../constants");Y.exports=o},{"../constants":23,"./create_midpoint":32,"./create_vertex":34}],34:[function(z,Y,q){"use strict";var X=z("../constants");Y.exports=function(z,Y,q,W){return{type:X.geojsonTypes.FEATURE,properties:{meta:X.meta.VERTEX,parent:z,coord_path:q,active:W?X.activeStates.ACTIVE:X.activeStates.INACTIVE},geometry:{type:X.geojsonTypes.POINT,coordinates:Y}}}},{"../constants":23}],35:[function(z,Y,q){"use strict";Y.exports={enable:function(z){setTimeout((function(){z.map&&z.map.doubleClickZoom&&z._ctx&&z._ctx.store&&z._ctx.store.getInitialConfigValue&&z._ctx.store.getInitialConfigValue("doubleClickZoom")&&z.map.doubleClickZoom.enable()}),0)},disable:function(z){setTimeout((function(){z.map&&z.map.doubleClickZoom&&z.map.doubleClickZoom.disable()}),0)}}},{}],36:[function(z,Y,q){"use strict";Y.exports=function(z,Y){var q=z.x-Y.x,X=z.y-Y.y;return Math.sqrt(q*q+X*X)}},{}],37:[function(z,Y,q){"use strict";function o(z,Y,q,K){if(null===q.map)return[];var Q=z?W(z,K):Y,tt={};q.options.styles&&(tt.layers=q.options.styles.map((function(z){return z.id})));var et=q.map.queryRenderedFeatures(Q,tt).filter((function(z){return-1!==Z.indexOf(z.properties.meta)})),nt=new H,ot=[];return et.forEach((function(z){var Y=z.properties.id;nt.has(Y)||(nt.add(Y),ot.push(z))})),X(ot)}var X=z("./sort_features"),W=z("./map_event_to_bounding_box"),K=z("../constants"),H=z("./string_set"),Z=[K.meta.FEATURE,K.meta.MIDPOINT,K.meta.VERTEX];Y.exports={click:function(z,Y,q){return o(z,Y,q,q.options.clickBuffer)},touch:function(z,Y,q){return o(z,Y,q,q.options.touchBuffer)}}},{"../constants":23,"./map_event_to_bounding_box":42,"./sort_features":46,"./string_set":47}],38:[function(z,Y,q){"use strict";var X=z("./features_at"),W=z("../constants");Y.exports=function(z,Y){var q=X.click(z,null,Y),K={mouse:W.cursors.NONE};return q[0]&&(K.mouse=q[0].properties.active===W.activeStates.ACTIVE?W.cursors.MOVE:W.cursors.POINTER,K.feature=q[0].properties.meta),-1!==Y.events.currentModeName().indexOf("draw")&&(K.mouse=W.cursors.ADD),Y.ui.queueMapClasses(K),Y.ui.updateMapClasses(),q[0]}},{"../constants":23,"./features_at":37}],39:[function(z,Y,q){"use strict";var X=z("./euclidean_distance");Y.exports=function(z,Y){var q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},W=null!=q.fineTolerance?q.fineTolerance:4,K=null!=q.grossTolerance?q.grossTolerance:12,H=null!=q.interval?q.interval:500;z.point=z.point||Y.point,z.time=z.time||Y.time;var Z=X(z.point,Y.point);return Z<W||Z<K&&Y.time-z.time<H}},{"./euclidean_distance":36}],40:[function(z,Y,q){"use strict";Y.exports=function(z,Y){return!!z.lngLat&&z.lngLat.lng===Y[0]&&z.lngLat.lat===Y[1]}},{}],41:[function(z,Y,q){"use strict";var X=z("./euclidean_distance");Y.exports=function(z,Y){var q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},W=null!=q.tolerance?q.tolerance:25,K=null!=q.interval?q.interval:250;return z.point=z.point||Y.point,z.time=z.time||Y.time,X(z.point,Y.point)<W&&Y.time-z.time<K}},{"./euclidean_distance":36}],42:[function(z,Y,q){"use strict";Y.exports=function(z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[z.point.x-Y,z.point.y-Y],[z.point.x+Y,z.point.y+Y]]}},{}],43:[function(z,Y,q){"use strict";Y.exports=function(z,Y){var q={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},X={on:function(z,Y,X){if(void 0===q[z])throw new Error("Invalid event type: ".concat(z));q[z].push({selector:Y,fn:X})},render:function(z){Y.store.featureChanged(z)}},r=function(z,W){for(var K=q[z],H=K.length;H--;){var Z=K[H];if(Z.selector(W)){Z.fn.call(X,W),Y.store.render(),Y.ui.updateMapClasses();break}}};return z.start.call(X),{render:z.render,stop:function(){z.stop&&z.stop()},trash:function(){z.trash&&(z.trash(),Y.store.render())},combineFeatures:function(){z.combineFeatures&&z.combineFeatures()},uncombineFeatures:function(){z.uncombineFeatures&&z.uncombineFeatures()},drag:function(z){r("drag",z)},click:function(z){r("click",z)},mousemove:function(z){r("mousemove",z)},mousedown:function(z){r("mousedown",z)},mouseup:function(z){r("mouseup",z)},mouseout:function(z){r("mouseout",z)},keydown:function(z){r("keydown",z)},keyup:function(z){r("keyup",z)},touchstart:function(z){r("touchstart",z)},touchmove:function(z){r("touchmove",z)},touchend:function(z){r("touchend",z)},tap:function(z){r("tap",z)}}}},{}],44:[function(z,Y,q){"use strict";var X=z("@mapbox/point-geometry");Y.exports=function(z,Y){var q=Y.getBoundingClientRect();return new X(z.clientX-q.left-(Y.clientLeft||0),z.clientY-q.top-(Y.clientTop||0))}},{"@mapbox/point-geometry":11}],45:[function(z,Y,q){"use strict";var X=z("./constrain_feature_movement"),W=z("../constants");Y.exports=function(z,Y){var q=X(z.map((function(z){return z.toGeoJSON()})),Y);z.forEach((function(z){var Y,X=z.getCoordinates(),i=function(z){var Y={lng:z[0]+q.lng,lat:z[1]+q.lat};return[Y.lng,Y.lat]},s=function(z){return z.map((function(z){return i(z)}))};z.type===W.geojsonTypes.POINT?Y=i(X):z.type===W.geojsonTypes.LINE_STRING||z.type===W.geojsonTypes.MULTI_POINT?Y=X.map(i):z.type===W.geojsonTypes.POLYGON||z.type===W.geojsonTypes.MULTI_LINE_STRING?Y=X.map(s):z.type===W.geojsonTypes.MULTI_POLYGON&&(Y=X.map((function(z){return z.map((function(z){return s(z)}))}))),z.incomingCoords(Y)}))}},{"../constants":23,"./constrain_feature_movement":31}],46:[function(z,Y,q){"use strict";function o(z,Y){var q=K[z.geometry.type]-K[Y.geometry.type];return 0===q&&z.geometry.type===W.geojsonTypes.POLYGON?z.area-Y.area:q}var X=z("@mapbox/geojson-area"),W=z("../constants"),K={Point:0,LineString:1,Polygon:2};Y.exports=function(z){return z.map((function(z){return z.geometry.type===W.geojsonTypes.POLYGON&&(z.area=X.geometry({type:W.geojsonTypes.FEATURE,property:{},geometry:z.geometry})),z})).sort(o).map((function(z){return delete z.area,z}))}},{"../constants":23,"@mapbox/geojson-area":3}],47:[function(z,Y,q){"use strict";function o(z){if(this._items={},this._nums={},this._length=z?z.length:0,z)for(var Y=0,q=z.length;Y<q;Y++)this.add(z[Y]),void 0!==z[Y]&&("string"==typeof z[Y]?this._items[z[Y]]=Y:this._nums[z[Y]]=Y)}o.prototype.add=function(z){return this.has(z)||(this._length++,"string"==typeof z?this._items[z]=this._length:this._nums[z]=this._length),this},o.prototype.delete=function(z){return!1===this.has(z)||(this._length--,delete this._items[z],delete this._nums[z]),this},o.prototype.has=function(z){return!("string"!=typeof z&&"number"!=typeof z||void 0===this._items[z]&&void 0===this._nums[z])},o.prototype.values=function(){var z=this,Y=[];return Object.keys(this._items).forEach((function(q){Y.push({k:q,v:z._items[q]})})),Object.keys(this._nums).forEach((function(q){Y.push({k:JSON.parse(q),v:z._nums[q]})})),Y.sort((function(z,Y){return z.v-Y.v})).map((function(z){return z.k}))},o.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},Y.exports=o},{}],48:[function(z,Y,q){"use strict";Y.exports=function(z,Y){return z.length===Y.length&&JSON.stringify(z.map((function(z){return z})).sort())===JSON.stringify(Y.map((function(z){return z})).sort())}},{}],49:[function(z,Y,q){"use strict";Y.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},{}],50:[function(z,Y,q){"use strict";Y.exports=function(z,Y,q){function o(){X=!1,W&&(r.apply(q,W),W=!1)}function r(){X?W=arguments:(X=!0,z.apply(q,arguments),setTimeout(o,Y))}var X,W;return r}},{}],51:[function(z,Y,q){"use strict";Y.exports=function(z){return[].concat(z).filter((function(z){return void 0!==z}))}},{}],52:[function(z,Y,q){"use strict";var X=z("../lib/common_selectors"),W=X.noTarget,K=X.isOfMetaType,H=X.isInactiveFeature,Z=X.isShiftDown,Q=z("../lib/create_supplementary_points"),tt=z("../lib/constrain_feature_movement"),et=z("../lib/double_click_zoom"),nt=z("../constants"),ot=z("../lib/common_selectors"),rt=z("../lib/move_features"),it=K(nt.meta.VERTEX),st=K(nt.meta.MIDPOINT),at={fireUpdate:function(){this.map.fire(nt.events.UPDATE,{action:nt.updateActions.CHANGE_COORDINATES,features:this.getSelected().map((function(z){return z.toGeoJSON()}))})},fireActionable:function(z){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:z.selectedCoordPaths.length>0})},startDragging:function(z,Y){this.map.dragPan.disable(),z.canDragMove=!0,z.dragMoveLocation=Y.lngLat},stopDragging:function(z){this.map.dragPan.enable(),z.dragMoving=!1,z.canDragMove=!1,z.dragMoveLocation=null},onVertex:function(z,Y){this.startDragging(z,Y);var q=Y.featureTarget.properties,X=z.selectedCoordPaths.indexOf(q.coord_path);Z(Y)||-1!==X?Z(Y)&&-1===X&&z.selectedCoordPaths.push(q.coord_path):z.selectedCoordPaths=[q.coord_path];var W=this.pathsToCoordinates(z.featureId,z.selectedCoordPaths);this.setSelectedCoordinates(W)},onMidpoint:function(z,Y){this.startDragging(z,Y);var q=Y.featureTarget.properties;z.feature.addCoordinate(q.coord_path,q.lng,q.lat),this.fireUpdate(),z.selectedCoordPaths=[q.coord_path]},pathsToCoordinates:function(z,Y){return Y.map((function(Y){return{feature_id:z,coord_path:Y}}))},onFeature:function(z,Y){0===z.selectedCoordPaths.length?this.startDragging(z,Y):this.stopDragging(z)},dragFeature:function(z,Y,q){rt(this.getSelected(),q),z.dragMoveLocation=Y.lngLat},dragVertex:function(z,Y,q){for(var X=z.selectedCoordPaths.map((function(Y){return z.feature.getCoordinate(Y)})),W=X.map((function(z){return{type:nt.geojsonTypes.FEATURE,properties:{},geometry:{type:nt.geojsonTypes.POINT,coordinates:z}}})),K=tt(W,q),H=0;H<X.length;H++){var Z=X[H];z.feature.updateCoordinate(z.selectedCoordPaths[H],Z[0]+K.lng,Z[1]+K.lat)}},clickNoTarget:function(){this.changeMode(nt.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(nt.modes.SIMPLE_SELECT)},clickActiveFeature:function(z){z.selectedCoordPaths=[],this.clearSelectedCoordinates(),z.feature.changed()},onSetup:function(z){var Y=z.featureId,q=this.getFeature(Y);if(!q)throw new Error("You must provide a featureId to enter direct_select mode");if(q.type===nt.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var X={featureId:Y,feature:q,dragMoveLocation:z.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:z.coordPath?[z.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(Y,X.selectedCoordPaths)),this.setSelected(Y),et.disable(this),this.setActionableState({trash:!0}),X},onStop:function(){et.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(z,Y,q){z.featureId===Y.properties.id?(Y.properties.active=nt.activeStates.ACTIVE,q(Y),Q(Y,{map:this.map,midpoints:!0,selectedPaths:z.selectedCoordPaths}).forEach(q)):(Y.properties.active=nt.activeStates.INACTIVE,q(Y)),this.fireActionable(z)},onTrash:function(z){z.selectedCoordPaths.sort().reverse().forEach((function(Y){return z.feature.removeCoordinate(Y)})),this.fireUpdate(),z.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(z),!1===z.feature.isValid()&&(this.deleteFeature([z.featureId]),this.changeMode(nt.modes.SIMPLE_SELECT,{}))},onMouseMove:function(z,Y){var q=ot.isActiveFeature(Y),X=it(Y),W=0===z.selectedCoordPaths.length;q&&W||X&&!W?this.updateUIClasses({mouse:nt.cursors.MOVE}):this.updateUIClasses({mouse:nt.cursors.NONE}),this.stopDragging(z)},onMouseOut:function(z){z.dragMoving&&this.fireUpdate()}};at.onTouchStart=at.onMouseDown=function(z,Y){return it(Y)?this.onVertex(z,Y):ot.isActiveFeature(Y)?this.onFeature(z,Y):st(Y)?this.onMidpoint(z,Y):void 0},at.onDrag=function(z,Y){if(!0===z.canDragMove){z.dragMoving=!0,Y.originalEvent.stopPropagation();var q={lng:Y.lngLat.lng-z.dragMoveLocation.lng,lat:Y.lngLat.lat-z.dragMoveLocation.lat};z.selectedCoordPaths.length>0?this.dragVertex(z,Y,q):this.dragFeature(z,Y,q),z.dragMoveLocation=Y.lngLat}},at.onClick=function(z,Y){return W(Y)?this.clickNoTarget(z,Y):ot.isActiveFeature(Y)?this.clickActiveFeature(z,Y):H(Y)?this.clickInactive(z,Y):void this.stopDragging(z)},at.onTap=function(z,Y){return W(Y)?this.clickNoTarget(z,Y):ot.isActiveFeature(Y)?this.clickActiveFeature(z,Y):H(Y)?this.clickInactive(z,Y):void 0},at.onTouchEnd=at.onMouseUp=function(z){z.dragMoving&&this.fireUpdate(),this.stopDragging(z)},Y.exports=at},{"../constants":23,"../lib/common_selectors":30,"../lib/constrain_feature_movement":31,"../lib/create_supplementary_points":33,"../lib/double_click_zoom":35,"../lib/move_features":45}],53:[function(z,Y,q){"use strict";function o(z){return s(z)||i(z)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(z){if(Symbol.iterator in Object(z)||"[object Arguments]"===Object.prototype.toString.call(z))return Array.from(z)}function s(z){if(Array.isArray(z)){for(var Y=0,q=new Array(z.length);Y<z.length;Y++)q[Y]=z[Y];return q}}var X=z("../lib/common_selectors"),W=z("../lib/is_event_at_coordinates"),K=z("../lib/double_click_zoom"),H=z("../constants"),Z=z("../lib/create_vertex"),Q={onSetup:function(z){var Y,q,X=(z=z||{}).featureId,W="forward";if(X){if(!(Y=this.getFeature(X)))throw new Error("Could not find a feature with the provided featureId");var Z=z.from;if(Z&&"Feature"===Z.type&&Z.geometry&&"Point"===Z.geometry.type&&(Z=Z.geometry),Z&&"Point"===Z.type&&Z.coordinates&&2===Z.coordinates.length&&(Z=Z.coordinates),!Z||!Array.isArray(Z))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Q=Y.coordinates.length-1;if(Y.coordinates[Q][0]===Z[0]&&Y.coordinates[Q][1]===Z[1]){var tt;q=Q+1,(tt=Y).addCoordinate.apply(tt,[q].concat(o(Y.coordinates[Q])))}else{if(Y.coordinates[0][0]!==Z[0]||Y.coordinates[0][1]!==Z[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var et;W="backwards",q=0,(et=Y).addCoordinate.apply(et,[q].concat(o(Y.coordinates[0])))}}else Y=this.newFeature({type:H.geojsonTypes.FEATURE,properties:{},geometry:{type:H.geojsonTypes.LINE_STRING,coordinates:[]}}),q=0,this.addFeature(Y);return this.clearSelectedFeatures(),K.disable(this),this.updateUIClasses({mouse:H.cursors.ADD}),this.activateUIButton(H.types.LINE),this.setActionableState({trash:!0}),{line:Y,currentVertexPosition:q,direction:W}},clickAnywhere:function(z,Y){if(z.currentVertexPosition>0&&W(Y,z.line.coordinates[z.currentVertexPosition-1])||"backwards"===z.direction&&W(Y,z.line.coordinates[z.currentVertexPosition+1]))return this.changeMode(H.modes.SIMPLE_SELECT,{featureIds:[z.line.id]});this.updateUIClasses({mouse:H.cursors.ADD}),z.line.updateCoordinate(z.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),"forward"===z.direction?(z.currentVertexPosition++,z.line.updateCoordinate(z.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat)):z.line.addCoordinate(0,Y.lngLat.lng,Y.lngLat.lat)},clickOnVertex:function(z){return this.changeMode(H.modes.SIMPLE_SELECT,{featureIds:[z.line.id]})},onMouseMove:function(z,Y){z.line.updateCoordinate(z.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),X.isVertex(Y)&&this.updateUIClasses({mouse:H.cursors.POINTER})}};Q.onTap=Q.onClick=function(z,Y){if(X.isVertex(Y))return this.clickOnVertex(z,Y);this.clickAnywhere(z,Y)},Q.onKeyUp=function(z,Y){X.isEnterKey(Y)?this.changeMode(H.modes.SIMPLE_SELECT,{featureIds:[z.line.id]}):X.isEscapeKey(Y)&&(this.deleteFeature([z.line.id],{silent:!0}),this.changeMode(H.modes.SIMPLE_SELECT))},Q.onStop=function(z){K.enable(this),this.activateUIButton(),void 0!==this.getFeature(z.line.id)&&(z.line.removeCoordinate("".concat(z.currentVertexPosition)),z.line.isValid()?this.map.fire(H.events.CREATE,{features:[z.line.toGeoJSON()]}):(this.deleteFeature([z.line.id],{silent:!0}),this.changeMode(H.modes.SIMPLE_SELECT,{},{silent:!0})))},Q.onTrash=function(z){this.deleteFeature([z.line.id],{silent:!0}),this.changeMode(H.modes.SIMPLE_SELECT)},Q.toDisplayFeatures=function(z,Y,q){var X=Y.properties.id===z.line.id;if(Y.properties.active=X?H.activeStates.ACTIVE:H.activeStates.INACTIVE,!X)return q(Y);Y.geometry.coordinates.length<2||(Y.properties.meta=H.meta.FEATURE,q(Z(z.line.id,Y.geometry.coordinates["forward"===z.direction?Y.geometry.coordinates.length-2:1],"".concat("forward"===z.direction?Y.geometry.coordinates.length-2:1),!1)),q(Y))},Y.exports=Q},{"../constants":23,"../lib/common_selectors":30,"../lib/create_vertex":34,"../lib/double_click_zoom":35,"../lib/is_event_at_coordinates":40}],54:[function(z,Y,q){"use strict";var X=z("../lib/common_selectors"),W=z("../constants"),K={onSetup:function(){var z=this.newFeature({type:W.geojsonTypes.FEATURE,properties:{},geometry:{type:W.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(z),this.clearSelectedFeatures(),this.updateUIClasses({mouse:W.cursors.ADD}),this.activateUIButton(W.types.POINT),this.setActionableState({trash:!0}),{point:z}},stopDrawingAndRemove:function(z){this.deleteFeature([z.point.id],{silent:!0}),this.changeMode(W.modes.SIMPLE_SELECT)}};K.onTap=K.onClick=function(z,Y){this.updateUIClasses({mouse:W.cursors.MOVE}),z.point.updateCoordinate("",Y.lngLat.lng,Y.lngLat.lat),this.map.fire(W.events.CREATE,{features:[z.point.toGeoJSON()]}),this.changeMode(W.modes.SIMPLE_SELECT,{featureIds:[z.point.id]})},K.onStop=function(z){this.activateUIButton(),z.point.getCoordinate().length||this.deleteFeature([z.point.id],{silent:!0})},K.toDisplayFeatures=function(z,Y,q){var X=Y.properties.id===z.point.id;if(Y.properties.active=X?W.activeStates.ACTIVE:W.activeStates.INACTIVE,!X)return q(Y)},K.onTrash=K.stopDrawingAndRemove,K.onKeyUp=function(z,Y){if(X.isEscapeKey(Y)||X.isEnterKey(Y))return this.stopDrawingAndRemove(z,Y)},Y.exports=K},{"../constants":23,"../lib/common_selectors":30}],55:[function(z,Y,q){"use strict";var X=z("../lib/common_selectors"),W=z("../lib/double_click_zoom"),K=z("../constants"),H=z("../lib/is_event_at_coordinates"),Z=z("../lib/create_vertex"),Q={onSetup:function(){var z=this.newFeature({type:K.geojsonTypes.FEATURE,properties:{},geometry:{type:K.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(z),this.clearSelectedFeatures(),W.disable(this),this.updateUIClasses({mouse:K.cursors.ADD}),this.activateUIButton(K.types.POLYGON),this.setActionableState({trash:!0}),{polygon:z,currentVertexPosition:0}},clickAnywhere:function(z,Y){if(z.currentVertexPosition>0&&H(Y,z.polygon.coordinates[0][z.currentVertexPosition-1]))return this.changeMode(K.modes.SIMPLE_SELECT,{featureIds:[z.polygon.id]});this.updateUIClasses({mouse:K.cursors.ADD}),z.polygon.updateCoordinate("0.".concat(z.currentVertexPosition),Y.lngLat.lng,Y.lngLat.lat),z.currentVertexPosition++,z.polygon.updateCoordinate("0.".concat(z.currentVertexPosition),Y.lngLat.lng,Y.lngLat.lat)},clickOnVertex:function(z){return this.changeMode(K.modes.SIMPLE_SELECT,{featureIds:[z.polygon.id]})},onMouseMove:function(z,Y){z.polygon.updateCoordinate("0.".concat(z.currentVertexPosition),Y.lngLat.lng,Y.lngLat.lat),X.isVertex(Y)&&this.updateUIClasses({mouse:K.cursors.POINTER})}};Q.onTap=Q.onClick=function(z,Y){return X.isVertex(Y)?this.clickOnVertex(z,Y):this.clickAnywhere(z,Y)},Q.onKeyUp=function(z,Y){X.isEscapeKey(Y)?(this.deleteFeature([z.polygon.id],{silent:!0}),this.changeMode(K.modes.SIMPLE_SELECT)):X.isEnterKey(Y)&&this.changeMode(K.modes.SIMPLE_SELECT,{featureIds:[z.polygon.id]})},Q.onStop=function(z){this.updateUIClasses({mouse:K.cursors.NONE}),W.enable(this),this.activateUIButton(),void 0!==this.getFeature(z.polygon.id)&&(z.polygon.removeCoordinate("0.".concat(z.currentVertexPosition)),z.polygon.isValid()?this.map.fire(K.events.CREATE,{features:[z.polygon.toGeoJSON()]}):(this.deleteFeature([z.polygon.id],{silent:!0}),this.changeMode(K.modes.SIMPLE_SELECT,{},{silent:!0})))},Q.toDisplayFeatures=function(z,Y,q){var X=Y.properties.id===z.polygon.id;if(Y.properties.active=X?K.activeStates.ACTIVE:K.activeStates.INACTIVE,!X)return q(Y);if(0!==Y.geometry.coordinates.length){var W=Y.geometry.coordinates[0].length;if(!(W<3)){if(Y.properties.meta=K.meta.FEATURE,q(Z(z.polygon.id,Y.geometry.coordinates[0][0],"0.0",!1)),W>3){var H=Y.geometry.coordinates[0].length-3;q(Z(z.polygon.id,Y.geometry.coordinates[0][H],"0.".concat(H),!1))}if(W<=4){var Q=[[Y.geometry.coordinates[0][0][0],Y.geometry.coordinates[0][0][1]],[Y.geometry.coordinates[0][1][0],Y.geometry.coordinates[0][1][1]]];if(q({type:K.geojsonTypes.FEATURE,properties:Y.properties,geometry:{coordinates:Q,type:K.geojsonTypes.LINE_STRING}}),3===W)return}return q(Y)}}},Q.onTrash=function(z){this.deleteFeature([z.polygon.id],{silent:!0}),this.changeMode(K.modes.SIMPLE_SELECT)},Y.exports=Q},{"../constants":23,"../lib/common_selectors":30,"../lib/create_vertex":34,"../lib/double_click_zoom":35,"../lib/is_event_at_coordinates":40}],56:[function(z,Y,q){"use strict";Y.exports={simple_select:z("./simple_select"),direct_select:z("./direct_select"),draw_point:z("./draw_point"),draw_polygon:z("./draw_polygon"),draw_line_string:z("./draw_line_string")}},{"./direct_select":52,"./draw_line_string":53,"./draw_point":54,"./draw_polygon":55,"./simple_select":60}],57:[function(z,Y,q){"use strict";var X=Y.exports=z("./mode_interface_accessors");X.prototype.onSetup=function(){},X.prototype.onDrag=function(){},X.prototype.onClick=function(){},X.prototype.onMouseMove=function(){},X.prototype.onMouseDown=function(){},X.prototype.onMouseUp=function(){},X.prototype.onMouseOut=function(){},X.prototype.onKeyUp=function(){},X.prototype.onKeyDown=function(){},X.prototype.onTouchStart=function(){},X.prototype.onTouchMove=function(){},X.prototype.onTouchEnd=function(){},X.prototype.onTap=function(){},X.prototype.onStop=function(){},X.prototype.onTrash=function(){},X.prototype.onCombineFeature=function(){},X.prototype.onUncombineFeature=function(){},X.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},{"./mode_interface_accessors":58}],58:[function(z,Y,q){"use strict";var X=z("../constants"),W=z("../lib/features_at"),K=z("../feature_types/point"),H=z("../feature_types/line_string"),Z=z("../feature_types/polygon"),Q=z("../feature_types/multi_feature"),tt=Y.exports=function(z){this.map=z.map,this.drawConfig=JSON.parse(JSON.stringify(z.options||{})),this._ctx=z};tt.prototype.setSelected=function(z){return this._ctx.store.setSelected(z)},tt.prototype.setSelectedCoordinates=function(z){var Y=this;this._ctx.store.setSelectedCoordinates(z),z.reduce((function(z,q){return void 0===z[q.feature_id]&&(z[q.feature_id]=!0,Y._ctx.store.get(q.feature_id).changed()),z}),{})},tt.prototype.getSelected=function(){return this._ctx.store.getSelected()},tt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},tt.prototype.isSelected=function(z){return this._ctx.store.isSelected(z)},tt.prototype.getFeature=function(z){return this._ctx.store.get(z)},tt.prototype.select=function(z){return this._ctx.store.select(z)},tt.prototype.deselect=function(z){return this._ctx.store.deselect(z)},tt.prototype.deleteFeature=function(z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(z,Y)},tt.prototype.addFeature=function(z){return this._ctx.store.add(z)},tt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},tt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},tt.prototype.setActionableState=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Y={trash:z.trash||!1,combineFeatures:z.combineFeatures||!1,uncombineFeatures:z.uncombineFeatures||!1};return this._ctx.events.actionable(Y)},tt.prototype.changeMode=function(z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(z,Y,q)},tt.prototype.updateUIClasses=function(z){return this._ctx.ui.queueMapClasses(z)},tt.prototype.activateUIButton=function(z){return this._ctx.ui.setActiveButton(z)},tt.prototype.featuresAt=function(z,Y){var q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==q&&"touch"!==q)throw new Error("invalid buffer type");return W[q](z,Y,this._ctx)},tt.prototype.newFeature=function(z){var Y=z.geometry.type;return Y===X.geojsonTypes.POINT?new K(this._ctx,z):Y===X.geojsonTypes.LINE_STRING?new H(this._ctx,z):Y===X.geojsonTypes.POLYGON?new Z(this._ctx,z):new Q(this._ctx,z)},tt.prototype.isInstanceOf=function(z,Y){if(z===X.geojsonTypes.POINT)return Y instanceof K;if(z===X.geojsonTypes.LINE_STRING)return Y instanceof H;if(z===X.geojsonTypes.POLYGON)return Y instanceof Z;if("MultiFeature"===z)return Y instanceof Q;throw new Error("Unknown feature class: ".concat(z))},tt.prototype.doRender=function(z){return this._ctx.store.featureChanged(z)}},{"../constants":23,"../feature_types/line_string":26,"../feature_types/multi_feature":27,"../feature_types/point":28,"../feature_types/polygon":29,"../lib/features_at":37}],59:[function(z,Y,q){"use strict";var X=z("./mode_interface"),W={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},K=Object.keys(W);Y.exports=function(z){var Y=Object.keys(z);return function(q){function s(z){return function(Y){Q[z](Z,Y)}}var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Z={},Q=Y.reduce((function(Y,q){return Y[q]=z[q],Y}),new X(q));return{start:function(){var Y=this;Z=Q.onSetup(H),K.forEach((function(q){var X=W[q],i=function(){return!1};z[X]&&(i=function(){return!0}),Y.on(q,i,s(X))}))},stop:function(){Q.onStop(Z)},trash:function(){Q.onTrash(Z)},combineFeatures:function(){Q.onCombineFeatures(Z)},uncombineFeatures:function(){Q.onUncombineFeatures(Z)},render:function(z,Y){Q.toDisplayFeatures(Z,z,Y)}}}}},{"./mode_interface":57}],60:[function(z,Y,q){"use strict";var X=z("../lib/common_selectors"),W=z("../lib/mouse_event_point"),K=z("../lib/create_supplementary_points"),H=z("../lib/string_set"),Z=z("../lib/double_click_zoom"),Q=z("../lib/move_features"),tt=z("../constants"),et={onSetup:function(z){var Y=this,q={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:z.featureIds||[]};return this.setSelected(q.initiallySelectedFeatureIds.filter((function(z){return void 0!==Y.getFeature(z)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),q},fireUpdate:function(){this.map.fire(tt.events.UPDATE,{action:tt.updateActions.MOVE,features:this.getSelected().map((function(z){return z.toGeoJSON()}))})},fireActionable:function(){var z=this,Y=this.getSelected(),q=Y.filter((function(Y){return z.isInstanceOf("MultiFeature",Y)})),X=!1;if(Y.length>1){X=!0;var W=Y[0].type.replace("Multi","");Y.forEach((function(z){z.type.replace("Multi","")!==W&&(X=!1)}))}var K=q.length>0,H=Y.length>0;this.setActionableState({combineFeatures:X,uncombineFeatures:K,trash:H})},getUniqueIds:function(z){return z.length?z.map((function(z){return z.properties.id})).filter((function(z){return void 0!==z})).reduce((function(z,Y){return z.add(Y),z}),new H).values():[]},stopExtendedInteractions:function(z){z.boxSelectElement&&(z.boxSelectElement.parentNode&&z.boxSelectElement.parentNode.removeChild(z.boxSelectElement),z.boxSelectElement=null),this.map.dragPan.enable(),z.boxSelecting=!1,z.canBoxSelect=!1,z.dragMoving=!1,z.canDragMove=!1},onStop:function(){Z.enable(this)},onMouseMove:function(z){return this.stopExtendedInteractions(z)},onMouseOut:function(z){if(z.dragMoving)return this.fireUpdate()}};et.onTap=et.onClick=function(z,Y){return X.noTarget(Y)?this.clickAnywhere(z,Y):X.isOfMetaType(tt.meta.VERTEX)(Y)?this.clickOnVertex(z,Y):X.isFeature(Y)?this.clickOnFeature(z,Y):void 0},et.clickAnywhere=function(z){var Y=this,q=this.getSelectedIds();q.length&&(this.clearSelectedFeatures(),q.forEach((function(z){return Y.doRender(z)}))),Z.enable(this),this.stopExtendedInteractions(z)},et.clickOnVertex=function(z,Y){this.changeMode(tt.modes.DIRECT_SELECT,{featureId:Y.featureTarget.properties.parent,coordPath:Y.featureTarget.properties.coord_path,startPos:Y.lngLat}),this.updateUIClasses({mouse:tt.cursors.MOVE})},et.startOnActiveFeature=function(z,Y){this.stopExtendedInteractions(z),this.map.dragPan.disable(),this.doRender(Y.featureTarget.properties.id),z.canDragMove=!0,z.dragMoveLocation=Y.lngLat},et.clickOnFeature=function(z,Y){var q=this;Z.disable(this),this.stopExtendedInteractions(z);var W=X.isShiftDown(Y),K=this.getSelectedIds(),H=Y.featureTarget.properties.id,Q=this.isSelected(H);if(!W&&Q&&this.getFeature(H).type!==tt.geojsonTypes.POINT)return this.changeMode(tt.modes.DIRECT_SELECT,{featureId:H});Q&&W?(this.deselect(H),this.updateUIClasses({mouse:tt.cursors.POINTER}),1===K.length&&Z.enable(this)):!Q&&W?(this.select(H),this.updateUIClasses({mouse:tt.cursors.MOVE})):Q||W||(K.forEach((function(z){return q.doRender(z)})),this.setSelected(H),this.updateUIClasses({mouse:tt.cursors.MOVE})),this.doRender(H)},et.onMouseDown=function(z,Y){return X.isActiveFeature(Y)?this.startOnActiveFeature(z,Y):this.drawConfig.boxSelect&&X.isShiftMousedown(Y)?this.startBoxSelect(z,Y):void 0},et.startBoxSelect=function(z,Y){this.stopExtendedInteractions(z),this.map.dragPan.disable(),z.boxSelectStartLocation=W(Y.originalEvent,this.map.getContainer()),z.canBoxSelect=!0},et.onTouchStart=function(z,Y){if(X.isActiveFeature(Y))return this.startOnActiveFeature(z,Y)},et.onDrag=function(z,Y){return z.canDragMove?this.dragMove(z,Y):this.drawConfig.boxSelect&&z.canBoxSelect?this.whileBoxSelect(z,Y):void 0},et.whileBoxSelect=function(z,Y){z.boxSelecting=!0,this.updateUIClasses({mouse:tt.cursors.ADD}),z.boxSelectElement||(z.boxSelectElement=document.createElement("div"),z.boxSelectElement.classList.add(tt.classes.BOX_SELECT),this.map.getContainer().appendChild(z.boxSelectElement));var q=W(Y.originalEvent,this.map.getContainer()),X=Math.min(z.boxSelectStartLocation.x,q.x),K=Math.max(z.boxSelectStartLocation.x,q.x),H=Math.min(z.boxSelectStartLocation.y,q.y),Z=Math.max(z.boxSelectStartLocation.y,q.y),Q="translate(".concat(X,"px, ").concat(H,"px)");z.boxSelectElement.style.transform=Q,z.boxSelectElement.style.WebkitTransform=Q,z.boxSelectElement.style.width="".concat(K-X,"px"),z.boxSelectElement.style.height="".concat(Z-H,"px")},et.dragMove=function(z,Y){z.dragMoving=!0,Y.originalEvent.stopPropagation();var q={lng:Y.lngLat.lng-z.dragMoveLocation.lng,lat:Y.lngLat.lat-z.dragMoveLocation.lat};Q(this.getSelected(),q),z.dragMoveLocation=Y.lngLat},et.onMouseUp=function(z,Y){var q=this;if(z.dragMoving)this.fireUpdate();else if(z.boxSelecting){var X=[z.boxSelectStartLocation,W(Y.originalEvent,this.map.getContainer())],K=this.featuresAt(null,X,"click"),H=this.getUniqueIds(K).filter((function(z){return!q.isSelected(z)}));H.length&&(this.select(H),H.forEach((function(z){return q.doRender(z)})),this.updateUIClasses({mouse:tt.cursors.MOVE}))}this.stopExtendedInteractions(z)},et.toDisplayFeatures=function(z,Y,q){Y.properties.active=this.isSelected(Y.properties.id)?tt.activeStates.ACTIVE:tt.activeStates.INACTIVE,q(Y),this.fireActionable(),Y.properties.active===tt.activeStates.ACTIVE&&Y.geometry.type!==tt.geojsonTypes.POINT&&K(Y).forEach(q)},et.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},et.onCombineFeatures=function(){var z=this.getSelected();if(!(0===z.length||z.length<2)){for(var Y=[],q=[],X=z[0].type.replace("Multi",""),W=0;W<z.length;W++){var K=z[W];if(K.type.replace("Multi","")!==X)return;K.type.includes("Multi")?K.getCoordinates().forEach((function(z){Y.push(z)})):Y.push(K.getCoordinates()),q.push(K.toGeoJSON())}if(q.length>1){var H=this.newFeature({type:tt.geojsonTypes.FEATURE,properties:q[0].properties,geometry:{type:"Multi".concat(X),coordinates:Y}});this.addFeature(H),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([H.id]),this.map.fire(tt.events.COMBINE_FEATURES,{createdFeatures:[H.toGeoJSON()],deletedFeatures:q})}this.fireActionable()}},et.onUncombineFeatures=function(){var z=this,Y=this.getSelected();if(0!==Y.length){for(var q=[],X=[],W=0;W<Y.length;W++)!function(W){var K=Y[W];z.isInstanceOf("MultiFeature",K)&&(K.getFeatures().forEach((function(Y){z.addFeature(Y),Y.properties=K.properties,q.push(Y.toGeoJSON()),z.select([Y.id])})),z.deleteFeature(K.id,{silent:!0}),X.push(K.toGeoJSON()))}(W);q.length>1&&this.map.fire(tt.events.UNCOMBINE_FEATURES,{createdFeatures:q,deletedFeatures:X}),this.fireActionable()}},Y.exports=et},{"../constants":23,"../lib/common_selectors":30,"../lib/create_supplementary_points":33,"../lib/double_click_zoom":35,"../lib/mouse_event_point":44,"../lib/move_features":45,"../lib/string_set":47}],61:[function(z,Y,q){"use strict";function o(z,Y){return z.map((function(z){return z.source?z:X(z,{id:"".concat(z.id,".").concat(Y),source:"hot"===Y?W.sources.HOT:W.sources.COLD})}))}var X=z("xtend"),W=z("./constants"),K={defaultMode:W.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:z("./lib/theme"),modes:z("./modes"),controls:{},userProperties:!1},H={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Z={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};Y.exports=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Y=X(z);return z.controls||(Y.controls={}),!1===z.displayControlsDefault?Y.controls=X(Z,z.controls):Y.controls=X(H,z.controls),(Y=X(K,Y)).styles=o(Y.styles,"cold").concat(o(Y.styles,"hot")),Y}},{"./constants":23,"./lib/theme":49,"./modes":56,xtend:21}],62:[function(z,Y,q){"use strict";var X=z("./constants");Y.exports=function(){function e(q,X){var W=z.get(q).internal(Y);z.ctx.events.currentModeRender(W,(function(Y){z.sources[X].push(Y)}))}function t(){z.isDirty=!1,z.clearChangedIds()}var z=this;if(!z.ctx.map||void 0===z.ctx.map.getSource(X.sources.HOT))return t();var Y=z.ctx.events.currentModeName();z.ctx.ui.queueMapClasses({mode:Y});var q=[],W=[];z.isDirty?W=z.getAllIds():(q=z.getChangedIds().filter((function(Y){return void 0!==z.get(Y)})),W=z.sources.hot.filter((function(Y){return Y.properties.id&&-1===q.indexOf(Y.properties.id)&&void 0!==z.get(Y.properties.id)})).map((function(z){return z.properties.id}))),z.sources.hot=[];var K=z.sources.cold.length;z.sources.cold=z.isDirty?[]:z.sources.cold.filter((function(z){var Y=z.properties.id||z.properties.parent;return-1===q.indexOf(Y)}));var H=K!==z.sources.cold.length||W.length>0;if(q.forEach((function(z){return e(z,"hot")})),W.forEach((function(z){return e(z,"cold")})),H&&z.ctx.map.getSource(X.sources.COLD).setData({type:X.geojsonTypes.FEATURE_COLLECTION,features:z.sources.cold}),z.ctx.map.getSource(X.sources.HOT).setData({type:X.geojsonTypes.FEATURE_COLLECTION,features:z.sources.hot}),z._emitSelectionChange&&(z.ctx.map.fire(X.events.SELECTION_CHANGE,{features:z.getSelected().map((function(z){return z.toGeoJSON()})),points:z.getSelectedCoordinates().map((function(z){return{type:X.geojsonTypes.FEATURE,properties:{},geometry:{type:X.geojsonTypes.POINT,coordinates:z.coordinates}}}))}),z._emitSelectionChange=!1),z._deletedFeaturesToEmit.length){var Z=z._deletedFeaturesToEmit.map((function(z){return z.toGeoJSON()}));z._deletedFeaturesToEmit=[],z.ctx.map.fire(X.events.DELETE,{features:Z})}t(),z.ctx.map.fire(X.events.RENDER,{})}},{"./constants":23}],63:[function(z,Y,q){"use strict";var X=z("./events"),W=z("./store"),K=z("./ui"),H=z("./constants"),Z=z("xtend");Y.exports=function(z){var Y=null,q=null,Q={onRemove:function(){return z.map.off("load",Q.connect),clearInterval(q),Q.removeLayers(),z.store.restoreMapConfig(),z.ui.removeButtons(),z.events.removeEventListeners(),z.ui.clearMapClasses(),z.map=null,z.container=null,z.store=null,Y&&Y.parentNode&&Y.parentNode.removeChild(Y),Y=null,this},connect:function(){z.map.off("load",Q.connect),clearInterval(q),Q.addLayers(),z.store.storeMapConfig(),z.events.addEventListeners()},onAdd:function(H){var tt=H.fire;return H.fire=function(z,Y){var q=arguments;return 1===tt.length&&1!==arguments.length&&(q=[Z({},{type:z},Y)]),tt.apply(H,q)},z.map=H,z.events=X(z),z.ui=K(z),z.container=H.getContainer(),z.store=new W(z),Y=z.ui.addButtons(),z.options.boxSelect&&(H.boxZoom.disable(),H.dragPan.disable(),H.dragPan.enable()),H.loaded()?Q.connect():(H.on("load",Q.connect),q=setInterval((function(){H.loaded()&&Q.connect()}),16)),z.events.start(),Y},addLayers:function(){z.map.addSource(H.sources.COLD,{data:{type:H.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.map.addSource(H.sources.HOT,{data:{type:H.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.options.styles.forEach((function(Y){z.map.addLayer(Y)})),z.store.setDirty(!0),z.store.render()},removeLayers:function(){z.options.styles.forEach((function(Y){z.map.getLayer(Y.id)&&z.map.removeLayer(Y.id)})),z.map.getSource(H.sources.COLD)&&z.map.removeSource(H.sources.COLD),z.map.getSource(H.sources.HOT)&&z.map.removeSource(H.sources.HOT)}};return z.setup=Q,Q}},{"./constants":23,"./events":24,"./store":64,"./ui":65,xtend:21}],64:[function(z,Y,q){"use strict";function o(z){var Y=this,q=this._selectedCoordinates.filter((function(z){return Y._selectedFeatureIds.has(z.feature_id)}));this._selectedCoordinates.length===q.length||z.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=q}var X=z("./lib/throttle"),W=z("./lib/to_dense_array"),K=z("./lib/string_set"),H=z("./render"),Z=z("./constants").interactions,Q=Y.exports=function(z){this._features={},this._featureIds=new K,this._selectedFeatureIds=new K,this._selectedCoordinates=[],this._changedFeatureIds=new K,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=z,this.sources={hot:[],cold:[]},this.render=X(H,16,this),this.isDirty=!1};Q.prototype.createRenderBatch=function(){var z=this,Y=this.render,q=0;return this.render=function(){q++},function(){z.render=Y,q>0&&z.render()}},Q.prototype.setDirty=function(){return this.isDirty=!0,this},Q.prototype.featureChanged=function(z){return this._changedFeatureIds.add(z),this},Q.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Q.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Q.prototype.getAllIds=function(){return this._featureIds.values()},Q.prototype.add=function(z){return this.featureChanged(z.id),this._features[z.id]=z,this._featureIds.add(z.id),this},Q.prototype.delete=function(z){var Y=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(z).forEach((function(z){Y._featureIds.has(z)&&(Y._featureIds.delete(z),Y._selectedFeatureIds.delete(z),q.silent||-1===Y._deletedFeaturesToEmit.indexOf(Y._features[z])&&Y._deletedFeaturesToEmit.push(Y._features[z]),delete Y._features[z],Y.isDirty=!0)})),o.call(this,q),this},Q.prototype.get=function(z){return this._features[z]},Q.prototype.getAll=function(){var z=this;return Object.keys(this._features).map((function(Y){return z._features[Y]}))},Q.prototype.select=function(z){var Y=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(z).forEach((function(z){Y._selectedFeatureIds.has(z)||(Y._selectedFeatureIds.add(z),Y._changedFeatureIds.add(z),q.silent||(Y._emitSelectionChange=!0))})),this},Q.prototype.deselect=function(z){var Y=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(z).forEach((function(z){Y._selectedFeatureIds.has(z)&&(Y._selectedFeatureIds.delete(z),Y._changedFeatureIds.add(z),q.silent||(Y._emitSelectionChange=!0))})),o.call(this,q),this},Q.prototype.clearSelected=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:z.silent}),this},Q.prototype.setSelected=function(z){var Y=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z=W(z),this.deselect(this._selectedFeatureIds.values().filter((function(Y){return-1===z.indexOf(Y)})),{silent:q.silent}),this.select(z.filter((function(z){return!Y._selectedFeatureIds.has(z)})),{silent:q.silent}),this},Q.prototype.setSelectedCoordinates=function(z){return this._selectedCoordinates=z,this._emitSelectionChange=!0,this},Q.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Q.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Q.prototype.getSelected=function(){var z=this;return this._selectedFeatureIds.values().map((function(Y){return z.get(Y)}))},Q.prototype.getSelectedCoordinates=function(){var z=this;return this._selectedCoordinates.map((function(Y){return{coordinates:z.get(Y.feature_id).getCoordinate(Y.coord_path)}}))},Q.prototype.isSelected=function(z){return this._selectedFeatureIds.has(z)},Q.prototype.setFeatureProperty=function(z,Y,q){this.get(z).setProperty(Y,q),this.featureChanged(z)},Q.prototype.storeMapConfig=function(){var z=this;Z.forEach((function(Y){z.ctx.map[Y]&&(z._mapInitialConfig[Y]=z.ctx.map[Y].isEnabled())}))},Q.prototype.restoreMapConfig=function(){var z=this;Object.keys(this._mapInitialConfig).forEach((function(Y){z._mapInitialConfig[Y]?z.ctx.map[Y].enable():z.ctx.map[Y].disable()}))},Q.prototype.getInitialConfigValue=function(z){return void 0===this._mapInitialConfig[z]||this._mapInitialConfig[z]}},{"./constants":23,"./lib/string_set":47,"./lib/throttle":50,"./lib/to_dense_array":51,"./render":62}],65:[function(z,Y,q){"use strict";var X=z("xtend"),W=z("./constants"),K=["mode","feature","mouse"];Y.exports=function(z){function t(z){Z=X(Z,z)}function n(){if(z.container){var Y=[],q=[];K.forEach((function(z){Z[z]!==H[z]&&(Y.push("".concat(z,"-").concat(H[z])),null!==Z[z]&&q.push("".concat(z,"-").concat(Z[z])))})),Y.length>0&&z.container.classList.remove.apply(z.container.classList,Y),q.length>0&&z.container.classList.add.apply(z.container.classList,q),H=X(H,Z)}}function s(z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},X=document.createElement("button");return X.className="".concat(W.classes.CONTROL_BUTTON," ").concat(Y.className),X.setAttribute("title",Y.title),Y.container.appendChild(X),X.addEventListener("click",(function(X){X.preventDefault(),X.stopPropagation(),X.target!==q?(c(z),Y.onActivate()):a()}),!0),X}function a(){q&&(q.classList.remove(W.classes.ACTIVE_BUTTON),q=null)}function c(z){a();var X=Y[z];X&&X&&"trash"!==z&&(X.classList.add(W.classes.ACTIVE_BUTTON),q=X)}var Y={},q=null,H={mode:null,feature:null,mouse:null},Z={mode:null,feature:null,mouse:null};return{setActiveButton:c,queueMapClasses:t,updateMapClasses:n,clearMapClasses:function(){t({mode:null,feature:null,mouse:null}),n()},addButtons:function(){var q=z.options.controls,X=document.createElement("div");return X.className="".concat(W.classes.CONTROL_GROUP," ").concat(W.classes.CONTROL_BASE),q?(q[W.types.LINE]&&(Y[W.types.LINE]=s(W.types.LINE,{container:X,className:W.classes.CONTROL_BUTTON_LINE,title:"LineString tool ".concat(z.options.keybindings?"(l)":""),onActivate:function(){return z.events.changeMode(W.modes.DRAW_LINE_STRING)}})),q[W.types.POLYGON]&&(Y[W.types.POLYGON]=s(W.types.POLYGON,{container:X,className:W.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool ".concat(z.options.keybindings?"(p)":""),onActivate:function(){return z.events.changeMode(W.modes.DRAW_POLYGON)}})),q[W.types.POINT]&&(Y[W.types.POINT]=s(W.types.POINT,{container:X,className:W.classes.CONTROL_BUTTON_POINT,title:"Marker tool ".concat(z.options.keybindings?"(m)":""),onActivate:function(){return z.events.changeMode(W.modes.DRAW_POINT)}})),q.trash&&(Y.trash=s("trash",{container:X,className:W.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){z.events.trash()}})),q.combine_features&&(Y.combine_features=s("combineFeatures",{container:X,className:W.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){z.events.combineFeatures()}})),q.uncombine_features&&(Y.uncombine_features=s("uncombineFeatures",{container:X,className:W.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){z.events.uncombineFeatures()}})),X):X},removeButtons:function(){Object.keys(Y).forEach((function(z){var q=Y[z];q.parentNode&&q.parentNode.removeChild(q),delete Y[z]}))}}}},{"./constants":23,xtend:21}]},{},[1])(1)}}]);