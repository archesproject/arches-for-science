/*! For license information please see 566.b8789475.chunk.js.LICENSE.txt */
(self.webpackChunkarches=self.webpackChunkarches||[]).push([[566,3802,1493,1082,6700,4535,1219,8728,686,6171,6658,9735,2688,3714,5695,6243,606,8383,5467,8939,9706,7784,4077,3094],{80574:function(e,t,n){var a={"./arches":46186,"./arches.js":46186,"./bindings/chosen":84714,"./bindings/chosen.js":84714,"./bindings/ckeditor":67166,"./bindings/ckeditor.js":67166,"./bindings/clipboard":56910,"./bindings/clipboard.js":56910,"./bindings/codemirror":64328,"./bindings/codemirror.js":64328,"./bindings/color-picker":32222,"./bindings/color-picker.js":32222,"./bindings/cytoscape":61977,"./bindings/cytoscape.js":61977,"./bindings/datatable":31394,"./bindings/datatable.js":31394,"./bindings/datepicker":92387,"./bindings/datepicker.js":92387,"./bindings/dragDrop":52499,"./bindings/dragDrop.js":52499,"./bindings/dropzone":58943,"./bindings/dropzone.js":58943,"./bindings/fadeVisible":85935,"./bindings/fadeVisible.js":85935,"./bindings/formattedNumber":19475,"./bindings/formattedNumber.js":19475,"./bindings/gallery":2469,"./bindings/gallery.js":2469,"./bindings/hover":32253,"./bindings/hover.js":32253,"./bindings/leaflet":66504,"./bindings/leaflet.js":66504,"./bindings/let":15989,"./bindings/let.js":15989,"./bindings/map-controls":53829,"./bindings/map-controls.js":53829,"./bindings/mapbox-gl":77823,"./bindings/mapbox-gl.js":77823,"./bindings/moment-date":58795,"./bindings/moment-date.js":58795,"./bindings/nouislider":50046,"./bindings/nouislider.js":50046,"./bindings/related-resources-graph":40192,"./bindings/related-resources-graph.js":40192,"./bindings/resizable-sidepanel":89910,"./bindings/resizable-sidepanel.js":89910,"./bindings/scroll-to-file":5328,"./bindings/scroll-to-file.js":5328,"./bindings/scrollTo":86535,"./bindings/scrollTo.js":86535,"./bindings/select2-query":87720,"./bindings/select2-query.js":87720,"./bindings/select2v4":96574,"./bindings/select2v4.js":96574,"./bindings/slide":32165,"./bindings/slide.js":32165,"./bindings/smartresize":95461,"./bindings/smartresize.js":95461,"./bindings/sortable":44050,"./bindings/sortable.js":44050,"./bindings/term-search":57677,"./bindings/term-search.js":57677,"./bindings/time-wheel":62457,"./bindings/time-wheel.js":62457,"./card-components":65923,"./card-components.js":65923,"./datatype-config-components":3460,"./datatype-config-components.js":3460,"./file-renderers":24181,"./file-renderers.js":24181,"./function-templates":25040,"./function-templates.js":25040,"./geocoder-templates":21225,"./geocoder-templates.js":21225,"./models/abstract":40501,"./models/abstract.js":40501,"./models/card":46611,"./models/card-widget":88280,"./models/card-widget.js":88280,"./models/card.js":46611,"./models/concept":47076,"./models/concept-parents":23420,"./models/concept-parents.js":23420,"./models/concept.js":47076,"./models/config":78180,"./models/config.js":78180,"./models/function":28273,"./models/function-x-graph":82506,"./models/function-x-graph.js":82506,"./models/function.js":28273,"./models/graph":12340,"./models/graph.js":12340,"./models/node":46839,"./models/node.js":46839,"./models/report":70147,"./models/report.js":70147,"./models/tile":28718,"./models/tile.js":28718,"./models/value":72825,"./models/value.js":72825,"./plugins":83994,"./plugins.js":83994,"./rdm":77078,"./rdm.js":77078,"./report-templates":10762,"./report-templates.js":10762,"./reports/default":44746,"./reports/default.js":44746,"./reports/image":12845,"./reports/image.js":12845,"./reports/map":71313,"./reports/map-header":28396,"./reports/map-header.js":28396,"./reports/map.js":71313,"./reports/tabbed":94641,"./reports/tabbed.js":94641,"./resource-types":34924,"./resource-types.js":34924,"./search-components":38814,"./search-components.js":38814,"./utils":27905,"./utils.js":27905,"./utils/dispose":89327,"./utils/dispose.js":89327,"./utils/load-component-dependencies":20566,"./utils/load-component-dependencies.js":20566,"./utils/map-popup-provider":68532,"./utils/map-popup-provider.js":68532,"./utils/ontology":37395,"./utils/ontology.js":37395,"./utils/resource":32274,"./utils/resource.js":32274,"./utils/set-csrf-token":94242,"./utils/set-csrf-token.js":94242,"./view-data":35436,"./view-data.js":35436,"./viewmodels/alert":62666,"./viewmodels/alert-json":20346,"./viewmodels/alert-json.js":20346,"./viewmodels/alert.js":62666,"./viewmodels/base-import-view-model":9999,"./viewmodels/base-import-view-model.js":9999,"./viewmodels/card":56321,"./viewmodels/card-component":66186,"./viewmodels/card-component.js":66186,"./viewmodels/card-constraints":84263,"./viewmodels/card-constraints.js":84263,"./viewmodels/card-multi-select":73770,"./viewmodels/card-multi-select.js":73770,"./viewmodels/card.js":56321,"./viewmodels/concept-select":22493,"./viewmodels/concept-select.js":22493,"./viewmodels/concept-widget":54031,"./viewmodels/concept-widget.js":54031,"./viewmodels/domain-widget":54085,"./viewmodels/domain-widget.js":54085,"./viewmodels/file-widget":5165,"./viewmodels/file-widget.js":5165,"./viewmodels/function":83547,"./viewmodels/function.js":83547,"./viewmodels/graph-settings":63313,"./viewmodels/graph-settings.js":63313,"./viewmodels/map":65055,"./viewmodels/map-controls":71203,"./viewmodels/map-controls.js":71203,"./viewmodels/map-editor":2370,"./viewmodels/map-editor.js":2370,"./viewmodels/map-filter":52933,"./viewmodels/map-filter.js":52933,"./viewmodels/map-report":8994,"./viewmodels/map-report.js":8994,"./viewmodels/map.js":65055,"./viewmodels/node-value-select":26586,"./viewmodels/node-value-select.js":26586,"./viewmodels/photo-gallery":47809,"./viewmodels/photo-gallery.js":47809,"./viewmodels/provisional-tile":85725,"./viewmodels/provisional-tile.js":85725,"./viewmodels/remote-domain-widget":18543,"./viewmodels/remote-domain-widget.js":18543,"./viewmodels/report":8373,"./viewmodels/report.js":8373,"./viewmodels/resource-instance-select":47960,"./viewmodels/resource-instance-select.js":47960,"./viewmodels/tabbed-report":10053,"./viewmodels/tabbed-report.js":10053,"./viewmodels/tile":50021,"./viewmodels/tile.js":50021,"./viewmodels/widget":22023,"./viewmodels/widget.js":22023,"./viewmodels/workflow":33571,"./viewmodels/workflow-step":40471,"./viewmodels/workflow-step.js":40471,"./viewmodels/workflow.js":33571,"./viewmodels/xy-input":42088,"./viewmodels/xy-input.js":42088,"./views/base-manager":94333,"./views/base-manager.js":94333,"./views/components/cards/default":37681,"./views/components/cards/default.js":37681,"./views/components/cards/file-renderers/imagereader":88776,"./views/components/cards/file-renderers/imagereader.js":88776,"./views/components/cards/file-renderers/pdfreader":45917,"./views/components/cards/file-renderers/pdfreader.js":45917,"./views/components/cards/file-viewer":54070,"./views/components/cards/file-viewer.js":54070,"./views/components/cards/grouping":49438,"./views/components/cards/grouping.js":49438,"./views/components/cards/iiif-card":20025,"./views/components/cards/iiif-card.js":20025,"./views/components/cards/map":22207,"./views/components/cards/map.js":22207,"./views/components/cards/photo-gallery-card":99372,"./views/components/cards/photo-gallery-card.js":99372,"./views/components/cards/related-resources-map":28610,"./views/components/cards/related-resources-map.js":28610,"./views/components/cards/select-feature-layers":64058,"./views/components/cards/select-feature-layers.js":64058,"./views/components/cards/select-related-feature-layers":89535,"./views/components/cards/select-related-feature-layers.js":89535,"./views/components/datatypes/boolean":8497,"./views/components/datatypes/boolean.js":8497,"./views/components/datatypes/concept":41945,"./views/components/datatypes/concept.js":41945,"./views/components/datatypes/date":45119,"./views/components/datatypes/date.js":45119,"./views/components/datatypes/domain-value":80274,"./views/components/datatypes/domain-value.js":80274,"./views/components/datatypes/edtf":7373,"./views/components/datatypes/edtf.js":7373,"./views/components/datatypes/file-list":38372,"./views/components/datatypes/file-list.js":38372,"./views/components/datatypes/geojson-feature-collection":80508,"./views/components/datatypes/geojson-feature-collection.js":80508,"./views/components/datatypes/node-value":77826,"./views/components/datatypes/node-value.js":77826,"./views/components/datatypes/number":39103,"./views/components/datatypes/number.js":39103,"./views/components/datatypes/resource-instance":18253,"./views/components/datatypes/resource-instance.js":18253,"./views/components/datatypes/string":97631,"./views/components/datatypes/string.js":97631,"./views/components/datatypes/url":19062,"./views/components/datatypes/url.js":19062,"./views/components/etl_modules/branch-csv-importer":88866,"./views/components/etl_modules/branch-csv-importer.js":88866,"./views/components/etl_modules/bulk-data-editor":49444,"./views/components/etl_modules/bulk-data-editor.js":49444,"./views/components/etl_modules/import-single-csv":6777,"./views/components/etl_modules/import-single-csv.js":6777,"./views/components/functions/local-file-storage":76149,"./views/components/functions/local-file-storage.js":76149,"./views/components/functions/primary-descriptors":10001,"./views/components/functions/primary-descriptors.js":10001,"./views/components/geocoders/base-geocoder":13221,"./views/components/geocoders/base-geocoder.js":13221,"./views/components/geocoders/mapbox":73350,"./views/components/geocoders/mapbox.js":73350,"./views/components/icon-selector":66639,"./views/components/icon-selector.js":66639,"./views/components/iiif-annotation":22172,"./views/components/iiif-annotation.js":22172,"./views/components/iiif-viewer":91762,"./views/components/iiif-viewer.js":91762,"./views/components/language-switcher":2696,"./views/components/language-switcher.js":2696,"./views/components/map":35227,"./views/components/map.js":35227,"./views/components/nodegroup-selector":54033,"./views/components/nodegroup-selector.js":54033,"./views/components/notification":66762,"./views/components/notification.js":66762,"./views/components/plugins/etl-manager":81,"./views/components/plugins/etl-manager.js":81,"./views/components/plugins/manifest-manager":30395,"./views/components/plugins/manifest-manager.js":30395,"./views/components/plugins/map":59948,"./views/components/plugins/map.js":59948,"./views/components/related-instance-creator":97190,"./views/components/related-instance-creator.js":97190,"./views/components/related-resources-graph":91221,"./views/components/related-resources-graph.js":91221,"./views/components/resource-report-abstract":31523,"./views/components/resource-report-abstract.js":31523,"./views/components/search/advanced-search":17266,"./views/components/search/advanced-search.js":17266,"./views/components/search/base-filter":40437,"./views/components/search/base-filter.js":40437,"./views/components/search/map-filter":56223,"./views/components/search/map-filter.js":56223,"./views/components/search/paging-filter":24198,"./views/components/search/paging-filter.js":24198,"./views/components/search/provisional-filter":16335,"./views/components/search/provisional-filter.js":16335,"./views/components/search/related-resources-filter":50739,"./views/components/search/related-resources-filter.js":50739,"./views/components/search/resource-type-filter":55383,"./views/components/search/resource-type-filter.js":55383,"./views/components/search/saved-searches":55612,"./views/components/search/saved-searches.js":55612,"./views/components/search/search-export":52543,"./views/components/search/search-export.js":52543,"./views/components/search/search-result-details":70673,"./views/components/search/search-result-details.js":70673,"./views/components/search/search-results":56712,"./views/components/search/search-results.js":56712,"./views/components/search/sort-results":21801,"./views/components/search/sort-results.js":21801,"./views/components/search/term-filter":84885,"./views/components/search/term-filter.js":84885,"./views/components/search/time-filter":58464,"./views/components/search/time-filter.js":58464,"./views/components/simple-switch":5523,"./views/components/simple-switch.js":5523,"./views/components/widgets/concept-checkbox":27632,"./views/components/widgets/concept-checkbox.js":27632,"./views/components/widgets/concept-multiselect":69883,"./views/components/widgets/concept-multiselect.js":69883,"./views/components/widgets/concept-radio":88870,"./views/components/widgets/concept-radio.js":88870,"./views/components/widgets/concept-select":21332,"./views/components/widgets/concept-select.js":21332,"./views/components/widgets/datepicker":99558,"./views/components/widgets/datepicker.js":99558,"./views/components/widgets/domain-checkbox":47816,"./views/components/widgets/domain-checkbox.js":47816,"./views/components/widgets/domain-multiselect":78584,"./views/components/widgets/domain-multiselect.js":78584,"./views/components/widgets/domain-radio":53775,"./views/components/widgets/domain-radio.js":53775,"./views/components/widgets/domain-select":20098,"./views/components/widgets/domain-select.js":20098,"./views/components/widgets/edtf":43488,"./views/components/widgets/edtf.js":43488,"./views/components/widgets/file":61130,"./views/components/widgets/file.js":61130,"./views/components/widgets/iiif":16422,"./views/components/widgets/iiif.js":16422,"./views/components/widgets/map":7156,"./views/components/widgets/map.js":7156,"./views/components/widgets/map/bin-feature-collection":85652,"./views/components/widgets/map/bin-feature-collection.js":85652,"./views/components/widgets/map/map-styles":19356,"./views/components/widgets/map/map-styles.js":19356,"./views/components/widgets/node-value-select":90076,"./views/components/widgets/node-value-select.js":90076,"./views/components/widgets/number":78538,"./views/components/widgets/number.js":78538,"./views/components/widgets/radio-boolean":1224,"./views/components/widgets/radio-boolean.js":1224,"./views/components/widgets/resource-instance-multiselect":57424,"./views/components/widgets/resource-instance-multiselect.js":57424,"./views/components/widgets/resource-instance-select":19272,"./views/components/widgets/resource-instance-select.js":19272,"./views/components/widgets/rich-text":13487,"./views/components/widgets/rich-text.js":13487,"./views/components/widgets/switch":42962,"./views/components/widgets/switch.js":42962,"./views/components/widgets/text":13087,"./views/components/widgets/text.js":13087,"./views/components/widgets/urldatatype":5282,"./views/components/widgets/urldatatype.js":5282,"./views/components/workbench":41762,"./views/components/workbench.js":41762,"./views/components/workflows/final-step":39397,"./views/components/workflows/final-step.js":39397,"./views/components/workflows/new-multi-tile-step":23977,"./views/components/workflows/new-multi-tile-step.js":23977,"./views/components/workflows/new-tile-step":15276,"./views/components/workflows/new-tile-step.js":15276,"./views/components/workflows/workflow-component-abstract":4261,"./views/components/workflows/workflow-component-abstract.js":4261,"./views/concept-search":93256,"./views/concept-search.js":93256,"./views/edit-history":14884,"./views/edit-history.js":14884,"./views/graph":88527,"./views/graph-designer":34793,"./views/graph-designer-data":46248,"./views/graph-designer-data.js":46248,"./views/graph-designer.js":34793,"./views/graph-manager-data":40080,"./views/graph-manager-data.js":40080,"./views/graph.js":88527,"./views/graph/card-configuration/card-components-tree":57788,"./views/graph/card-configuration/card-components-tree.js":57788,"./views/graph/card-configuration/card-form-preview":28008,"./views/graph/card-configuration/card-form-preview.js":28008,"./views/graph/function-manager":70238,"./views/graph/function-manager.js":70238,"./views/graph/function-manager/applied-function-list":68928,"./views/graph/function-manager/applied-function-list.js":68928,"./views/graph/function-manager/function-list":81878,"./views/graph/function-manager/function-list.js":81878,"./views/graph/graph-base-data":60662,"./views/graph/graph-base-data.js":60662,"./views/graph/graph-designer/card-tree":85233,"./views/graph/graph-designer/card-tree.js":85233,"./views/graph/graph-designer/graph-tree":62246,"./views/graph/graph-designer/graph-tree.js":62246,"./views/graph/graph-designer/node-form":79793,"./views/graph/graph-designer/node-form.js":79793,"./views/graph/graph-functions-data":72151,"./views/graph/graph-functions-data.js":72151,"./views/graph/graph-manager/branch-list":34337,"./views/graph/graph-manager/branch-list.js":34337,"./views/graph/graph-manager/graph-base":79202,"./views/graph/graph-manager/graph-base.js":79202,"./views/graph/graph-page-view":63784,"./views/graph/graph-page-view.js":63784,"./views/graph/graph-settings":21973,"./views/graph/graph-settings-data":21415,"./views/graph/graph-settings-data.js":21415,"./views/graph/graph-settings.js":21973,"./views/graph/permission-designer":84600,"./views/graph/permission-designer.js":84600,"./views/graph/permission-manager/identity-list":27883,"./views/graph/permission-manager/identity-list.js":27883,"./views/graph/permission-manager/permission-settings-form":31129,"./views/graph/permission-manager/permission-settings-form.js":31129,"./views/list":91429,"./views/list.js":91429,"./views/map-layer-manager":58126,"./views/map-layer-manager-data":71e3,"./views/map-layer-manager-data.js":71e3,"./views/map-layer-manager.js":58126,"./views/notifications-list":4899,"./views/notifications-list.js":4899,"./views/page-view":78626,"./views/page-view.js":78626,"./views/plugin":54150,"./views/plugin-data":76242,"./views/plugin-data.js":76242,"./views/plugin.js":54150,"./views/profile-manager-data":56433,"./views/profile-manager-data.js":56433,"./views/provisional-history-list":39735,"./views/provisional-history-list.js":39735,"./views/rdm/concept-report":80039,"./views/rdm/concept-report.js":80039,"./views/rdm/concept-tree":42026,"./views/rdm/concept-tree.js":42026,"./views/rdm/modals/add-child-form":22049,"./views/rdm/modals/add-child-form.js":22049,"./views/rdm/modals/add-collection-form":32163,"./views/rdm/modals/add-collection-form.js":32163,"./views/rdm/modals/add-image-form":7744,"./views/rdm/modals/add-image-form.js":7744,"./views/rdm/modals/add-scheme-form":54955,"./views/rdm/modals/add-scheme-form.js":54955,"./views/rdm/modals/delete-collection-form":8329,"./views/rdm/modals/delete-collection-form.js":8329,"./views/rdm/modals/delete-scheme-form":5107,"./views/rdm/modals/delete-scheme-form.js":5107,"./views/rdm/modals/export-scheme-form":36046,"./views/rdm/modals/export-scheme-form.js":36046,"./views/rdm/modals/import-concept-form":16207,"./views/rdm/modals/import-concept-form.js":16207,"./views/rdm/modals/import-scheme-form":57649,"./views/rdm/modals/import-scheme-form.js":57649,"./views/rdm/modals/manage-parent-form":86163,"./views/rdm/modals/manage-parent-form.js":86163,"./views/rdm/modals/related-concept-form":42150,"./views/rdm/modals/related-concept-form.js":42150,"./views/rdm/modals/related-member-form":63146,"./views/rdm/modals/related-member-form.js":63146,"./views/rdm/modals/value-form":73187,"./views/rdm/modals/value-form.js":73187,"./views/resource":25517,"./views/resource.js":25517,"./views/resource/edit-log":29379,"./views/resource/edit-log.js":29379,"./views/resource/editor":84241,"./views/resource/editor.js":84241,"./views/resource/permissions-manager":29438,"./views/resource/permissions-manager.js":29438,"./views/resource/related-resources-manager":76806,"./views/resource/related-resources-manager.js":76806,"./views/resource/related-resources-node-list":95368,"./views/resource/related-resources-node-list.js":95368,"./views/resource/report":53512,"./views/resource/report.js":53512,"./views/resource/resource-edit-history-data":83094,"./views/resource/resource-edit-history-data.js":83094,"./views/resource/resource-editor-data":37347,"./views/resource/resource-editor-data.js":37347,"./views/search":6755,"./views/search.js":6755,"./views/simple-search":28275,"./views/simple-search.js":28275,"./views/tree-view":42084,"./views/tree-view.js":42084,"./views/user-profile-manager":46475,"./views/user-profile-manager.js":46475,"./widgets":5207,"./widgets.js":5207};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}webpackContext.keys=function(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=80574},271:function(e,t,n){var a={"./afs-formats":6797,"./afs-formats.js":6797,"./bindings/datatable":54077,"./bindings/datatable.js":54077,"./bindings/plotly":10352,"./bindings/plotly.js":10352,"./bindings/threePCD":20393,"./bindings/threePCD.js":20393,"./bindings/threePDB":32672,"./bindings/threePDB.js":32672,"./reports/default":36523,"./reports/default.js":36523,"./utils/physical-thing":12598,"./utils/physical-thing.js":12598,"./utils/report":31599,"./utils/report.js":31599,"./viewmodels/afs-instrument":1661,"./viewmodels/afs-instrument.js":1661,"./views/components/annotation-summary":15521,"./views/components/annotation-summary.js":15521,"./views/components/cards/file-renderers/fors-reader":98978,"./views/components/cards/file-renderers/fors-reader.js":98978,"./views/components/cards/file-renderers/pcdreader":50714,"./views/components/cards/file-renderers/pcdreader.js":50714,"./views/components/cards/file-renderers/pdbreader":6706,"./views/components/cards/file-renderers/pdbreader.js":6706,"./views/components/cards/file-renderers/raman-reader":50333,"./views/components/cards/file-renderers/raman-reader.js":50333,"./views/components/cards/file-renderers/xrf-reader":89614,"./views/components/cards/file-renderers/xrf-reader.js":89614,"./views/components/cards/physical-thing-iiif-card":3058,"./views/components/cards/physical-thing-iiif-card.js":3058,"./views/components/file-upload":37221,"./views/components/file-upload.js":37221,"./views/components/functions/file-to-iiif":18174,"./views/components/functions/file-to-iiif.js":18174,"./views/components/plugins/analysis-areas-workflow":11451,"./views/components/plugins/analysis-areas-workflow.js":11451,"./views/components/plugins/create-project-workflow":41773,"./views/components/plugins/create-project-workflow.js":41773,"./views/components/plugins/init-workflow":19321,"./views/components/plugins/init-workflow.js":19321,"./views/components/plugins/project-collection-workflow":52598,"./views/components/plugins/project-collection-workflow.js":52598,"./views/components/plugins/review-dataset-workflow":49269,"./views/components/plugins/review-dataset-workflow.js":49269,"./views/components/plugins/sample-taking-workflow":7337,"./views/components/plugins/sample-taking-workflow.js":7337,"./views/components/plugins/upload-dataset-workflow":63842,"./views/components/plugins/upload-dataset-workflow.js":63842,"./views/components/reports/collection-set":23247,"./views/components/reports/collection-set.js":23247,"./views/components/reports/digital-resource":66978,"./views/components/reports/digital-resource.js":66978,"./views/components/reports/group":65519,"./views/components/reports/group.js":65519,"./views/components/reports/instrument":44489,"./views/components/reports/instrument.js":44489,"./views/components/reports/modification":26386,"./views/components/reports/modification.js":26386,"./views/components/reports/observation":13432,"./views/components/reports/observation.js":13432,"./views/components/reports/period":681,"./views/components/reports/period.js":681,"./views/components/reports/person":33866,"./views/components/reports/person.js":33866,"./views/components/reports/physical-thing":59355,"./views/components/reports/physical-thing.js":59355,"./views/components/reports/place":58751,"./views/components/reports/place.js":58751,"./views/components/reports/project":74119,"./views/components/reports/project.js":74119,"./views/components/reports/provenance-activity":69960,"./views/components/reports/provenance-activity.js":69960,"./views/components/reports/sampling-activity":12155,"./views/components/reports/sampling-activity.js":12155,"./views/components/reports/scenes/annotation-parts":54833,"./views/components/reports/scenes/annotation-parts.js":54833,"./views/components/reports/scenes/communication":35913,"./views/components/reports/scenes/communication.js":35913,"./views/components/reports/scenes/default":24343,"./views/components/reports/scenes/default.js":24343,"./views/components/reports/scenes/description":92933,"./views/components/reports/scenes/description.js":92933,"./views/components/reports/scenes/documentation":52226,"./views/components/reports/scenes/documentation.js":52226,"./views/components/reports/scenes/existence":45243,"./views/components/reports/scenes/existence.js":45243,"./views/components/reports/scenes/json":76581,"./views/components/reports/scenes/json.js":76581,"./views/components/reports/scenes/keyvalue":45888,"./views/components/reports/scenes/keyvalue.js":45888,"./views/components/reports/scenes/location":48245,"./views/components/reports/scenes/location.js":48245,"./views/components/reports/scenes/name":76234,"./views/components/reports/scenes/name.js":76234,"./views/components/reports/scenes/substance":57886,"./views/components/reports/scenes/substance.js":57886,"./views/components/reports/textual-work":13102,"./views/components/reports/textual-work.js":13102,"./views/components/reports/thematic":87155,"./views/components/reports/thematic.js":87155,"./views/components/reports/visual-work":11198,"./views/components/reports/visual-work.js":11198,"./views/components/resource-instance-nodevalue":82769,"./views/components/resource-instance-nodevalue.js":82769,"./views/components/workflows/analysis-areas-workflow/analysis-areas-annotation-step":6135,"./views/components/workflows/analysis-areas-workflow/analysis-areas-annotation-step.js":6135,"./views/components/workflows/analysis-areas-workflow/analysis-areas-final-step":63754,"./views/components/workflows/analysis-areas-workflow/analysis-areas-final-step.js":63754,"./views/components/workflows/analysis-areas-workflow/analysis-areas-image-step":62314,"./views/components/workflows/analysis-areas-workflow/analysis-areas-image-step.js":62314,"./views/components/workflows/create-project-workflow/add-things-step":85284,"./views/components/workflows/create-project-workflow/add-things-step.js":85284,"./views/components/workflows/create-project-workflow/create-project-final-step":93650,"./views/components/workflows/create-project-workflow/create-project-final-step.js":93650,"./views/components/workflows/create-project-workflow/project-name-step":65438,"./views/components/workflows/create-project-workflow/project-name-step.js":65438,"./views/components/workflows/project-collection-workflow/project-collection-final-step":84229,"./views/components/workflows/project-collection-workflow/project-collection-final-step.js":84229,"./views/components/workflows/review-dataset/review-dataset-final-step":90529,"./views/components/workflows/review-dataset/review-dataset-final-step.js":90529,"./views/components/workflows/review-dataset/select-dataset":43178,"./views/components/workflows/review-dataset/select-dataset.js":43178,"./views/components/workflows/sample-taking-workflow/sample-taking-final-step":64067,"./views/components/workflows/sample-taking-workflow/sample-taking-final-step.js":64067,"./views/components/workflows/sample-taking-workflow/sample-taking-image-step":30808,"./views/components/workflows/sample-taking-workflow/sample-taking-image-step.js":30808,"./views/components/workflows/sample-taking-workflow/sample-taking-sample-location-step":91834,"./views/components/workflows/sample-taking-workflow/sample-taking-sample-location-step.js":91834,"./views/components/workflows/sample-taking-workflow/sampling-info-step":24879,"./views/components/workflows/sample-taking-workflow/sampling-info-step.js":24879,"./views/components/workflows/select-phys-thing-step":30184,"./views/components/workflows/select-phys-thing-step.js":30184,"./views/components/workflows/stepUtils":48303,"./views/components/workflows/stepUtils.js":48303,"./views/components/workflows/summary-step":79921,"./views/components/workflows/summary-step.js":79921,"./views/components/workflows/upload-dataset/dataset-step":77693,"./views/components/workflows/upload-dataset/dataset-step.js":77693,"./views/components/workflows/upload-dataset/file-interpretation-step":74935,"./views/components/workflows/upload-dataset/file-interpretation-step.js":74935,"./views/components/workflows/upload-dataset/instrument-info-step":78266,"./views/components/workflows/upload-dataset/instrument-info-step.js":78266,"./views/components/workflows/upload-dataset/select-dataset-files-step":65330,"./views/components/workflows/upload-dataset/select-dataset-files-step.js":65330,"./views/components/workflows/upload-dataset/upload-dataset-final-step":91627,"./views/components/workflows/upload-dataset/upload-dataset-final-step.js":91627,"./views/components/workflows/upload-dataset/upload-files-step":14098,"./views/components/workflows/upload-dataset/upload-files-step.js":14098};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}webpackContext.keys=function(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=271},67166:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(20198),n(84490),n(54922),n(46186)],void 0===(i=function(e,t,a,i){return a.bindingHandlers.ckeditor={init:function(t,s,l){window.jQuery=e,n.e(453).then((function(){var d=[n(5306),n(98548)];(function(){!function(t,n,s){for(var l,d,c,p=n(),f=a.utils.unwrapObservable(n()),v=s.get("language")||a.observable(i.activeLanguage),h=s.get("direction")||a.observable(i.activeLanguageDir),b=e(t),m={bodyId:"ckeditor"},g=[],x=0,y=Object.keys(i.languages);x<y.length;x++){var w=y[x];g.push("".concat(w,":").concat(i.languages[w]))}if(CKEDITOR.config.language_list=g,CKEDITOR.config.language=v(),CKEDITOR.config.contentsLangDirection=h(),CKEDITOR.config.autoParagraph=!1,CKEDITOR.config.toolbar=[{name:"clipboard",groups:["clipboard","undo"],items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",groups:["spellchecker"],items:["Scayt"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar","PageBreak"]},{name:"tools",items:["Maximize"]},"/",{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote"]},{name:"styles",items:["Styles","Format"]},{name:"document",groups:["mode","document","doctools"],items:["Source","-"]},{name:"about",items:["About"]}],h.subscribe((function(e){CKEDITOR.config.contentsLangDirection=e,CKEDITOR.replace("ckeditor",CKEDITOR.config)})),v.subscribe((function(e){CKEDITOR.config.language=e})),s.has("ckeditorOptions")){var k=s.get("ckeditorOptions");m="object"===_typeof(k)?k:{}}b.html(f);var S=b.ckeditor(m).editor,_=s.get("placeholder");_&&(S.config.editorplaceholder=a.unwrap(_),s.get("isConfigForm")&&(b[0].defaultValue=a.unwrap(_))),null===(l=s())||void 0===l||null===(d=l.attr)||void 0===d||null===(c=d.disabled)||void 0===c||c.subscribe((function(e){null==S||!S.editable()||!0!==e&&!1!==e||null==S||S.setReadOnly(e)}));var onChange=function(t){var n=this;if(a.isWriteableObservable(n)){var i=e(t.listenerData).val();(null!==n()&&""!==n()||null!==i&&""!==i)&&n(i)}return!0};S.on("change",onChange,p,t),S.on("afterCommandExec",(function(e){"language"==e.data.name&&v(e.data.commandData)}),p,t),p.subscribe((function(i){e(t);var s=a.utils.unwrapObservable(n());S.getData()!=s&&(S.removeListener("change",onChange),S.setData(s),S.on("change",onChange,p,t))}),this),a.utils.domNodeDisposal.addDisposeCallback(t,(function(){S.updateElement(),S.destroy()}))}(t,s,l)}).apply(null,d)})).catch(n.oe)}},a.bindingHandlers.ckeditor}.apply(t,a))||(e.exports=i)},56910:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.clipboard={init:function(n,a){var i=a(),s=e(n).find("input");0===(s=e(n).find("textarea")).length?e(n).click((function(){var a='<input value="'+t.unwrap(i)+'"></input>';e(n).append(a);var s=e(n).find("input");s[0].select(),window.document.execCommand("copy"),s.remove("input")})):e(n).click((function(){s.select(),window.document.execCommand("copy")}))}},t.bindingHandlers.clipboard}.apply(t,a))||(e.exports=i)},64328:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.codemirror={init:function(a,i){n.e(3412).then((function(){var s=[n(43340),n(63412)];(function(n){!function(n,a,i){var s=t.toJS(a());s.value=s.value||"";var l=new i(n,s);l.on("change",(function(e){var n=t.unwrap(a()).value;t.isObservable(n)?n(e.getValue()):t.unwrap(a()).value=e.getValue()}));var d=[];t.isObservable(a().value)&&d.push(a().value.subscribe((function(){l.getValue()!==a().value()&&l.setValue(a().value())}))),t.isObservable(a().mode)&&d.push(a().mode.subscribe((function(){l.setOption("mode",a().mode())})));var c=e(l.getWrapperElement());t.utils.domNodeDisposal.addDisposeCallback(n,(function(){c.remove();for(var e=0;e<d.length;e++)d[e].dispose()}))}(a,i,n)}).apply(null,s)})).catch(n.oe)}},t.bindingHandlers.codemirror}.apply(t,a))||(e.exports=i)},32222:function(e,t,n){var a,i;a=[n(20198),n(54922),n(41825)],void 0===(i=function(e,t,n){return t.bindingHandlers.colorPicker={init:function(n,a){var i=t.unwrap(a()),s=[],l=!1,updateValues=function(t){l||e(d).colorpicker("setValue",t)};["color","format"].forEach((function(e){var n=i[e];t.isObservable(n)&&(n.subscribe(updateValues),s.push(n),i[e]=n())}));var d=e(n).colorpicker(i);d.on("changeColor",(function(e,t){l=!0,s.forEach((function(n,a){void 0===e.color?n(t.color):n(e.color.toString())})),l=!1}))}},t.bindingHandlers.colorPicker}.apply(t,a))||(e.exports=i)},61977:function(e,t,n){var a,i;a=[n(54922),n(84490),n(26924),n(1694)],void 0===(i=function(e,t,n,a){return n.use(a),e.bindingHandlers.cytoscape={init:function(a,i){var s={container:a},l=e.unwrap(i()).config||{},d=n(t.defaults(e.unwrap(l),s));e.utils.domNodeDisposal.addDisposeCallback(a,(function(){d.destroy()}),this),"function"==typeof e.unwrap(i()).afterRender&&e.unwrap(i()).afterRender(d)}},e.bindingHandlers.cytoscape}.apply(t,a))||(e.exports=i)},31394:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(85852),n(63361),n(63366),n(35135)],void 0===(i=function(e,t,n,a){return t.bindingHandlers.datatable={init:function(a,i){var s=t.unwrap(i()),l=e(a).DataTable(s);s.columnVis&&n.each(s.columnVis,(function(e,t){e.subscribe((function(e){l.column(t).visible(e)}))}))}},t.bindingHandlers.dataTablesForEach={page:0,init:function(n,a,i,s,l){var d=t.unwrap(a());if(t.unwrap(d.data),!0===d.dataTableOptions.serverSide){e(n).closest("table").DataTable(d.dataTableOptions).destroy()}else{d.dataTableOptions.paging&&a().data.subscribe((function(a){var i=e(n).closest("table").DataTable();t.bindingHandlers.dataTablesForEach.page=i.page(),i.destroy()}),null,"arrayChange");var c=Array.prototype.slice.call(n.childNodes,0);t.utils.arrayForEach(c,(function(e){e&&1!==e.nodeType&&e.parentNode.removeChild(e)}))}return t.bindingHandlers.foreach.init(n,a,i,s,l)},update:function(n,a,i,s,l){var d,c=t.unwrap(a()),p="DataTablesForEach_Initialized";return t.unwrap(c.data),c.dataTableOptions.paging||(d=e(n).closest("table").DataTable()).destroy(),t.bindingHandlers.foreach.update(n,a,i,s,l),d=e(n).closest("table").DataTable(c.dataTableOptions),c.dataTableOptions.paging&&(d.page.info().pages-t.bindingHandlers.dataTablesForEach.page==0?d.page(--t.bindingHandlers.dataTablesForEach.page).draw(!1):d.page(t.bindingHandlers.dataTablesForEach.page).draw(!1)),t.utils.domData.get(n,p)||!c.data&&!c.length||t.utils.domData.set(n,p,!0),{controlsDescendantBindings:!0}}},t.bindingHandlers.datatable}.apply(t,a))||(e.exports=i)},52499:function(e,t,n){var a,i;a=[n(20198),n(54922),n(50847)],void 0===(i=function(e,t){var n;t.bindingHandlers.drag={init:function(a,i,s,l){if(i().preventDrag)console.log(i());else{var d={helper:"clone",revert:!0,revertDuration:0,start:function(){n=t.utils.unwrapObservable(i().value)},cursor:"default",scroll:!1,zIndex:1e3,appendTo:"body"};e(a).draggable(d).disableSelection()}}},t.bindingHandlers.drop={init:function(t,a,i,s){var l={drop:function(e,t){a().value(n)}};e(t).droppable(l)}}}.apply(t,a))||(e.exports=i)},58943:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46562)],void 0===(i=function(e,t,n,a){return n.bindingHandlers.dropzone={init:function(a,i,s,l,d){var c=d.extend(i);n.applyBindingsToDescendants(c,a);var p=i()||{};return t.each(t.filter(p,(function(e,n){return t.contains(["previewsContainer","clickable"],n)})),(function(t,n){p[n]=e(a).find(t)[0]})),e(a).dropzone(p),{controlsDescendantBindings:!0}}},n.bindingHandlers.dropzone}.apply(t,a))||(e.exports=i)},85935:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.fadeVisible={init:function(n,a,i,s,l){var d=a();e(n).toggle(t.unwrap(d))},update:function(n,a,i,s,l){var d=i.get("delay"),c=i.get("fade"),p=a();!1===t.unwrap(p)?e(n).fadeOut(c):e(n).delay(d).fadeIn(c)}},t.bindingHandlers.fadeVisible}.apply(t,a))||(e.exports=i)},19475:function(e,t,n){var a,i;a=[n(20198),n(54922),n(55738)],void 0===(i=function(e,t,n){return t.bindingHandlers.formattedNumber={init:function(e,a,i){var s=a(),l=i.get("format"),d=t.computed({read:function(){return n(t.unwrap(s)).format(t.unwrap(l))},write:function(e){s(n(e).value())}}).extend({notify:"always"});"input"==e.tagName.toLowerCase()?t.applyBindingsToNode(e,{value:d}):t.applyBindingsToNode(e,{text:d})}},t.bindingHandlers.formattedNumber}.apply(t,a))||(e.exports=i)},2469:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.gallery={init:function(){this.initted=!0},update:function(t,n,a){var i=n(),s=a(),l=i,d=s.duration,c="."+s.thumbnailclass,p=e(t).find(c)[0];l.subscribe((function(t){"right"===t?e(p).animate({scrollLeft:"+="+e(p).width()},d):"left"===t&&e(p).animate({scrollLeft:"-="+e(p).width()},d)})),this.initted=!1}},t.bindingHandlers.gallery}.apply(t,a))||(e.exports=i)},32253:function(e,t,n){var a,i;a=[n(54922)],void 0===(i=function(e){return e.bindingHandlers.hover={init:function(t,n){var a=n();e.applyBindingsToNode(t,{event:{mouseenter:function(){a(!0)},mouseleave:function(){a(!1)}}})}},e.bindingHandlers.hover}.apply(t,a))||(e.exports=i)},66504:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(35605)],void 0===(i=function(e,t,n,a){return n.bindingHandlers.leaflet={init:function(t,i,s,l){var d=n.unwrap(i()),c=a.map(t,d);"function"==typeof d.afterRender&&d.afterRender(c),e(t).mousedown((function(e){e.stopPropagation()}))}},n.bindingHandlers.leaflet}.apply(t,a))||(e.exports=i)},15989:function(e,t,n){var a,i;a=[n(54922)],void 0===(i=function(e){return e.bindingHandlers.let={init:function(t,n,a,i,s){var l=s.extend(n);return e.applyBindingsToDescendants(l,t),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.let=!0,e.bindingHandlers.let}.apply(t,a))||(e.exports=i)},53829:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.fadeVisible={init:function(n,a){var i=a();e(n).toggle(t.unwrap(i))},update:function(n,a){var i=a();!1===t.unwrap(i)?e(n).fadeOut():e(n).delay(200).fadeIn(400)}},t.bindingHandlers.fadeVisible}.apply(t,a))||(e.exports=i)},77823:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(50046),n(44050)],void 0===(i=function(e,t,a,i){return a.bindingHandlers.mapboxgl={init:function(s,l){n.e(5136).then((function(){var d=[n(85136)];(function(n){!function(n,s,l){var d={container:n},c=a.unwrap(s()).mapOptions||{},p={};l.accessToken=i.mapboxApiKey,t.each(c,(function(e,t){a.isObservable(e)?p[t]=e():p[t]=e})),p.centerX&&p.centerY&&(p.center=[p.centerX,p.centerY]);var f=new l.Map(t.defaults(p,d));f.on("load",(function(){t.each(i.mapMarkers,(function(e){f.loadImage(e.url,(function(t,n){if(t)throw t;f.addImage(e.name,n)}))}))})),e(n).mousedown((function(e){e.stopPropagation()})),"function"==typeof a.unwrap(s()).afterRender&&a.unwrap(s()).afterRender(f),a.isObservable(c.zoom)&&c.zoom.subscribe((function(e){f.setZoom(e)}),this),a.isObservable(c.centerX)&&c.centerX.subscribe((function(e){f.setCenter(new l.LngLat(e,c.centerY()))}),this),a.isObservable(c.centerY)&&c.centerY.subscribe((function(e){f.setCenter(new l.LngLat(c.centerX(),e))}),this),a.isObservable(c.pitch)&&c.pitch.subscribe((function(e){f.setPitch(e)}),this),a.isObservable(c.setBearing)&&c.bearing.subscribe((function(e){f.setBearing(e)}),this),a.utils.domNodeDisposal.addDisposeCallback(n,(function(){f.remove()}))}(s,l,n)}).apply(null,d)})).catch(n.oe)}},a.bindingHandlers.mapboxgl}.apply(t,a))||(e.exports=i)},58795:function(e,t,n){var a,i,s,l;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}e=n.nmd(e),l=function(e,t){function getDateFormat(e,t){var n=t;return"date"==e?n="YYYY-MM-DD":"datetime-local"==e||"datetime"==e?n="YYYY-MM-DDThh:mm":"month"==e?n="YYYY-MM":"time"==e?n="hh:mm":"week"==e&&(n="GGGG-[W]WW"),n}return e.bindingHandlers.date={init:function(n,a,i){n.onchange=function(){var s,l=a(),d=i().dateFormat?e.utils.unwrapObservable(i().dateFormat):"L";if("INPUT"==n.tagName){var c=n.type;if(d=getDateFormat(c,d),s=t(n.value,d),"date"==c||"month"==c||"week"==c){var p=t();s.hour(p.hour()),s.minute(p.minute()),s.second(p.second()),"month"!=c&&"week"!=c||s.date(p.date())}}else s=t(n.textContent,d);s?"function"==typeof l?l(s.toDate()):l instanceof Date?l.setTime(s.toDate().getTime()):l=s.toDate():"function"==typeof l?l(null):l instanceof Date?l.setTime(0):l=null}},update:function(n,a,i,s){var l=a(),d=e.utils.unwrapObservable(l);if(d){var updateTimeValue=function(){var a=i().dateFormat?e.utils.unwrapObservable(i().dateFormat):"L";"INPUT"==n.tagName?d instanceof Date&&0===d.getTime()?n.value="":(a=getDateFormat(n.type,a),n.value=t(d).format(a)):n.textContent=t(d).format(a)},c=d.setTime;d.setTime=function(e){c.apply(d,arguments),updateTimeValue()},updateTimeValue()}}},{}},"object"===_typeof(t)&&"object"===_typeof(e)?l(n(54922),n(84826)):(i=[n(54922),n(84826)],void 0===(s="function"==typeof(a=l)?a.apply(t,i):a)||(e.exports=s))},50046:function(e,t,n){var a,i;a=[n(20198),n(54922),n(98949)],void 0===(i=function(e,t,n){return t.bindingHandlers.noUiSlider={init:function(e,a){var i=t.unwrap(a()),s=[],l=!1,updateValues=function(){l||d.set(s.map((function(e){return e()})))};["start","end"].forEach((function(e){var n=i[e];t.isObservable(n)&&(n.subscribe(updateValues),s.push(n),i[e]=n())}));var d=n.create(e,i);e.noUiSlider.on("slide",(function(e){l=!0,s.forEach((function(t,n){t(e[n])})),l=!1}))}},t.bindingHandlers.noUiSlider}.apply(t,a))||(e.exports=i)},40192:function(e,t,n){var a,i;a=[n(54922),n(20198),n(84490),n(19438),n(46186)],void 0===(i=function(e,t,n,a,i){return e.bindingHandlers.relatedResourcesGraph={init:function(s,l){var d,c=i.resources.reduce((function(e,t){return e[t.graphid]=t,e}),{}),p=e.unwrap(l()),f=p.subscriptions,v=p.nodeSelection,h=e.observable(!1),b=t(s),m=b.parent().width()||400,g=b.parent().height()||400,x=0,y={},w={},k={nodes:[],links:[]},S=a.forceSimulation(k.nodes).force("link",a.forceLink(k.links)).force("charge",a.forceCollide().radius(100)).force("radial",a.forceRadial(300,m/2,g/2)).force("center",a.forceCenter(m/2,g/2)).alpha(.01),_=p.nodeList,T=p.currentResource,updateSelected=function(e){return function(t){var a;h(t),!0===t?(a=e,j.selectAll("circle").attr("class",(function(e){var t="node-"+(a.isRoot?"current":"ancestor");return e===a?t+="-selected":(n.has(w,e.id+"_"+a.id)||n.has(w,a.id+"_"+e.id))&&(t+="-neighbor"),t})),$.selectAll("line").attr("class",(function(e){return e.source===a||e.target===a?"linkMouseover":"link"})),v([a]),updateNodeInfo(a)):(v.removeAll(),j.selectAll("circle").attr("class",(function(e){return"node-"+(e.isRoot?"current":"ancestor")})))}},updateHovered=function(e){return function(t){var a;!0===t?(a=e,j.selectAll("circle").attr("class",(function(e){var t="node-"+(a.isRoot?"current":"ancestor");return e===a?(t+=e.selected()?"-selected":"-over",!1===h()&&v([e])):n.has(w,e.id+"_"+a.id)||n.has(w,a.id+"_"+e.id)?!1===e.selected()?t+="-neighbor":t+="-selected":e.selected()&&(t+="-selected"),t})),$.selectAll("line").attr("class",(function(e){return e.source===a||e.target===a?"linkMouseover":"link"}))):($.selectAll("line").attr("class",(function(e){return"link"})),j.selectAll("circle").attr("class",(function(e){var t="node-"+(e.isRoot?"current":"ancestor");return e.selected()&&(t+="-selected"),t})),!1===h()&&v.removeAll())}},C=a.select(s).append("svg:svg").attr("viewBox",[0,0,m,g]).call(a.zoom().extent([[0,0],[m,g]]).scaleExtent([.25,8]).on("zoom",(function(e){I.attr("transform",e.transform)}))),I=C.append("svg:g"),$=I.append("svg:g"),j=I.append("svg:g"),update=function(){var e=e;t(window).trigger("resize"),S.nodes(k.nodes),S.force("link").links(k.links),S.alpha(.01).restart();var i=$.selectAll("line").data(k.links).join("line").attr("class","link").on("mouseover",(function(e,t){var n=[];a.select(this).attr("class","linkMouseover"),j.selectAll("circle").attr("class",(function(e){var a,i="node-"+(e.isRoot?"current":"ancestor");return t.source===e||t.target===e?(i+=e.selected()?"-selected":"-neighbor",e.relationship=t.target===e?t.relationshipTarget:t.relationshipSource,e.relationships=t.all_relationships,a=this.getScreenCTM(),e.absX=a.a*e.x+a.c*e.y+a.e,e.absY=a.b*e.x+a.d*e.y+a.f,n.push(e)):e.selected()&&(i+="-selected"),i})),v(n)})).on("mouseout",(function(e,t){a.select(this).attr("class","link"),j.selectAll("circle").attr("class",(function(e){var t="node-"+(e.isRoot?"current":"ancestor");return e.selected()&&(t+="-selected"),t})),v.removeAll()}));i.exit().remove();var s=j.selectAll("circle").data(k.nodes,(function(e){return e.id})).join("circle").style("fill",(function(e){return e.color})).attr("r",(function(e){return e.isRoot?24:18})).attr("class",(function(e){return"node-"+(e.isRoot?"current":"ancestor")})).on("mouseover",(function(t,a){j.selectAll("circle").attr("class",(function(t){var i="node-"+(a.isRoot?"current":"ancestor");return t===a?(i+=t.selected()?"-selected":"-over",n.each(_(),(function(e){e.entityid===a.entityid?e.hovered(!0):e.hovered(!1)}))):n.has(e,t.id+"_"+a.id)||n.has(e,a.id+"_"+t.id)?!1===t.selected()?i+="-neighbor":i+="-selected":!0===t.selected()&&(i+="-selected"),i})),$.selectAll("line").attr("class",(function(e){return e.source===a||e.target===a?"linkMouseover":"link"}))})).on("mouseout",(function(e,t){j.selectAll("circle").attr("class",(function(e){var a="node-"+(t.isRoot?"current":"ancestor");return e.selected()&&(a+="-selected"),n.each(_(),(function(e){e.hovered(!1),e.relationCount&&(e.loaded(e.relationCount.loaded),e.total(e.relationCount.total))})),a})),!1===h()&&v.removeAll(),$.selectAll("line").attr("class","link")})).on("click",(function(t,a){t.defaultPrevented||a.loadcount(a.loadcount()+1),j.selectAll("circle").attr("class",(function(t){var i="node-"+(a.isRoot?"current":"ancestor");return t===a?n.each(_(),(function(e){e.entityid===a.entityid&&!1===e.selected()?(e.selected(!0),i+="-selected"):e.selected(!1)})):(n.has(e,t.id+"_"+a.id)||n.has(e,a.id+"_"+t.id))&&(i+="-neighbor"),i})),$.selectAll("line").attr("class",(function(e){return e.source===a||e.target===a?"linkMouseover":"link"})),updateNodeInfo(a)})).call(a.drag().on("start",(function(e,t){e.active||S.alphaTarget(.01).restart();t.fx=t.x,t.fy=t.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(e,t){e.active||S.alphaTarget(0);t.fx=null,t.fy=null})));d&&d.remove(),d=j.selectAll("text.nodeLabels").data(k.nodes).join("text").attr("class",(function(e){return e.isRoot?"root-node-label":"nodeLabels"})).attr("dy",".35em").text((function(e){return e.name})),S.on("tick",(function(){i.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),s.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("x",(function(){return m/2})).attr("y",(function(){return g/2})),d.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y}))}))},updateNodeInfo=function(e){var t=b.find(".resource-type-icon");b.find(".selected-resource-name").html(e.name),b.find(".selected-resource-name").attr("href",i.urls.reports+e.entityid),b.find(".resource-type-name").html(c[e.entitytypeid].name),e.relationCount?(b.find(".relation-unloaded").hide(),b.find(".relation-count").show(),b.find(".relation-load-count").html(e.relationCount.loaded),b.find(".relation-total-count").html(e.relationCount.total),e.relationCount.loaded===e.relationCount.total?b.find(".load-more-relations-link").hide():b.find(".load-more-relations-link").show()):(b.find(".load-more-relations-link").show(),b.find(".relation-count").hide(),b.find(".relation-unloaded").show()),t.removeClass(),t.addClass("resource-type-icon"),t.addClass(c[e.entitytypeid].icon),b.find(".node_info").show(),e},getMoreData=function(e){return function(t){var n;t&&getResourceData((n=e).entityid,n.name,n.entitytypeid,(function(e){(e.nodes.length>0||e.links.length>0)&&(k.nodes=k.nodes.concat(e.nodes),k.links=k.links.concat(e.links),update())}),!1)}},getResourceData=function(e,a,s,l,d){var c=!0,p=0,f=1,b=y[e];b&&b.relationCount&&(c=b.relationCount.total>b.relationCount.loaded&&!b.loading,p=b.relationCount.loaded,f=b.loadcount()),c&&(b&&(b.loading=!0),t.ajax({url:i.urls.related_resources+e,data:{start:p,page:f>0?f:1},error:function(e){console.log("request failed",e)},success:function(t){var i,c=[],p=[],f=t.related_resources;d?(v.removeAll(),h(!1),b={id:x,entityid:e,name:a,description:f.resource_instance.displaydescription,entitytypeid:s,isRoot:!0,relationType:"Current",graphname:f.node_config_lookup[f.resource_instance.graph_id].name,iconclass:f.node_config_lookup[f.resource_instance.graph_id].iconclass,color:f.node_config_lookup[f.resource_instance.graph_id].fillColor,relationCount:{total:f.total.value,loaded:f.resource_relationships.length}},p.push(b),y[e]=b,x+=1):b.relationCount?(i=b.relationCount.loaded+f.resource_relationships.length,b.relationCount.loaded=i<=f.total.value?i:f.total.value):b.relationCount={total:f.total.value,loaded:f.resource_relationships.length},b.loading=!1,updateNodeInfo(b);n.each(f.related_resources,(function(e){var t=f.node_config_lookup;if(!y[e.resourceinstanceid]){var n={id:x,entityid:e.resourceinstanceid,entitytypeid:e.graph_id,name:e.displayname,description:e.displaydescription,color:t[e.graph_id].fillColor,iconclass:t[e.graph_id].iconclass,graphname:t[e.graph_id].name,isRoot:!1,relationType:"Ancestor",relationCount:{total:e.total_relations.value,loaded:1}};p.push(n),y[e.resourceinstanceid]=n,x+=1}})),n.each(f.resource_relationships,(function(e){var t=y[e.resourceinstanceidfrom],a=y[e.resourceinstanceidto],i=e.relationshiptype_label,s=e.relationshiptype_label;2===e.relationshiptype_label.split("/").length&&(i=e.relationshiptype_label.split("/")[0].trim(),s=e.relationshiptype_label.split("/")[1].trim()),c.push({source:t,target:a,relationshipSource:i,relationshipTarget:s,weight:1}),n.has(w,[t.id+"_"+a.id])||(w[t.id+"_"+a.id]={relationships:[]}),n.has(w,[a.id+"_"+t.id])||(w[a.id+"_"+t.id]={relationships:[]}),!1===n.contains(w[t.id+"_"+a.id].relationships,i)&&w[t.id+"_"+a.id].relationships.push(i),!1===n.contains(w[a.id+"_"+t.id].relationships,i)&&w[a.id+"_"+t.id].relationships.push(i)})),c=n.uniq(c,(function(e,t,n){return e.source.id+"_"+e.target.id})),n.each(c,(function(e){n.has(w,e.source.id+"_"+e.target.id)&&(e.all_relationships=w[e.source.id+"_"+e.target.id].relationships)})),_(_().concat(p)),l({nodes:p,links:c})}}))},setRoot=function(e){void 0!==e.graphid&&(y={},w={},_([]),getResourceData(e.resourceinstanceid,e.displayname,e.graphid,(function(e){b.removeClass("loading"),(k=e).nodes[0].x=m/2,k.nodes[0].y=g/2-160,update()}),!0))};if(T().resourceinstanceid&&setRoot(T()),e.isObservable(T)){var P=T.subscribe(setRoot,this);f.length>0&&n.each(f,(function(e){e.dispose()})),f.push(P)}t(window).on("resize",(function(){var e=b.parent().width(),t=b.parent().height();C.attr("width",e),C.attr("height",t),C.attr("viewBox",[0,0,e,t])})).trigger("resize"),_.subscribe((function(e){n.each(e,(function(e){e.selectedSubscription&&(e.selectedSubscription.dispose(),e.hoveredSubscription.dispose(),e.loadcountSubscription.dispose()),e.selectedSubscription=e.selected.subscribe(updateSelected(e),this),e.hoveredSubscription=e.hovered.subscribe(updateHovered(e),this),e.isRoot&&0===e.loadcount()&&e.loadcount(1),e.loadcountSubscription=e.loadcount.subscribe(getMoreData(e),this),e.relationCount&&(e.loaded(e.relationCount.loaded),e.total(e.relationCount.total))}))}),this),_([])}},e.bindingHandlers.relatedResourcesGraph}.apply(t,a))||(e.exports=i)},89910:function(e,t,n){var a,i;a=[n(20198),n(54922),n(46186)],void 0===(i=function(e,t,n){return t.bindingHandlers.resizableSidepanel={init:function(t,a,i,s){for(var l=e(t),d=null,c=e(document.createElement("div")).attr("draggable","true"),p=0;p<3;p++)c.append(e(document.createElement("i")).addClass("fa fa-circle"));l.after(e(document.createElement("div")).addClass("sidepanel-draggable").append(c).on("dragstart",(function(e){d="rtl"==n.activeLanguageDir?l.width()+e.pageX:l.width()-e.pageX,e.originalEvent.dataTransfer.setData("Text",this.id)})).on("dragend",(function(e){d=null}))),"rtl"==n.activeLanguageDir?l.css("flex",l.width()+"px 0 0"):l.css("flex","0 0 "+l.width()+"px"),l.css("width","auto"),document.addEventListener("dragover",(function(e){null!==d&&("rtl"==n.activeLanguageDir?l.css("flex",d-e.pageX+"px 0 0"):l.css("flex","0 0 "+(d+e.pageX)+"px"))}),!1)}},t.bindingHandlers.resizableSidepanel}.apply(t,a))||(e.exports=i)},5328:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.scrollToFile={update:function(n,a,i){var s=a(),l=t.unwrap(s),d=e("html, body");if(i().container&&(d=e(i().container)),l){var c=e(n),p=e(window).height(),f=e(d).offset().top,v=e(c).offset().top+e(c).outerHeight();(v>p||v>f)&&d.stop().animate({scrollTop:e(c).offset().top-d.offset().top+d.scrollTop()-50},10)}}},t.bindingHandlers.scrollToFile}.apply(t,a))||(e.exports=i)},87720:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(16950)],void 0===(i=function(e,t,n){return t.bindingHandlers.select2Query={init:function(a,i,s){var l=s().select2Query,d=t.utils.unwrapObservable(l.select2Config);d=Object.assign({},d);var c=(d=n.defaults(d,{clickBubble:!0,multiple:!1,allowClear:!0})).value;t.utils.domNodeDisposal.addDisposeCallback(a,(function(){e(a).select2("destroy")}));var p=d.placeholder;t.isObservable(p)&&(p.subscribe((function(t){d.placeholder=t,e(a).select2("destroy").select2(d)})),d.placeholder=d.placeholder(),d.allowClear&&(d.placeholder=""===d.placeholder?" ":d.placeholder)),e(a).select2(d),c&&(e(a).select2("val",c()),c.subscribe((function(t){d.value=t,e(a).select2("val",t)}),this),e(a).on("change",(function(e){return""===e.val&&(e.val=null),c(e.val)}))),t.unwrap(d.disabled)&&(e(a).select2("disable"),d.disabled.subscribe((function(t){!1===t&&e(a).select2("enable")}))),e(a).on("select2-opening",(function(){d.clickBubble&&e(a).parent().trigger("click")})),"function"==typeof d.onSelect&&e(a).on("select2-selecting",(function(e){d.onSelect(e.choice)})),"function"==typeof d.onClear&&e(a).on("select2-clearing",(function(e){d.onClear(e.choice)}))}},t.bindingHandlers.select2}.apply(t,a))||(e.exports=i)},96574:function(e,t,n){var a,i,s;i=[n(20198),n(54922),e],a=function(e,t,n){"use strict";var a="select2v4";n&&n.loaded&&n.config()&&n.config().name&&(a=n.config().name);var i=a+"Data";function triggerChangeQuietly(n,a){var i,s=t.isObservable(a);s&&(i=a.equalityComparer,a.equalityComparer=function(){return!0}),e(n).trigger("change"),s&&(a.equalityComparer=i)}function _init(n,a,s,l,d){var c=t.unwrap(a()),p=s(),f=!1,v=null,h=null;if(e(n).on("select2:selecting select2:unselecting",(function(){f=!0})),e(n).on("select2:select select2:unselect",(function(){f=!1})),t.isObservable(p.value)?h=p.value.subscribe((function(e){f||triggerChangeQuietly(n,this._target||this.target)})):t.isObservable(p.selectedOptions)&&(h=p.selectedOptions.subscribe((function(e){f||triggerChangeQuietly(n,this._target||this.target)}))),s.has("placeholder")){var b=s.get("placeholder"),m=b;t.isObservable(b)&&(b.subscribe((function(){e(n).attr("data-placeholder",b()),e(n).data("select2").setPlaceholder()})),m=b()),e(n).attr("data-placeholder",m)}t.isWriteableObservable(p[i])&&(v=function(){e(n).data("select2")&&p[i](e(n).select2("data"))},e(n).on("change",v)),e(n).select2(c),p[i]().length>0&&(e(n).select2("data",p[i]()),e(n).trigger("change")),t.utils.domNodeDisposal.addDisposeCallback(n,(function(){e(n).select2("destroy"),null!==v&&e(n).off("change",v),null!==h&&h.dispose()}))}return t.bindingHandlers[a]={init:function(){var e=arguments;setTimeout((function(){_init.apply(null,e)}),0)}}},void 0===(s="function"==typeof a?a.apply(t,i):a)||(e.exports=s)},95461:function(e,t,n){var a,i,s=n(20198);a=[n(20198),n(54922)],i=function(e,t){var n;return n="smartresize",s.fn[n]=function(e){return e?this.bind("resize",function(e,t,n){var a;return function(){function u(){n||e.apply(i,s),a=null}var i=this,s=arguments;a?clearTimeout(a):n&&e.apply(i,s),a=setTimeout(u,t||100)}}(e)):this.trigger(n)},t.bindingHandlers.smartresize={init:function(n,a,i,s){var l=t.unwrap(a()).childclass;function update_grid(){var t=e(n).width()+20,a=Math.floor(t/300),i=Math.round(t/a),s=Math.round(i/3*1.8);e(n).find(l).each((function(t){var n=Math.round(t%a*i),l=Math.floor(t/a)*s+20*Math.floor(t/a);-1!=navigator.appName.indexOf("Internet Explorer")?e(this).animate({width:i-3+"px",height:s+"px",left:n,top:l},600):e(this).css({width:i-3+"px",height:s+"px",left:n,top:l})}))}e(window).smartresize(update_grid),e(window).ready(update_grid)}},t.bindingHandlers.smartresize}.apply(t,a),void 0===i||(e.exports=i)},44050:function(e,t,n){var a,i,s;i=[n(54922),n(20198),n(50847)],a=function(e,t){var n="ko_sortItem",a="ko_sourceIndex",i="ko_sortList",s="ko_parentList",l="ko_dragItem",d=e.utils.unwrapObservable,c=e.utils.domData.get,p=e.utils.domData.set,f=t.ui&&t.ui.version,v=f&&f.indexOf("1.6.")&&f.indexOf("1.7.")&&(f.indexOf("1.8.")||"1.8.24"===f),addMetaDataAfterRender=function(t,a){e.utils.arrayForEach(t,(function(e){1===e.nodeType&&(p(e,n,a),p(e,s,c(e.parentNode,i)))}))},prepareTemplateOptions=function(t,n){var a,i={},s=d(t())||{};return s.data?(i[n]=s.data,i.name=s.template):i[n]=t(),e.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],(function(t){Object.prototype.hasOwnProperty.call(s,t)?i[t]=s[t]:Object.prototype.hasOwnProperty.call(e.bindingHandlers.sortable,t)&&(i[t]=e.bindingHandlers.sortable[t])})),"foreach"===n&&(i.afterRender?(a=i.afterRender,i.afterRender=function(e,t){addMetaDataAfterRender.call(t,e,t),a.call(t,e,t)}):i.afterRender=addMetaDataAfterRender),i},updateIndexFromDestroyedItems=function(e,t){var n=d(t);if(n)for(var a=0;a<e;a++)n[a]&&d(n[a]._destroy)&&e++;return e},stripTemplateWhitespace=function(n,a){var i,s;a?(s=document.getElementById(a))&&(i=new e.templateSources.domElement(s)).text(t.trim(i.text())):t(n).contents().each((function(){this&&1!==this.nodeType&&n.removeChild(this)}))};e.bindingHandlers.sortable={init:function(f,h,b,m,g){var x,y,w=t(f),k=d(h())||{},S=prepareTemplateOptions(h,"foreach"),_={};stripTemplateWhitespace(f,S.name),t.extend(!0,_,e.bindingHandlers.sortable),k.options&&_.options&&(e.utils.extend(_.options,k.options),delete k.options),e.utils.extend(_,k),_.connectClass&&(e.isObservable(_.allowDrop)||"function"==typeof _.allowDrop)?e.computed({read:function(){var t=d(_.allowDrop),n="function"==typeof t?t.call(this,S.foreach):t;e.utils.toggleDomNodeCssClass(f,_.connectClass,n)},disposeWhenNodeIsRemoved:f},this):e.utils.toggleDomNodeCssClass(f,_.connectClass,_.allowDrop),e.bindingHandlers.template.init(f,(function(){return S}),b,m,g),x=_.options.start,y=_.options.update,_.options.helper||(_.options.helper=function(e,n){return n.is("tr")&&n.children().each((function(){t(this).width(t(this).width())})),n});var T=setTimeout((function(){var h,b=_.options.receive;w.sortable(e.utils.extend(_.options,{start:function(t,n){var i=n.item[0];p(i,a,e.utils.arrayIndexOf(n.item.parent().children(),i)),n.item.find("input:focus").change(),x&&x.apply(this,arguments)},receive:function(e,t){"function"==typeof b&&b.call(this,e,t),(h=c(t.item[0],l))&&(h.clone&&(h=h.clone()),_.dragged&&(h=_.dragged.call(this,h,e,t)||h))},update:function(l,f){var b,m,g,x,w,k=f.item[0],T=f.item.parent()[0],C=c(k,n)||h;if(C||t(k).remove(),h=null,C&&this===T||!v&&t.contains(this,T)){if(b=c(k,s),g=c(k,a),m=c(k.parentNode,i),x=e.utils.arrayIndexOf(f.item.parent().children(),k),S.includeDestroyed||(g=updateIndexFromDestroyedItems(g,b),x=updateIndexFromDestroyedItems(x,m)),(_.beforeMove||_.afterMove)&&(w={item:C,sourceParent:b,sourceParentNode:b&&f.sender||k.parentNode,sourceIndex:g,targetParent:m,targetIndex:x,cancelDrop:!1},_.beforeMove&&_.beforeMove.call(this,w,l,f)),b&&!_.addToSelf?t(b===m?this:f.sender||this).sortable("cancel"):t(k).remove(),w&&w.cancelDrop)return;if(Object.prototype.hasOwnProperty.call(_,"strategyMove")&&!1!==_.strategyMove){if(x>=0)if(b)if(b!==m)b.splice(g,1),m.splice(x,0,C),p(k,n,null),f.item.remove();else{var I=d(b);b.valueWillMutate&&b.valueWillMutate(),I.splice(g,1),I.splice(x,0,C),b.valueHasMutated&&b.valueHasMutated()}else m.splice(x,0,C),p(k,n,null),f.item.remove()}else x>=0&&(b&&(b.splice(g,1),e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),e.options&&e.options.deferUpdates&&e.tasks.runEarly()),m.splice(x,0,C)),p(k,n,null);e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),_.afterMove&&_.afterMove.call(this,w,l,f)}y&&y.apply(this,arguments)},connectWith:!!_.connectClass&&"."+_.connectClass})),void 0!==_.isEnabled&&e.computed({read:function(){w.sortable(d(_.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:f})}),0);return e.utils.domNodeDisposal.addDisposeCallback(f,(function(){(w.data("ui-sortable")||w.data("sortable"))&&w.sortable("destroy"),e.utils.toggleDomNodeCssClass(f,_.connectClass,!1),clearTimeout(T)})),{controlsDescendantBindings:!0}},update:function(t,n,a,s,l){var d=prepareTemplateOptions(n,"foreach");p(t,i,d.foreach),e.bindingHandlers.template.update(t,(function(){return d}),a,s,l)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},e.bindingHandlers.draggable={init:function(n,a,i,s,c){var f=d(a())||{},v=f.options||{},h=e.utils.extend({},e.bindingHandlers.draggable.options),b=prepareTemplateOptions(a,"data"),m=f.connectClass||e.bindingHandlers.draggable.connectClass,g=void 0!==f.isEnabled?f.isEnabled:e.bindingHandlers.draggable.isEnabled;return f="data"in f?f.data:f,p(n,l,f),e.utils.extend(h,v),h.connectToSortable=!!m&&"."+m,t(n).draggable(h),void 0!==g&&e.computed({read:function(){t(n).draggable(d(g)?"enable":"disable")},disposeWhenNodeIsRemoved:n}),e.utils.domNodeDisposal.addDisposeCallback(n,(function(){t(n).draggable("destroy")})),e.bindingHandlers.template.init(n,(function(){return b}),i,s,c)},update:function(t,n,a,i,s){var l=prepareTemplateOptions(n,"data");return e.bindingHandlers.template.update(t,(function(){return l}),a,i,s)},connectClass:e.bindingHandlers.sortable.connectClass,options:{helper:"clone"}}},void 0===(s="function"==typeof a?a.apply(t,i):a)||(e.exports=s)},57677:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(16950)],void 0===(i=function(e,t,n,a){return n.bindingHandlers.termSearch={init:function(i,s,l,d,c){l();var p=s().terms,f=s().tags,v=s().language,notifyValueChange=function(e){var t=p().concat(f());h.select2("data",t)};p.subscribe((function(e){notifyValueChange()})),f.subscribe((function(e){notifyValueChange()})),v.subscribe((function(e){notifyValueChange()}));var h=e(i).select2({dropdownCssClass:"resource_search_widget_dropdown",multiple:!0,minimumInputLength:2,ajax:{url:a.urls.search_terms,dataType:"json",data:function(e,t){return{q:e,lang:v().code,page_limit:30}},results:function(a,s){var l=e(i).parent().find(".select2-input").val(),d=[];h.groups=[],t.each(a,(function(e,a){e.length>0&&h.groups.unshift(a),t.each(e,(function(e){e.inverted=n.observable(!1),d.push(e)}),this)}),this);var c=[];return c.push({inverted:n.observable(!1),type:"group",context:"",context_label:"",id:"",text:h.groups,value:"",disabled:!0}),t.each(t.groupBy(d,"type"),(function(e,t){c=c.concat(e)})),c.unshift({inverted:n.observable(!1),type:"string",context:"",context_label:"",id:l,text:l,value:l}),{results:c}}},id:function(e){return e.type+e.value+e.context_label},formatResult:function(n,i,s,l){var d=[],c="concept"===n.type||"term"===n.type?"term-search-item indent":"string"===n.type?"term-search-item":"term-search-group";"group"===n.type?t.each(n.text,(function(e,t){var n="concepts"===e?a.translations.termSearchConcept:a.translations.termSearchTerm,i=0===t?"active":"";d.push('<button id="'+e+'group" class="btn search-type-btn term-search-btn '+i+' ">'+n+"</button>")})):window.Select2.util.markMatch(n.text,s.term,d,l);var p=""!=n.context_label?'<i class="concept_result_schemaname">('+t.escape(n.context_label)+")</i>":"",f='<span class="'+n.type+'"><span class="'+c+'">'+d.join("")+"</span>"+p+"</span>";return i[0].className=i[0].className+" "+n.type,e(i).click((function(t){var n=t.target.closest("button");n&&"termsgroup"===n.id&&(e(n).addClass("active").siblings().removeClass("active"),e(".term").show(),e(".concept").hide()),n&&"conceptsgroup"===n.id&&(e(n).addClass("active").siblings().removeClass("active"),e(".concept").show(),e(".term").hide())})),f},formatSelection:function(n,a){var i=""!=n.context_label?'<i class="concept_result_schemaname">('+t.escape(n.context_label)+")</i>":"",s='<span data-filter="external-filter"><i class="fa fa-minus" style="display:none;"></i>'+n.text+"</span>"+i;return n.inverted()&&(s='<span data-filter="external-filter"><i class="fa fa-minus inverted"></i>'+n.text+"</span>"+i),"string"!==n.type&&"concept"!==n.type&&"term"!==n.type&&e(a.prevObject).addClass("filter-flag"),s},escapeMarkup:function(e){return e}}).on("change",(function(e,t){e.added&&p.push(e.added),e.removed&&(p.remove((function(t){return t.id===e.removed.id&&t.context_label===e.removed.context_label})),f.remove((function(t){return t.id===e.removed.id&&t.context_label===e.removed.context_label})))})).on("choice-selected",(function(t,n){var a=e(n).data("select2-data");h.select2("data");"Advanced Search"!==a.id&&(a.inverted()?e(n).find(".fa-minus").hide():e(n).find(".fa-minus").show(),a.inverted(!a.inverted()))})).on("select2-loaded",(function(t,n){h.groups.length>0&&("concepts"===h.groups[0]?e(".term").hide():e(".concept").hide())}));h.select2("data",n.unwrap(p).concat(n.unwrap(f))).trigger("change")}},n.bindingHandlers.termSearch}.apply(t,a))||(e.exports=i)},62457:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(38198),n(19438)],i=function(e,t,n,a,i,s){var l=Math.min(300,300)/8;return n.bindingHandlers.timeWheel={init:function(t,a,i,l,d){var c=e(t),p=s.select(c.find(".chart")[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",[0,0,300,300]).classed("svg-content",!0).append("g").attr("class","container").attr("transform","translate(150,150)");n.utils.domData.set(t,"vis",p)},update:function(t,i,d,c,p){var f=s.scaleOrdinal(s.schemeCategory10),v=e(t),h=n.unwrap(i()),b=h.config(),m=h.breadCrumb,g=h.selectedPeriod,x=0,y=0;g.subscribe((function(e){e||clearHighlight()}));var w=n.utils.domData.get(t,"vis");w.on("mouseleave",(function(e){var t=g();t?highlightPeriod(e,t):clearHighlight()}));var k=function(){var e=s.dispatch("click","dblclick");function d3_rebind(e,t,n){return function(){var a=n.apply(t,arguments);return a===t?e:a}}return function(e,t){for(var n,a=1,i=arguments.length;++a<i;)e[n=arguments[a]]=d3_rebind(e,t,t[n]);return e}((function(t){var n,a,i=null;t.on("mousedown",(function(e){n=s.pointer(e),+new Date,a=arguments})),t.on("mouseup",(function(t){(function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2),Math.pow(e[1]-t[1],2))})(n,s.pointer(t))>5||(i?(window.clearTimeout(i),i=null,e.apply("dblclick",this,a)):i=window.setTimeout((function(){e.apply("click",this,a),i=null}),300))}))}),e,"on")}();function highlightPeriod(e,t){var n=t.data.size;t.data.size<1&&(n="< 1"),s.select(v.find(".count")[0]).text(n);for(var a=[],i=t;i.parent;)a.unshift(i.data.name),i=i.parent;a.push(n+" hits"),m(a.join(" - ")),s.selectAll("path").style("opacity",.3),T.filter((function(e){return a.indexOf(e.data.name)>=0})).style("opacity",1)}function clearHighlight(){s.selectAll("path").style("opacity",1),m(a.translations.timeWheelDateMatches.replace("${total}",x))}if(k.on("click",(function(e,t){g(t)})).on("dblclick",(function(e,t){dblclick(t)})),g.subscribe((function(e){e||clearHighlight()})),b){var arcVisible=function(e){return e.y1<=y&&e.y0>=1&&e.x1>e.x0},S=function(e){var t=s.hierarchy(e).sort((function(e,t){return e.start-t.start})).sum((function(e){return e.children.length>0?0:e.size}));return y=t.height+1,s.partition().size([2*Math.PI,t.height+1])(t)}(b);x=b.size,m(a.translations.timeWheelDateMatches.replace("${total}",x)),S.each((function(e){e.current=e}));var _=s.arc().startAngle((function(e){return e.x0})).endAngle((function(e){return e.x1})).padAngle((function(e){return Math.min((e.x1-e.x0)/2,.005)})).padRadius(1.5*l).innerRadius((function(e){return e.y0*l})).outerRadius((function(e){return Math.max(e.y0*l,e.y1*l-1)})),T=w.append("g").selectAll("path").data(S.descendants().slice(1)).join("path").attr("fill",(function(e){for(;e.depth>1;)e=e.parent;return f(e.data.name)})).attr("fill-opacity",(function(e){return arcVisible(e.current)?e.children?.6:.4:0})).attr("d",(function(e){return _(e.current)})).on("mouseover",highlightPeriod).call(k);T.filter((function(e){return e.children})).style("cursor","pointer");var C=s.format(",d");T.append("title").text((function(e){return"".concat(e.ancestors().map((function(e){return e.data.name})).reverse().join("/"),"\n").concat(C(e.value))}));w.append("circle").datum(S).attr("r",l).attr("fill","none").attr("pointer-events","all").call(k)}}},n.bindingHandlers.timeWheel}.apply(t,a),void 0===i||(e.exports=i)},65923:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#cardComponentData").getAttribute("cardComponents"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},3460:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#datatypeConfigComponentData").getAttribute("datatypeConfigComponents"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.configcomponent}))),n}.apply(t,a))||(e.exports=i)},24181:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#fileRendererData").getAttribute("fileRenderers"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},25040:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#functionTemplateData").getAttribute("functionTemplates"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).reduce((function(e,t){return t.component&&e.push(t.component),e}),[])),n}.apply(t,a))||(e.exports=i)},21225:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#geocoderTemplateData").getAttribute("geocoderTemplates"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},88280:function(e,t,n){var a,i;a=[n(84490),n(54922),n(58420),n(46186),n(5207),n(40501),n(89327),n(97631)],void 0===(i=function(e,t,n,a,i,s,l){return s.extend({constructor:function(d,c){var p={id:null,node_id:"",card_id:"",widget_id:"",config:{},label:"",visible:!0,sortorder:null,disabled:!1},f=this;return this.disposables=[],this.widgetLookup=i,this.widgetList=function(){var t=e.map(f.widgetLookup,(function(e,t){return e.id=t,e}));return e.filter(t,(function(e){return e.datatype===f.datatype.datatype}))},d=d||{},(c=c||{}).parse=!0,this.node=c.node||null,this.card=c.card||null,this.datatype=c.datatype||null,this.disabled=c.disabled||!1,this.icon="ion-ios-paper",this.datatype&&(this.icon=this.datatype.iconclass),this.datatype&&this.datatype.defaultwidget_id&&(p.widget_id=this.datatype.defaultwidget_id,p.config=i[p.widget_id].defaultconfig),this.node&&(p.node_id=this.node.nodeid,p.label=t.unwrap(this.node.name)),this.card&&(p.card_id=this.card.get("id")),d=e.defaults(d,p),s.prototype.constructor.call(this,d,c),this.configJSON=t.computed({read:function(){var t={},a=this.get("config");return e.each(this.configKeys(),(function(e){t[e]=n.toJS(a[e])})),t.label=this.get("label")(),t},write:function(e){if(window.location.pathname.includes(a.urls.graph_designer(this.card.get("graph_id")))){var t=this.get("config");for(var i in e)if("label"===i&&this.get("label")(e[i]),t[i]){var s=n.toJSON(t[i]),l=null!==e[i]&&void 0!==e[i]?n.toJSON(e[i]):e[i];s!==l&&n.fromJSON(l,t[i])}}},owner:this}),this.configJSON.extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"}}),this.disposables.push(this.configJSON),this.dispose=function(){l(f)},this},parse:function(a){var s=this;e.each(a,(function(a,l){if("config"===l){"string"==typeof a&&(a=JSON.parse(a));var d=[];e.each(a,(function(e,t){null!=e&&e.__ko_mapping__||(e=n.fromJS(e)),a[t]=e,d.push(t)})),this.set(l,a),this.configKeys=t.observableArray(d)}else if("widget_id"===l){var c=t.observable(a);this.set(l,t.computed({read:function(){return c()},write:function(n){var a,l=t.unwrap(i[n].defaultconfig);for(a in l instanceof Object||(l=JSON.parse(t.unwrap(i[n].defaultconfig))),l)l[a]=t.observable(l[a]);var d=this.get("config");for(a in this.set("config",e.defaults(d,l)),l)s.configKeys.push(a);c(n)},owner:this})),this.disposables.push(this.get(l))}else this.set(l,t.observable(a));this[l]=this.get(l)}),this)},toJSON:function(){var e={};for(var t in this.attributes)e[t]="config"!==t?this.attributes[t]():this.configJSON();return e}})}.apply(t,a))||(e.exports=i)},46611:function(e,t,n){var a,i;a=[n(84490),n(46186),n(65923),n(40501),n(46839),n(88280),n(54922),n(58420),n(84263),n(89327),n(38198)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p){var f=a.extend({url:t.urls.card,initialize:function(t){var a=this;this.cards=l.observableArray(),this.nodes=t.data.nodes,this.widgets=l.observableArray(),this.tiles=l.observableArray(),this.cardid=l.observable(),this.nodegroup_id=l.observable(),this.name=l.observable(),this.instructions=l.observable(),this.cssclass=l.observable(),this.helptext=l.observable(),this.helpenabled=l.observable(),this.helptitle=l.observable(),this.helpactive=l.observable(!1),this.cardinality=l.observable(),t.data.nodegroup&&this.cardinality(t.data.nodegroup.cardinality),this.visible=l.observable(),this.active=l.observable(),this.ontologyproperty=l.observable(),this.sortorder=l.observable(),this.disabled=l.observable(),this.component_id=l.observable(),this.constraints=l.observableArray(),this.appliedFunctions=t.appliedFunctions,this.primaryDescriptorFunction=t.primaryDescriptorFunction,this.set("cards",this.cards),this.set("nodes",this.nodes),this.set("widgets",this.widgets),this.set("tiles",this.tiles),this.set("cardid",this.cardid),this.set("nodegroup_id",this.nodegroup_id),this.set("cardinality",this.cardinality),this.set("name",this.name),this.set("instructions",this.instructions),this.set("cssclass",this.cssclass),this.set("helptext",this.helptext),this.set("helpenabled",this.helpenabled),this.set("helptitle",this.helptitle),this.set("helpactive",this.helpactive),this.set("cardinality",this.cardinality),this.set("visible",this.visible),this.set("active",this.active),this.set("ontologyproperty",this.ontologyproperty),this.set("sortorder",this.sortorder),this.set("disabled",this.disabled),this.set("component_id",this.component_id),this.set("config",{}),this.set("constraints",this.constraints),this.set("appliedFunctions",this.appliedFunctions),this.set("primaryDescriptorFunction",this.primaryDescriptorFunction),this.cardComponentLookup=n,this.configKeys=l.observableArray(),this.disposables=[],this.configJSON=l.computed({read:function(){var t={},n=this.get("config");return e.each(this.configKeys(),(function(e){t[e]=l.unwrap(n[e])})),t},write:function(e){var t=this.get("config");for(var n in e)t[n]&&t[n]()!==e[n]&&t[n](e[n])},owner:this});var i=this.get("component_id").subscribe((function(t){var n,i=a.cardComponentLookup[t].defaultconfig;for(n in i)i[n]=l.observable(i[n]);var s=a.get("config");for(n in a.set("config",e.defaults(s,i)),i)a.configKeys.push(n)}));this._card=l.observable("{}"),this.dirty=l.computed((function(){return JSON.stringify(e.extend(JSON.parse(a._card()),a.toJSON()))!==a._card()})),this.isContainer=l.computed((function(){return!!a.get("cards")().length})),this.setConstraints=function(e){var t=this;e&&e.forEach((function(e){var n=new c({constraint:d.fromJS(e),widgets:t.widgets()});n.constraint.nodes.subscribe((function(){t.toJSON()}),t),t.constraints.push(n)}))},this.sourceData=t,this.parse(t),this.parseNodes.call(this,t);var s=this.get("cards").subscribe((function(t){e.each(t,(function(e,t){e.get("sortorder")(t)}))})),f=this.get("widgets").subscribe((function(t){e.each(t,(function(e,t){e.get("sortorder")(t)}))})),v=l.computed((function(){return l.unwrap(t.data.nodes)}),this).extend({throttle:100}),h=v.subscribe((function(){this.parseNodes(t)}),this);this.disposables.push(i),this.disposables.push(s),this.disposables.push(f),this.disposables.push(v),this.disposables.push(h),this.disposables.push(this.configJSON),this.disposables.push(this.dirty),this.disposables.push(this.isContainer),this.dispose=function(){p(a)}},parse:function(t){var n=this;this._attributes=t,e.each(t.data,(function(a,i){switch(i){case"config":var s={},c=[];n.configKeys.removeAll(),e.each(a,(function(e,t){l.isObservable(e)||(e=d.fromJS(e)),s[t]=e,c.push(t)})),this.set(i,s),n.configKeys(c);break;case"cards":var p=[];e.sortBy(a,"sortorder").forEach((function(n){var a=new f({data:e.extend(n,{nodes:t.data.nodes}),datatypelookup:t.datatypelookup,cardComponents:t.cardComponents});p.push(a)}),this),this.get("cards")(p);break;case"widgets":break;case"cardid":this.set("id",a),this.get(i)(a);break;case"constraints":0===this.constraints().length?this.setConstraints(a):this.constraints().forEach((function(e,t){e.update(a[t])}));break;case"name":case"nodegroup_id":case"instructions":case"cssclass":case"helptext":case"helpenabled":case"helptitle":case"cardinality":case"visible":case"active":case"ontologyproperty":case"sortorder":case"component_id":this.get(i)(a);break;case"ontology_properties":case"tiles":this.set(i,d.fromJS(a));break;default:this.set(i,a)}}),this),this._card(JSON.stringify(this.toJSON()))},parseNodes:function(){var t=this.sourceData,n=[],a=l.unwrap(this.get("widgets")).map((function(e){return l.unwrap(e.node_id)}));l.unwrap(this.nodes).forEach((function(i){if(n.push(i.id),(l.unwrap(i.nodeGroupId)||l.unwrap(i.nodegroup_id))===l.unwrap(t.data.nodegroup_id)&&!a.includes(i.nodeid)){var d=t.datatypelookup[l.unwrap(i.datatype)],c=i.datatype.subscribe((function(){this._card(JSON.stringify(this.toJSON()))}),this);if(this.disposables.push(c),d.defaultwidget_id){var p=e.find(l.unwrap(t.data.widgets),(function(e){return e.node_id===i.nodeid})),f=new s(p,{node:i,card:this,datatype:d,disabled:t.data.disabled});this.get("widgets").push(f)}}}),this),l.unwrap(this.get("widgets")).filter((function(e){var t=l.unwrap(e.node.nodeGroupId)||l.unwrap(e.node.nodegroup_id);if(l.unwrap(this.nodegroup_id)!==t||!n.includes(e.node_id()))return e}),this).forEach((function(e){this.get("widgets").remove(e)}),this),this.get("widgets").sort((function(e,t){return e.get("sortorder")()-t.get("sortorder")()})),this._card(JSON.stringify(this.toJSON()))},reset:function(){this._attributes.data=JSON.parse(this._card()),this.get("widgets")().forEach((function(t){var n=e.find(this._attributes.data.widgets,(function(e){return t.node_id()===e.node_id}));n&&(t.configKeys().forEach((function(e){d.fromJS(n.config[e],t.config[e])})),t.label(n.label),t.widget_id(n.widget_id))}),this),this.parse(this._attributes)},toJSON:function(){var t=this,n={};for(var a in this.attributes)if("datatypelookup"!==a&&"ontology_properties"!==a&&"nodes"!==a&&"widgets"!==a&&"datatypes"!==a&&"data"!==a&&"helpactive"!==a&&"config"!==a)l.isObservable(this.attributes[a])?"constraints"===a?(n[a]=[],this.attributes[a]().forEach((function(e){n[a].push(e.toJSON())}),this)):"cards"===a?(n[a]=[],this.attributes[a]().forEach((function(e){n[a].push(e.toJSON())}),this)):n[a]=this.attributes[a]():n[a]=this.attributes[a];else if("widgets"===a){var i=this.attributes[a]();n[a]=e.map(i,(function(e){return e.toJSON()}))}else if("config"===a){var s=this.configKeys(),d=null;s.length>0&&(d={},e.each(s,(function(e){d[e]=l.unwrap(t.get("config")[e])}))),n[a]=d}return n},save:function(e){return a.prototype.save.call(this,(function(t,n,a){"success"===n&&this._card(JSON.stringify(this.toJSON())),"function"==typeof e&&e(t,n,a)}),this)}});return f}.apply(t,a))||(e.exports=i)},78180:function(e,t,n){var a,i;a=[n(46186),n(28718)],void 0===(i=function(e,t){return t.extend({url:e.urls.config})}.apply(t,a))||(e.exports=i)},82506:function(e,t,n){var a,i;a=[n(84490),n(46186),n(40501),n(54922),n(58420)],void 0===(i=function(e,t,n,a,i){return n.extend({url:t.urls.functionXGraph,initialize:function(t){this._id=e.uniqueId(),this._json=a.observable(""),this.id=t.id,this.function=t.function,this.function_id=t.function_id,this.graph_id=t.graph_id,this.config=i.fromJS({}),this.parse(t),this.dirty=a.computed((function(){return JSON.stringify(e.extend(JSON.parse(this._json()),this.toJSON()))!==this._json()}),this)},parse:function(e){i.fromJS(e.config,this.config),this.set("id",e.id),this._json(JSON.stringify(this.toJSON()))},reset:function(){this.parse(JSON.parse(this._json()))},toJSON:function(){var e={},t=["_id","id","function_id","graph_id","config"];for(var n in this)-1!==t.indexOf(n)&&("config"===n?(e[n]=i.toJS(this[n]),delete e[n].__ko_mapping__):e[n]=this[n]);return e}})}.apply(t,a))||(e.exports=i)},28273:function(e,t,n){var a,i;a=[n(46186),n(40501),n(54922),n(58420),n(84490)],void 0===(i=function(e,t,n,a,i){return t.extend({url:e.urls.function,initialize:function(e){var t=this;this._json=n.observable(""),this.functionid=e.functionid,this.defaultconfig=a.fromJS({triggering_nodegroups:[]}),this.name=n.observable(),this.description=n.observable(),this.functiontype=n.observable(),this.component=n.observable(),this.parse(e),this.json=n.computed((function(){return JSON.stringify(i.extend(JSON.parse(t._json()),{defaultconfig:a.toJS(t.defaultconfig),name:t.name(),description:t.description(),functiontype:t.functiontype(),component:t.component()}))})),t.dirty=n.computed((function(){return t.json()!==t._json()}))},parse:function(e){this._json(JSON.stringify(e)),this.functionid=e.functionid,a.fromJS(e.defaultconfig,this.defaultconfig),this.name(e.name),this.description(e.description),this.functiontype(e.functiontype),this.component(e.component),this.set("id",e.functionid)},reset:function(){this.parse(JSON.parse(this._json()))},toJSON:function(){return JSON.parse(this.json())}})}.apply(t,a))||(e.exports=i)},12340:function(e,t,n){var a,i;a=[n(20198),n(46186),n(40501),n(46839),n(54922),n(84490)],void 0===(i=function(e,t,n,a,i,s){return n.extend({url:t.urls.graph,constructor:function(e,t){t||(t={}),t.parse=!0,n.prototype.constructor.call(this,e,t)},selectNode:function(e){this.trigger("select-node",e);var t=this.get("selectedNode")();return(!t||!t.dirty())&&(this.get("nodes")().forEach((function(t){t!==e&&t.selected(!1)})),e.selected(!0),!0)},deleteNode:function(e,t,n){return this._doRequest({type:"DELETE",url:this.url+this.get("graphid")+"/delete_node",data:JSON.stringify({nodeid:e.nodeid})},(function(a,i){if("success"===i&&a.responseJSON){var l=this.getParentNode(e),d=function getEdges(e){var t=this.get("edges")().filter((function(t){return t.domainnode_id===e.nodeid})),n=t.map((function(e){return this.get("nodes")().find((function(t){return e.rangenode_id===t.nodeid}))}),this);return n.forEach((function(e){t=t.concat(getEdges.call(this,e))}),this),t}.call(this,e),c=d.map((function(e){return this.get("nodes")().find((function(t){return e.rangenode_id===t.nodeid}))}),this),p=this.get("edges")().find((function(t){return t.rangenode_id===e.nodeid}));c.push(e),d.push(p),e.isCollector()&&this.get("cards").remove((function(t){return t.nodegroup_id===e.nodeid})),this.get("edges").remove((function(e){return s.contains(d,e)})),this.get("nodes").remove((function(e){return s.contains(c,e)})),l.childNodes.remove(e),l.selected(!0)}else this.trigger("error",a,"deleteNode");"function"==typeof t&&(n=n||this,t.call(n,a,i))}),this,"changed")},getParentNode:function(e){var t=this.get("edges")().find((function(t){return t.rangenode_id===e.nodeid}));return t?this.get("nodes")().find((function(e){return t.domainnode_id===e.nodeid})):e},appendBranch:function(e,t,n,i,l){if(null===(t=t||null)&&this.get("selectedNode")().ontologyclass()){var d=s.find(n.get("domain_connections"),(function(e){return s.find(e.ontology_classes,(function(e){return e===this.get("selectedNode")().ontologyclass()}),this)}),this);if(!d)return void("function"==typeof i&&(l=l||self,i.call(l,null,"failed")));t=d.ontology_property}return this._doRequest({type:"POST",url:this.url+this.get("graphid")+"/append_branch",data:JSON.stringify({nodeid:e.nodeid,property:t,graphid:n.get("graphid"),return_appended_graph:!0})},(function(e,t){if("success"===t&&e.responseJSON){var n=e.responseJSON.root;e.responseJSON.nodes.forEach((function(e){this.get("nodes").push(new a({source:e,datatypelookup:this.get("datatypelookup"),graph:this,ontology_namespaces:this.get("root").ontology_namespaces}))}),this),e.responseJSON.edges.forEach((function(e){this.get("edges").push(e)}),this),this.set("nodegroups",e.responseJSON.nodegroups),e.responseJSON.widgets.forEach((function(e){this.get("cardwidgets").push(e)}),this),this.get("cards")(this.get("cards")().concat(e.responseJSON.cards)),this.get("isresource")||this.get("nodes")().forEach((function(e){e.selected(!1),e.nodeid===n.nodeid&&e.selected(!0)})),this.constructTree(null,null,e.responseJSON.edges,!0)}else this.trigger("error",e,"appendBranch");"function"==typeof i&&(l=l||this,i.call(l,e,t))}),this,"changed")},appendNode:function(e,t,n){return this._doRequest({type:"POST",url:this.url+this.get("graphid")+"/append_node",data:JSON.stringify({nodeid:e.nodeid})},(function(s,l){if("success"===l&&s.responseJSON){var d=s.responseJSON.node;d.parentproperty=s.responseJSON.edge.ontologyproperty;var c=new a({source:d,datatypelookup:this.get("datatypelookup"),graph:this,ontology_namespaces:this.get("root").ontology_namespaces});c.childNodes=i.observableArray([]),this.get("nodes").push(c),this.get("edges").push(s.responseJSON.edge),e.childNodes.unshift(c),c.ontologyclass(""),c.parentproperty(""),this.get("isresource")||this.selectNode(c)}else this.trigger("error",s,"appendNode");"function"==typeof t&&(n=n||this,t.call(n,s,l))}),this,"changed")},moveNode:function(e,t,n,a,i){return this._doRequest({type:"POST",url:this.url+this.get("graphid")+"/move_node",data:JSON.stringify({nodeid:e.nodeid,property:t,newparentnodeid:n.nodeid})},(function(e,t){"success"===t&&e.responseJSON?(this.get("edges")().find((function(t){return t.edgeid===e.responseJSON.edges[0].edgeid&&(t.domainnode_id=e.responseJSON.edges[0].domainnode_id,!0)})),this.get("nodes")().forEach((function(t){var n=e.responseJSON.nodes.find((function(e){return e.nodeid===t.nodeid}));n&&t.parse(n)}))):this.trigger("error",e,"moveNode"),"function"==typeof a&&(i=i||this,a.call(i,e,t))}),this,"changed")},updateNode:function(e,t,n){return this._doRequest({type:"POST",url:this.url+this.get("graphid")+"/update_node",data:JSON.stringify(e.toJSON())},(function(e,a){"success"===a&&e.responseJSON?s.each(this.get("nodes")(),(function(t){var n=s.find(e.responseJSON.nodes,(function(e){return t.nodeid===e.nodeid}));t.parse(n)}),this):this.trigger("error",e,"updateNode"),"function"==typeof t&&(n=n||this,t.call(n,e,a))}),this,"changed")},exportBranch:function(e,t,n){return this._doRequest({type:"POST",async:!1,url:this.url+this.get("graphid")+"/export_branch",data:JSON.stringify(e.toJSON())},(function(e,a){"success"===a&&e.responseJSON||this.trigger("error",e,"exportBranch"),"function"==typeof t&&(n=n||this,t.call(n,e,a))}),this,"changed")},getValidNodesEdges:function(e,t,n){return this._doRequest({type:"GET",url:this.url+this.get("graphid")+"/get_related_nodes/"+e},(function(e,a){t.call(n,e.responseJSON)}),this)},getValidDomainClasses:function(e,t,n){return this._doRequest({type:"GET",url:this.url+this.get("graphid")+"/get_valid_domain_nodes/"+e},(function(e,a){t.call(n,e.responseJSON)}),this)},canAppend:function(e,t){if((t=t||this.get("selectedNode")(),this.get("ontology_id")&&e.get("ontology_id"))&&!!!s.find(e.get("domain_connections"),(function(e){return!!s.find(e.ontology_classes,(function(e){return e===t.ontologyclass()}),this)}),this))return!1;return!0},parse:function(e){var t=this,n={};e=s.extend({datatypes:[],domain_connections:[]},e),s.defaults(e,{selectRoot:!0}),this.set("domain_connections_loaded",!1),s.each(e.datatypes,(function(e){n[e.datatype]=e}),this),this.set("datatypelookup",n),s.each(e.data,(function(s,l){switch(l){case"edges":case"cards":this.set(l,i.observableArray(s));break;case"nodes":var d=[];e.data.nodes.forEach((function(s,l){var c=new a({source:s,datatypelookup:n,graph:t,ontology_namespaces:e.ontology_namespaces});c.childNodes=i.observableArray([]),s.istopnode&&this.set("root",c),d.push(c)}),this),this.set("nodes",i.observableArray(d));break;case"root":break;default:this.set(l,s)}}),this),this.tree=this.constructTree(),this.set("selectedNode",i.computed((function(){return s.find(t.get("nodes")(),(function(e){return e.selected()}),this)})));var l=this.get("root");l&&e.selectRoot&&l.selected(!0),this.graphCards=i.computed((function(){var e=[];if(this.get("cards")){var t=this.get("cards")();this.get("nodegroups").filter((function(e){return!1==!!e.parentnodegroup_id}),this).forEach((function(n){e=e.concat(t.filter((function(e){return e.nodegroup_id===n.nodegroupid}),this))}),this)}return e}),this),this.set("cardwidgets",i.observableArray())},constructTree:function(e,t,n,a){var s={};return e=e||this.get("root"),t=t||this.get("nodes")(),n=n||this.get("edges")(),t.forEach((function(e){s[e.id]=e,i.isObservable(e.childNodes)?a||e.childNodes.removeAll():e.childNodes=i.observableArray([])})),n.forEach((function(e){s[e.domainnode_id].childNodes.unshift(s[e.rangenode_id])})),n.forEach((function(e){s[e.domainnode_id].childNodes.sort((function(e,t){return e.attributes.source.sortorder==t.attributes.source.sortorder?0:e.attributes.source.sortorder<t.attributes.source.sortorder?-1:1}))})),e},loadDomainConnections:function(){return this.get("domain_connections_loaded")?Promise.resolve():this.getValidDomainClasses("",(function(e){this.set("domain_connections",e),this.set("domain_connections_loaded",!0)}),this)},isNodeInParentGroup:function(e){var t=!1,n=e.nodeGroupId();if(n){var a=s.find(this.get("nodes")(),(function(e){return e.nodeid===n}));this.getChildNodesAndEdges(a).nodes.find((function(e){return e.nodeGroupId()!==n}))&&(t=!0)}return t},isNodeInChildGroup:function(e){var t=e.nodeGroupId();return!!t&&!!this.getParentNodesAndEdges(e).nodes.find((function(e){var n=e.nodeGroupId();return n&&n!==t}))},isGroupSemantic:function(e){return s.every(this.getGroupedNodes(e),(function(e){return"semantic"===e.datatype()}),this)},getGroupedNodes:function(e){var t=e.nodeGroupId();return t?s.filter(this.get("nodes")(),(function(e){return e.nodeGroupId()&&e.nodeGroupId()===t})):[e]},getParentNodesAndEdges:function(e){var t=this,n=[],a=[],i=t.get("edges")().find((function(t){return t.rangenode_id===e.nodeid}));if(i){var s=t.get("nodes")().find((function(e){return e.nodeid===i.domainnode_id}));n.push(s),a.push(i);var l=t.getParentNodesAndEdges(s);n=n.concat(l.nodes),a=a.concat(l.edges)}return{nodes:n,edges:a}},getChildNodesAndEdges:function(e){var t=this,n=[],a=[];return t.get("edges")().filter((function(t){return t.domainnode_id===e.nodeid})).forEach((function(e){var i=t.get("nodes")().find((function(t){return t.nodeid===e.rangenode_id}));n.push(i),a.push(e);var s=t.getChildNodesAndEdges(i);n=n.concat(s.nodes),a=a.concat(s.edges)}),t),{nodes:n,edges:a}},_doRequest:function(t,n,a,i){var s=this;return e.ajax(e.extend({complete:function(e,t){"function"==typeof n&&n.call(a||s,e,t),i&&s.trigger(i,s,e)}},t))}})}.apply(t,a))||(e.exports=i)},46839:function(e,t,n){var a,i;a=[n(84490),n(54922),n(46186),n(40501)],void 0===(i=function(e,t,n,a){return a.extend({url:n.urls.node,initialize:function(n){var a=this;a.graph=n.graph,a.datatypelookup=n.datatypelookup,a.layer=n.layer,a.icons=n.icons||[],a.mapSource=n.mapSource,a.loading=n.loading,a.permissions=n.permissions,a.ontology_namespaces=n.ontology_namespaces||{},n.url&&(a.url=n.url),n.source.config&&0===e.keys(n.source.config).length&&(n.source.config=null),a._node=t.observable(""),a.selected=t.observable(!1),a.filtered=t.observable(!1),a.name=t.observable(""),a.description=t.observable(null),a.slug=t.observable(null),a.alias=t.observable(null),a.hasCustomAlias=t.observable(!1),a.nodeGroupId=t.observable("");var i=t.observable("");a.datatype=t.computed({read:function(){return i()},write:function(e){if(i()!==e){var t=a.datatypelookup[e];if(t){var n=t.defaultconfig;a.setupConfig(n)}i(e)}},owner:this}),a.datatypeDataBearing=t.computed((function(){var e=!1;return a.datatype()&&a.datatypelookup[a.datatype()]&&(e=!!a.datatypelookup[a.datatype()].defaultwidget_id),e})),a.datatypeIsSearchable=t.computed((function(){var e=!1,t=a.datatypelookup[a.datatype()];return t&&t.configname&&(e=t.issearchable),e})),a.datatypeConfigComponent=t.computed((function(){var e=null,t=a.datatypelookup[a.datatype()];return t&&t.configname&&(e=t.configname),e})),a.ontologyclass=t.observable(""),a.parentproperty=t.observable(""),a.ontology_cache=t.observableArray().extend({deferred:!0}),a.configKeys=t.observableArray(),a.config={},a.issearchable=t.observable(!0),a.isrequired=t.observable(!0),a.fieldname=t.observable(),a.exportable=t.observable(!1),a.parse(n.source),a.validclasses=t.computed((function(){return a.parentproperty()?e.chain(a.ontology_cache()).sortBy((function(e){return e.class})).filter((function(e){return e.property===a.parentproperty()})).pluck("class").value():e.chain(a.ontology_cache()).sortBy((function(e){return e.class})).uniq((function(e){return e.class})).pluck("class").value()}),this),a.istopnode||(a.validproperties=t.computed((function(){return a.ontologyclass()?e.chain(a.ontology_cache()).sortBy((function(e){return e.property})).filter((function(e){return e.class===a.ontologyclass()})).pluck("property").value():e.chain(a.ontology_cache()).sortBy((function(e){return e.property})).uniq((function(e){return e.property})).pluck("property").value()}),this)),a.iconclass=t.computed((function(){var e=a.datatypelookup[a.datatype()];return e?e.iconclass:""})),a.json=t.computed((function(){var n=a.configKeys(),i=null;n.length>0&&(i={},e.each(n,(function(e){i[e]=a.config[e]()})));var s=t.toJS({name:a.name,datatype:a.datatype,nodegroup_id:a.nodeGroupId,description:a.description,slug:a.slug,ontologyclass:a.ontologyclass,parentproperty:a.parentproperty,config:i,issearchable:a.issearchable,isrequired:a.isrequired,fieldname:a.fieldname,exportable:a.exportable,alias:a.alias,hascustomalias:a.hasCustomAlias});return JSON.stringify(e.extend(JSON.parse(a._node()),s))})),a.dirty=t.computed((function(){return a.json()!==a._node()})).extend({rateLimit:100}),a.isCollector=t.computed((function(){return a.nodeid===a.nodeGroupId()})),a.selected.subscribe((function(e){e&&a.getValidNodesEdges()})),a.ontologyclass_friendlyname=t.computed((function(){return a.getFriendlyOntolgyName(a.ontologyclass())})),a.parentproperty_friendlyname=t.computed((function(){return a.getFriendlyOntolgyName(a.parentproperty())}))},getFriendlyOntolgyName:function(t){if(t){var n=e.chain(this.ontology_namespaces).keys().find((function(e){return-1!==t.indexOf(e)})).value();if(n){var a=this.ontology_namespaces[n];return a?t.replace(n,a+":"):t.replace(n,"")}return t}return""},parse:function(e){var n=this;n._node(JSON.stringify(e)),n.name(t.unwrap(e.name)),n.nodeGroupId(e.nodegroup_id),n.datatype(e.datatype),n.description(e.description),n.slug(e.slug),n.ontologyclass(e.ontologyclass),n.parentproperty(e.parentproperty),n.issearchable(e.issearchable),n.isrequired(e.isrequired),n.fieldname(e.fieldname),n.exportable(e.exportable),n.alias(e.alias),n.hasCustomAlias(e.hascustomalias),e.config&&n.setupConfig(e.config),n.nodeid=e.nodeid,n.istopnode=e.istopnode,n.set("id",n.nodeid),n.set("graph_id",e.graph_id)},setupConfig:function(n){var a=this,i=[],s=this.datatypelookup[this.datatype()];if(s&&s.defaultconfig&&n){var l=s.defaultconfig;e.each(l,(function(e,t){Object.prototype.hasOwnProperty.call(n,t)||(n[t]=e)}))}e.each(n,(function(e,n){t.isObservable(a.config[n])?a.config[n](e):a.config[n]=Array.isArray(e)?t.observableArray(e):t.observable(e),i.push(n)})),a.configKeys(i)},reset:function(){this.parse(JSON.parse(this._node()),self)},save:function(e,t){var n="POST";return this._doRequest({type:n,url:this._getURL(n),data:JSON.stringify(this.toJSON())},(function(t,n,a){var i;("function"==typeof e&&e.call(this,t,n,a),"success"===n)&&(this.alias(null===(i=t.responseJSON.updated_values)||void 0===i?void 0:i.node.alias),this._node(this.json()))}),t,"save")},toJSON:function(){return JSON.parse(this.json())},toggleIsCollector:function(){var e=this.nodeid,t=this;this.isCollector()&&(e=this.graph.getParentNode(this).nodeGroupId()),this.graph.getChildNodesAndEdges(this).nodes.forEach((function(n){n.nodeGroupId()===t.nodeGroupId()&&(n.nodeGroupId(e),n._node(n.json()))})),this.nodeGroupId(e)},getValidNodesEdges:function(){this.graph.getValidNodesEdges(this.nodeid,(function(e){this.ontology_cache.removeAll(),void 0!==e&&e.forEach((function(e){e.ontology_classes.forEach((function(t){this.ontology_cache.push({property:e.ontology_property,class:t})}),this)}),this)}),this)},_getURL:function(e){var t=this.get("graph_id");return t||(t=""),this.url.indexOf("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa")>-1?this.url.replace("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",t):this.url+t}})}.apply(t,a))||(e.exports=i)},70147:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,s,l,d=[],c=!0,p=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(d.push(a.value),d.length!==t);c=!0);}catch(e){p=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw i}}return d}}(e,t)||_unsupportedIterableToArray(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(20198),n(46186),n(10762),n(40501),n(54922),n(58420),n(84490)],void 0===(i=function(e,t,n,a,i,s,l){return a.extend({url:t.urls.graph,initialize:function(e){var t=this;this.templateId=i.observable(t.get("graph").template_id),this.cards=e.cards||[],this.preview=e.preview,this.userisreviewer=e.userisreviewer,this.set("graphid",i.observable()),this.set("config",{}),t.configKeys=i.observableArray(),this._data=i.observable("{}"),this.configJSON=i.observable({}),this.configState={},this.configKeys.subscribe((function(e){var a;n[t.templateId()]?t.defaultConfig=n[t.templateId()].defaultconfig:t.defaultConfig={},e.length&&(t.configState={},a=t.get("config"),l.each(e,(function(e){Object.prototype.hasOwnProperty.call(t.defaultConfig,e)&&(t.configState[e]=i.unwrap(a[e]))})),t.configState=s.fromJS(t.configState))})),this.resetConfigs=function(e){this.configKeys().forEach((function(n){Object.prototype.hasOwnProperty.call(t.defaultConfig,n)&&JSON.stringify(t.configState[n]())!==JSON.stringify(e[n])&&s.fromJS(e,t.configState)}))},this.relatedResourcesLookup=i.observable({}),e.related_resources&&this.updateRelatedResourcesLookup(e.related_resources),this.graph=e.graph,this.parse(e.graph)},parse:function(e){var t=this;this._attributes=e,l.each(e,(function(e,a){switch(a){case"graphid":this.set("id",e),this.get("graphid")(e);break;case"template_id":t.templateId(e),this.set(a,i.computed({read:function(){return t.templateId()},write:function(e){var a,s=[],d=n[e].defaultconfig;for(a in d)d[a]=i.observable(d[a]);var c=this.get("config");for(a in this.set("config",l.defaults(c,d)),d)!1===l.contains(t.configKeys(),a)&&s.push(a);t.templateId(e),t.configKeys(t.configKeys().concat(s))},owner:this}));break;case"config":var s={},d=[];t.configKeys.removeAll(),l.each(e,(function(e,t){s[t]=e,d.push(t)})),this.set(a,s),t.configKeys(d);break;default:this.set(a,e)}}),this),this._data(JSON.stringify(this.toJSON()))},updateRelatedResourcesLookup:function(e){for(var n=this.relatedResourcesLookup(),a=0,s=Object.entries(e);a<s.length;a++){var l,d,c,p,f=_slicedToArray(s[a],2),v=f[0],h=f[1];if(n[v])l=n[v].loadedRelatedResources,d=n[v].paginator,c=n[v].remainingResources;else l=i.observableArray(),c=i.observable(),d=i.observable(),p=h.related_resources?h.related_resources.total.value:h.resources?h.resources.length:0,n[v]={graphId:v,loadedRelatedResources:l,name:h.name||h.related_resources.node_config_lookup[v].name,paginator:d,remainingResources:c,totalRelatedResources:p};if(d(h.paginator),h.paginator||l.removeAll(),h.related_resources){var b,m=_createForOfIteratorHelper(h.related_resources.resource_relationships);try{for(m.s();!(b=m.n()).done;){var g=b.value,x=h.related_resources.related_resources.find((function(e){return e.resourceinstanceid===g.resourceinstanceidto||e.resourceinstanceid===g.resourceinstanceidfrom||this.attributes&&e.resourceinstanceid===this.attributes.graph.graphid}));x&&l.push({displayName:x.displayname,resourceinstanceid:x.resourceinstanceid,relationship:g.relationshiptype_label,link:t.urls.resource_report+x.resourceinstanceid})}}catch(e){m.e(e)}finally{m.f()}var y=h.related_resources.resource_relationships.length,w=h.related_resources.total.value-l().length;c(w<y?w:y)}else if(h.resources.length>0){var k,S=_createForOfIteratorHelper(h.resources);try{for(S.s();!(k=S.n()).done;){var _=k.value;l.push({displayName:_.displayname,relationship:_.relationships[0],link:t.urls.resource_report+_.resourceinstanceid})}}catch(e){S.e(e)}finally{S.f()}}}this.relatedResourcesLookup(n)},getRelatedResources:function(n,a){return e.ajax({context:this,url:t.urls.related_resources+this.attributes.resourceid+"?resourceinstance_graphid=".concat(a.graphId)+(n?"&paginate=false":"&page=".concat(a.paginator().next_page_number))}).done((function(e){this.updateRelatedResourcesLookup(_defineProperty({},a.graphId,e.paginator?e:{related_resources:e,paginator:null}))}))},reset:function(){this._attributes=JSON.parse(this._data()),this.parse(this._attributes)},toJSON:function(){var e={},t=this;for(var n in["template_id","config"])if(i.isObservable(this.attributes[n]))e[n]=this.attributes[n]();else if("config"===n){var a=this.configKeys(),s=null;a.length>0&&(s={},l.each(a,(function(e){s[e]=i.unwrap(t.get("config")[e])}))),e[n]=s}else e[n]=this.attributes[n];return e},save:function(){return a.prototype.save.call(this,(function(e,t,n){"success"===t&&this._data(JSON.stringify(this.toJSON()))}),this)}})}.apply(t,a))||(e.exports=i)},28718:function(e,t,n){var a,i;a=[n(46186),n(40501),n(94242)],void 0===(i=function(e,t){return t.extend({url:e.urls.tile,defaults:{tileid:"",data:"",nodegroup_id:"",parenttile_id:"",resourceinstance_id:""},save:function(e,t,n){n||(n=new FormData),delete n.data,n.append("data",JSON.stringify(this.toJSON()));var a="POST";return this._doRequest({type:a,processData:!1,contentType:!1,url:this._getURL(a),data:n},e,t,"save")}})}.apply(t,a))||(e.exports=i)},83994:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#pluginsData").getAttribute("plugins"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},77078:function(e,t,n){Promise.all([n.e(3556),n.e(5838),n.e(6679),n.e(2171),n.e(5453)]).then((function(){var e=[n(20198),n(46186),n(86564),n(47076),n(42026),n(80039),n(93256),n(54955),n(36046),n(5107),n(57649),n(32163),n(8329),n(94333),n(20346),n(36679)];(function(e,t,n,a,i,s,l,d,c,p,f,v,h,b,m){return new(b.extend({initialize:function(n){var g=new a({id:e("#selected-conceptid").val()}),x=new i({el:e("#jqtree")[0],model:g,url:t.urls.concept_tree+"semantic"}),y=new i({el:e("#ddtree")[0],model:g,url:t.urls.concept_tree+"collections"}),w=new s({el:e("#concept_report")[0],model:g,mode:"semantic",viewModel:this.viewModel}),k=new l({el:e("#rdm-concept-search-container")[0],model:g});g.on({change:function(){window.history.pushState({},"conceptid",g.get("id"))},save:function(){x.render(),y.render(),w.render(),g.reset()},delete:function(){x.render(),y.render(),w.render(),g.reset()},collection_created:function(){y.render()}}),x.on({conceptMoved:function(){w.render()},conceptSelected:function(e){g.clear(),g.set("id",e),w.mode="semantic",w.render()}}),y.on({conceptMoved:function(){w.render()},conceptSelected:function(e){g.clear(),g.set("id",e),w.mode="collections",w.render()}}),w.on({conceptSelected:function(e){g.clear(),g.set("id",e),w.mode="semantic",w.render()},dropdownConceptSelected:function(e){g.clear(),g.set("id",e),w.mode="collections",w.render()},parentsChanged:function(){x.render(),w.render()},conceptsImported:function(){w.render()}}),k.on("select2-selecting",(function(e,t){g.clear(),g.set("id",e.val),x.render(),w.render()}),k),e('a[href="#rdm-panel"]').on("click",(function(){var e=x.tree.tree("getSelectedNode");g.clear(),g.set("id",e.id||""),w.mode="semantic",w.render()})),e('a[href="#dropdown-panel"]').on("click",(function(){var e=y.tree.tree("getSelectedNode");g.clear(),g.set("id",e.id||""),w.mode="collections",w.render()})),e('a[data-toggle="#add-scheme-form"]').on("click",(function(){var t=new d({el:e("#add-scheme-form")});t.modal.modal("show"),t.on({conceptSchemeAdded:function(e){x.render(),g.set("id",e.id),w.render()}})})),e('a[data-toggle="#export-scheme-form"]').on("click",(function(){new c({el:e("#export-scheme-form")}).modal.modal("show")})),e('a[data-toggle="#delete-scheme-form"]').on("click",function(){var n=new p({el:e("#delete-scheme-form"),model:null,viewModel:this.viewModel});n.modal.modal("show"),n.on({conceptSchemeDeleted:function(){window.location=t.urls.rdm}})}.bind(this)),e('a[data-toggle="#import-scheme-form"]').on("click",function(){var t=this,n=new f({el:e("#import-scheme-form"),model:g,viewModel:this.viewModel});n.modal.modal("show"),n.on({conceptSchemeAdded:function(e,n){"success"===n?(x.render(),g.set("id",e.responseJSON.id),w.render()):t.viewModel.alert(new m("ep-alert-red",e.responseJSON))}})}.bind(this)),e('a[data-toggle="#add-collection-form"]').on("click",(function(){var t=new v({el:e("#add-collection-form")});t.modal.modal("show"),t.on({collectionAdded:function(e){y.render(),g.set("id",e.id),w.render()}})})),e('a[data-toggle="#delete-collection-form"]').on("click",(function(){var t=new h({el:e("#delete-collection-form"),model:null});t.modal.modal("show"),t.on({collectionDeleted:function(){y.render()}})})),e('a[data-toggle="#export-all-collections"]').on("click",(function(){window.open(t.urls.export_concept_collections,"_blank")})),b.prototype.initialize.call(this,n)}}))}).apply(null,e)})).catch(n.oe)},10762:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#reportTemplateData").getAttribute("reportTemplates"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},44746:function(e,t,n){var a,i;a=[n(54922),n(8373),n(95963)],void 0===(i=function(e,t,n){return e.components.register("default-report",{viewModel:function(e){e.configKeys=[],t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},12845:function(e,t,n){var a,i;a=[n(84490),n(54922),n(58420),n(46186),n(8373),n(42653),n(75892),n(84714)],void 0===(i=function(e,t,n,a,i,s){return t.components.register("image-report",{viewModel:function(s){var l=this;s.configKeys=["nodes"],i.apply(this,[s]),l.imgs=t.computed((function(){var i=[],s=t.unwrap(l.nodes);return l.tiles().forEach((function(d){e.each(d.data,(function(l,d){l=n.toJS(l),Array.isArray(l)&&l.forEach((function(n){n.status&&n.type&&"uploaded"===n.status&&n.type.indexOf("image")>-1&&e.contains(s,d)&&i.push({src:(a.urls.url_subpath+t.unwrap(n.url)).replace("//","/"),alt:n.name})}))}),l)}),l),0===i.length&&(i=[{src:a.urls.media+"img/photo_missing.png",alt:""}]),i}));var d=[];t.unwrap(l.report.cards).forEach((function getCardWidgets(e){d=d.concat(e.model.get("widgets")()),e.cards().forEach((function(e){getCardWidgets(e)}))})),this.nodeOptions=t.observableArray(d.map((function(e){return e.node})).filter((function(e){return"file-list"===t.unwrap(e.datatype)})))},template:s})}.apply(t,a))||(e.exports=i)},28396:function(e,t,n){var a,i;a=[n(54922),n(58420),n(84490),n(46186),n(28459),n(35227),n(64058),n(88347)],void 0===(i=function(e,t,n,a,i,s,l,d){e.components.register("report-header-map",{viewModel:function(d){var c=this;c.translations=a.translations;var p=e.computed((function(){var a=[];return e.unwrap(d.tiles).forEach((function(e){n.each(e.data,(function(e){"features"in e&&(a=a.concat(t.toJS(e.features)))}),this)}),this),{type:"FeatureCollection",features:a}}));p().features.length>0&&(d.bounds=i(p()),d.fitBoundsOptions={padding:40}),d.sources=Object.assign({"report-header-map-data":{type:"geojson",data:p()}},d.sources),d.layers=l("","report-header-map-data",void 0,[],!0),s.apply(this,[Object.assign({},d,{activeTab:e.observable(!1),zoom:null})]),p.subscribe((function(e){var t=c.map();t&&t.getStyle()&&t.getSource("report-header-map-data").setData(e)}))},template:d})}.apply(t,a))||(e.exports=i)},71313:function(e,t,n){var a,i;a=[n(84490),n(54922),n(58420),n(8994),n(4020)],void 0===(i=function(e,t,n,a,i){return t.components.register("map-report",{viewModel:a,template:i})}.apply(t,a))||(e.exports=i)},94641:function(e,t,n){var a,i;a=[n(54922),n(10053),n(69106)],void 0===(i=function(e,t,n){return e.components.register("tabbed-report",{viewModel:t,template:n})}.apply(t,a))||(e.exports=i)},34924:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#resourceTypeData").getAttribute("resourceTypes"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},38814:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#searchComponentData").getAttribute("searchComponents"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.componentpath}))),n}.apply(t,a))||(e.exports=i)},27905:function(e,t){var n;void 0===(n=function(){return{colorLuminance:function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,a,i="#";for(a=0;a<3;a++)n=parseInt(e.substr(2*a,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}}}.apply(t,[]))||(e.exports=n)},20566:function(e,t,n){var a;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}void 0===(a=function(){return function(e){var t,a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;try{n(271)("./".concat(i))}catch(e){n(80574)("./".concat(i))}}}catch(e){a.e(e)}finally{a.f()}}}.apply(t,[]))||(e.exports=a)},68532:function(e,t,n){var a,i;a=[n(46186),n(54922),n(465)],void 0===(i=function(e,t,n){return{isFeatureClickable:function(e,n){var a=t.unwrap(n.selectedFeatureIds),i=t.unwrap(n.selectedTool);return!(null!=i||a&&a.length)&&e.properties.resourceinstanceid},getPopupTemplate:function(e){return n},processData:function(e){return e}}}.apply(t,a))||(e.exports=i)},37395:function(e,t,n){var a,i;a=[n(54922),n(46186)],void 0===(i=function(e,t){var n={makeFriendly:function(t){if(t=e.unwrap(t)){var n=t.split("/");return n[n.length-1]}return""},getSelect2ConfigForOntologyProperties:function(e,a,i,s,l){return{value:e,clickBubble:!1,placeholder:s,closeOnSelect:!0,allowClear:l||!1,ajax:{url:function(){return t.urls.ontology_properties},data:function(e,t){var n={domain_ontology_class:a,range_ontology_class:i,ontologyid:""};return n},dataType:"json",quietMillis:250,results:function(e,t,n){var a=e;return""!==n.term&&(a=e.filter((function(e){return e.toUpperCase().includes(n.term.toUpperCase())}))),{results:a}}},id:function(e){return e},formatResult:n.makeFriendly,formatSelection:n.makeFriendly,initSelection:function(t,n){n(e())}}}};return n}.apply(t,a))||(e.exports=i)},32274:function(e,t,n){var a,i;a=[n(46186)],i=function(e){var t={},n={lookupResourceInstanceData:function(n){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t[n]&&a?Promise.resolve(t[n]):window.fetch("".concat(e.urls.search_results,"?id=").concat(n,"&tiles=true")).then((function(e){if(e.ok)return e.json()})).then((function(e){return t[n]=e.results.hits.hits[0],t[n]}))},getNodeValues:function(e,t,n){var a,i=[],s=!!e.returnTiles,resolveWidgetLabel=function(e,t,n){var a,i,s="",l=e.split(".");1===l.length?s=l[0]:2===l.length&&(a=l[0],s=l[1]),a&&(i=t.filter((function(e){return e.name===a})).map((function(e){return e.cardid})),n=n.filter((function(e){return i.includes(e.card_id)})));var d=n.filter((function(e){return e.label===s})).map((function(e){return e.node_id}));return(!d||d.length>1)&&console.log("Can't resolve path '",e,"' into a single nodeid"),d};if(e.nodeId)a=[e.nodeId];else if(e.nodeName){var l=n.nodes.find((function(t){return t.name===e.nodeName}));l&&(a=l.nodeid)}else e.widgetLabel&&(a=resolveWidgetLabel(e.widgetLabel,n.cards,n.widgets));if(a&&1===a.length){if(a=a[0],i=t.filter((function(e){return Object.keys(e.data).includes(a)})),e.where)if(e.where.nodeId)i=i.filter((function(t){return!!e.where.contains&&t.data[e.where.nodeId].includes(e.where.contains)}));else if(e.where.widgetLabel){var d=resolveWidgetLabel(e.where.widgetLabel,n.cards,n.widgets);d&&1===d.length&&(i=i.filter((function(t){return!!e.where.contains&&t.data[d].includes(e.where.contains)})))}return s?i:i.map((function(e){return e.data[a]})).flat(1/0)}}};return n}.apply(t,a),void 0===i||(e.exports=i)},9999:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(20198),n(54922),n(59732),n(46186),n(3942)],i=function(e,t,n,a,i){return function(e){var s=this;this.alert=e.alert,this.fileAdded=t.observable(!1),this.fileInfo=t.observable({name:"",size:""}),this.formData=new window.FormData,this.uniqueidClass=t.computed((function(){return"unique_id_"+n.generate()})),this.response=t.observable(),this.validationError=t.observable(),this.submit=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(e,t){var l;return _regeneratorRuntime().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return(l=t||s.formData).append("action",e),["start","read"].includes(e)&&(s.loadId||(s.loadId=n.generate())),l.append("load_id",s.loadId),l.append("module",this.moduleId),d.abrupt("return",fetch(a.urls.etl_manager,{method:"POST",body:l,credentials:"include",headers:{"X-CSRFToken":i.get("csrftoken")}}));case 6:case"end":return d.stop()}}),_callee,this)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!1,autoQueue:!1,clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){s.dropzone=this,this.on("addedfile",s.addFile),this.on("error",(function(e,t){e.error=t}))}}}}.apply(t,a),void 0===i||(e.exports=i)},66186:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(54922),n(84490),n(46186),n(62666),n(86535)],i=function(e,t,n,a){return function(i){var s,l,d=this;!i.card&&e.unwrap(i.form.card)&&(i.card=e.unwrap(i.form.card)),this.inResourceEditor=location.pathname.includes(n.urls.resource_editor),this.configKeys=i.configKeys||[],this.showIds=i.showIds||!1,this.state=i.state||"form",this.preview=i.preview,this.loading=i.loading||e.observable(!1),this.card=i.card,this.showGrid=null==i||null===(s=i.form)||void 0===s?void 0:s.showGrid,this.toggleGrid=null==i||null===(l=i.form)||void 0===l?void 0:l.toggleGrid,this.card.hideEmptyNodes=i.hideEmptyNodes,this.card.showIds=this.showIds,this.tile=i.tile,this.reportExpanded=e.observable(!0),this.form=i.form,this.provisionalTileViewModel=i.provisionalTileViewModel,this.reviewer=i.reviewer,this.expanded=e.observable(!0),this.showHeaderLine=i.showHeaderLine,this.config=this.card.model?this.card.model.get("config"):{},t.each(this.configKeys,(function(e){d[e]=d.config[e]})),this.showChildCards=e.computed((function(){return 0===this.card.widgets().length}),this),this.initialize=function(){d.card.showForm(!0),d.tiles=e.computed((function(){var e=[];return d.tile?d.getTiles(d.tile):(d.card.tiles().forEach((function(t){d.getTiles(t,e)})),e)}),d),e.isObservable(i.tiles)&&(i.tiles(d.tiles()),d.tiles.subscribe((function(e){i.tiles(e)}))),d.dirty=e.computed((function(){return!e.unwrap(d.tiles)||e.unwrap(d.tiles).reduce((function(e,t){return t.dirty()&&(e=!0),e}),!1)})),e.isObservable(i.dirty)&&d.dirty.subscribe((function(e){i.dirty(e)})),d.preview&&(d.card.newTile||(d.card.newTile=d.card.getNewTile()),d.tile=d.card.newTile),d.card.tiles().length>0&&d.card.showForm(!1),d.card.preSaveCallback&&d.card.preSaveCallback(d.saveTile)},this.revealForm=function(e){e.selected()||e.selected(!0),setTimeout((function(){e.showForm(!0)}),50)},this.getTiles=function(e,t){return t=t||[e],e.cards.forEach((function(e){e.tiles().forEach((function(e){t.push(e),d.getTiles(e,t)}))})),t},this.beforeMove=function(e){e.cancelDrop=e.sourceParent!==e.targetParent},this.startDrag=function(t,n){e.utils.domData.get(n.item[0],"ko_sortItem").selected(!0)},this.getValuesByDatatype=function(n){var a={};if(d.tile&&d.form){var i=d.tile.getAttributes().data;t.each(i,(function(t,i){var s=d.form.nodeLookup[i];s&&e.unwrap(s.datatype)===n&&(a[e.unwrap(s.id)]={name:e.unwrap(s.name),value:t})}))}return a},this.selectWorkflowTile=function(e){e.selected(!0),d.tile=e,i.dirty(!0)},this.saveTile=function(t){var n,s;d.loading(!0),d.tile.transactionId=(null===(n=i.form)||void 0===n?void 0:n.workflowId)||void 0,d.tile.resourceinstance_id=d.tile.resourceinstance_id||e.unwrap(null===(s=i.form)||void 0===s?void 0:s.resourceId),d.tile.save((function(e){var t;d.loading(!1),null!=i&&null!==(t=i.form)&&void 0!==t&&t.error&&i.form.error(e.responseJSON.message),i.pageVm.alert(new a("ep-alert-red",e.responseJSON.title,e.responseJSON.message,null,(function(){}))),i.form.onSaveError&&i.form.onSaveError(d.tile)}),(function(){d.loading(!1),"function"==typeof d.onSaveSuccess&&d.onSaveSuccess(),i.form.onSaveSuccess&&i.form.onSaveSuccess(d.tile),"function"==typeof t&&t()}))};var saveTileInWorkflow=function(){d.saveTile((function(){i.form.complete(!0)}))};i.save&&(i.save=saveTileInWorkflow),i.form&&i.form.save&&(i.form.save=saveTileInWorkflow),"workflow"===i.renderContext&&"n"===i.form.componentData.cardinalityOverride&&(d.card.selected(!0),d.inResourceEditor=!0),this.saveTileAddNew=function(){d.saveTile((function(){window.setTimeout((function(){d.card.selected(!0)}),1)}))},this.deleteTile=function(){d.loading(!0),d.tile.deleteTile((function(e){d.loading(!1),i.pageVm.alert(new a("ep-alert-red",e.responseJSON.title,e.responseJSON.message,null,(function(){}))),i.form.onDeleteError&&i.form.onDeleteError(d.tile)}),(function(){d.loading(!1),"function"==typeof d.onDeleteSuccess&&d.onDeleteSuccess(),i.form.onDeleteSuccess&&i.form.onDeleteSuccess(d.tile)}))},this.createParentAndChild=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(e,t){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.card.saveParentTile(e);case 3:n.sent&&t.selected(!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),_callee,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),this.initialize()}}.apply(t,a),void 0===i||(e.exports=i)},84263:function(e,t,n){var a,i;a=[n(54922),n(58420),n(46186)],void 0===(i=function(e,t,n){return function(e){this.widgets=e.widgets||[],this.constraint=e.constraint,this.getSelect2ConstraintConfig=function(t){return{clickBubble:!0,disabled:!1,data:{results:this.widgets.map((function(e){return{text:e.label(),id:e.node.nodeid}}))},value:this.constraint.nodes,multiple:e.multiple||!0,closeOnSelect:!1,placeholder:t||n.translations.cardConstraintsPlaceholder,allowClear:!0}},this.update=function(e){this.constraint.nodes(e.nodes),this.constraint.constraintid(e.constraintid),this.constraint.uniquetoallinstances(e.uniquetoallinstances)},this.toJSON=function(){return t.toJS(this.constraint)}}}.apply(t,a))||(e.exports=i)},73770:function(e,t,n){var a,i;a=[n(54922)],void 0===(i=function(e){return function(){this.card.staging=e.observableArray(),this.staging=this.card.staging;var t=this;this.card.stageTile=function(e,n){n.preventDefault(n),t.staging.indexOf(e.tileid)<0?t.staging.push(e.tileid):t.staging.remove(e.tileid)}}}.apply(t,a))||(e.exports=i)},56321:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(46611),n(88280),n,n(59732),n(89327),n(50021),n(94242)],i=function(e,t,a,i,s,l,d,c,p,f){var v=function isChildSelected(e){var t=!1,n=[];return"tileid"in e?n=a.unwrap(e.cards):"model"in e&&(n=a.unwrap(e.cards).concat(a.unwrap(e.tiles),a.unwrap(e.widgets))),n.forEach((function(e){(e.selected&&e.selected()||isChildSelected(e))&&(t=!0)})),t},h=function doesChildHaveProvisionalEdits(e){var t=!1,n="tileid"in e?"cards":"tiles";return a.unwrap(e[n]).forEach((function(e){(e.hasprovisionaledits&&e.hasprovisionaledits()||doesChildHaveProvisionalEdits(e))&&(t=!0)})),t};return function CardViewModel(d){var c,b,m=n(50021),g=this,x=d.hover||a.observable(),y=d.scrollTo||a.observable(),w=d.filter||a.observable(),k=d.loading||a.observable(),S=a.observableArray(),_=a.observableArray(),T=a.observable(!0),C=d.graphModel.get("nodegroups"),I=d.multiselect||!1,$=d.card.is_writable||!1;this.params=d;var j,P=[{uniquetoallinstances:!1,nodes:[],cardid:d.card.cardid,constraintid:p.generate()}];j=null!==(c=d.card.constraints)&&void 0!==c&&c.length?d.card.constraints:P;var O=d.appliedFunctions,A=d.primaryDescriptorFunction;b=d.multiselect?d.selection||a.observableArray([]):d.selection||a.observable();var D=t.find(a.unwrap(C),(function(e){return a.unwrap(e.nodegroupid)===a.unwrap(d.card.nodegroup_id)})),N=new l({data:t.extend(d.card,{widgets:d.cardwidgets,nodes:d.graphModel.get("nodes"),nodegroup:D,constraints:j}),datatypelookup:d.graphModel.get("datatypelookup")}),applySelectedComputed=function(e){e.forEach((function(e){e.parent=g,e.selected=a.pureComputed({read:function(){return b()===this},write:function(e){e&&b(this)},owner:e}),e.hovered=a.pureComputed({read:function(){return x()===this},write:function(e){!0===e&&x(this),null===e&&x(null)},owner:e})}))};applySelectedComputed(N.widgets());var E,L,R=N.widgets.subscribe((function(e){applySelectedComputed(e)}));t.extend(this,D,{isWritable:$,model:N,appliedFunctions:O,primaryDescriptorFunction:A,allowProvisionalEditRerender:T,multiselect:d.multiselect,widgets:N.widgets,parent:d.tile,parentCard:d.parentCard,expanded:a.observable(!1),topCards:d.topCards,perms:S,constraints:d.constraints||P,permsLiteral:_,scrollTo:a.pureComputed((function(){return y()===this}),this),fullyProvisional:a.pureComputed((function(){var e,n=t.map(this.tiles(),(function(e){var n=0===t.keys(i.toJS(e.data)).length;return null!==a.unwrap(e.provisionaledits)&&n?2:null===a.unwrap(e.provisionaledits)||n?0:1}));return t.reduce(n,(function(e,t){return e+t}))>0&&(e=t.every(n,(function(e){return 2===e}))?"fullyprovisional":"provisional"),e}),this),highlight:a.computed((function(){var e=w();return!!e&&(e=e.toLowerCase(),d.card.name.toLowerCase().indexOf(e)>-1||void 0)}),this),tiles:a.observableArray(t.filter(d.tiles,(function(e){return(!d.tile||e.parenttile_id===d.tile.tileid)&&a.unwrap(e.nodegroup_id)===a.unwrap(d.card.nodegroup_id)})).map((function(e){return new m({tile:e,card:g,graphModel:d.graphModel,resourceId:d.resourceId,displayname:d.displayname,handlers:d.handlers,userisreviewer:d.userisreviewer,cards:d.cards,tiles:d.tiles,provisionalTileViewModel:d.provisionalTileViewModel,selection:b,scrollTo:y,loading:k,filter:w,cardwidgets:d.cardwidgets})}))),cards:a.observableArray(t.filter(d.cards,(function(e){var n=t.find(a.unwrap(C),(function(t){return a.unwrap(t.nodegroupid)===a.unwrap(e.nodegroup_id)}));if(n)return a.unwrap(n.parentnodegroup_id)===a.unwrap(d.card.nodegroup_id)})).map((function(e){return new CardViewModel({card:t.clone(e),graphModel:d.graphModel,tile:null,resourceId:d.resourceId,displayname:d.displayname,handlers:d.handlers,cards:d.cards,tiles:d.tiles,selection:b,multiselect:I,scrollTo:y,loading:k,filter:w,provisionalTileViewModel:d.provisionalTileViewModel,cardwidgets:d.cardwidgets,perms:S,permsLiteral:_,parentCard:g,topCards:d.topCards})}))),hasprovisionaledits:a.computed((function(){return t.filter(d.tiles,(function(e){return(!d.tile||e.parenttile_id===d.tile.tileid)&&a.unwrap(e.nodegroup_id)===a.unwrap(d.card.nodegroup_id)&&a.unwrap(e.provisionaledits)&&0!==t.keys(a.unwrap(e.provisionaledits)).length})).length})),selected:a.pureComputed({read:function(){return g.multiselect?t.contains(b(),this):b()===this},write:function(e){g.multiselect?!0===e?!1===t.contains(b(),this)&&b.push(this):!1===e&&!0===t.contains(b(),this)&&b.remove(this):e&&b(this)},owner:this}).extend({throttle:1}),showForm:a.observable(!1),showSummary:a.pureComputed((function(){return g.canAdd()&&!1===g.showForm()&&g.selected()})),canAdd:a.pureComputed({read:function(){return"n"===this.cardinality||0===this.tiles().length},owner:this}),reorderTiles:function(){k(!0);var n=t.map(g.tiles(),(function(e){return e.getAttributes()}));e.ajax({type:"POST",data:JSON.stringify({tiles:n}),url:s.urls.reorder_tiles,complete:function(){var t,n;k(!1),t=d.resourceId,n=d.displayname,e.get(s.urls.resource_descriptors+t(),(function(e){var t;"string"==typeof e.displayname?n(e.displayname):n(null===(t=e.displayname.find((function(e){return e.language==s.activeLanguage})))||void 0===t?void 0:t.value)}))}})},reorderCards:function(){k(!0);var n=t.map(g.cards(),(function(e,t){return e.model.get("sortorder")(t),{id:e.model.id,name:e.model.get("name")(),sortorder:t}}));e.ajax({type:"POST",data:JSON.stringify({cards:n}),url:s.urls.reorder_cards,complete:function(){k(!1)}})},saveParentTile:(E=_regeneratorRuntime().mark((function _callee(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){if(e&&!e.tileid)e.save((function(e){n(e)}),(function(){t(!0)}));else{if(e&&e.tileid)return void t(!1);g.getNewTile().save((function(e){n(e)}),(function(){t(!0)}))}})));case 1:case"end":return t.stop()}}),_callee)})),L=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=E.apply(e,t);function _next(e){asyncGeneratorStep(i,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,a,_next,_throw,"throw",e)}_next(void 0)}))},function(e){return L.apply(this,arguments)}),getNewTile:function(e){return this.newTile&&!e||(this.newTile=new m({tile:{tileid:"",resourceinstance_id:a.unwrap(d.resourceId),nodegroup_id:a.unwrap(g.model.nodegroup_id),parenttile_id:g.parent?g.parent.tileid:null,data:t.reduce(g.widgets(),(function(e,t){return e[t.node_id()]=null,e}),{})},card:g,graphModel:d.graphModel,resourceId:d.resourceId,displayname:d.displayname,handlers:d.handlers,userisreviewer:d.userisreviewer,cards:d.cards,tiles:d.tiles,selection:b,scrollTo:y,filter:w,provisionalTileViewModel:d.provisionalTileViewModel,loading:k,cardwidgets:d.cardwidgets})),this.newTile},isFuncNode:function(){var e={},t=d.primaryDescriptorFunction;return!(!t||!d.card)&&(["name","description"].forEach((function(n){try{e[t.config.descriptor_types[n].nodegroup_id]=n}catch(e){console.log("No descriptor configuration for "+n)}})),!!e[d.card.nodegroup_id]&&("name"===e[d.card.nodegroup_id]?s.translations.cardFunctionNodeName:s.translations.cardFunctionNodeDesc))}}),this.selected.subscribe((function(e){e&&this.expanded(!0)}),this),this.expanded.subscribe((function(e){e&&this.parent&&this.parent.expanded(!0)}),this),this.isChildSelected=a.computed((function(){return v(this)}),this),this.doesChildHaveProvisionalEdits=a.computed((function(){return h(this)}),this);var M=function expandParents(e){e.parent&&(e.parent.expanded(!0),expandParents(e.parent))};this.isDirty=function(){var e=g.newTile;if(e&&e.dirty()){var t={};for(var n in g.widgets().forEach((function(e){t[e.node.nodeid]=a.unwrap(e.config.defaultValue)})),e.data)if(Object.keys(t).indexOf(n)>-1)return(t[n]||null)==(e.data[n]()||null)!=!0}return!1},this.selectChildCards=function(e){void 0!==e?this.selected(e):!1===this.selected()?(e=!0,this.selected(!0)):(e=!1,this.selected(!1)),this.cards().length>0&&(this.expanded(!0),this.cards().forEach((function(t){t.selectChildCards(e)}),this))};var V=this.highlight.subscribe((function(e){e&&(this.expanded(!0),M(this))}),this);this.copyTile=function(e){var t=g.getNewTile();t.noDefaults=!0,g.showForm(!0),a.mapping.fromJS(a.mapping.toJS(e.data),t.data)},this.disposables=[],this.disposables.push(V),this.disposables.push(R),this.disposables.push(this.scrollTo),this.disposables.push(this.highlight),this.disposables.push(this.hasprovisionaledits),this.disposables.push(this.selected),this.disposables.push(this.canAdd),this.disposables.push(this.isChildSelected),this.disposables.push(this.doesChildHaveProvisionalEdits),this.disposables.push(this.cards.subscribe((function(){this.model.parseNodes.call(this.model)}),this)),this.disposables.push(this.model),this.dispose=function(){f(g)}}}.apply(t,a),void 0===i||(e.exports=i)},22493:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(22023)],void 0===(i=function(e,t,n,a){var i={};return function(s){var l=this;s.configKeys=["placeholder","defaultValue"],this.multiple=s.multiple||!1,this.allowClear=!0,this.displayName=e.observable(""),a.apply(this,[s]),this.valueList=e.computed((function(){var e=l.value()||l.defaultValue();return l.displayName(),!l.multiple&&e&&(e=[e]),Array.isArray(e)?e:[]})),this.valueObjects=e.computed((function(){return l.displayName(),l.valueList().map((function(e){return{id:e,name:i[e]}})).filter((function(e){return e.name}))})),this.displayValue=e.computed((function(){var e=l.value(),t=l.displayName(),n=null;return e&&(n=t),n})),this.setNames=function(){var a=[];l.valueList().forEach((function(s){e.unwrap(s)&&(i[s]?(a.push(i[s]),l.displayName(a.join(", "))):t.ajax(n.urls.get_pref_label+"?valueid="+e.unwrap(s),{dataType:"json"}).done((function(e){i[s]=e.value,a.push(e.value),l.displayName(a.join(", "))})))}))},this.setNames(),this.value.subscribe((function(){l.setNames()})),this.select2Config={value:l.value,clickBubble:!0,multiple:l.multiple,closeOnSlect:!1,placeholder:l.placeholder,allowClear:!0,ajax:{url:n.urls.paged_dropdown,dataType:"json",quietMillis:250,data:function(t,n){return{conceptid:e.unwrap(s.node.config.rdmCollection),query:t,page:n}},results:function(e){return e.results.forEach((function(e){e.collector&&delete e.id})),{results:e.results,more:e.more}}},id:function(e){return e.id},formatResult:function(e){for(var t="",n=0;n<e.depth-1;n++)t+="&nbsp;&nbsp;&nbsp;&nbsp;";return t+e.text},formatSelection:function(e){return e.text},clear:function(){l.value("")},isEmpty:e.computed((function(){return""===l.value()||!l.value()})),initSelection:function(a,s){var d=l.valueList(),setSelectionData=function(e){var t;l.multiple?(e instanceof Array||(e=[e]),t=e.map((function(e){return{id:e,text:i[e]}})),d.forEach((function(e){e!==t[0].id&&t.push({id:e,text:i[e]})})),t[0].id!==d[0]&&t.reverse()):t={id:e,text:i[e]},t&&s(t)};d.forEach((function(a){e.unwrap(a)&&(i[a]?setSelectionData(a):t.ajax(n.urls.concept_value+"?valueid="+e.unwrap(a),{dataType:"json"}).done((function(e){i[a]=e.value,setSelectionData(a)})))}))}}}}.apply(t,a))||(e.exports=i)},54031:function(e,t,n){var a,i;a=[n(46186),n(18543)],void 0===(i=function(e,t){return function(n){var a=this;n.prepData=function(e){return e.forEach((function(e){e.collector&&(e.id=void 0)})),e},t.apply(this,[n]);var setUrl=function(t){t&&a.url(e.urls.dropdown+"?conceptid="+t)};this.node.config.rdmCollection.subscribe(setUrl),setUrl(this.node.config.rdmCollection())}}.apply(t,a))||(e.exports=i)},54085:function(e,t,n){var a,i;a=[n(54922),n(84490),n(22023)],void 0===(i=function(e,t,n){return function(a){var i=this;n.apply(this,[a]);var s=i.configForm?i.defaultValue:i.value;this.node&&this.node.config.options&&(this.options=this.node.config.options,e.unwrap(this.options).forEach((function(t){e.isObservable(t.text)||(t.text=e.observable(t.text))})),this.node.configKeys.valueHasMutated());var l=function flattenOptions(n,a){var i=t.each(n,(function(t,a){n[a]=e.unwrap(t)}));return void 0!==i.id&&a.push(i),i.children&&i.children.forEach((function(e){flattenOptions(e,a)})),a};this.toggleOptionSelection=function(e){var t=!i.isOptionSelected(e);i.setOptionSelection(e,t)},this.setOptionSelection=function(n,a){if(!1===e.unwrap(i.disabled)){var l=e.unwrap(n.id);if(i.multiple){var d=s();s(a?t.union([l],d):t.without(d||[],l))}else a&&(s()===l?s(null):s(l))}},this.isOptionSelected=function(t){var n=!1,a=s();return a&&a.indexOf&&(n=a.indexOf(e.unwrap(t.id))>=0),n},this.flatOptions=e.computed((function(){var t=e.unwrap(i.options)||[],n=[];return t.forEach((function(e){l(e,n)})),n})),this.multiple=!1,this.displayValue=e.computed((function(){var n=i.value(),a=e.unwrap(i.flatOptions),s=null;return n&&(Array.isArray(n)||(n=[n]),s=t.without(t.map(n,(function(n){var i=t.find(a,(function(e){return e.id===n}));return i?e.unwrap(i.text):null})),null).join(", ")),s}))}}.apply(t,a))||(e.exports=i)},5165:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46186),n(46562),n(59732),n(22023),n(58943)],void 0===(i=function(e,t,n,a,i,s,l){return function(i){var d=this;i.configKeys=["acceptedFiles","maxFilesize","maxFiles"],l.apply(this,[i]),this.uploadMulti=t.observable(!0),this.filesForUpload=t.observableArray(),this.uploadedFiles=t.observableArray(),this.unsupportedImageTypes=["tif","tiff","vnd.adobe.photoshop"],this.form&&(e(this.form).on("after-update",(function(e,a){var i=n.filter(a.data,(function(e,n){if(e=t.unwrap(e))return e}));if(!0===a.isParent||0===i.length)d.dropzone&&d.dropzone.removeAllFiles(!0);else if((d.tile===a||n.contains(a.tiles,d.tile))&&200===e.status){d.filesForUpload().length>0&&d.filesForUpload.removeAll();var s=e.responseJSON.data[d.node.nodeid];Array.isArray(s)&&d.uploadedFiles(s),d.dropzone&&d.dropzone.removeAllFiles(!0),d.formData.delete("file-list_"+d.node.nodeid)}})),this.form.on("tile-reset",(function(e){if(d.tile===e||n.contains(e.tiles,d.tile)){if(d.filesForUpload().length>0&&d.filesForUpload.removeAll(),Array.isArray(d.value())){var a=n.filter(d.value(),(function(e){return"uploaded"===t.unwrap(e.status)}));d.uploadedFiles(a)}d.dropzone&&(d.dropzone.removeAllFiles(!0),d.formData.delete("file-list_"+d.node.nodeid))}}))),this.acceptedFiles.subscribe((function(e){d.dropzone&&d.dropzone.hiddenFileInput.setAttribute("accept",e)})),this.maxFilesize.subscribe((function(e){d.dropzone&&(d.dropzone.options.maxFilesize=e)})),this.formatSize=function(e){var n=t.unwrap(e.size);if(0==n)return"0 Byte";var a=Math.floor(Math.log(n)/Math.log(1024));return"<span>"+parseFloat((n/Math.pow(1024,a)).toFixed(2))+"</span> "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},this.filesJSON=t.computed((function(){var e=d.filesForUpload(),a=d.uploadedFiles();return t.toJS(a.concat(n.map(e,(function(e,t){return{name:e.name,accepted:e.accepted,height:e.height,lastModified:e.lastModified,size:e.size,status:e.status,type:e.type,width:e.width,url:null,file_id:null,index:t,content:URL.createObjectURL(e),error:e.error}}))))})).extend({throttle:100}),this.filesJSON.subscribe((function(e){d.formData&&n.contains(d.formData.keys(),"file-list_"+d.node.nodeid)&&d.formData.delete("file-list_"+d.node.nodeid),e.length>1&&null==d.selectedFile()&&d.selectedFile(e[0]),n.each(d.filesForUpload(),(function(e){e.accepted&&d.formData.append("file-list_"+d.node.nodeid,e,e.name)})),null===t.unwrap(d.value)&&0===d.filesForUpload().length&&0===d.uploadedFiles().length||d.value(e.filter((function(e){return e.accepted})))})),this.getFileUrl=function(e){return(a.urls.url_subpath+t.unwrap(e)).replace("//","/")},Array.isArray(d.value())&&this.uploadedFiles(d.value()),this.filter=t.observable(""),this.filteredList=t.computed((function(){var e=[],t=d.filter().toLowerCase();return t&&d.filesJSON().forEach((function(n,a){n.name.toLowerCase().includes(t)&&e.push(d.filesJSON()[a])})),e})),this.selectedFile=t.observable(d.filesJSON()[0]),this.selectFile=function(e){d.selectedFile(e)},this.removeFile=function(e){var a;d.filesJSON().forEach((function(t,n){t.file_id===e.file_id&&(a=n)}));var i=0===a?1:a-1,s=d.filesForUpload(),l=d.uploadedFiles();e.file_id?(e=n.find(l,(function(n){return e.file_id===t.unwrap(n.file_id)})),d.uploadedFiles.remove(e)):(e=s[e.index],d.filesForUpload.remove(e)),d.filesJSON().length>0&&d.selectedFile(d.filesJSON()[i])},this.pageCt=t.observable(5),this.pageCtReached=t.computed((function(){return d.filesJSON().length>d.pageCt()?"visible":"hidden"})),this.pagedList=function(e){var t=[],n=0;if(e.length>d.pageCt()){for(;t.length<d.pageCt();)t.push(e[n++]);return t}return e},this.unique_id=s.generate(),this.uniqueidClass=t.computed((function(){return"unique_id_"+d.unique_id})),this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,previewTemplate:e("template#file-widget-dz-preview").html(),autoQueue:!1,previewsContainer:".dz-previews."+this.uniqueidClass(),clickable:".fileinput-button."+this.uniqueidClass(),acceptedFiles:this.acceptedFiles(),maxFilesize:this.maxFilesize(),uploadMultiple:d.uploadMulti(),init:function(){d.dropzone=this,this.on("addedfile",(function(e){d.filesForUpload.push(e)})),this.on("error",(function(e,t){e.error=t,d.filesForUpload.valueHasMutated()})),this.on("removedfile",(function(e){d.filesForUpload.remove(e)}))}},this.reset=function(){d.dropzone&&(d.dropzone.removeAllFiles(!0),d.uploadedFiles.removeAll(),d.filesForUpload.removeAll())},this.displayValue=t.computed((function(){return 1===d.uploadedFiles().length?t.unwrap(d.uploadedFiles()[0].name):d.uploadedFiles().length})),this.reportFiles=t.computed((function(){return d.uploadedFiles().filter((function(e){var n=t.unwrap(e.type);if(n){var a=n.split("/").pop();return n.indexOf("image")<0||d.unsupportedImageTypes.indexOf(a)>-1}return!0}))})),this.reportImages=t.computed((function(){return d.uploadedFiles().filter((function(e){var n=t.unwrap(e.type);if(n){var a=n.split("/").pop();return n.indexOf("image")>=0&&d.unsupportedImageTypes.indexOf(a)<=0}return!1}))}))}}.apply(t,a))||(e.exports=i)},83547:function(e,t,n){var a,i;a=[n(60662)],void 0===(i=function(e){return function(t){this.graphid=e.graphid,this.graph=e.graph,this.config=t.config}}.apply(t,a))||(e.exports=i)},63313:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(32222),n(20346),n(84714),n(94242)],void 0===(i=function(e,t,n,a,i,s,l){return function(s){var d=this;d.resource_data=n.observableArray([]),d.relatable_resources=n.computed((function(){return t.each(d.resource_data(),(function(e){e.isRelatable=n.observable(e.is_relatable)}))})),d.designerViewModel=s.designerViewModel,d.graph=s.graph,d.graph.name.subscribe((function(e){d.graph.root.name(e),d.rootnode.name(e)})),d.graph.root.datatype.subscribe((function(e){d.rootnode.datatype(e)})),d.graphModel=s.graphModel,d.rootnode=d.graphModel.get("root"),d.nodes=d.graphModel.get("nodes"),d.nodeCount=n.computed((function(){return d.nodes().length}));var c=d.rootnode.ontologyclass,p=d.rootnode.ontologyclass_friendlyname;d.jsonData=n.computed((function(){var e=t.filter(d.resource_data(),(function(e){return e.isRelatable()})).map((function(e){return e.id}));return void 0===d.graph.ontology_id()&&d.graph.ontology_id(null),d.graph.root.config=a.toJS(d.rootnode.config),JSON.stringify({graph:a.toJS(d.graph),relatable_resource_ids:e,ontology_class:c()})})).extend({deferred:!0}),d.jsonCache=n.observable(d.jsonData());var f=n.computed((function(){return d.jsonData()!==d.jsonCache()}));d.dirty=f,d.icon_data=n.observableArray([]),d.iconFilter=s.iconFilter,d.icons=n.computed((function(){return t.filter(d.icon_data(),(function(e){return e.name.indexOf(d.iconFilter())>=0}))})),d.ontologies=s.ontologies,d.ontologyClass=c,d.ontologyClassFriendlyName=p,d.ontologyClasses=n.computed((function(){return t.filter(s.ontologyClasses(),(function(e){return e.display=e.source,e.ontology_id===d.graph.ontology_id()}))})),d.save=function(){d.contentLoading(!0),e.ajax({type:"POST",url:i.urls.graph_settings(d.graph.graphid()),data:d.jsonData()}).done((function(e){d.jsonCache(d.jsonData()),d.rootnode._node(JSON.stringify(d.rootnode))})).fail((function(e){d.designerViewModel.alert(new l("ep-alert-red",e.responseJSON))})).always((function(){d.contentLoading(!1)}))},d.reset=function(){var e=d.graph,a=JSON.parse(d.jsonCache());n.mapping.fromJS(a.graph,e),d.ontologyClass(a.graph.root.ontologyclass),d.relatable_resources().forEach((function(e){t.contains(a.relatable_resource_ids,e.id)?e.isRelatable(!0):e.isRelatable(!1)})),d.jsonCache(d.jsonData()),d.rootnode._node(JSON.stringify(d.rootnode)),s.onReset&&"function"==typeof s.onReset&&s.onReset()},d.extendNode=function(e,n){return t.extend(e,n)}}}.apply(t,a))||(e.exports=i)},71203:function(e,t,n){var a,i;a=[n(84490),n(54922)],void 0===(i=function(e,t){return function(n){var a=this;this.mapControlsHidden=n.mapControlsHidden||t.observable(!1),this.overlaySelectorClosed=n.overlaySelectorClosed||t.observable(!1),this.overlays=n.overlays||t.observableArray([]),this.mapControlsExpanded=t.observable(!1),this.mapControlPanels={basemaps:t.observable(!1),overlays:t.observable(!0),maptools:t.observable(!0),legend:t.observable(!0)},this.toggleMapControlPanels=function(t){var n=t;e.each(a.mapControlPanels,(function(e,t){e(t!==n),"overlays"===n||a.overlaySelectorClosed(!0)}))},this.toggleMapTools=function(){a.mapControlsExpanded(!a.mapControlsExpanded())},this.toggleMapControlsVisibility=function(){!0===a.mapControlsHidden()?a.mapControlsHidden(!1):a.mapControlsHidden(!0)},this.moveOverlay=function(e,n){var i=t.utils.unwrapObservable(a.overlays),s=t.utils.arrayIndexOf(i,e),l="up"===n?s-1:s+1;l>=0&&l<i.length&&(a.overlays.valueWillMutate(),i.splice(s,1),i.splice(l,0,e),a.overlays.valueHasMutated())}}}.apply(t,a))||(e.exports=i)},2370:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(59732),n(28459),n(94974),n(65839),n(19140),n(35227),n(64058),n(80508)],void 0===(i=function(e,t,a,i,s,l,d,c,p,f,v,h){return function(b){var m,g=this,x=40,y=b.tile?b.tile.resourceinstance_id:"";void 0===this.widgets&&(this.widgets=b.widgets||[]),this.geojsonWidgets=this.widgets.filter((function(e){return"geojson-feature-collection"===e.datatype.datatype})),this.newNodeId=null,this.featureLookup={},this.selectedFeatureIds=a.observableArray(),this.geoJSONString=a.observable(),this.draw=null,this.selectSource=this.selectSource||a.observable(),this.selectSourceLayer=this.selectSourceLayer||a.observable(),this.drawAvailable=a.observable(!1),this.bufferNodeId=a.observable(),this.bufferDistance=a.observable(0),this.bufferUnits=a.observable("m"),this.bufferResult=a.observable(),this.bufferAddNew=a.observable(!1),this.allowAddNew=this.card&&this.card.canAdd()&&this.tile!==this.card.newTile;var w=this.selectSource(),k=this.selectSourceLayer(),S=h(y,w,k);this.setSelectLayersVisibility=function(e){var t=g.map();t&&S.forEach((function(n){t.setLayoutProperty(n.id,"visibility",e?"visible":"none")}))};var _=[];for(var T in s.mapSources)Object.prototype.hasOwnProperty.call(s.mapSources,T)&&_.push(T);var updateSelectLayers=function(){var e=g.selectSource(),t=g.selectSourceLayer();S=_.indexOf(e)>0?h(y,e,t):[],g.additionalLayers(C.concat(S,I))};this.selectSource.subscribe(updateSelectLayers),this.selectSourceLayer.subscribe(updateSelectLayers),this.setDrawTool=function(e){var t="select_feature"===e;g.setSelectLayersVisibility(t),t?(g.draw.changeMode("simple_select"),g.selectedFeatureIds([])):e&&(g.draw.changeMode(e),g.map().draw_mode=e)},g.geojsonWidgets.forEach((function(e){var n=a.unwrap(e.node_id);g.featureLookup[n]={features:a.computed((function(){var e=i.toJS(g.tile.data[n]);return e?e.features:[]})),selectedTool:a.observable(),dropErrors:a.observableArray()},g.featureLookup[n].selectedTool.subscribe((function(e){g.draw&&(""===e?(g.draw.trash(),g.draw.changeMode("simple_select")):e&&(t.each(g.featureLookup,(function(e,t){t!==n&&e.selectedTool(null)})),g.newNodeId=n),g.setDrawTool(e))}))})),this.selectedTool=a.pureComputed((function(){var e;return t.find(g.featureLookup,(function(t){var n=t.selectedTool();n&&(e=n)})),e})),this.updateTiles=function(){var e=g.draw.getAll();t.each(g.featureLookup,(function(e){e.selectedTool(null)})),g.geojsonWidgets.forEach((function(t){var n=a.unwrap(t.node_id),i=[];e.features.forEach((function(e){e.properties.nodeId===n&&i.push(e)})),a.isObservable(g.tile.data[n])?g.tile.data[n]({type:"FeatureCollection",features:i}):g.tile.data[n]&&g.tile.data[n].features(i)}))};var getDrawFeatures=function(){var e=[];return g.geojsonWidgets.forEach((function(t){var n=a.unwrap(t.node_id),s=i.toJS(g.tile.data[n]);s&&(s.features.forEach((function(e){e.id||(e.id=l.generate()),e.properties.nodeId=n})),e=e.concat(s.features))})),e};(m=getDrawFeatures()).length>0&&(b.usePosition=!1,b.bounds=d({type:"FeatureCollection",features:m}),b.fitBoundsOptions={padding:{top:x,left:240,bottom:x,right:240}}),b.activeTab="editor",b.sources=Object.assign({"geojson-editor-data":{type:"geojson",data:{type:"FeatureCollection",features:[]}}},b.sources);var C=[];b.layers&&(C=a.unwrap(b.layers));var I=[{id:"geojson-editor-polygon-fill",type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1},source:"geojson-editor-data"},{id:"geojson-editor-polygon-stroke-base",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":4},source:"geojson-editor-data"},{id:"geojson-editor-polygon-stroke",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2},source:"geojson-editor-data"},{id:"geojson-editor-line",type:"line",filter:["==","$type","LineString"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2},source:"geojson-editor-data"},{id:"geojson-editor-point-point-stroke",type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"},source:"geojson-editor-data"},{id:"geojson-editor-point",type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":5,"circle-color":"#3bb2d0"},source:"geojson-editor-data"}];b.layers=a.observable(C.concat(S,I)),v.apply(this,[b]),this.deleteFeature=function(e){g.draw&&(g.draw.delete(e.id),g.selectedFeatureIds(g.selectedFeatureIds().filter((function(t){return t!==e.id}))),g.updateTiles())},this.editFeature=function(e){g.draw&&(g.draw.changeMode("simple_select",{featureIds:[e.id]}),g.selectedFeatureIds([e.id]),t.each(g.featureLookup,(function(e){e.selectedTool(null)})))},this.updateLayers=function(e){var t=g.map(),n=t.getStyle();n&&(n.layers=g.draw?e.concat(g.draw.options.styles):e,t.setStyle(n))},this.fitFeatures=function(e){var t=g.map(),n=d({type:"FeatureCollection",features:e}),a=t.cameraForBounds(n,{padding:x});t.jumpTo(a)},this.editGeoJSON=function(e,t){var n=JSON.stringify({type:"FeatureCollection",features:e},null,"   ");this.geoJSONString(n),g.newNodeId=t},this.geoJSONString.subscribe((function(e){var t=g.map();void 0===e?setupDraw(t):g.draw&&(t.removeControl(g.draw),g.draw=void 0,g.selectedFeatureIds([])),g.setSelectLayersVisibility(!1)})),this.geoJSONErrors=a.pureComputed((function(){var e=g.geoJSONString(),t=c.hint(e),n=[];return t.forEach((function(e){"message"!==e.level&&n.push(e)})),n})).extend({rateLimit:50}),a.pureComputed((function(){var e=g.geoJSONString();if(0===g.geoJSONErrors().length)return JSON.parse(e);var t={type:"FeatureCollection",features:[]};return g.bufferNodeId()&&g.bufferResult()&&t.features.push(g.bufferResult()),t})).extend({rateLimit:100}).subscribe((function(e){g.map().getSource("geojson-editor-data").setData(e)})),this.updateGeoJSON=function(){if(0===g.geoJSONErrors().length){var e=JSON.parse(this.geoJSONString());e.features.forEach((function(e){e.id=l.generate(),e.properties||(e.properties={}),e.properties.nodeId=g.newNodeId})),a.isObservable(g.tile.data[g.newNodeId])?g.tile.data[g.newNodeId](e):g.tile.data[g.newNodeId].features(e.features),g.geoJSONString(void 0)}};var setupDraw=function(e){n.e(1882).then((function(){var a=[n(91882)];(function(n){var a=n.modes;a.static={onSetup:function(){return this.setActionableState(),{}},toDisplayFeatures:function(e,t,n){n(t)}},g.draw=new n({displayControlsDefault:!1,modes:a}),e.addControl(g.draw),g.draw.set({type:"FeatureCollection",features:getDrawFeatures()}),e.on("draw.create",(function(e){e.features.forEach((function(e){g.draw.setFeatureProperty(e.id,"nodeId",g.newNodeId)})),g.updateTiles()})),e.on("draw.update",(function(){if(g.updateTiles(),g.coordinateEditing()){var e=g.draw.getSelected().features[0];e&&updateCoordinatesFromFeature(e)}g.bufferNodeId()&&g.updateBufferFeature()})),e.on("draw.delete",g.updateTiles),e.on("draw.modechange",(function(t){g.updateTiles(),g.setSelectLayersVisibility(!1),e.draw_mode=t.mode})),e.on("draw.selectionchange",(function(e){g.selectedFeatureIds(e.features.map((function(e){return e.id}))),e.features.length>0&&t.each(g.featureLookup,(function(e){e.selectedTool(null)})),g.setSelectLayersVisibility(!1)})),g.form&&g.form.on("tile-reset",(function(){g.map().getStyle()&&g.draw.set({type:"FeatureCollection",features:getDrawFeatures()}),t.each(g.featureLookup,(function(e){e.selectedTool()&&e.selectedTool("")}))})),g.draw&&g.drawAvailable(!0)}).apply(null,a)})).catch(n.oe)};this.provisionalTileViewModel&&(this.provisionalTileViewModel.resetAuthoritative(),this.provisionalTileViewModel.selectedProvisionalEdit.subscribe((function(e){if(e){setTimeout((function(){var e;for(var t in g.tile.data)if(g.featureLookup[t]&&g.draw)try{(e=g.draw.getAll()).features=a.unwrap(g.featureLookup[t].features),g.draw.set(e)}catch(e){}}),100)}}))),this.map.subscribe(setupDraw),g.map.subscribe((function(e){g.draw&&!b.draw&&(b.draw=g.draw),e&&!b.map&&(b.map=e)})),b.additionalDrawOptions||(b.additionalDrawOptions=[]),g.geojsonWidgets.forEach((function(e){e.config.geometryTypes&&(e.drawTools=a.pureComputed((function(){var t=[{value:"",text:""}];return t=t.concat(a.unwrap(e.config.geometryTypes).map((function(e){var t={};switch(a.unwrap(e.id)){case"Point":t.value="draw_point",t.text=s.translations.mapAddPoint;break;case"Line":t.value="draw_line_string",t.text=s.translations.mapAddLine;break;case"Polygon":t.value="draw_polygon",t.text=s.translations.mapAddPolygon}return t}))),g.selectSource()&&t.push({value:"select_feature",text:g.selectText()||s.translations.mapSelectDrawing}),t=t.concat(b.additionalDrawOptions)})))})),this.isFeatureClickable=function(e){var t=g.selectedTool();return(!t||"select_feature"===t)&&(e.properties.resourceinstanceid||g.isSelectable(e))},g.isSelectable=function(e){return S.map((function(e){return e.id})).indexOf(e.layer.id)>=0};var addSelectFeatures=function(e){var n=[];e.forEach((function(e){e.id=l.generate(),e.properties={nodeId:g.newNodeId},g.draw.add(e),n.push(e.id)})),g.updateTiles(),g.popup&&g.popup.remove(),g.draw.changeMode("simple_select",{featureIds:n}),g.selectedFeatureIds(n),t.each(g.featureLookup,(function(e){e.selectedTool(null)}))};g.selectFeature=function(t){try{var n=JSON.parse(t.properties.geojson);addSelectFeatures([{type:"Feature",properties:{},geometry:n}])}catch(n){e.getJSON(t.properties.geojson,(function(e){addSelectFeatures(e.features)}))}};g.handleFiles=function(e,t){for(var n=[],a=[],i=0;i<e.length;i++){var s=e[i].name.split(".").pop();["kml","json","geojson"].includes(s)?a.push(new Promise((function(t){var n=e[i],a=n.name.split(".").pop(),s=new window.FileReader;s.onload=function(e){var n;n=["json","geojson"].includes(a)?JSON.parse(e.target.result):p.kml((new window.DOMParser).parseFromString(e.target.result,"text/xml")),t(n)},s.readAsText(n)}))):n.push({message:'File unsupported: "'+e[i].name+'"'})}Promise.all(a).then((function(e){var a={type:"FeatureCollection",features:e.reduce((function(e,t){return e=e.concat(t.features)}),[])};n=n.concat(function(e,t){var n=c.hint(e),a=[];if(n.forEach((function(e){"message"!==e.level&&a.push(e)})),0===a.length){var i=JSON.parse(e);i.features=i.features.filter((function(e){return e.geometry})),i.features.length>0&&(g.map().fitBounds(d(i),{padding:x}),i.features.forEach((function(e){e.id=l.generate(),e.properties||(e.properties={}),e.properties.nodeId=t,g.draw.add(e)})),g.updateTiles())}return a}(JSON.stringify(a),t)),g.featureLookup[t].dropErrors(n)}))},g.dropZoneHandler=function(e,t){var n=e.node.nodeid;t.stopPropagation(),t.preventDefault();var a=t.originalEvent.dataTransfer.files;g.handleFiles(a,n),g.dropZoneLeaveHandler(e,t)},g.dropZoneOverHandler=function(e,t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"},g.dropZoneClickHandler=function(e,t){var n=t.target.parentNode.querySelector(".hidden-file-input input"),a=window.document.createEvent("MouseEvents");a.initEvent("click",!0,!1),n.dispatchEvent(a)},g.dropZoneEnterHandler=function(e,t){t.target.classList.add("drag-hover")},g.dropZoneLeaveHandler=function(e,t){t.target.classList.remove("drag-hover")},g.dropZoneFileSelected=function(e,t){g.handleFiles(t.target.files,e.node.nodeid)},g.coordinateReferences=s.preferredCoordinateSystems,g.selectedCoordinateReference=a.observable(g.coordinateReferences[0].proj4),g.coordinates=a.observableArray();var $='+proj=longlat +datum=WGS84 +no_defs", "default';g.rawCoordinates=a.computed((function(){return g.coordinates().map((function(e){var t=g.selectedCoordinateReference();return f(t,$,[Number(e[0]()),Number(e[1]())])}))})).extend({throttle:100}),g.rawCoordinates.subscribe((function(e){var t=g.selectedFeatureIds()[0];if(g.coordinateEditing())if(t){var n=getDrawFeatures();n.forEach((function(n){n.id===t&&("Polygon"===n.geometry.type?(e.push(e[0]),n.geometry.coordinates[0]=e):"Point"===n.geometry.type?n.geometry.coordinates=e[0]:n.geometry.coordinates=e)})),g.draw.set({type:"FeatureCollection",features:n}),g.updateTiles()}else if(e.length>=g.minCoordinates()){var a=[],i=g.coordinateGeomType();switch(i){case"Polygon":e.push(e[0]),a=[e];break;case"Point":a=e[0];break;default:a=e}addSelectFeatures([{type:"Feature",geometry:{type:i,coordinates:a}}])}})),g.showCoordinateFeature=function(){var e=g.selectedFeatureIds()[0];if(e){var t=g.draw.get(e);g.fitFeatures([t])}},g.coordinateEditing=a.observable(!1),g.newX=a.observable(),g.newY=a.observable();var j=a.computed((function(){return[g.newX(),g.newY()]}));g.focusLatestY=a.observable(!0);var getNewCoordinatePair=function(e){var t=[a.observable(e[0]),a.observable(e[1])];return t.forEach((function(e){e.subscribe((function(t){[void 0,null,""].includes(t)&&e(0)}))})),t};j.subscribe((function(e){e[0]&&e[1]&&(g.coordinates.push(getNewCoordinatePair(e)),g.newX(void 0),g.newY(void 0),g.focusLatestY(!0))}));var updateCoordinatesFromFeature=function(e){var t=[];if("Polygon"===e.geometry.type){t=[];for(var n=0;n<e.geometry.coordinates[0].length-1;n++)t.push(e.geometry.coordinates[0][n])}else t="Point"===e.geometry.type?[e.geometry.coordinates]:e.geometry.coordinates;g.coordinateGeomType(e.geometry.type),g.coordinates(t.map((function(e){var t=getNewCoordinatePair(e);return transformCoordinatePair(t,$),t})))},transformCoordinatePair=function(e,t){var n=g.selectedCoordinateReference(),a=f(t,n,[Number(e[0]()),Number(e[1]())]);e[0](a[0]),e[1](a[1])},P=g.selectedCoordinateReference();g.selectedCoordinateReference.subscribe((function(){var e=g.selectedCoordinateReference();g.coordinates().forEach((function(e){transformCoordinatePair(e,P)})),P=e})),g.coordinateGeomType=a.observable(),g.coordinateEditing.subscribe((function(e){g.coordinateGeomType(null);var n=g.selectedTool();switch(n){case"draw_point":g.coordinateGeomType("Point");break;case"draw_line_string":g.coordinateGeomType("LineString");break;case"draw_polygon":g.coordinateGeomType("Polygon")}var a=g.selectedFeatureIds(),i=a[0];if(g.focusLatestY(!1),g.coordinates([]),g.newX(void 0),g.newY(void 0),e){var s;if(a.length>0){s={featureIds:[i]},g.selectedFeatureIds([i]);var l=g.draw.get(i);updateCoordinatesFromFeature(l)}n&&g.draw.trash(),g.draw.changeMode("simple_select",s),t.each(g.featureLookup,(function(e){e.selectedTool(null)}))}})),g.hideNewCoordinates=a.computed((function(){var e=g.coordinateGeomType(),t=g.coordinates().length;return"Point"===e&&t>0})),g.minCoordinates=a.computed((function(){var e;switch(g.coordinateGeomType()){case"Point":e=1;break;case"LineString":e=2;break;case"Polygon":e=3}return e})),g.allowDeleteCoordinates=a.computed((function(){return g.coordinates().length>g.minCoordinates()})),g.editCoordinates=function(){g.coordinateEditing(!0)},g.canEditCoordinates=a.computed((function(){var e=g.selectedFeatureIds()[0];if(e){var t=g.draw.get(e);return["Point","LineString","Polygon"].includes(t.geometry.type)}var n=g.selectedTool();return["draw_point","draw_line_string","draw_polygon"].includes(n)})),g.selectedFeatureIds.subscribe((function(e){if(0===e.length)g.coordinateEditing(!1);else if(g.canEditCoordinates()){var t=g.draw.get(e[0]);updateCoordinatesFromFeature(t)}})),g.bufferFeature=a.computed((function(){return g.selectedFeatureIds()[0]}));var getBufferFeature=function(){var e=g.bufferFeature();if(e)return g.draw.get(e)};g.bufferParams=a.computed((function(){var e=getBufferFeature();if(e&&g.bufferNodeId())return{geometry:e.geometry,buffer:{width:parseFloat(g.bufferDistance()),unit:g.bufferUnits()}}})),g.bufferFeature.subscribe((function(e){e||g.bufferNodeId(!1)})),g.updateBufferFeature=function(){var e=g.bufferParams(),t=getBufferFeature();e&&t?(e.geometry=t.geometry,window.fetch(s.urls.buffer+"?filter="+JSON.stringify(e)).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=getBufferFeature();g.bufferResult({type:"Feature",id:l.generate(),geometry:e,properties:{nodeId:t.properties.nodeId}})}))):g.bufferResult(void 0)},g.bufferParams.subscribe(g.updateBufferFeature),g.card&&(g.card.map=g.map),g.addBufferResult=function(){var e=g.bufferResult();if(g.bufferAddNew()){var t=a.unwrap(g.tile.dirty),n=g.bufferNodeId(),addBufferResultAsNew=function(){var t=g.card.selected.subscribe((function(){var a={type:"FeatureCollection",features:[e]};g.card.getNewTile().data[n](a),g.card.map.subscribe((function(e){e.fitBounds(d(a),{duration:0,padding:x})})),t.dispose()}));g.card.selected(!0)};t?g.saveTile(addBufferResultAsNew):addBufferResultAsNew()}else g.draw.add(e),g.bufferNodeId(!1),g.updateTiles(),g.editFeature(e),g.fitFeatures([e])}}}.apply(t,a))||(e.exports=i)},52933:function(e,t,n){var a,i;a=[n(84490),n(54922)],void 0===(i=function(e,t){return function(a){var i=this;this.searchContext=a.searchContext||t.observable(!0),this.map=a.map,this.draw=a.draw,this.buffer=t.observable(0),this.bufferUnit=t.observable("m"),this.filter=a.filter||{},this.filter.inverted=t.observable(!1),this.bufferUnits=[{name:"meters",val:"m"},{name:"feet",val:"ft"}],this.searchContext.subscribe((function(e){!1===e&&i.clear()})),this.filter.feature_collection=t.observable({type:"FeatureCollection",features:[]}),this.searchGeometries=t.observableArray(null),this.sources={"geojson-search-buffer-data":{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}}},this.layers=t.observable([{id:"geojson-search-buffer-outline-base",source:"geojson-search-buffer-data",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#aa0000","line-width":4}},{id:"geojson-search-buffer-outline",source:"geojson-search-buffer-data",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#aa0000","line-width":2}},{id:"geojson-search-buffer-line",source:"geojson-search-buffer-data",type:"line",filter:["==","$type","LineString"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#aa0000","line-width":2}},{id:"geojson-search-buffer",type:"fill",filter:["==",["geometry-type"],"Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#aa3322","fill-outline-color":"#aa0000","fill-opacity":.2},source:"geojson-search-buffer-data"},{id:"geojson-search-buffer-point-stroke",type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"},source:"geojson-search-buffer-data"},{id:"geojson-search-buffer-point",type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":5,"circle-color":"#aa0000"},source:"geojson-search-buffer-data"}]),this.clear=function(){this.map().getSource("geojson-search-buffer-data").setData({type:"FeatureCollection",features:[]}),this.draw.getAll().features.forEach((function(e){e.properties.searchGeom&&i.draw.delete(e.id)})),this.searchGeometries([])},this.spatialFilterTypes=[{name:"Point",title:"Draw a Marker",class:"leaflet-draw-draw-marker",icon:"ion-location",drawMode:"draw_point",active:t.observable(!1)},{name:"Line",title:"Draw a Polyline",icon:"ion-steam",class:"leaflet-draw-draw-polyline",drawMode:"draw_line_string",active:t.observable(!1)},{name:"Polygon",title:"Draw a Polygon",icon:"fa fa-pencil-square-o",class:"leaflet-draw-draw-polygon",drawMode:"draw_polygon",active:t.observable(!1)}],this.selectedTool=t.observable(),this.drawModes=e.pluck(this.spatialFilterTypes,"drawMode"),this.selectedTool.subscribe((function(e){e&&("extent"===e?this.searchByExtent():this.draw.changeMode(e))}),this),this.useMaxBuffer=function(e,t,n){return"ft"===e?.3048*t>n:t>n},this.setupDraw=function(){var e=this;n.e(1882).then((function(){var t=[n(91882)];(function(t){var n=e;if(!e.draw){var a=t.modes;a.static={toDisplayFeatures:function(e,t,n){n(t)}},e.draw=new t({displayControlsDefault:!1,modes:a}),e.map().addControl(e.draw)}e.map().on("draw.create",(function(e){n.searchContext()&&(n.draw.getAll().features.forEach((function(t){t.id!==e.features[0].id?t.properties.searchGeom&&n.draw.delete(t.id):(n.draw.setFeatureProperty(t.id,"nodeId",null),n.draw.setFeatureProperty(t.id,"searchGeom",!0))})),n.searchGeometries(e.features),n.updateFilter(),n.selectedTool(void 0))})),e.map().on("draw.update",(function(e){n.searchContext()&&(n.searchGeometries(e.features),n.updateFilter())}))}).apply(null,t)})).catch(n.oe)},this.makeSearchFeature=function(e){i.searchContext()&&(i.searchGeometries([e]),i.updateFilter())},this.updateFilter=function(){if(this.buffer()<0&&this.buffer(0),this.useMaxBuffer(this.bufferUnit(),this.buffer(),this.maxBuffer)){var e="ft"===this.bufferUnit()?328084:this.maxBuffer;this.buffer(e)}this.searchGeometries().forEach((function(e){e.properties||(e.properties={}),e.properties.buffer={width:this.buffer(),unit:this.bufferUnit()},e.properties.inverted=this.filter.inverted()}),this),this.filter.feature_collection({type:"FeatureCollection",features:this.searchGeometries()})},this.buffer.subscribe((function(){this.updateFilter()}),this),this.bufferUnit.subscribe((function(){this.updateFilter()}),this)}}.apply(t,a))||(e.exports=i)},8994:function(e,t,n){var a,i;a=[n(84490),n(54922),n(58420),n(8373),n(28396)],void 0===(i=function(e,t,n,a){return function(i){var s=this;i.configKeys=["zoom","centerX","centerY","geocoder","basemap","geometryTypes","pitch","bearing","geocodePlaceholder"],a.apply(this,[i]),this.featureCollection=t.computed({read:function(){var a=[];return t.unwrap(s.tiles).forEach((function(t){e.each(t.data,(function(e){"features"in e&&(a=a.concat(n.toJS(e.features)))}),this)}),this),{type:"FeatureCollection",features:a}},write:function(){}}),this.featureCount=t.computed((function(){var n=0;return t.unwrap(s.tiles).forEach((function(t){e.each(t.data,(function(e){"features"in e&&(n+=1)}),this)}),this),n}))}}.apply(t,a))||(e.exports=i)},65055:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(20198),n(84490),n(46186),n(54922),n(58420),n(68532),n(465)],void 0===(i=function(e,t,a,i,s,l){return function(d){var c=this;this.activeTab=i.observable(i.unwrap(d.activeTab)),this.canEdit=d.userCanEditResources,this.canRead=d.userCanReadResources;var p={padding:{top:40,left:40+(c.activeTab()?200:0),bottom:40,right:40+(c.activeTab()?200:0)},animate:!1};this.map=i.isObservable(d.map)?d.map:i.observable(),this.map.subscribe((function(e){if(c.setupMap(e),i.unwrap(d.x)&&i.unwrap(d.y)){var t=e.getCenter(),n=parseFloat(d.x()),a=parseFloat(d.y());n&&(t.lng=n),a&&(t.lat=a),e.setCenter(t)}i.unwrap(d.zoom)&&e.setZoom(i.unwrap(d.zoom)),i.unwrap(d.bounds)&&e.fitBounds(i.unwrap(d.bounds),p)})),this.bounds=i.observable(i.unwrap(d.bounds)||a.hexBinBounds),this.bounds.subscribe((function(e){e&&c.map()&&c.map().fitBounds(e,p),i.isObservable(d.fitBounds)&&d.fitBounds()!==e&&d.fitBounds(e)})),this.centerX=i.observable(i.unwrap(d.x)||a.mapDefaultX),this.centerX.subscribe((function(e){if(e&&c.map()){var t=c.map().getCenter();t.lng=e,c.map().setCenter(t)}i.isObservable(d.x)&&d.x()!==e&&d.x(e)})),this.centerY=i.observable(i.unwrap(d.y)||a.mapDefaultY),this.centerY.subscribe((function(e){if(e&&c.map()){var t=c.map().getCenter();t.lat=e,c.map().setCenter(t)}i.isObservable(d.y)&&d.y()!==e&&d.y(e)})),this.zoom=i.observable(i.unwrap(d.zoom)||a.mapDefaultZoom),this.zoom.subscribe((function(e){e&&c.map()&&c.map().setZoom(e),i.isObservable(d.zoom)&&d.zoom()!==e&&d.zoom(e)})),this.overlayConfigs=i.observableArray(i.unwrap(d.overlayConfigs)),this.overlayConfigs.subscribe((function(e){i.isObservable(d.overlayConfigs)&&d.overlayConfigs(e)})),this.activeBasemap=i.observable(),this.activeBasemap.subscribe((function(e){i.isObservable(d.basemap)&&d.basemap()!==e.name&&d.basemap(e.name)}));var f=Object.assign({resource:{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}},"search-results-hex":{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}},"search-results-hashes":{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}},"search-results-points":{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}}},a.mapSources,d.sources);if(this.basemaps=d.basemaps||[],this.overlays=d.overlaysObservable||i.observableArray(),(d.mapLayers||a.mapLayers).forEach((function(e){if(e.isoverlay){if(!d.overlaysObservable){if(e.searchonly&&!d.search)return;e.opacity=i.observable(e.addtomap?100:0),e.onMap=i.pureComputed({read:function(){return e.opacity()>0},write:function(t){e.opacity(t?100:0)}}),e.updateParent=function(t){if(-1===c.overlayConfigs.indexOf(e.maplayerid)?(c.overlayConfigs.push(e.maplayerid),e.opacity(100)):(c.overlayConfigs.remove(e.maplayerid),e.opacity(0)),t!==c&&(t.overlayConfigs(c.overlayConfigs()),d.inWidget))try{t.overlays.valueHasMutated()}catch(e){console.log(e)}},c.overlays.push(e)}}else d.basemaps||c.basemaps.push(e)})),!c.activeBasemap()){var v=i.unwrap(c.basemaps).find((function(e){return i.unwrap(d.basemap)===e.name}));!v&&d.config&&(v=i.unwrap(c.basemaps).find((function(e){return d.config().basemap===e.name}))),v||(v=i.unwrap(c.basemaps).find((function(e){return e.addtomap}))),c.activeBasemap(v)}var h,b=_createForOfIteratorHelper(c.overlays());try{for(b.s();!(h=b.n()).done;){var m=h.value;i.unwrap(c.overlayConfigs)&&c.overlayConfigs.indexOf(m.maplayerid)>-1||d.search&&m.addtomap?m.opacity(100):m.opacity(0)}}catch(e){b.e(e)}finally{b.f()}t.each(f,(function(e){e.tiles&&e.tiles.forEach((function(t,n){t.startsWith("/")&&(e.tiles[n]=window.location.origin+t)})),e.data&&"string"==typeof e.data&&e.data.startsWith("/")&&(e.data=a.urls.root+e.data.substr(1))}));var g=function multiplyStopValues(e,n){t.each(e,(function(e){Array.isArray(e[1])?multiplyStopValues(e[1],n):e[1]=e[1]*n}))},updateOpacity=function(e,n){var a=Number(n)/100;return void 0===(e=JSON.parse(JSON.stringify(e))).paint&&(e.paint={}),t.each(["background","fill","line","text","icon","raster","circle","fill-extrusion","heatmap"],(function(t){var n=e.paint?e.paint[t+"-opacity"]:null;n?parseFloat(n)?e.paint[t+"-opacity"].base=n*a:(e.paint[t+"-opacity"]=JSON.parse(JSON.stringify(n)),n.base&&(e.paint[t+"-opacity"].base=n.base*a),n.stops&&g(e.paint[t+"-opacity"].stops,a)):e.type!==t&&("symbol"!==e.type||"text"!==t&&"icon"!==t)||(e.paint[t+"-opacity"]=a)}),c),e};this.additionalLayers=d.layers,this.layers=i.pureComputed((function(){var e=[];return c.overlays().forEach((function(t){if(t.onMap()){var n=t.opacity();e=t.layer_definitions.map((function(e){return updateOpacity(e,n)})).concat(e)}})),i.unwrap(c.activeBasemap)&&(e=i.unwrap(c.activeBasemap).layer_definitions.slice(0).concat(e)),this.additionalLayers&&(e=e.concat(i.unwrap(this.additionalLayers))),e}),this),this.mapOptions={style:{version:8,sources:f,sprite:a.mapboxSprites,glyphs:a.mapboxGlyphs,layers:c.layers(),center:[parseFloat(c.centerX()),parseFloat(c.centerY())],zoom:parseFloat(c.zoom())},maxZoom:a.mapDefaultMaxZoom,minZoom:a.mapDefaultMinZoom},d.usePosition||(this.mapOptions.bounds=c.bounds,this.mapOptions.fitBoundsOptions=d.fitBoundsOptions),this.hideSidePanel=function(){c.activeTab(void 0)},this.toggleTab=function(e){c.activeTab()===e?c.activeTab(null):c.activeTab(e)},this.updateLayers=function(e){var t=c.map().getStyle();t&&(t.layers=c.draw?e.concat(c.draw.options.styles):e,c.map().setStyle(t))},this.expandSidePanel=function(){return!1},this.resourceLookup={},this.getPopupData=function(n){var l=n.map((function(n){var l=n.properties,d=l.resourceinstanceid;l.showEditButton=c.canEdit;var p=["displayname","graph_name","map_popup"];if(d){if(!c.resourceLookup[d]){if((l=t.defaults(l,{loading:!0,displayname:"",graph_name:"",map_popup:"",feature:n})).permissions){try{l.permissions=JSON.parse(i.unwrap(l.permissions))}catch(e){l.permissions=s.toJS(i.unwrap(l.permissions))}l.permissions.users_without_edit_perm.indexOf(i.unwrap(c.userid))>0&&(l.showEditButton=!1)}p.forEach((function(e){return l[e]=i.observable(l[e])})),l.reportURL=a.urls.resource_report,l.editURL=a.urls.resource_editor,c.resourceLookup[d]=l,e.get(a.urls.resource_descriptors+d,(function(e){e.loading=!1,p.forEach((function(t){return c.resourceLookup[d][t](e[t])}))}))}return c.resourceLookup[d].feature=n,c.resourceLookup[d].mapCard=c,c.resourceLookup[d]}return l.resourceinstanceid=i.observable(!1),l.loading=i.observable(!1),l.feature=n,l.mapCard=c,l})),d=[],p=l.filter((function(e){if(e.active=i.observable(!1),!d.includes(e))return d.push(e),!0}));return p[0].active(!0),{popupFeatures:p,loading:i.observable(!1),activeFeature:p[0],advanceFeature:function(e){var t,n=c.map(),a=p.findIndex((function(e){return e.active()}));p[a].active(!1),(t="right"===e?a+1>=p.length?p[0]:p[a+1]:0==a?p[p.length-1]:p[a-1]).active(!0),n.getStyle()&&p.forEach((function(e){var a=e.feature.id;a&&(a===t.feature.id?n.setFeatureState(t.feature,{hover:!0}):n.setFeatureState(e.feature,{hover:!1}))}))}}},this.onFeatureClick=function(e,t,n){var s=this.popupTemplate?this.popupTemplate:l.getPopupTemplate(e),d=c.map(),p=d.getStyle();c.popup=(new n.Popup).setLngLat(t).setHTML(s).addTo(d),i.applyBindingsToDescendants(_objectSpread(_objectSpread({},l.processData(c.getPopupData(e))),{},{translations:a.translations}),c.popup._content),e.forEach((function(e){p&&e.id&&d.setFeatureState(e,{selected:!0}),c.popup.on("close",(function(){if(p&&e.id)try{d.setFeatureState(e,{selected:!1}),d.setFeatureState(e,{hover:!1})}catch(e){}c.popup=void 0}))}))},this.setupMap=function(i){i.on("load",(function(){Promise.all([n.e(5136),n.e(3562)]).then((function(){var s=[n(85136),n(23562)];(function(n,s){var d;i.addControl(new n.NavigationControl,"top-left"),i.addControl(new n.FullscreenControl({container:e(i.getContainer()).closest(".workbench-card-wrapper")[0]}),"top-left"),i.addControl(new s({accessToken:n.accessToken,mapboxgl:n,placeholder:a.geocoderPlaceHolder,bbox:a.hexBinBounds}),"top-right"),c.layers.subscribe(c.updateLayers),i.on("mousemove",(function(e){var n=i.getStyle();if(d&&d.id&&n&&i.setFeatureState(d,{hover:!1}),(d=t.find(i.queryRenderedFeatures(e.point),(function(e){return l.isFeatureClickable(e,c)})))&&d.id&&n&&i.setFeatureState(d,{hover:!0}),i.getCanvas().style.cursor=d?"pointer":"",c.map().draw_mode){i.getCanvas().style.cursor=["draw_point","draw_line_string","draw_polygon"].includes(c.map().draw_mode)?"crosshair":""}})),i.draw_mode=null,i.on("click",(function(e){var a=t.filter(i.queryRenderedFeatures(e.point),(function(e){return l.isFeatureClickable(e,c)}));a.length&&c.onFeatureClick(a,e.lngLat,n)})),i.on("zoomend",(function(){c.zoom(parseFloat(i.getZoom()))})),i.on("dragend",(function(){var e=i.getCenter();c.centerX(parseFloat(e.lng)),c.centerY(parseFloat(e.lat))})),c.map(i)}).apply(null,s)})).catch(n.oe)}))}}}.apply(t,a))||(e.exports=i)},26586:function(e,t,n){var a,i;a=[n(84490),n(54922),n(20198),n(46186),n(22023)],void 0===(i=function(e,t,n,a,i){return function(s){var l=this;s.configKeys=["placeholder","displayOnlySelectedNode"],this.multiple=s.multiple||!1,i.apply(this,[s]),this.resourceinstanceid=s.tile?s.tile.resourceinstance_id:"",this.tiles=t.observableArray(),this.url=function(){var e=t.unwrap(l.resourceinstanceid);if(""===e){var n=window.location.pathname.split("/");["add-resource","graph_designer"].filter((function(e){return n.includes(e)})).length||(e=n[n.length-1])}return e?a.urls.resource_tiles.replace("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",e):null},this.updateTiles=function(e){var t=s.node.config.nodeid(),a=this.url();t&&a&&n.ajax({dataType:"json",url:a,data:{nodeid:t,term:e},success:function(e){l.tiles(e.tiles)},error:function(e){console.log(e,"unable to fetch tiles")}})},this.updateTiles(),this.toggleDisplayOnlySelected=function(){this.displayOnlySelectedNode(!this.displayOnlySelectedNode())},this.getSelectedDisplayValue=function(){var t=l.value(),n=s.node.config.nodeid(),a=e.find(l.tiles(),(function(e){return e.tileid===t}));if(a)return e.find(a.display_values,(function(e){return n===e.nodeid}))},this.displayValue=t.computed((function(){var e=this.getSelectedDisplayValue();return e?e.value:""}),this);var getDisplayValueMarkup=function(e){if(e)return'<div><span class="node-value-select-label">'+e.label+'</span>: <span class="node-value-select-value">'+e.value+"</span></div>"};this.select2Config={value:this.value,clickBubble:!0,multiple:this.multiple,placeholder:this.placeholder,allowClear:!0,ajax:{dataType:"json",url:l.url(),data:function(e){return{nodeid:s.node.config.nodeid(),term:e}},results:function(e){var t=[];return e.tiles.forEach((function(e){t.push(e)})),{results:t}},success:function(e){return l.tiles(e.tiles),e},error:function(e){console.log(e,"unable to fetch tiles")}},initSelection:function(t,a){var i=n(t).val(),s=l.tiles();if(""!==i){var setSelection=function(t,n){var a=e.find(t,(function(e){return e.tileid===i}));a&&n(a)};if(0===s.length)var d=l.tiles.subscribe((function(e){setSelection(e,a),d.dispose()}));else setSelection(s,a)}},escapeMarkup:function(e){return e},id:function(e){return e.tileid},formatResult:function(t){var n=s.node.config.nodeid(),a=e.find(t.display_values,(function(e){return n===e.nodeid}));if(a){var i='<div class="node-value-select-tile"><div class="selected-node-value">'+getDisplayValueMarkup(a)+"</div>";return s.config().displayOnlySelectedNode||t.display_values.forEach((function(e){n!==e.nodeid&&(i+=getDisplayValueMarkup(e))})),i+="</div>"}},formatSelection:function(t){var n=s.node.config.nodeid();return e.find(t.display_values,(function(e){return n===e.nodeid})).value}}}}.apply(t,a))||(e.exports=i)},47809:function(e,t,n){var a,i;a=[n(54922)],void 0===(i=function(e){return function(){this.selectedItem,this.selectItem=function(t){t&&t.selected&&(this.selectedItem=t,!0!==e.unwrap(t)&&t.selected(!0))},this.pan=e.observable(),this.updatePan=function(e){this.pan()!==e?this.pan(e):this.pan.valueHasMutated()}}}.apply(t,a))||(e.exports=i)},85725:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(84826),n(46186),n(94242),n(5523)],void 0===(i=function(e,t,n,a,i,s){return function(l){var d=this;d.edits=n.observableArray(),d.users=[],d.selectedTile=l.tile,d.provisionaledits=n.observableArray(),d.declineUnacceptedEdits=n.observable(!0),d.selectedProvisionalEdit=n.observable(),d.getUserNames=function(n,a){e.ajax({url:s.urls.get_user_names,context:this,method:"POST",data:{userids:JSON.stringify(a)},dataType:"json"}).done((function(e){t.each(this.provisionaledits(),(function(t){t.username(e[t.user])}))})).fail((function(){}))},d.updateProvisionalEdits=function(e){var s;if(e&&e.data){var l=[],c=a.toJS(e.data),p=t.map(n.unwrap(e.provisionaledits),(function(e,t){return l.push(t),e.username=n.observable(""),e.displaytimestamp=i(e.timestamp).format("hh:mm"),e.displaydate=i(e.timestamp).format("DD-MM-YYYY"),e.user=t,void 0===e.isfullyprovisional&&(e.isfullyprovisional=n.observable(!1)),e}),this);this.provisionaledits(t.sortBy(p,(function(e){return i(e.timestamp)}))),this.provisionaledits().length>0&&!0===n.unwrap(this.provisionaledits()[0].isfullyprovisional)&&(s=!0),c&&0===t.keys(c).length&&n.unwrap(e.provisionaledits)||s?(d.selectedProvisionalEdit(void 0),this.provisionaledits().length>0&&(this.provisionaledits()[0].isfullyprovisional(!0),a.fromJS(this.provisionaledits()[0].value,e.data),this.selectedProvisionalEdit(this.provisionaledits()[0]),e._tileData.valueHasMutated())):d.selectedProvisionalEdit()&&(d.selectedProvisionalEdit(void 0),d.selectedTile().reset()),this.getUserNames(this.provisionaleditlist,l)}},d.removeSelectedProvisionalEdit=function(){this.provisionaledits.remove(this.selectedProvisionalEdit()),this.selectedProvisionalEdit(void 0)},d.selectProvisionalEdit=function(e){d.selectedProvisionalEdit()!=e&&(d.selectedProvisionalEdit(e),a.fromJS(e.value,d.selectedTile().data),d.selectedTile()._tileData.valueHasMutated(),d.selectedTile().parent.widgets().forEach((function(e){var t=e.widgetLookup[e.widget_id()].defaultconfig;!0===JSON.parse(t).rerender&&!0===d.selectedTile().parent.allowProvisionalEditRerender()&&d.selectedTile().parent.widgets()[0].label.valueHasMutated(),d.selectedTile().parent.triggerUpdate&&d.selectedTile().parent.triggerUpdate()})))},d.resetAuthoritative=function(){d.selectedProvisionalEdit(void 0),d.selectedTile().reset()},d.tileIsFullyProvisional=n.computed((function(){return d.selectedProvisionalEdit()&&!0===n.unwrap(d.selectedProvisionalEdit().isfullyprovisional)})),d.updateProvisionalEdits(d.selectedTile),d.selectedTile.subscribe(d.updateProvisionalEdits,this),d.deleteProvisionalEdit=function(n){e.ajax({url:s.urls.delete_provisional_tile,context:this,method:"POST",dataType:"json",data:{user:a.toJS(n).user,tileid:this.selectedTile().tileid}}).done((function(e){if("delete"===e.result)this.selectedTile().deleteTile();else{var a=n.user,i=this.selectedTile().provisionaledits();delete i[a],this.selectedTile().provisionaledits(i),d.selectedProvisionalEdit()===n&&(d.selectedProvisionalEdit(void 0),d.selectedTile().reset()),d.provisionaledits.remove(n),0===t.keys(this.selectedTile().provisionaledits()).length&&this.selectedTile().provisionaledits(null)}d.selectedTile()._tileData.valueHasMutated()})).fail((function(e){console.log("request failed",e)}))},d.deleteAllProvisionalEdits=function(){var n=t.map(d.provisionaledits(),(function(e){return e.user}));e.ajax({url:s.urls.delete_provisional_tile,context:this,method:"POST",dataType:"json",data:{users:JSON.stringify(n),tileid:this.selectedTile().tileid}}).done((function(e){"delete"===e.result?this.selectedTile().deleteTile():(d.selectedTile().reset(),d.selectedProvisionalEdit(void 0),d.provisionaledits.removeAll(),this.selectedTile().provisionaledits(null))})).fail((function(e){console.log("request failed",e)}))},d.acceptProvisionalEdit=function(){var e=this.selectedTile().provisionaledits(),n=this.selectedProvisionalEdit().user;e&&(delete e[n],0===t.keys(this.selectedTile().provisionaledits()).length&&this.selectedTile().provisionaledits(null),this.provisionaledits.remove(this.selectedProvisionalEdit()),this.selectedProvisionalEdit(void 0))},d.rejectProvisionalEdit=function(e){d.deleteProvisionalEdit(e)}}}.apply(t,a))||(e.exports=i)},18543:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54085)],void 0===(i=function(e,t,n){return function(a){var i=this;a.configKeys=t.union(["options","url"],a.configKeys),n.apply(this,[a]);var s="function"==typeof a.prepData?a.prepData:function(e){return e},getOptions=function(t){t&&e.ajax({url:t,dataType:"json"}).done((function(e){i.options(s(e))}))};this.url.subscribe(getOptions),getOptions(this.url())}}.apply(t,a))||(e.exports=i)},8373:function(e,t,n){var a,i;a=[n(54922),n(58420),n(84490),n(84826),n(15989),n(5523)],void 0===(i=function(e,t,n,a){return function(i){var s=this;this.report=i.report||null,this.summary=i.summary||!1,this.reportDate=a().format("MMMM D, YYYY"),this.configForm=i.configForm||!1,this.configType=i.configType||"header",this.editorContext=i.editorContext||!1,this.configState=i.report.configState||e.observable({}),this.configJSON=i.report.configJSON||e.observable({}),this.configObservables=i.configObservables||{},this.configKeys=i.configKeys||[],this.hasProvisionalData=e.pureComputed((function(){return n.some(s.tiles(),(function(t){return n.keys(e.unwrap(t.provisionaledits)).length>0}))})),this.hideEmptyNodes=e.observable(i.report.hideEmptyNodes),this.configJSON=e.computed((function(){return s.configKeys.forEach((function(e){s[e]=s.configState[e]})),s.report.configJSON(t.toJS(s.report.configState)),s.report.configJSON})).extend({deferred:!0});var l=function getCardTiles(t,n){e.unwrap(t.tiles).forEach((function(e){n.push(e),e.cards.forEach((function(e){getCardTiles(e,n)}))}))};this.tiles=e.computed((function(){var t=[];return s.report&&e.unwrap(s.report.cards).forEach((function(e){l(e,t)})),t}))}}.apply(t,a))||(e.exports=i)},47960:function(e,t,n){var a,i;a=[n(54922),n(84490),n(46186),n(22023),n(37395),n(31523)],void 0===(i=function(e,t,a,i,s){var l={},d={};Promise.resolve().then((function(){n(97190)})).catch(n.oe);return function(t){var n,c=this;if(this.graphLookup=d,this.graphLookupKeys=e.observable(Object.keys(this.graphLookup)),t.configKeys=["placeholder","defaultResourceInstance"],this.preview=a.graphs.length>0,this.renderContext=t.renderContext,"workflow"===t.renderContext&&(c.renderContext="search"),this.allowInstanceCreation=!1!==t.allowInstanceCreation,"search"===c.renderContext&&(this.allowInstanceCreation=!0===t.allowInstanceCreation),t.configForm&&(this.allowInstanceCreation=!1),this.multiple=t.multiple||!1,this.value=t.value||void 0,this.selectedItem=t.selectedItem||e.observable(),this.rootOntologyClass="",this.graphIsSemantic=!1,this.resourceTypesToDisplayInDropDown=e.observableArray(t.graphids?e.toJS(t.graphids):[]),this.displayOntologyTable="search"!==this.renderContext&&!!t.node,this.graphIds=e.observableArray(),this.searchString=t.searchString||e.unwrap(null===(n=t.node)||void 0===n?void 0:n.config.searchString),this.waitingForGraphToDownload=e.computed((function(){if(t.node&&this.resourceTypesToDisplayInDropDown().length>0){var e=this.resourceTypesToDisplayInDropDown().find((function(e){return this.graphLookupKeys().includes(e)}),this);return!e}return!1}),this),this.downloadGraph=function(e){return e in c.graphLookup?Promise.resolve(c.graphLookup[e]):window.fetch("".concat(a.urls.graphs_api).concat(e,"?cards=false&exclude=cards,domain_connections,edges,nodegroups,nodes,widgets")).then((function(e){if(!e.ok)throw new Error(a.translations.reNetworkReponseError);return e.json()})).then((function(t){return c.graphLookup[e]=t.graph,c.graphLookupKeys(Object.keys(c.graphLookup)),c.value.valueHasMutated(),t.graph}))},t.node&&"display_value"!==t.state){if(t.node.graph&&t.node.graph.get("root"))this.rootOntologyClass=t.node.graph.get("root").ontologyclass(),this.graphIsSemantic=!!this.rootOntologyClass;else{var p=t.node.graph_id||t.node.get("graph_id");c.downloadGraph(p).then((function(e){c.rootOntologyClass=e.root.ontologyclass,c.graphIsSemantic=!!c.rootOntologyClass}))}"report"!==t.state&&(e.unwrap(t.node.config.graphs).forEach((function(e){c.downloadGraph(e.graphid)}),this),this.resourceTypesToDisplayInDropDown(e.unwrap(t.node.config.graphs).map((function(e){return e.graphid}))))}else this.resourceTypesToDisplayInDropDown().length>0&&this.resourceTypesToDisplayInDropDown().forEach((function(e){c.downloadGraph(e)}));if(this.resourceInstanceDisplayName=t.form&&t.form.displayname?t.form.displayname():"",this.makeFriendly=s.makeFriendly,this.getSelect2ConfigForOntologyProperties=s.getSelect2ConfigForOntologyProperties,c.newResourceInstance=e.observable(),this.resourceReportUrl=a.urls.resource_report,this.resourceEditorUrl=a.urls.resource_editor,this.selectedResourceRelationship=e.observable(null),this.reportResourceId=e.observable(),this.reportGraphId=e.observable(null),this.filter=e.observable(""),this.toggleSelectedResourceRelationship=function(e){c.graphIsSemantic&&(c.selectedResourceRelationship()===e?c.selectedResourceRelationship(null):c.selectedResourceRelationship(e))},i.apply(this,[t]),e.isObservable(this.defaultResourceInstance)){var f=[];Array.isArray(c.defaultResourceInstance())||c.defaultResourceInstance([]),c.defaultResourceInstance().forEach((function(t){var n={resourceId:e.observable(t.resourceId),ontologyProperty:e.observable(t.ontologyProperty),inverseOntologyProperty:e.observable(t.inverseOntologyProperty),resourceXresourceId:""};n.ontologyProperty.subscribe((function(){c.defaultResourceInstance(c.value())})),n.inverseOntologyProperty.subscribe((function(){c.defaultResourceInstance(c.value())})),f.push(n)})),(this.tile&&!this.tile.noDefaults&&""==e.unwrap(this.tile.tileid)&&f.length>0||t.configForm)&&this.value(f)}if(this.displayValue=e.observable(""),this.close=function(){this.newResourceInstance(null)},this.setValue=function(e){c.multiple?(e=[e],null!==c.value()&&(e=e.concat(c.value())),c.value(e)):c.value([e]),t.configForm&&c.defaultResourceInstance(c.value())},this.lookupResourceInstanceData=function(e){return l[e]?Promise.resolve(l[e]):window.fetch("".concat(a.urls.search_results,"?id=").concat(e,"&tiles=true")).then((function(e){if(e.ok)return e.json()})).then((function(t){if(t)return l[e]=t.results.hits.hits[0],l[e]}))},"search"!==c.renderContext){c.value.subscribe((function(t){var n=[],a=e.unwrap(t);c.multiple||!a||Array.isArray(a)||(a=[a]),a&&a.forEach((function(t){t&&(t.resourceName||Object.defineProperty(t,"resourceName",{value:e.observable()}),t.ontologyClass||Object.defineProperty(t,"ontologyClass",{value:e.observable()}),t.iconClass||Object.defineProperty(t,"iconClass",{value:e.observable()}),c.lookupResourceInstanceData(e.unwrap(t.resourceId)).then((function(e){var a;e&&(n.push(e._source.displayname),c.displayValue(n.join(", ")),t.resourceName(e._source.displayname),t.iconClass((null===(a=c.graphLookup[e._source.graph_id])||void 0===a?void 0:a.iconclass)||"fa fa-question"),t.ontologyClass(e._source.root_ontology_class))})))}))})),c.value.valueHasMutated(),this.relationshipsInFilter=e.computed((function(){return c.value()?c.value().filter((function(e){return""===c.filter().toLowerCase()||e.resourceName().toLowerCase().includes(c.filter().toLowerCase())})):[]}))}this.makeObject=function(n,a){var i,s,l=c.graphLookup[a.graph_id],d=l.iconclass||"fa fa-question";if(l&&(i=l.config.ontologyProperty,s=l.config.inverseOntologyProperty,c.node&&(!i||!s))){var p=c.node.config.graphs().find((function(e){return e.graphid===l.graphid}));p&&(p.useOntologyRelationship?(i=i||p.ontologyProperty,s=s||p.inverseOntologyProperty):(i=p.relationshipConcept,s=p.inverseRelationshipConcept))}var f={resourceId:e.observable(n),ontologyProperty:e.observable(i||""),inverseOntologyProperty:e.observable(s||""),resourceXresourceId:""};return Object.defineProperty(f,"resourceName",{value:e.observable(a.displayname)}),Object.defineProperty(f,"ontologyClass",{value:e.observable(a.root_ontology_class)}),Object.defineProperty(f,"iconClass",{value:e.observable(d)}),t.configForm&&(f.ontologyProperty.subscribe((function(){c.defaultResourceInstance(c.value())})),f.inverseOntologyProperty.subscribe((function(){c.defaultResourceInstance(c.value())}))),f},this.url=e.observable(a.urls.search_results),this.resourceToAdd=e.observable(""),this.disabled=e.computed((function(){var n;return e.unwrap(c.waitingForGraphToDownload)||e.unwrap(t.disabled)||!!e.unwrap(null===(n=t.form)||void 0===n?void 0:n.locked)})),this.select2Config={value:"search"===c.renderContext?c.value:c.resourceToAdd,clickBubble:!0,disabled:this.disabled,multiple:!c.displayOntologyTable&&t.multiple,placeholder:this.placeholder()||a.translations.riSelectPlaceholder,closeOnSelect:!0,allowClear:"search"===c.renderContext,onSelect:function(t){if(c.selectedItem(t),"search"!==c.renderContext||c.allowInstanceCreation)if(t._source)if("search"===c.renderContext)c.value(t._id);else{var n=c.makeObject(t._id,t._source);c.setValue(n),window.setTimeout((function(){c.displayOntologyTable&&c.resourceToAdd("")}),250)}else if(!c.preview){var i={graphid:t._id,complete:e.observable(!1),resourceid:e.observable(),tileid:e.observable()};c.newResourceInstance(i);var clearNewInstance=function(){c.newResourceInstance(null),window.setTimeout((function(){c.resourceToAdd("")}),250)};i.complete.subscribe((function(){i.resourceid()?"search"===c.renderContext?(c.value(i.resourceid()),clearNewInstance()):window.fetch(a.urls.search_results+"?id="+i.resourceid()).then((function(e){if(e.ok)return e.json();throw"error"})).then((function(e){var t=e.results.hits.hits[0],n=c.makeObject(i.resourceid(),t._source);c.setValue(n)})).finally((function(){clearNewInstance()})):clearNewInstance()}))}},ajax:{url:function(){return c.url()},dataType:"json",quietMillis:250,data:function(e,n){if(e.startsWith("http"))return c.url(e.replace("search","search/resources")),{};c.url(a.urls.search_results);var i=new URLSearchParams;if(c.searchString){var s=new URL(c.searchString);i=new URLSearchParams(s.search)}i.set("paging-filter",n);var l=i.get("resource-type-filter")||"[]",d=JSON.parse(l);if(c.resourceTypesToDisplayInDropDown().forEach((function(e){l.includes(e)||d.push({graphid:e,inverted:!1})})),d.length>0&&i.set("resource-type-filter",JSON.stringify(d)),e||"function"==typeof t.termFilter)if("function"==typeof t.termFilter)t.termFilter(e,i);else{var p=JSON.parse(i.get("term-filter"))||[];p.push({inverted:!1,type:"string",context:"",context_label:"",id:e,text:e,value:e}),i.set("term-filter",JSON.stringify(p))}return i.toString()},results:function(e,t){return!e["paging-filter"].paginator.has_next&&c.allowInstanceCreation&&c.resourceTypesToDisplayInDropDown().forEach((function(t){var n={name:c.graphLookup[t].name,_id:t,isGraph:!0};e.results.hits.hits.push(n),c.graphIds().includes(t)||c.graphIds.push(t)})),{results:e.results.hits.hits,more:e["paging-filter"].paginator.has_next}}},id:function(e){return e._id},formatResult:function(e){if(e._source){var t,n=null===(t=c.graphLookup[e._source.graph_id])||void 0===t?void 0:t.iconclass;return'<i class="fa '.concat(n,' sm-icon-wrap"></i> ').concat(e._source.displayname)}if(c.allowInstanceCreation)return"<b> "+a.translations.riSelectCreateNew.replace("${graphName}",e.name)+" . . . </b>"},formatSelection:function(e){return e._source?'<i class="fa '.concat(e._source.iconclass,' sm-icon-wrap"></i> ').concat(e._source.displayname):e.name},initSelection:function(t,n){if("search"!==c.renderContext||""===c.value()||c.graphIds().includes(c.value()))c.graphIds().includes(c.value())&&c.value(null);else{var a=c.value();Array.isArray(c.value())||(a=[c.value()]);var i=[];a.forEach((function(t){var n;"string"==typeof t?n=t:e.unwrap(t.resourceId)&&(n=e.unwrap(t.resourceId));var a=c.lookupResourceInstanceData(n).then((function(e){return e}));a&&i.push(a)})),Promise.all(i).then((function(e){if(e.length){var t=e.map((function(e){var t;return{_source:{displayname:e._source.displayname,iconclass:(null===(t=c.graphLookup[e._source.graph_id])||void 0===t?void 0:t.iconclass)||"fa fa-question"},_id:e._id}}));!1===c.multiple&&(t=t[0]),n(t)}}))}}},this.deleteRelationship=function(e){var n=[];c.value().forEach((function(t){t.resourceId!==e.resourceId&&n.push(t)})),c.value(n),t.configForm&&c.defaultResourceInstance(n)},this.formatLabel=function(e,t,n){return c.graphIsSemantic?e+" ("+s.makeFriendly(t)+"/"+s.makeFriendly(n)+")":e}}}.apply(t,a))||(e.exports=i)},10053:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(8373),n(84714)],void 0===(i=function(e,t,n,a,i,s){return function(t){var l=this;t.configKeys=["tabs","activeTabIndex"],s.apply(this,[t]),this.activeTabIndex()>l.tabs().length-1&&this.activeTabIndex(0),this.icons=n.observableArray([]),l.summary||e.ajax({type:"GET",url:i.urls.icons}).done((function(e){var t=e.icons.map((function(e){return{text:e.name,id:e.cssclass,name:e.name,cssclass:e.cssclass}}));l.icons(t)})),this.activeTab=n.observable(l.tabs()[n.unwrap(this.activeTabIndex)]),this.report.configJSON.subscribe((function(){-1===l.tabs.indexOf(l.activeTab())&&l.activeTab(l.tabs()[n.unwrap(l.activeTabIndex)])})),this.topcards=n.unwrap(l.report.cards).map((function(e){return{name:e.model.name(),nodegroupid:e.nodegroupid}})),this.setActiveTab=function(e){l.activeTabIndex(e),l.activeTab(l.tabs()[n.unwrap(l.activeTabIndex)])},this.activeCards=n.computed((function(){var e=[];return n.unwrap(l.report.cards).forEach((function(t){void 0!==l.activeTabIndex()&&l.tabs().length>0&&l.tabs().length-1>=l.activeTabIndex()&&l.tabs()[l.activeTabIndex()].nodegroup_ids().forEach((function(n){t.nodegroupid===n&&e.push(t)}))})),e})),this.activeTabEmpty=n.computed((function(){return l.activeCards().reduce((function(e,t){return e+(n.unwrap(t.tiles).length||0)}),0)<=0})),this.moveTab=function(e){e.sourceIndex===l.activeTabIndex()&&l.setActiveTab(e.targetIndex)},this.addTab=function(){var e=a.fromJS({icon:"",name:"",nodegroup_ids:[]});this.tabs.unshift(e),this.setActiveTab(0)},this.removeTab=function(e){var t;this.tabs().length>0&&(t=this.tabs.indexOf(e)>0?this.tabs.indexOf(e)-1:0,this.setActiveTab(t),this.tabs.remove(e))}}}.apply(t,a))||(e.exports=i)},50021:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(20198),n(84490),n(54922),n(58420),n,n(46186),n(56321),n(94242)],void 0===(i=function(e,t,a,i,s,l){var d=function isChildSelected(e){var t=!1,n="tileid"in e?"cards":"tiles";return a.unwrap(e[n]).forEach((function(e){(e.selected&&e.selected()||isChildSelected(e))&&(t=!0)})),t},c=function doesChildHaveProvisionalEdits(e){var t=!1,n="tileid"in e?"cards":"tiles";return a.unwrap(e[n]).forEach((function(e){(e.hasprovisionaledits&&e.hasprovisionaledits()||doesChildHaveProvisionalEdits(e))&&(t=!0)})),t};return function(s){var p=n(56321),f=this,v=s.selection||a.observable(),h=s.scrollTo||a.observable(),b=s.filter||a.observable(),m=s.loading||a.observable();if(t.extend(this,s.tile),this._tileData=a.observable(i.toJSON(s.tile.data)),this.data=i.fromJS(s.tile.data),this.provisionaledits=a.observable(s.tile.provisionaledits),this.datatypeLookup=function(e){var t={};return e.graphModel.get("nodes")().map((function(e){return[e.nodeid,e.datatype()]})).forEach((function(e){t[e[0]]=e[1]})),t}(s),this.transactionId=s.transactionId,t.extend(this,{filter:b,parent:s.card,userisreviewer:s.userisreviewer,cards:t.filter(s.cards,(function(e){var n=t.find(a.unwrap(s.graphModel.get("nodegroups")),(function(t){return a.unwrap(t.nodegroupid)===a.unwrap(e.nodegroup_id)}));if(n)return a.unwrap(n.parentnodegroup_id)===a.unwrap(f.nodegroup_id)})).map((function(e){return new p({card:t.clone(e),tile:f,graphModel:s.graphModel,resourceId:s.resourceId,displayname:s.displayname,handlers:s.handlers,cards:s.cards,tiles:s.tiles,selection:v,scrollTo:h,loading:m,filter:b,userisreviewer:s.userisreviewer,provisionalTileViewModel:s.provisionalTileViewModel,cardwidgets:s.cardwidgets})})),expanded:a.observable(!1),hasprovisionaledits:a.pureComputed((function(){var e=a.unwrap(f.provisionaledits);return!!e&&t.keys(e).length>0}),this),isfullyprovisional:a.pureComputed((function(){return!!a.unwrap(f.provisionaledits)&&0===t.keys(i.toJS(this.data)).length}),this),selected:a.pureComputed({read:function(){return v()===this},write:function(e){e&&v(this)},owner:this}),formData:new FormData,dirty:a.pureComputed((function(){return this._tileData()!==i.toJSON(this.data)}),this),reset:function(){a.mapping.fromJS(JSON.parse(f._tileData()),f.data),t.each(s.handlers["tile-reset"],(function(e){e(f)})),s.provisionalTileViewModel&&s.provisionalTileViewModel.selectedProvisionalEdit(void 0),delete f.noDefaults},getAttributes:function(){var e=f.data?i.toJS(f.data):{},t=f.provisionaledits?i.toJS(f.provisionaledits):{};return""===f.tileid&&(f.sortorder=f.parent.tiles().length),{tileid:f.tileid,data:e,nodegroup_id:a.unwrap(f.nodegroup_id),parenttile_id:f.parenttile_id,resourceinstance_id:f.resourceinstance_id,provisionaledits:t,sortorder:f.sortorder}},getData:function(){var e={};return f.cards&&(e=t.reduce(f.cards,(function(e,t){return e.concat(t.tiles())}),[]).reduce((function(e,t){return e[t.tileid]=t.getData(),e}),{})),t.extend(f.getAttributes(),{tiles:e})},save:function(n,d){return m(!0),delete f.formData.data,s.provisionalTileViewModel&&s.provisionalTileViewModel.selectedProvisionalEdit()&&(f.formData.append("accepted_provisional",JSON.stringify(s.provisionalTileViewModel.selectedProvisionalEdit())),s.provisionalTileViewModel.acceptProvisionalEdit()),f.transactionId&&f.formData.append("transaction_id",f.transactionId),f.formData.append("data",JSON.stringify(f.getData())),e.ajax({type:"POST",url:l.urls.tile,processData:!1,contentType:!1,data:f.formData}).done((function(n,c,p){var h,b;f.tileid&&(i.fromJS(n.data,f.data),i.fromJS(n.provisionaledits,f.provisionaledits)),f._tileData(i.toJSON(f.data)),f.tileid||(f.tileid=n.tileid,f.data=i.fromJS(n.data),f.provisionaledits=i.fromJS(n.provisionaledits),f._tileData(i.toJSON(f.data)),f.dirty=a.pureComputed((function(){return f._tileData()!==i.toJSON(f.data)}),f),f.parent.tiles.push(f),f.parent.newTile=void 0,f.parent.expanded(!0),v(f)),!1!==s.userisreviewer||a.unwrap(f.provisionaledits)||f.provisionaledits(f.data),!0===s.userisreviewer&&s.provisionalTileViewModel&&s.provisionalTileViewModel.selectedProvisionalEdit()&&JSON.stringify(s.provisionalTileViewModel.selectedProvisionalEdit().value)===i.toJSON(f.data)&&s.provisionalTileViewModel.removeSelectedProvisionalEdit(),s.resourceId()||(f.resourceinstance_id=n.resourceinstance_id,s.resourceId(f.resourceinstance_id)),t.each(s.handlers["after-update"],(function(e){e(p,f)})),h=s.resourceId,b=s.displayname,e.get(l.urls.resource_descriptors+h(),(function(e){if("string"==typeof e.displayname)b(e.displayname);else{var t,n,a,i=null===(t=e.displayname.find((function(e){return e.language==l.activeLanguage})))||void 0===t?void 0:t.value,s=i||"("+(null===(n=e.displayname.filter((function(e){return e.language!=l.activeLanguage})))||void 0===n||null===(a=n[0])||void 0===a?void 0:a.value)+")";b(s)}})),"function"==typeof d&&d(n)})).fail((function(e){"function"==typeof n&&n(e)})).always((function(){m(!1)}))},deleteTile:function(t,n){m(!0),e.ajax({type:"DELETE",url:l.urls.tile,data:JSON.stringify(f.getData())}).done((function(e){s.card.tiles.remove(f),v(s.card),"function"==typeof n&&n(e)})).fail((function(e){"function"==typeof t&&t(e)})).always((function(){m(!1)}))}}),!f.noDefaults&&f.parent instanceof p){var g=a.unwrap(f.parent.widgets)||[],x=JSON.parse(f._tileData()),y=!1;g.forEach((function(e){Object.keys(f.data).forEach((function(t){if(t===e.node_id()){var n=a.unwrap(e.config.defaultValue);if(n){if("function"==typeof f.data[t])f.data[t](n);else if("object"===_typeof(f.data[t])){var i,s,d;if("function"==typeof(null===(i=f.data[t])||void 0===i||null===(s=i[l.activeLanguage])||void 0===s?void 0:s.value))null!=n&&null!==(d=n[l.activeLanguage])&&void 0!==d&&d.value?f.data[t][l.activeLanguage].value(a.unwrap(n[l.activeLanguage].value)):f.data[t][l.activeLanguage].value(n)}x[t]=n,y=!0}}}))})),y&&f._tileData(i.toJSON(x))}this.selected.subscribe((function(e){e&&this.expanded(!0)}),this),this.expanded.subscribe((function(e){e&&this.parent&&"function"!=typeof this.parent&&this.parent.expanded(!0)}),this),this.isChildSelected=a.pureComputed((function(){return d(this)}),this),this.doesChildHaveProvisionalEdits=a.pureComputed((function(){return c(this)}),this)}}.apply(t,a))||(e.exports=i)},40471:function(e,t,n){var a,i;function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(54922),n(84490),n(58420),n(59732),n(4261),n(44465)],void 0===(i=function(e,t,n,a,i,s){var l="workflow-steps";return e.components.register("workflow-step",{template:s}),function(s){t.extend(this,s);var d=this;this.id=e.observable(),this.workflowId=e.observable(s.workflow?s.workflow.id:null),this.parameters=s.parameters,this.informationBoxData=e.observable(),this.componentBasedStepClass=e.unwrap(s.workflowstepclass),this.hiddenWorkflowButtons=e.observableArray(s.hiddenWorkflowButtons||[]),this.pageLayout=e.observableArray(),this.workflowComponentAbstractLookup=e.observable({}),this.componentIdLookup=e.observable(),this.componentIdLookup.subscribe((function(e){d.setToLocalStorage("componentIdLookup",e)})),this.required=e.observable(e.unwrap(s.required)),this.saveWithoutProgressing=e.observable(e.unwrap(s.saveWithoutProgressing)),this.loading=e.observable(!1),this.saving=e.observable(!1),this.lockableExternalSteps=s.lockableExternalSteps||[],this.complete=e.computed((function(){var e=!0;return Object.values(d.workflowComponentAbstractLookup()).forEach((function(t){t.complete()||(e=!1)})),e})),this.hasUnsavedData=e.computed((function(){return Object.values(d.workflowComponentAbstractLookup()).reduce((function(e,t){return t.hasUnsavedData()&&(e=!0),e}),!1)})),this.active=e.computed((function(){return s.workflow.activeStep()===this}),this),this.locked=e.observable(!1),this.locked.subscribe((function(e){d.setToLocalStorage("locked",e)})),this.initialize=function(){var t=e.unwrap(s.id);t?d.id(t):d.id(a.generate()),s.workflow&&e.unwrap(s.workflow.id)&&(d.workflowId=e.unwrap(s.workflow.id));var n=d.getFromLocalStorage("componentIdLookup");n&&d.componentIdLookup(n);var i=d.getFromLocalStorage("locked");i&&d.locked(i),this.setupInformationBox(),e.toJS(d.layoutSections).forEach((function(e){var t=[];e.componentConfigs.forEach((function(e){t.push(e.uniqueInstanceName),d.updateWorkflowComponentAbstractLookup(e)})),d.pageLayout.push([e.sectionTitle,t])}));var l=Object.keys(d.workflowComponentAbstractLookup()).reduce((function(e,t){return e[t]=d.workflowComponentAbstractLookup()[t].id(),e}),{});d.componentIdLookup(l)},this.updateWorkflowComponentAbstractLookup=function(e){var t,n=d.workflowComponentAbstractLookup();d.getFromLocalStorage("componentIdLookup")&&(t=d.getFromLocalStorage("componentIdLookup")[e.uniqueInstanceName]);var a=new i({componentData:e,workflowComponentAbstractId:t,isValidComponentPath:s.workflow.isValidComponentPath,getDataFromComponentPath:s.workflow.getDataFromComponentPath,title:s.title,isStepSaving:d.isStepSaving,locked:d.locked,lockExternalStep:d.lockExternalStep,lockableExternalSteps:d.lockableExternalSteps,workflowId:d.workflowId,alert:d.alert,outerSaveOnQuit:d.outerSaveOnQuit,isStepActive:d.active});n[e.uniqueInstanceName]=a,d.workflowComponentAbstractLookup(n)},this.save=function(){return d.saving(!0),new Promise((function(e,t){var n=[];Object.values(d.workflowComponentAbstractLookup()).forEach((function(e){n.push(new Promise((function(t,n){e._saveComponent(t,n)})))})),Promise.all(n).then((function(t){e.apply(void 0,_toConsumableArray(t))})).catch((function(e){t(e)})).finally((function(){d.saving(!1)}))}))},this.undo=function(){return new Promise((function(e,t){var n=[];Object.values(d.workflowComponentAbstractLookup()).forEach((function(e){n.push(new Promise((function(t,n){e._resetComponent(t)})))})),Promise.all(n).then((function(t){e.apply(void 0,_toConsumableArray(t))}))}))},this.setToLocalStorage=function(t,a){var i=JSON.parse(localStorage.getItem(l))||{};i[e.unwrap(d.name)]||(i[e.unwrap(d.name)]={}),i[e.unwrap(d.name)][t]=a?n.toJSON(a):a,localStorage.setItem(l,JSON.stringify(i))},this.getFromLocalStorage=function(t){var n=JSON.parse(localStorage.getItem(l))||{};if(n[e.unwrap(d.name)]&&void 0!==n[e.unwrap(d.name)][t])return JSON.parse(n[e.unwrap(d.name)][t])},this.toggleInformationBox=function(){var e=d.informationBoxData(),t=e.displayed;e.displayed=!t,d.informationBoxData(e),s.informationBoxDisplayed(!t)},this.setupInformationBox=function(){if(s.informationBoxDisplayed&&s.informationboxdata){var e=!0;void 0!==s.informationBoxDisplayed()&&(e=s.informationBoxDisplayed()),d.informationBoxData({displayed:e,heading:s.informationboxdata.heading,text:s.informationboxdata.text})}},this.lockExternalStep=function(e,t){if(!(d.lockableExternalSteps.indexOf(e)>-1))throw new Error("The step, "+e+", cannot be locked");s.workflow.toggleStepLockedState(e,t)},this.initialize()}}.apply(t,a))||(e.exports=i)},33571:function(e,t,n){var a,i;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(59732),n(62666),n(40471),n(2469),n(86535)],void 0===(i=function(e,t,n,a,i,s,l,d){var c="workflow",p="workflow-id",f="workflow-step-id",v="workflow-step-ids";return function(t){var a=this,h=this;this.id=n.observable(),this.workflowName=n.observable(),this.hiddenWorkflowButtons=n.observableArray(),this.pan=n.observable(),this.alert=t.alert||n.observable(null),this.quitUrl=t.quitUrl||i.urls.search_home,this.plugin=t.plugin,this.isWorkflowFinished=n.observable(!1),this.stepConfig,this.steps=n.observableArray(),this.activeStep=n.observable(),this.activeStep.subscribe((function(e){h.setStepIdToUrl(e),h.hiddenWorkflowButtons(e.hiddenWorkflowButtons())})),this.furthestValidStepIndex=n.observable(),this.furthestValidStepIndex.subscribe((function(e){e>=h.steps().length-1?h.isWorkflowFinished(!0):h.isWorkflowFinished(!1)})),this.steps.subscribe((function(){a.furthestValidStepIndex.valueHasMutated()})),this.initialize=function(){h.getWorkflowMetaData(h.componentName).then((function(e){h.workflowName(e.name);var t=h.getWorkflowIdFromUrl();t?h.id(t):(h.id(s.generate()),h.setWorkflowIdToUrl()),h.getFromLocalStorage(p)!==h.id()&&(h.setToLocalStorage(p,h.id()),localStorage.removeItem("workflow-steps"),localStorage.removeItem(v),localStorage.removeItem("workflow-component-abstracts")),h.updateStepPath();var n=h.getStepIdFromUrl(),a=h.steps().find((function(e){return e.id()===n}));a?h.activeStep(a):h.activeStep(h.steps()[0])}))},this.updatePan=function(e){this.pan()!==e?this.pan(e):this.pan.valueHasMutated()},this.getInformationBoxDisplayedStateFromLocalStorage=function(e){return h.getMetadataFromLocalStorage(e,"informationBoxDisplayed")},this.getMetadataFromLocalStorage=function(e,t){var a=JSON.parse(localStorage.getItem("workflow-metadata"))||{},i=n.unwrap(h.workflowName);if(a[i]&&a[i][e])return a[i][e][t]},this.setMetadataToLocalStorage=function(e,t,a){var i=JSON.parse(localStorage.getItem("workflow-metadata"))||{},s=n.unwrap(h.workflowName);i[s]||(i[s]={}),i[s][e]||(i[s][e]={}),i[s][e][t]=a,localStorage.setItem("workflow-metadata",JSON.stringify(i))},this.createStep=function(e){var t=h.getFromLocalStorage(v),a=n.unwrap(e.name);return t&&t[a]&&(e.id=t[a]),e.informationBoxDisplayed=n.observable(h.getInformationBoxDisplayedStateFromLocalStorage(a)),e.informationBoxDisplayed.subscribe((function(e){h.setMetadataToLocalStorage(a,"informationBoxDisplayed",e)})),e.workflow=h,new d(e)},this.saveActiveStep=function(){h.activeStep().save().then((function(e){h.next()})).catch((function(e){console.error(e)}))},this.staticSaveActiveStep=function(){h.activeStep().save().catch((function(e){console.error(e)}))},this.parseComponentPath=function(e){return e.slice(1,e.length-1).split("][").map((function(e){return isNaN(Number(e))?e.slice(1,e.length-1):Number(e)}))},this.isValidComponentPath=function(e){var t;if("string"==typeof e){var n=h.parseComponentPath(e);t=h.steps().find((function(e){return e.name===n[0]}))}return Boolean(t)},this.getDataFromComponentPath=function(e){var t,a=h.parseComponentPath(e),i=h.steps().find((function(e){return e.name===a[0]}));if(i){var s=Object.keys(i.componentIdLookup()).reduce((function(e,t){return i.workflowComponentAbstractLookup()&&i.workflowComponentAbstractLookup()[t]&&i.workflowComponentAbstractLookup()[t].id()===i.componentIdLookup()[t]&&(e[t]=i.workflowComponentAbstractLookup()[t]),e}),{});t=s;var l=s[a[1]];if(l){t=n.unwrap(l.savedData);var d,c=_createForOfIteratorHelper(a.slice(2));try{for(c.s();!(d=c.n()).done;){var p=d.value;void 0!==t[p]&&(t=t[p])}}catch(e){c.e(e)}finally{c.f()}}}return t},this.toggleStepLockedState=function(e,t){var a=h.steps().find((function(t){return n.unwrap(t.name)===n.unwrap(e)}));a&&a.locked(t)},this.computedFurthestValidStepIndex=n.computed((function(){var e=h.furthestValidStepIndex()||0,t=0;h.steps().forEach((function(e){n.unwrap(e.complete)&&(t=e._index)}));for(var a=t;a<h.steps().length;a++){var i=h.steps()[a];if(!n.unwrap(i.complete)&&n.unwrap(i.required))break;e=i._index}(0===e&&h.steps()[e]&&h.steps()[e].complete()||e>0)&&(e+=1),e!==h.furthestValidStepIndex()&&h.furthestValidStepIndex(e)})),this.updateStepPath=function(){var e=[];h.stepConfig.forEach((function(t){e.push(h.createStep(t))}));for(var t,a=0;n.unwrap(e[a].name)!==n.unwrap(h.stepConfig[h.stepConfig.length-1].name);){if((t=e[a]).stepInjectionConfig){var i,s=n.unwrap(t.stepInjectionConfig.defaultStepChoice);if(t.complete()){var l=t.stepInjectionConfig.injectionLogic(t);l&&(i=h.createStep(l)),t.locked(!0)}else s&&(i=h.createStep(s));if(i){var d=t.stepInjectionConfig.stepNameToInjectAfter(t),c=e.findIndex((function(e){return n.unwrap(e.name)==d}));e.splice(c+1,0,i)}}a+=1}var p=e.map((function(e,t){return e._index=t,e}));h.steps(p);var f=h.steps().reduce((function(e,t){return e[n.unwrap(t.name)]=t.id(),e}),{});h.setToLocalStorage(v,f)},this.getWorkflowIdFromUrl=function(){return new URLSearchParams(window.location.search).get(p)},this.setWorkflowIdToUrl=function(){var e=new URLSearchParams(window.location.search);e.set(p,h.id());var t="".concat(window.location.pathname,"?").concat(e.toString());history.replaceState(null,"",t)},this.getStepIdFromUrl=function(){return new URLSearchParams(window.location.search).get(f)},this.setStepIdToUrl=function(e){var t=new URLSearchParams(window.location.search);t.set(f,e.id());var n="".concat(window.location.pathname,"?").concat(t.toString());history.pushState(null,"",n)},this.setToLocalStorage=function(e,t){var n=JSON.parse(localStorage.getItem(c))||{};n[e]=t,localStorage.setItem(c,JSON.stringify(n))},this.getFromLocalStorage=function(e){var t=JSON.parse(localStorage.getItem(c));if(t)return t[e]},this.getWorkflowMetaData=function(t){return new Promise((function(n,a){e.ajax({type:"GET",url:i.urls.plugin(t),data:{json:!0},context:h,success:function(e){n(e)}})}))},this.reverseWorkflowTransactions=function(){t.loading(!0),e.ajax({type:"POST",url:i.urls.transaction_reverse(h.id())}).then((function(){t.loading(!1),window.location.href=h.quitUrl}))},this.finishWorkflow=function(){h.activeStep().hasUnsavedData()?h.activeStep().save().then((function(){window.location.assign(h.quitUrl)})):window.location.assign(h.quitUrl)},this.quitWorkflow=function(){h.alert(new l("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),h.reverseWorkflowTransactions))},this.next=function(){var e=h.activeStep();e.stepInjectionConfig&&h.updateStepPath(),(!e.required()||e.complete())&&e._index<h.steps().length-1&&h.activeStep(h.steps()[e._index+1])},this.back=function(){var e=h.activeStep();e&&e._index>0&&h.activeStep(h.steps()[e._index-1])},h.initialize()}}.apply(t,a))||(e.exports=i)},42088:function(e,t,n){var a,i;a=[n(54922),n(84490),n(46186),n(19140),n(90905)],void 0===(i=function(e,t,n,a,i){return function(s){var l=this,d=s.mapWidget;this.active=e.observable(!1),this.projBounds=n.hexBinBounds,this.defaultProjection=t.findWhere(n.preferredCoordinateSystems,{default:!0}).proj4,this.defaultProjection?this.srid=e.observable(this.defaultProjection):this.srid("4326"),this.defaultCoords="4326"===this.srid()?[n.mapDefaultX,n.mapDefaultY]:a(this.srid(),[n.mapDefaultX,n.mapDefaultY]),this.x=e.observable(),this.y=e.observable(),this.validCoords=e.observable(!1),this.boundsWarning=e.observable(!1),this.selectedPoint=e.observable(),this.availableSrids=t.map(n.preferredCoordinateSystems,(function(e,t){return{id:"4326"===t?"4326":e.proj4,text:e.name}})),this.setMap=function(e){l.map=e},this.coordinates=e.computed((function(){var e=l.srid(),t=[void 0,void 0];return l.x()&&l.y()?l.validCoords(!0):l.validCoords(!1),l.validCoords()&&(t="4326"===e?[Number(l.x()),Number(l.y())]:a(e).inverse([Number(l.x()),Number(l.y())]),l.boundsWarning(!i.inside(i.point(t),i.bboxPolygon(l.projBounds))&&!0===l.active())),t})),this.transformCoords=function(e){var t;(l.x()&&l.y()||(l.x(l.defaultCoords[0]),l.y(l.defaultCoords[1])),l.x()&&l.y())&&(t="4326"===l.srid()?a(l.defaultProjection).inverse([Number(l.x()),Number(l.y())]):"4326"===l.defaultProjection?a(l.srid(),[Number(l.x()),Number(l.y())]):a(l.defaultProjection,l.srid(),[Number(l.x()),Number(l.y())]),l.x(t[0]),l.y(t[1]),l.defaultProjection=l.srid())},this.srid.subscribe(this.transformCoords),this.clearCoordinates=function(){l.srid("4326"),l.x(n.mapDefaultX),l.y(n.mapDefaultY),l.boundsWarning(!1)},this.addLocation=function(){if(l.x()&&l.y()){var n={type:"Point",coordinates:t.map(l.coordinates(),(function(t){return e.unwrap(t)}))};d.updateDrawLayerWithJson(JSON.stringify(n))}},this.updateSelectedPoint=function(){var e;if(d.draw.getSelected()&&d.draw.getSelected().features){var n=t.filter(d.draw.getSelected().features,(function(e){return t.some([e.geometry],{type:"Point"})}));if(n.length>0){l.selectedPoint(n[0]);var i=n[0].geometry.coordinates[0],s=n[0].geometry.coordinates[1];e="4326"===l.srid()?[i,s]:a(l.srid(),[i,s]),l.x(e[0]),l.y(e[1])}else l.selectedPoint()&&!t.contains(["draw_point","draw_polygon","draw_line_string"],d.draw.getMode())&&(l.active(!1),l.selectedPoint(void 0))}},this.active.subscribe((function(e){"search-filter"===d.context?e&&(d.extentSearch()?d.toggleExtentSearch():(d.deactivateDrawTools(),d.draw.deleteAll(),d.value({type:"FeatureCollection",features:[]}))):l.updateSelectedPoint()})),this.transformCoords()}}.apply(t,a))||(e.exports=i)},37681:function(e,t,n){var a,i;a=[n(54922),n(66186),n(89743)],void 0===(i=function(e,t,n){return e.components.register("default-card",{viewModel:t,template:n})}.apply(t,a))||(e.exports=i)},88776:function(e,t,n){var a,i;a=[n(54922),n(76784)],void 0===(i=function(e,t){return e.components.register("imagereader",{viewModel:function(t){this.params=t,this.url="",this.type="",this.displayContent=e.unwrap(this.params.displayContent),this.displayContent&&(this.url=this.displayContent.url,this.type=this.displayContent.type),this.fileType="image/jpeg"},template:t})}.apply(t,a))||(e.exports=i)},45917:function(e,t,n){var a,i;a=[n(54922),n(53231)],void 0===(i=function(e,t){return e.components.register("pdfreader",{viewModel:function(t){this.params=t,this.url="",this.type="",this.displayContent=e.unwrap(this.params.displayContent),this.displayContent&&(this.url=this.displayContent.url,this.type=this.displayContent.type),this.fileType="application/pdf"},template:t})}.apply(t,a))||(e.exports=i)},54070:function(e,t,n){var a,i;a=[n(20198),n(54922),n(59732),n(46186),n(24181),n(66186),n(73770),n(41762),n(91415),n(32165),n(85935),n(5328),n(46562),n(58943)],void 0===(i=function(e,t,a,i,s,l,d,c,p){return t.components.register("file-viewer",{viewModel:function(e){e.configKeys=["acceptedFiles","maxFilesize"];var p=this;this.urls=i.urls,this.fileFormatRenderers=Object.values(s),this.rendererComponentName=t.observable(),this.fileFormatRenderers.forEach((function(e){e.state={},e.disabled=!0})),this.applyToAll=t.observable(!1),l.apply(this,[e]),this.card.staging?this.card.staging.valueHasMutated():d.apply(this,[e]),"filter"in this.card==!1&&(this.card.filter=t.observable("")),"renderer"in this.card==!1&&(this.card.renderer=t.observable()),this.fileRenderer=this.card.renderer;var f=s[this.fileRenderer.id];f&&n.e(9089).then((function(){var e=[n(29089)("".concat(f.component))];(function(e){p.rendererComponentName(f.name)}).apply(null,e)})).catch(n.oe),this.managerRenderer=t.observable(),this.filter=this.card.filter;var v,h;function stageTile(e){p.card.staging.push(e.tileid)}this.fileListNodeId=((h=e.card.model.nodes().filter((function(e){if("file-list"===e.datatype()&&p.card.nodegroupid==e.nodeGroupId())return e}))).length&&(v=h[0].nodeid),v),this.acceptedFiles=t.observable(null),this.displayWidgetIndex=p.card.widgets().indexOf(p.card.widgets().find((function(e){return"file-list"===e.datatype.datatype}))),c.apply(this,[e]),this.workbenchWrapperClass=t.observable("autoheight"),this.card&&this.card.activeTab?p.activeTab(this.card.activeTab):p.activeTab=t.observable(),this.selected=t.observable(),this.activeTab.subscribe((function(e){p.card.activeTab=e})),this.fileRenderer.subscribe((function(){["add","edit","manage"].indexOf(p.activeTab())<0&&p.activeTab(void 0)})),p.card.tiles.subscribe((function(e){0===e.length&&p.activeTab(null)})),this.getFileFormatRenderer=function(e){return p.fileFormatRenderers.find((function(t){return t.id===e}))},this.card.checkrenderers||(this.card.checkrenderers=this.card.staging.subscribe((function(){var e=[],n=[],a=!0,i=p.card?p.card.staging():[];p.card.tiles().filter((function(e){return i.indexOf(e.tileid)>=0})).forEach((function(i){var s=i.data[p.fileListNodeId]()[0],l=p.getDefaultRenderers(t.unwrap(s.type),t.unwrap(s.name));0===e.length?n=(e=l).map((function(e){return e.id})):a=l.every((function(e){return n.indexOf(e.id)>-1}))})),p.fileFormatRenderers.forEach((function(e){-1===n.indexOf(e.id)||!1===a?e.disabled=!0:e.disabled=!1}))}))),this.getDefaultRenderers=function(e,n){var a=[];return this.fileFormatRenderers.forEach((function(i){var s=i.exclude?i.exclude.split(","):[],l=e;try{d=t.unwrap(n).split(".").pop()}catch(e){var d=n.name?t.unwrap(n.name).split(".").pop():void 0}i.type===l&&i.ext===d&&a.push(i);var c=t.unwrap(e).split("/")[0],p=i.type.split("/"),f=p[0];"*"===p[1]&&c===f&&s.indexOf(d)<0&&a.push(i)})),a},this.getUrl=function(e){var n,a,i,s,l,d="",c="",f=t.unwrap(e.data[this.fileListNodeId]);return f&&1==f.length&&(d=t.unwrap(f[0].url)||t.unwrap(f[0].content),c=t.unwrap(f[0].type),n=t.unwrap(f[0].name),s=t.unwrap(f[0].renderer),(a=p.fileFormatRenderers.find((function(e){return e.id===s})))||(l=p.getDefaultRenderers(c,f[0]),a||(l=p.getDefaultRenderers(c,t.unwrap(f[0].name)))),a&&(i=a.iconclass)),{url:d,type:c,name:n,renderer:a,iconclass:i,tile:e,renderers:l}},this.isFiltered=function(e){return p.getUrl(e).name.toLowerCase().includes(p.filter().toLowerCase())},this.filteredTiles=t.pureComputed((function(){return p.card.tiles().filter((function(e){return p.getUrl(e).name.toLowerCase().includes(p.filter().toLowerCase())}),this)}),this),this.uniqueId=a.generate(),this.uniqueidClass=t.computed((function(){return"unique_id_"+p.uniqueId})),this.selectDefault=function(){var e=this;return function(){var t,n="manage"===e.activeTab()?"manage":"edit";e.toggleTab(n);var a=e.card.tiles.indexOf(e.selected());e.card.tiles().length>0&&-1===a&&(a=0),(t=e.card.tiles()[a])&&(t.selected(!0),e.selectItem(t)),e.activeTab(n)}},this.defaultSelector=this.selectDefault(),this.checkIfRendererIsValid=function(e,n){return p.getDefaultRenderers(t.unwrap(e.type),t.unwrap(e.name)).indexOf(n)>-1},this.applyRendererToStaged=function(e){this.card.staging().forEach((function(n){var a=p.card.tiles().find((function(e){return e.tileid==n}));if(a){var i=t.unwrap(a.data[p.fileListNodeId])[0];p.checkIfRendererIsValid(i,e)&&(i.renderer=e?e.id:"",a.save())}}))},this.applyRendererToSelected=function(e){if(p.displayContent()){var n=p.displayContent().tile,a=t.unwrap(n.data[p.fileListNodeId]);if(a.length>0)p.checkIfRendererIsValid(a[0],e)&&(a[0].renderer=e?e.id:"",n.save())}t.unwrap(p.applyToAll)&&p.applyRendererToStaged(e)},this.displayContent=t.computed((function(){var e,n=this.card.tiles().find((function(e){return!0===e.selected()}));return n?((!this.selected()||this.selected()&&this.selected().tileid!==n.tileid)&&this.selected(n),e=this.getUrl(n),this.fileRenderer(e.renderer?e.renderer.id:void 0)):(this.selected(void 0),["add","edit","manage"].indexOf(p.activeTab())<0&&p.activeTab(void 0)),e&&(e.availableRenderers=p.getDefaultRenderers(e.type,e),e.validRenderer=t.observable(!0)),e}),this).extend({deferred:!0}),void 0===this.displayContent()&&this.activeTab(void 0),this.selectItem=function(e){e&&e.selected&&!0!==t.unwrap(e)&&!0!==t.unwrap(e.selected)&&e.selected(!0)},this.removeTile=function(e){e.deleteTile(null,p.defaultSelector)},this.removeTiles=function(){this.card.staging().forEach((function(e){var t=p.card.tiles().find((function(t){return t.tileid==e}));t&&t.deleteTile(null,p.defaultSelector)}),this),p.card.staging([])},this.stageAll=function(){this.card.tiles().forEach((function(e){p.card.staging().indexOf(e.tileid)<0&&p.card.staging.push(e.tileid)}))},this.stageFiltered=function(){p.card.staging([]),this.filteredTiles().forEach((function(e){p.card.staging().indexOf(e.tileid)<0&&p.card.staging.push(e.tileid)}))},this.clearStaging=function(){p.card.staging([])},this.form&&t.unwrap(this.form.resourceId)?this.card.resourceinstanceid=t.unwrap(this.form.resourceId):void 0===this.card.resourceinstanceid&&0===this.card.tiles().length&&(this.card.resourceinstanceid=a.generate()),this.downloadSelection=function(){var e=i.urls.download_files+"?tiles="+JSON.stringify(p.card.staging())+"&node="+p.fileListNodeId;window.open(e)},this.addTile=function(e){var t;t=p.card.getNewTile();var n=p.getDefaultRenderers(e.type,e.name),a={name:e.name,accepted:!0,height:e.height,lastModified:e.lastModified,size:e.size,status:e.status,type:e.type,width:e.width,url:null,file_id:null,index:0,content:window.URL.createObjectURL(e),error:e.error,renderer:1===n.length?n[0].id:void 0};t.data[p.fileListNodeId]([a]),t.formData.append("file-list_"+p.fileListNodeId,e,e.name),t.resourceinstance_id=p.card.resourceinstanceid,0===p.card.tiles().length&&function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}(100),t.save(null,stageTile),p.card.newTile=void 0},this.getAcceptedFiles=function(){p.card.widgets().forEach((function(e){e.node_id()===p.fileListNodeId&&t.unwrap(e.attributes.config.acceptedFiles)&&p.acceptedFiles(t.unwrap(e.attributes.config.acceptedFiles))}))},this.getAcceptedFiles(),this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,autoQueue:!1,acceptedFiles:p.acceptedFiles(),clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){p.dropzone=this,this.on("addedfiles",(function(){p.card.staging([])})),this.on("addedfile",p.addTile,p),this.on("error",(function(e,t){e.error=t}))}}},template:p})}.apply(t,a))||(e.exports=i)},49438:function(e,t,n){var a,i;function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(84490),n(20198),n(54922),n(46186),n(66186),n(62666),n(2147),n(76516)],void 0===(i=function(e,t,n,a,i,s,l){var d=function flattenTree(t,a){return e.each(n.unwrap(t),(function(e){a.push(e),flattenTree(n.unwrap(e.cards),a)}),this),a};function viewModel(l){var c,p,f,v,h=this;this.saving=(null===(c=l.form)||void 0===c?void 0:c.saving)||n.observable(!1),this.tiles=[],this.widgetInstanceDataLookup={},this.showGrid=null==l||null===(p=l.form)||void 0===p?void 0:p.showGrid,this.toggleGrid=null==l||null===(f=l.form)||void 0===f?void 0:f.toggleGrid,l.configKeys=["groupedCardIds","sortedWidgetIds"],i.apply(this,[l]),v="report"===l.state?d(l.pageVm.report.cards,[]):l.card.parent?l.card.parent.cards:d(l.card.topCards,[]),this.cardLookup={},this.subscriptions={},this.siblingCards=n.observableArray(),e.each(v,(function(e){this.cardLookup[e.model.id]=e,e.parentCard===l.card.parentCard&&"1"===e.model.cardinality()&&e!==l.card&&0===e.cards().length&&this.siblingCards.push({name:e.model.name(),id:e.model.id})}),this),this.groupedCards=n.computed((function(){return e.map([this.card.model.id].concat(this.groupedCardIds()),(function(t){var n=this.cardLookup[t],i=n.model.cardinality.subscribe((function(i){if("1"!==i){n.model.cardinality("1");var d=a.translations.groupingErrorTitle,c=a.translations.groupingErrorMessage.replace(/\$\{cardName\}/g,h.card.model.name());l.pageVm.alert(new s("ep-alert-red",d,c,(function(){}),(function(){var a=e.filter(h.groupedCardIds(),(function(e){return e!==n.model.id}));h.groupedCardIds(a),h.subscriptions[t].dispose(),n.model.cardinality("n"),h.card.model.save()})))}}),this);return this.subscriptions[t]=i,n}),this)}),this);var updatedSortedWidgetsList=function(t){this.widgetInstanceDataLookup={};var n=this.sortedWidgetIds(),a=[];t.forEach((function(e){e.widgets().forEach((function(e){this.widgetInstanceDataLookup[e.node_id()]=e,a.push(e.node_id())}),this)}),this),e.each(this.widgetInstanceDataLookup,(function(t,a){e.contains(n,a)||n.push(a)}),this),this.sortedWidgetIds(_toConsumableArray(e.without.apply(e,[n].concat(_toConsumableArray(e.difference(n,a))))))};updatedSortedWidgetsList.call(this,this.groupedCards()),this.groupedCards.subscribe((function(e){updatedSortedWidgetsList.call(this,e)}),this),e.each(this.groupedCards(),(function(e){e.widgets.subscribe((function(){updatedSortedWidgetsList.call(this,this.groupedCards())}),this)}),this),l.preview&&e.each(this.groupedCards(),(function(t){0===t.tiles().length&&t.tiles.push(t.getNewTile()),e.each(t.widgets(),(function(e){e.parent=h.card}))}),this),this.groupedTiles=n.computed((function(){if(this.saving())return this.tiles;var t=[];return e.each(this.groupedCards(),(function(e){e.tiles().length>0?t.push(e.tiles()[0]):t.push(e.getNewTile())}),this),this.tiles=t,t}),this),n.isObservable(l.tiles)&&(l.tiles(h.groupedTiles()),h.groupedTiles.subscribe((function(e){l.tiles(e)}))),this.hasTiles=n.computed((function(){return e.some(this.groupedCards(),(function(e){return e.tiles().length>0}),this)}),this),this.getDataForDisplay=function(e){var t=h.widgetInstanceDataLookup[e],n=h.groupedTiles().find((function(e){return Object.keys(e.data).includes(t.node.nodeid)}));return{widget:t,tile:n,tileData:n.data[t.node.nodeid],card:h.cardLookup[t.card.cardid()]}},this.beforeMove=function(e){},this.afterMove=function(e){l.card.model.save()},this.getTile=function(t){var n=e.find(this.groupedTiles(),(function(e){return e.parent.model.id===t}));return!n&&l.preview&&(n=h.cardLookup[t].getNewTile()),n},this.dirty=n.computed((function(){return Boolean(e.find(h.groupedTiles(),(function(e){return e.dirty()})))})),n.isObservable(l.dirty)&&this.dirty.subscribe((function(e){l.dirty(e)})),this.previouslySaved=n.computed((function(){return!!e.find(this.groupedTiles(),(function(e){return!!e.tileid}),this)}),this),this.saveTiles=function(){var t,a=n.observableArray().extend({rateLimit:250}),i=h.groupedTiles(),d=h.groupedTiles()[0];d.resourceinstance_id=n.unwrap(h.form.resourceId),d.transactionId=null===(t=l.form)||void 0===t?void 0:t.workflowId,h.saving(!0),d.save((function(e){a.push(e),h.groupedCardIds.valueHasMutated(),h.selectGroupCard()}),(function(){var t=e.map(e.rest(i),(function(e){var t;return e.resourceinstance_id=n.unwrap(h.form.resourceId),e.transactionId=null===(t=l.form)||void 0===t?void 0:t.workflowId,e.save((function(e){a.push(e)}))}),h);Promise.all(t).finally((function(){h.groupedCardIds.valueHasMutated(),h.selectGroupCard(),l.form.onSaveSuccess&&l.form.onSaveSuccess(h.tiles),h.saving(!1),h.loading(!1)}))})),a.subscribe((function(e){var t=[],n=[];e.forEach((function(e){t.push(e.responseJSON.title),n.push(e.responseJSON.message)})),l.pageVm.alert(new s("ep-alert-red",t.join(),n.join(),null,(function(){}))),l.form.onSaveError&&l.form.onSaveError(h.tile)}))},l.save&&(l.save=h.saveTiles),l.form&&l.form.save&&(l.form.save=h.saveTiles),this.deleteTiles=function(){l.loading(!0);var e=this,i=n.observableArray().extend({rateLimit:250}),d=e.groupedTiles().map((function(e){if(e.tileid)return t.ajax({type:"DELETE",url:a.urls.tile,data:JSON.stringify(e.getData())}).done((function(t){e.parent.tiles.remove(e)})).fail((function(e){i.push(e)}))}),e);Promise.all(d).finally((function(){l.loading(!1),e.selectGroupCard(),e.resetTiles()})),i.subscribe((function(e){var t=[],n=[];e.forEach((function(e){t.push(e.responseJSON.title),n.push(e.responseJSON.message)})),l.pageVm.alert(new s("ep-alert-red",t.join(),n.join(),null,(function(){})))}))},this.resetTiles=function(){e.each(this.groupedTiles(),(function(e){e.reset()}),this)},this.selectGroupCard=function(){this.card.selected(!0)}}return n.components.register("grouping-card-component",{viewModel:viewModel,template:l}),viewModel}.apply(t,a))||(e.exports=i)},20025:function(e,t,n){var a,i;a=[n(54922),n(58420),n(66186),n(22172),n(62666),n(32441)],void 0===(i=function(e,t,n,a,i,s){var viewModel=function(s){var l=this;s.configKeys=["defaultManifest"],n.apply(this,[s]);var d=!0;l.tile&&(d=!l.tile.tileid),d&&(this.onSaveSuccess=function(){l.card.center=l.map().getCenter(),l.card.zoom=l.map().getZoom()}),this.deleteTile=function(){l.loading(!0),l.tile.deleteTile((function(e){l.loading(!1),s.pageVm.alert(new i("ep-alert-red",e.responseJSON.title,e.responseJSON.message,null,(function(){}))),s.form.onDeleteError&&s.form.onDeleteError(l.tile)}),(function(){l.loading(!1),l.card.tiles().length||(l.card.manifest=void 0,l.card.canvas=void 0),s.form.onDeleteSuccess&&s.form.onDeleteSuccess(l.tile)}))},this.form&&this.tile&&(s.widgets=this.card.widgets().filter((function(t){var n=t.node_id();return"annotation"===e.unwrap(l.form.nodeLookup[n].datatype)})),s.widgets.forEach((function(e){var n=e.node_id(),a=t.toJS(l.tile.data[n]);a&&a.features.forEach((function(e){e.properties.manifest&&!s.manifest&&(s.manifest=e.properties.manifest),e.properties.canvas&&!s.canvas&&(s.canvas=e.properties.canvas)}))}))),s.manifest||(s.manifest=this.card.manifest||this.defaultManifest()),s.canvas=s.canvas||this.card.canvas,s.center=this.card.center,s.zoom=this.card.zoom,s.expandGallery=this.card.expandGallery,s.showGallery=this.card.showGallery,a.apply(this,[s]),this.form&&!this.preview&&(this.card.manifest=this.manifest(),this.card.canvas=this.canvas(),this.manifest.subscribe((function(e){l.card.manifest=e})),this.canvas.subscribe((function(e){l.card.canvas=e}))),this.preview&&(this.manifest.subscribe((function(e){e!==l.defaultManifest()&&l.defaultManifest(e)})),this.defaultManifest.subscribe((function(e){e!==l.manifest()&&l.manifest(e)}))),l.card.center=void 0,l.card.zoom=void 0,l.expandGallery.subscribe((function(e){l.card.expandGallery=e})),l.showGallery.subscribe((function(e){l.card.showGallery=e}))};return e.components.register("iiif-card",{viewModel:viewModel,template:s}),viewModel}.apply(t,a))||(e.exports=i)},22207:function(e,t,n){var a,i;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(54922),n(46186),n(66186),n(2370),n(73616),n(84714),n(64328),n(80508)],void 0===(i=function(e,t,n,a,i){var viewModel=function(i){var s=this;i.configKeys=["basemap","overlayConfigs","selectSource","selectSourceLayer","selectText","zoom","centerX","centerY"],n.apply(this,[i]);var l=[];if(s.form&&s.tile){l=s.card.widgets().filter((function(t){var n=t.node_id();return"geojson-feature-collection"===e.unwrap(s.form.nodeLookup[n].datatype)}));var d,c=_createForOfIteratorHelper(l);try{for(c.s();!(d=c.n()).done;){var p=d.value;p.config.basemap(s.basemap()),p.config.overlayConfigs(s.overlayConfigs()),p.config.centerX(s.centerX()),p.config.centerY(s.centerY()),p.config.zoom(s.zoom())}}catch(e){c.e(e)}finally{c.f()}}this.card.overlaysObservable&&(i.overlaysObservable=this.card.overlaysObservable,i.activeBasemap=this.card.activeBasemap),e.isObservable(s.basemap)&&(0==s.centerX()&&0==s.centerY()&&0==s.zoom()&&(s.centerX(t.mapDefaultX),s.centerY(t.mapDefaultY),s.zoom(t.mapDefaultZoom)),this.basemap.subscribe((function(e){s.config.basemap()!==e&&s.config.basemap(e);var t,n=_createForOfIteratorHelper(l);try{for(n.s();!(t=n.n()).done;){t.value.config.basemap(e)}}catch(e){n.e(e)}finally{n.f()}})),this.overlayConfigs.subscribe((function(e){s.config.overlayConfigs()!==e&&s.config.overlayConfigs(e);var t,n=_createForOfIteratorHelper(l);try{for(n.s();!(t=n.n()).done;){t.value.config.overlayConfigs(e)}}catch(e){n.e(e)}finally{n.f()}})),this.centerX.subscribe((function(e){s.config.centerX()!==e&&s.config.centerX(e),s.centerX(e);var t,n=_createForOfIteratorHelper(l);try{for(n.s();!(t=n.n()).done;){t.value.config.centerX(e)}}catch(e){n.e(e)}finally{n.f()}})),this.centerY.subscribe((function(e){s.config.centerY()!==e&&s.config.centerY(e),s.centerY(e);var t,n=_createForOfIteratorHelper(l);try{for(n.s();!(t=n.n()).done;){t.value.config.centerY(e)}}catch(e){n.e(e)}finally{n.f()}})),this.zoom.subscribe((function(e){s.config.zoom()!==e&&s.config.zoom(e),s.zoom(e);var t,n=_createForOfIteratorHelper(l);try{for(n.s();!(t=n.n()).done;){t.value.config.zoom(e)}}catch(e){n.e(e)}finally{n.f()}}))),i.defaultConfig=s.card.model.get("defaultConfig"),i.overlayConfigs=this.overlayConfigs,i.basemap=this.basemap,i.x=this.centerX,i.y=this.centerY,i.zoom=this.zoom,i.usePosition=!0,i.widgets=l,a.apply(this,[i]),this.expandSidePanel=e.computed((function(){return!!s.tile&&(s.tile.hasprovisionaledits()&&!0===s.reviewer)})),this.card.allowProvisionalEditRerender(!1),this.card.overlaysObservable||(this.card.overlaysObservable=this.overlays,this.card.activeBasemap=this.activeBasemap)};return e.components.register("map-card",{viewModel:viewModel,template:i}),viewModel}.apply(t,a))||(e.exports=i)},99372:function(e,t,n){var a,i;a=[n(54922),n(58420),n(84490),n(46562),n(59732),n(66186),n(41762),n(47809),n(97975),n(32165),n(85935),n(58943),n(2469)],void 0===(i=function(e,t,n,a,i,s,l,d,c){return e.components.register("photo-gallery-card",{viewModel:function(t){t.configKeys=["acceptedFiles","maxFilesize"];var n=this;s.apply(this,[t]),l.apply(this,[t]),this.card&&this.card.activeTab&&n.activeTab(this.card.activeTab),this.photoGallery=new d,this.lastSelected=0,this.selected=e.observable(),n.activeTab.subscribe((function(e){n.card.activeTab=e})),n.card.tiles.subscribe((function(e){0===e.length&&n.activeTab(null)}));var a,c;if(this.fileListNodeId=((c=t.card.model.nodes().filter((function(e){if("file-list"===e.datatype()&&n.card.nodegroupid==e.nodeGroupId())return e}))).length&&(a=c[0].nodeid),a),this.getUrl=function(t){var n="",a="",i=e.unwrap(t.data[this.fileListNodeId]);return i&&1==i.length&&(n=e.unwrap(i[0].url)||e.unwrap(i[0].content),a=e.unwrap(i[0].name)),{url:n,name:a}},this.uniqueId=i.generate(),this.uniqueidClass=e.computed((function(){return"unique_id_"+n.uniqueId})),this.showThumbnails=e.observable(!1),this.selectDefault=function(){var e=this;return function(){var t=e.card.tiles.indexOf(e.selected());e.card.tiles().length>0&&-1===t&&(t=0),e.card.tiles()[t],e.photoGallery.selectItem(e.card.tiles()[t])}},this.defaultSelector=this.selectDefault(),this.displayContent=e.pureComputed((function(){var e,t=this.card.tiles().find((function(e){return!0===e.selected()}));return t?(this.selected(t),e=this.getUrl(t).url):this.selected(void 0),e}),this),void 0===this.displayContent()){(this.card.tiles().length>0&&this.form&&e.unwrap(this.form.selection)&&"root"!==this.form.selection()||this.form&&!e.unwrap(this.form.selection))&&this.photoGallery.selectItem(this.card.tiles()[0])}this.removeTile=function(e){e.deleteTile(),setTimeout(n.defaultSelector,150)},this.form&&e.unwrap(this.form.resourceId)?this.card.resourceinstanceid=e.unwrap(this.form.resourceId):void 0===this.card.resourceinstanceid&&0===this.card.tiles().length&&(this.card.resourceinstanceid=i.generate()),this.addTile=function(e){var t;t=n.card.getNewTile();var a={name:e.name,accepted:!0,height:e.height,lastModified:e.lastModified,size:e.size,status:e.status,type:e.type,width:e.width,url:null,file_id:null,index:0,content:window.URL.createObjectURL(e),error:e.error};t.data[n.fileListNodeId]([a]),t.formData.append("file-list_"+n.fileListNodeId,e,e.name),t.resourceinstance_id=n.card.resourceinstanceid,0===n.card.tiles().length&&function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}(50),t.save(),n.card.newTile=void 0},this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,autoQueue:!1,clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){n.dropzone=this,this.on("addedfile",n.addTile,n),this.on("error",(function(e,t){e.error=t}))}}},template:c})}.apply(t,a))||(e.exports=i)},28610:function(e,t,n){var a,i;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(20198),n(54922),n(58420),n(28459),n(46186),n(66186),n(2370),n(52933),n(89535),n(58747),n(37228)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p,f){var viewModel=function(p){var f=this;this.widgets=[],p.configKeys=["selectRelatedSource","selectRelatedSourceLayer","selectLayerConfig","defaultcolor","selectioncolor","hovercolor","colorpalette","fillopacity","overviewzoom","minzoom","pointradius","linewidth","strokecolor","strokelinewidth","strokepointradius","strokepointopacity"],s.apply(this,[p]);var v={};v.defaultcolor=this.defaultcolor(),v.selectioncolor=this.selectioncolor(),v.hovercolor=this.hovercolor(),v.colorpalette="string"==typeof this.colorpalette()?this.colorpalette().split(","):this.colorpalette(),v.fillopacity=Number(this.fillopacity()),v.overviewzoom=Number(this.overviewzoom()),v.minzoom=Number(this.minzoom()),v.pointradius=Number(this.pointradius()),v.linewidth=Number(this.linewidth()),v.strokecolor=this.strokecolor(),v.strokelinewidth=Number(this.strokelinewidth()),v.strokepointradius=Number(this.strokepointradius()),v.strokepointopacity=Number(this.strokepointopacity()),f.form&&f.tile&&f.card.widgets().forEach((function(e){var n=e.node_id(),a=t.unwrap(f.form.nodeLookup[n].datatype);"resource-instance"!==a&&"resource-instance-list"!==a&&"geojson-feature-collection"!==a||f.widgets.push(e)}));this.basemap=t.observable(),this.overlayConfigs=t.observable(),this.centerX=t.observable(),this.centerY=t.observable();var h,b=_createForOfIteratorHelper(f.widgets);try{for(b.s();!(h=b.n()).done;){var m=h.value;m.config.basemap&&f.basemap(m.config.basemap()),m.config.overlayConfigs&&f.overlayConfigs(m.config.overlayConfigs()),m.config.centerX&&f.centerX(m.config.centerX()),m.config.centerY&&f.centerY(m.config.centerY())}}catch(e){b.e(e)}finally{b.f()}this.basemap.subscribe((function(e){var t,n=_createForOfIteratorHelper(f.widgets);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config.basemap&&a.config.basemap(e)}}catch(e){n.e(e)}finally{n.f()}})),this.overlayConfigs.subscribe((function(e){var t,n=_createForOfIteratorHelper(f.widgets);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config.overlayConfigs&&a.config.overlayConfigs(e)}}catch(e){n.e(e)}finally{n.f()}})),this.centerX.subscribe((function(e){var t,n=_createForOfIteratorHelper(f.widgets);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config.centerX&&a.config.centerX(e)}}catch(e){n.e(e)}finally{n.f()}})),this.centerY.subscribe((function(e){var t,n=_createForOfIteratorHelper(f.widgets);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config.centerY&&a.config.centerY(e)}}catch(e){n.e(e)}finally{n.f()}})),this.zoom=t.observable(this.overviewzoom()),this.zoom.subscribe((function(e){f.config.overviewzoom(e);var t,n=_createForOfIteratorHelper(f.widgets);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config.zoom&&a.config.zoom(e)}}catch(e){n.e(e)}finally{n.f()}})),p.basemap=this.basemap,p.overlayConfigs=this.overlayConfigs,p.x=this.centerX,p.y=this.centerY,p.zoom=this.zoom,this.hoverId=t.observable(),this.nodeids=function(){var e=[];if(f.selectRelatedSource()){var t=new window.URL(i.mapSources[f.selectRelatedSource()].data,window.location.origin),n=t.searchParams.get("nodeids"),a=t.searchParams.get("nodeid");a&&e.push(a),n&&(e=e.concat(n.split(",")))}return e}(),this.nodeDetails=t.observableArray(),this.nodeids.forEach((function(e){fetch(i.urls.api_nodes(e)).then((function(e){return e.json()})).then((function(e){f.nodeDetails.push(e[0])})).catch((function(e){console.error("Error:",e)}))}));var g=JSON.parse(JSON.stringify(this.nodeids)),x=g.length>0?[g[0]]:[];this.filterNodeIds=t.observableArray(x),this.relatedResourceDetails={},this.relatedResourceWidgets=this.widgets.filter((function(e){return"resource-instance"===e.datatype.datatype||"resource-instance-list"===e.datatype.datatype})),this.relatedResources=t.pureComputed((function(){var e=[];return f.relatedResourceWidgets.forEach((function(n){var a=t.unwrap(n.node_id);f.tile.data[a]()&&f.tile.data[a]().forEach((function(n){var s=t.unwrap(n.resourceId);s&&(e.push(s),f.relatedResourceDetails[s]||window.fetch(i.urls.search_results+"?id="+s).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=e.results.hits.hits[0]._source;f.relatedResourceDetails[s]={graphid:t.graph_id,resourceinstanceid:s,displayname:t.displayname,geometries:t.geometries},f.tile.data[a].valueHasMutated()})))}))})),e.map((function(e){return f.relatedResourceDetails[e]})).filter((function(e){return void 0!==e}))})),this.showRelatedQuery=t.observable(!1);var y=t.observable(),w=this.selectRelatedSource(),k=this.selectRelatedSourceLayer(),S=t.computed((function(){var e=[];return f.relatedResourceWidgets.forEach((function(a){var i=a.node_id(),s=t.unwrap(f.tile.data[i])?n.toJS(f.tile.data[i]().map((function(e){return e.resourceId}))):null;s&&(e=e.concat(s))})),e})),updateResourceBounds=function(t){t.length>0&&e.getJSON({url:i.urls.geojson,data:{resourceid:t.join(",")}},(function(e){e.features.length>0&&y(a(e))}))};updateResourceBounds(S()),S.subscribe(updateResourceBounds);var _=!0;y.subscribe((function(e){var t=f.map();t&&t.getStyle()&&_&&t.fitBounds(e),_=!0}));var T=c(w,k,S(),!0,null,this.nodeids,this.filterNodeIds(),f.hoverId(),v),C=[];for(var I in i.mapSources)Object.prototype.hasOwnProperty.call(i.mapSources,I)&&C.push(I);var updateResourceSelectLayers=function(){var e=f.selectRelatedSource(),t=f.selectRelatedSourceLayer();T=C.indexOf(e)>0?c(e,t,S(),!0,null,f.nodeids,f.filterNodeIds(),f.hoverId(),v):[],f.additionalLayers(T.concat($))};S.subscribe(updateResourceSelectLayers),this.selectRelatedSource.subscribe(updateResourceSelectLayers),this.selectRelatedSourceLayer.subscribe(updateResourceSelectLayers),this.filterNodeIds.subscribe(updateResourceSelectLayers),this.hoverId.subscribe(updateResourceSelectLayers),p.activeTab="editor";var $=[];p.layers&&($=p.layers),p.layers=t.observable($.concat(T)),p.fitBounds=y,l.apply(this,[p]),this.relateResource=function(e,a){var i=a.node_id(),s=t.unwrap(e.resourceinstanceid),l=t.unwrap(f.form.nodeLookup[i].datatype);f.relatedResourceDetails[t.unwrap(e.resourceinstanceid)]={graphid:t.unwrap(e.graphid),displayname:t.unwrap(e.displayname),resourceinstanceid:t.unwrap(e.resourceinstanceid)},_=!1;var d=a.node.config.graphs().find((function(n){return n.graphid===t.unwrap(e.graphid)})),c=[{ontologyProperty:t.observable((null==d?void 0:d.ontologyProperty)||""),inverseOntologyProperty:t.observable((null==d?void 0:d.ontologyProperty)||""),resourceId:s,resourceXresourceId:""}];if("resource-instance"===l)f.tile.data[i](c);else{var p=n.toJS(f.tile.data[i]);if(p){if(p.map((function(e){return e.resourceId})).indexOf(s)<0){var v=p.concat(c);f.tile.data[i](v)}}else f.tile.data[i](c)}},this.unrelateResource=function(e,n){for(var a=n.node_id(),i=t.unwrap(e.resourceinstanceid),s=e.mapCard.tile.data[a](),l=0;l<s.length;l++)t.unwrap(s[l].resourceId)===i&&s.splice(l,1);e.mapCard.tile.data[a](s)},this.isSelectable=function(e){return T.map((function(e){return e.id})).indexOf(e.layer.id)>=0},this.mapFilter=new d({map:this.map,searchContext:f.showRelatedQuery}),this.updateHoverId=function(e){f.hoverId()===e.resourceinstanceid?f.hoverId(null):f.hoverId(e.resourceinstanceid)},this.mapFilter.filter.feature_collection.subscribe((function(n){if(f.widget&&f.widget.node.config.graphs().length&&n.features&&n.features.length>0){var a=f.widget.node.config.graphs().map((function(e){if(e.graphid)return e.graphid})),s={"map-filter":JSON.stringify(n),precision:6,pages:5,"resource-type-filter":JSON.stringify(a.map((function(e){return{graphid:e,inverted:!1}})))};e.ajax({url:i.urls.search_results,data:s,method:"GET"}).done((function(e){f.relatedResourceWidgets.forEach((function(e){t.unwrap(f.tile.data[e.node.nodeid])&&f.tile.data[e.node.nodeid]([])})),e.results.hits.hits.forEach((function(e){var t=e._source;a.indexOf(t.graph_id)>-1&&f.relateResource({resourceinstanceid:t.resourceinstanceid,graphid:t.graph_id,displayname:t.displayname},f.widget)}));var n=e["map-filter"].search_buffer;f.map().getSource("geojson-search-buffer-data").setData(n)}))}})),this.appendBufferToTileFeatures=function(e){var t={geometry:f.map().getSource("geojson-search-buffer-data").serialize().data,type:"Feature",properties:{}},n=f.draw.add(t)[0];f.draw.setFeatureProperty(n,"nodeId",e),f.updateTiles()},this.drawAvailable.subscribe((function(e){p.draw||(p.draw=f.draw),p.map||(p.map=f.map());var t="geojson-search-buffer-data";f.widget=f.widgets.find((function(e){return"resource-instance"===e.datatype.datatype||"resource-instance-list"===e.datatype.datatype})),e&&(f.mapFilter.draw=f.draw,f.mapFilter.setupDraw(),f.map().addSource(t,f.mapFilter.sources[t]),f.mapFilter.layers().forEach((function(e){f.map().addLayer(e),$.push(e)})),f.map().on("mousemove",(function(e){var t,n=f.map().queryRenderedFeatures(e.point);n.length&&n[0].properties.resourceinstanceid?(t=n[0].properties.resourceinstanceid,f.relatedResources().filter((function(e){return e.resourceinstanceid===t})).length&&f.hoverId(t)):f.hoverId(null)})))}))};return t.components.register("related-resources-map-card",{viewModel:viewModel,template:p}),viewModel}.apply(t,a))||(e.exports=i)},64058:function(e,t){var n;void 0===(n=function(){return function(e,t,n,a,i,s){s=s||"#F0C200";if(a&&a.length>0&&(s=["match",["get","resourceinstanceid"],a,"#2F14A6",s]),!t)return[];var l=[{id:"select-feature-polygon-fill",type:"fill",minzoom:11,filter:["all",["==","$type","Polygon"],["!=","resourceinstanceid",e]],paint:{"fill-color":s,"fill-outline-color":s,"fill-opacity":.2},layout:{visibility:i?"visible":"none"}},{id:"select-feature-polygon-under-stroke",type:"line",minzoom:15,filter:["all",["==","$type","Polygon"],["!=","resourceinstanceid",e]],layout:{"line-cap":"round","line-join":"round",visibility:i?"visible":"none"},paint:{"line-color":"#fff","line-width":4}},{id:"select-feature-polygon-stroke",type:"line",minzoom:11,filter:["all",["==","$type","Polygon"],["!=","resourceinstanceid",e]],layout:{"line-cap":"round","line-join":"round",visibility:i?"visible":"none"},paint:{"line-color":s,"line-width":2}},{id:"select-feature-line",type:"line",minzoom:15,filter:["all",["==","$type","LineString"],["!=","resourceinstanceid",e]],layout:{"line-cap":"round","line-join":"round",visibility:i?"visible":"none"},paint:{"line-color":s,"line-width":2}},{id:"select-feature-point-point-stroke",type:"circle",minzoom:15,filter:["all",["==","$type","Point"],["!=","resourceinstanceid",e]],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"},layout:{visibility:i?"visible":"none"}},{id:"select-feature-point",type:"circle",minzoom:15,filter:["all",["==","$type","Point"],["!=","resourceinstanceid",e]],paint:{"circle-radius":4,"circle-color":s},layout:{visibility:i?"visible":"none"}}];return l.forEach((function(e){e.source=t,n&&(e["source-layer"]=n)})),l}}.apply(t,[]))||(e.exports=n)},89535:function(e,t){var n;void 0===(n=function(){return function(e,t,n,a,i,s,l,d,c){var p=c;i=i||p.defaultcolor;var f=p.selectioncolor,v=p.hovercolor,h=p.colorpalette;i=function(e,t){if(s){var n=["case"];return s.forEach((function(e,a){n.push(["==",["get","nodeid"],e]),a<=t.length?n.push(t[a]):n.push(t[Math.floor(Math.random()*Math.floor(t.length))])})),n.push(i),n}return e}(i,h);var b=["!=","resourceinstanceid","x"];if(l&&s.length>0&&(b=l.map((function(e){return["==","nodeid",e]}))).splice(0,0,"any"),n&&n.length>0&&(i=["match",["get","resourceinstanceid"],n,f,i]),d&&(i=["match",["get","resourceinstanceid"],d,v,i]),!e)return[];var m=[{id:"select-feature-polygon-fill",type:"fill",minzoom:p.minzoom,filter:["all",["==","$type","Polygon"],b],paint:{"fill-color":i,"fill-outline-color":i,"fill-opacity":p.fillopacity},layout:{visibility:a?"visible":"none"}},{id:"select-feature-polygon-under-stroke",type:"line",minzoom:p.minzoom,filter:["all",["==","$type","Polygon"],b],layout:{"line-cap":"round","line-join":"round",visibility:a?"visible":"none"},paint:{"line-color":p.strokecolor,"line-width":p.strokelinewidth}},{id:"select-feature-polygon-stroke",type:"line",minzoom:p.minzoom,filter:["all",["==","$type","Polygon"],b],layout:{"line-cap":"round","line-join":"round",visibility:a?"visible":"none"},paint:{"line-color":i,"line-width":p.linewidth}},{id:"select-feature-line",type:"line",minzoom:p.minzoom,filter:["all",["==","$type","LineString"],b],layout:{"line-cap":"round","line-join":"round",visibility:a?"visible":"none"},paint:{"line-color":i,"line-width":p.linewidth}},{id:"select-feature-point-point-stroke",type:"circle",minzoom:p.minzoom,filter:["all",["==","$type","Point"]],paint:{"circle-radius":p.strokepointradius,"circle-opacity":p.strokepointopacity,"circle-color":p.strokecolor},layout:{visibility:a?"visible":"none"}},{id:"select-feature-point",type:"circle",minzoom:p.minzoom,filter:["all",["==","$type","Point"],b],paint:{"circle-radius":p.pointradius,"circle-color":i},layout:{visibility:a?"visible":"none"}}];return m.forEach((function(n){n.source=e,t&&(n["source-layer"]=t)})),m}}.apply(t,[]))||(e.exports=n)},8497:function(e,t,n){var a,i;a=[n(54922),n(84479)],void 0===(i=function(e,t){var n="boolean-datatype-config";return e.components.register(n,{viewModel:function(t){var n=this,a=t.config?t.config:t.node.config;if(this.search=t.search,this.graph=t.graph,this.trueLabel=a.trueLabel,this.falseLabel=a.falseLabel,this.search){var i=t.filterValue();this.searchValue=e.observable(i.val||""),this.filterValue=e.computed((function(){return{val:n.searchValue()}})),t.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){t.filterValue(e)}))}},template:t}),n}.apply(t,a))||(e.exports=i)},41945:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(22493),n(76316)],void 0===(i=function(e,t,n,a,i,s){var l="concept-datatype-config";return n.components.register(l,{viewModel:function(s){var l=this;if(this.search=s.search,this.search){var d=s.filterValue();s.config=n.observable({options:[]}),this.op=n.observable(d.op||""),this.placeholder=n.observable("Select a concept"),this.multiple=n.observable(!1),this.searchValue=n.observable(d.val||""),this.node=s.node,n.isObservable(this.node.config.rdmCollection)||(this.node.config.rdmCollection=n.observable(this.node.config.rdmCollection)),s.value=this.searchValue,i.apply(this,[s]),this.filterValue=n.computed((function(){return{op:l.op(),val:l.searchValue()}})),s.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){s.filterValue(e)}))}else{if(this.conceptCollections=n.observableArray([]),this.isEditable=!0,s.graph){var c=t.filter(s.graph.get("cards")(),(function(e){return e.nodegroup_id===s.nodeGroupId()}));c.length&&(this.isEditable=c[0].is_editable)}else s.widget&&(this.isEditable=s.widget.card.get("is_editable"));this.topConcept=s.config.rdmCollection,this.initialTopConcept=this.topConcept(),0===a.conceptCollections.length?e.ajax({url:a.urls.get_concept_collections,type:"json"}).done((function(e){a.conceptCollections=e,l.conceptCollections(e),l.conceptCollections.unshift({label:null,id:null}),l.topConcept(l.initialTopConcept)})).fail((function(e){console.log(e)})):(this.conceptCollections(a.conceptCollections),null!=this.conceptCollections()[0].label&&this.conceptCollections.unshift({label:null,id:null}))}},template:s}),l}.apply(t,a))||(e.exports=i)},45119:function(e,t,n){var a,i;a=[n(54922),n(19027)],void 0===(i=function(e,t){var n="date-datatype-config";return e.components.register(n,{viewModel:function(t){var n=this;if(this.search=t.search,this.search||(this.dateFormat=t.config.dateFormat,this.dateFormatOptions=e.observableArray([{id:"YYYY-MM-DD HH:mm:ssZ",name:"ISO 8601 Time (YYYY-MM-DD HH:mm:ssZ)"},{id:"YYYY-MM-DD",name:"ISO 8601 (YYYY-MM-DD)"},{id:"YYYY-MM",name:"ISO 8601 Month (YYYY-MM)"},{id:"YYYY",name:"CE Year (YYYY)"}]),this.onDateFormatSelection=function(e,t){this.dateFormat(t.currentTarget.value)}),this.search){var a=t.node.config||t.datatype.defaultconfig,i=t.filterValue();this.dateFormat=a.dateFormat,this.op=e.observable(i.op||""),this.searchValue=e.observable(i.val||""),this.filterValue=e.computed((function(){return{op:n.op(),val:n.searchValue()}})).extend({throttle:750}),t.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){t.filterValue(e)}))}},template:t}),n}.apply(t,a))||(e.exports=i)},80274:function(e,t,n){var a,i;a=[n(54922),n(84490),n(59732),n(99378)],void 0===(i=function(e,t,n,a){var i="domain-value-datatype-config";return e.components.register(i,{viewModel:function(a){var i=this;if(this.search=a.search,this.search){this.options=a.node.config.options,this.options.unshift({id:"",selected:!0,text:"Select an Option"});var s=a.filterValue();this.op=e.observable(s.op||""),this.searchValue=e.observable(s.val||""),this.filterValue=e.computed((function(){return{op:i.op(),val:i.searchValue()}})),a.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){a.filterValue(e)}))}else{if(this.isEditable=!0,a.graph){var l=t.filter(a.graph.get("cards")(),(function(e){return e.nodegroup_id===a.nodeGroupId()}));l.length&&(this.isEditable=l[0].is_editable)}else a.widget&&(this.isEditable=a.widget.card.get("is_editable"));this.options=a.config.options,a.config.options().map((function(t){return t.text=e.observable(e.unwrap(t.text)),t.text.subscribe((function(e){e!=t.text&&i.options.valueHasMutated()})),t}));var setupOption=function(e){e.remove=function(){i.options.remove(e)}};this.options().forEach(setupOption),this.newOptionLabel=e.observable(""),this.addNewOption=function(){var t={id:n.generate(),selected:!1,text:e.observable(i.newOptionLabel())};setupOption(t),i.options.push(t),i.newOptionLabel("")},e.isObservable(this.options)&&this.options.subscribe((function(e){t.each(e,(function(e){e.remove||setupOption(e)}))}),this)}},template:a}),i}.apply(t,a))||(e.exports=i)},7373:function(e,t,n){var a,i;a=[n(54922),n(28418)],void 0===(i=function(e,t){var n="edtf-datatype-config";return e.components.register(n,{viewModel:function(t){var n=this;if(this.config=t.config,this.search=t.search,this.search){var a=t.filterValue();this.op=e.observable(a.op||""),this.searchValue=e.observable(a.val||""),this.filterValue=e.computed((function(){return{op:n.op(),val:n.searchValue()}})).extend({throttle:750}),t.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){t.filterValue(e)}))}},template:t}),n}.apply(t,a))||(e.exports=i)},38372:function(e,t,n){var a,i;a=[n(54922),n(84490),n(32258)],void 0===(i=function(e,t,n){var a="file-list-datatype-config";return e.components.register(a,{viewModel:function(t){this.config=t.config,this.search=t.search,this.maxFiles=e.observable(t.config.maxFiles()),this.maxFiles.subscribe((function(e){var n=parseInt(e);n>0&&t.config.maxFiles(n)})),this.activated=t.config.activateMax},template:n}),a}.apply(t,a))||(e.exports=i)},80508:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46186),n(16683),n(32222),n(77823),n(64328),n(63412),n(67166),n(66639)],void 0===(i=function(e,t,n,a,i){var s="geojson-feature-collection-datatype-config";return t.components.register(s,{viewModel:function(i){var s=this;if(this.node=i,this.config=i.config,this.graph=i.graph,this.layer=i.layer,this.layer){this.permissions=i.permissions,this.iconFilter=t.observable(""),this.icons=t.computed((function(){return n.filter(i.icons,(function(e){return e.name.indexOf(s.iconFilter())>=0}))})),this.config.layerIcon()||this.config.layerIcon(this.layer.icon),this.count=i.mapSource.count,this.loading=i.loading||t.observable(!1);var l=JSON.parse(this.layer.layer_definitions),getDisplayLayers=function(){var e=l;if(s.config.advancedStyling()){var t=s.config.advancedStyle();try{e=JSON.parse(t)}catch(t){e=[]}}return i.mapSource.count>0&&n.each(e,(function(e){e["source-layer"]=i.nodeid})),e};0===i.mapSource.count&&n.each(l,(function(e){delete e["source-layer"]})),this.selectedBasemapName=t.observable("");var d=e.extend(!0,{},a.mapLayers);this.basemaps=n.filter(d,(function(e){return!e.isoverlay})),this.basemaps.forEach((function(e){e.select=function(){s.selectedBasemapName(e.name)}}));var c=n.find(this.basemaps,(function(e){return e.addtomap}));c||(c=this.basemaps[0]),c&&this.selectedBasemapName(c.name);var getBasemapLayers=function(){return n.filter(s.basemaps,(function(e){return e.name===s.selectedBasemapName()})).reduce((function(e,t){return e.concat(t.layer_definitions)}),[])},p=e.extend(!0,{},a.mapSources);p[i.mapSource.name]=JSON.parse(i.mapSource.source),n.each(p,(function(e,t){e.tiles&&e.tiles.forEach((function(t,n){t.startsWith("/")&&(e.tiles[n]=window.location.origin+t)}))}));var f=getDisplayLayers(),v=getBasemapLayers();this.mapStyle={version:8,name:"Basic",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template"},sources:p,sprite:"mapbox://sprites/mapbox/basic-v9",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:v.concat(f)},this.zoom=t.observable(a.mapDefaultZoom),this.minZoom=t.observable(a.mapDefaultMinZoom),this.maxZoom=t.observable(a.mapDefaultMaxZoom),this.centerX=t.observable(a.mapDefaultX),this.centerY=t.observable(a.mapDefaultY),this.pitch=t.observable(0),this.bearing=t.observable(0),this.serviceURL=window.location.origin+a.urls.mvt(i.nodeid),this.map=null,this.setupMap=function(e){if(this.map=e,this.node.layer.bounds){var t=[[this.node.layer.bounds.top_left.lon,this.node.layer.bounds.bottom_right.lat],[this.node.layer.bounds.bottom_right.lon,this.node.layer.bounds.top_left.lat]];n.defer((function(){e.fitBounds(t,{padding:20})}),1)}};var updateMapStyle=function(){n.each(l,(function(e){switch(e.id){case"resources-fill-"+i.nodeid:e.paint["fill-color"]=s.config.fillColor();break;case"resources-line-halo-"+i.nodeid:e.paint["line-width"]=parseInt(s.config.haloWeight()),s.config.haloWeight()>0||(e.paint["line-width"]=1),s.config.haloWeight(e.paint["line-width"]),e.paint["line-color"]=s.config.lineHaloColor();break;case"resources-line-"+i.nodeid:e.paint["line-width"]=parseInt(s.config.weight()),s.config.weight()>0||(e.paint["line-width"]=1),s.config.weight(e.paint["line-width"]),e.paint["line-color"]=s.config.lineColor();break;case"resources-poly-outline-"+i.nodeid:e.paint["line-width"]=parseInt(s.config.outlineWeight()),s.config.outlineWeight()>0||(e.paint["line-width"]=1),s.config.outlineWeight(e.paint["line-width"]),e.paint["line-color"]=s.config.outlineColor();break;case"resources-point-halo-"+i.nodeid:e.paint["circle-radius"]=parseInt(s.config.haloRadius()),s.config.haloRadius()>0||(e.paint["circle-radius"]=1),s.config.haloRadius(e.paint["circle-radius"]);break;case"resources-cluster-point-halo-"+i.nodeid:e.paint["circle-color"]=s.config.pointHaloColor();break;case"resources-point-"+i.nodeid:e.paint["circle-radius"]=parseInt(s.config.radius()),s.config.radius()>0||(e.paint["circle-radius"]=1),s.config.radius(e.paint["circle-radius"]);break;case"resources-cluster-point-"+i.nodeid:e.paint["circle-color"]=s.config.pointColor()}}));var e=getDisplayLayers(),t=getBasemapLayers();s.mapStyle.layers=t.concat(e),s.map.setStyle(s.mapStyle)};this.node.json.subscribe(updateMapStyle),this.selectedBasemapName.subscribe(updateMapStyle),this.config.advancedStyling.subscribe((function(e){e&&!s.config.advancedStyle()&&s.config.advancedStyle(JSON.stringify(l,null,"\t"))})),this.saveNode=function(){s.loading(!0),s.node.save((function(){s.loading(!1)}))}}},template:i}),s}.apply(t,a))||(e.exports=i)},77826:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46186),n(15763)],void 0===(i=function(e,t,n,a,i){var s="node-value-datatype-config";return t.components.register(s,{viewModel:function(i){var s=this;if(this.nodes=[{id:null,name:t.observable("")}],i.graph&&(this.nodes=this.nodes.concat(n.filter(i.graph.get("nodes")(),(function(e){return e.datatypelookup[e.datatype()].defaultwidget_id&&"node-value"!==e.datatype()&&e.nodeid!==i.nodeid})))),this.config=i.config,this.search=i.search,this.search){var l=i.filterValue();this.node=i.node,this.op=t.observable(l.op||""),this.searchValue=t.observable(l.val||""),this.filterValue=t.computed((function(){return{op:s.op(),val:s.searchValue()||""}})).extend({throttle:750}),i.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){i.filterValue(e)}))}else{this.node=i,this.graph=i.graph,this.properties=t.observableArray();var updateProperties=function(){var t=[{name:"",id:null}];if(s.config.nodeid()&&s.graph){var l=n.find(i.graph.get("nodes")(),(function(e){return e.id===s.config.nodeid()}));l&&e.ajax({dataType:"json",url:a.urls.graph+l.graph.get("graphid")+"/get_related_nodes/"+l.id,data:{parent_nodeid:i.id},success:function(e){s.properties(t.concat(n.map(e,(function(e){return{name:l.getFriendlyOntolgyName(e.ontology_property),id:e.ontology_property}}))))}})}else s.properties(t)};if(updateProperties(),this.config.nodeid.subscribe(updateProperties),this.isEditable=!0,i.graph){this.propertyName=t.computed((function(){var e=s.config.property(),t=n.find(s.properties(),(function(t){return t.id===e}));return t?t.name:""})),this.relatedNodeName=t.computed((function(){var e=s.config.nodeid(),t=n.find(i.graph.get("nodes")(),(function(t){return t.id===e}));return t?t.name():""}));var d=n.filter(i.graph.get("cards")(),(function(e){return e.nodegroup_id===i.nodeGroupId()}));d.length&&(this.isEditable=d[0].is_editable)}else i.widget&&(this.isEditable=i.widget.card.get("is_editable"))}},template:i}),s}.apply(t,a))||(e.exports=i)},39103:function(e,t,n){var a,i;a=[n(54922),n(70813)],void 0===(i=function(e,t){var n="number-datatype-config";return e.components.register(n,{viewModel:function(t){var n=this;if(this.search=t.search,this.search){var a=t.filterValue();this.op=e.observable(a.op||""),this.searchValue=e.observable(a.val||""),this.filterValue=e.computed((function(){return{op:n.op(),val:n.searchValue()}})).extend({throttle:750}),t.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){t.filterValue(e)}))}},template:t}),n}.apply(t,a))||(e.exports=i)},18253:function(e,t,n){var a,i;a=[n(54922),n(84490),n(46186),n(35436),n(37395),n(68544),n(19272)],void 0===(i=function(e,t,n,a,i,s){var l="resource-instance-datatype-config";return e.components.register(l,{viewModel:function(s){var l=this,d="ac41d9be-79db-4256-b368-2f4559cfbe55";if(this.search=s.search,this.resourceModels=[{graphid:null,name:""}].concat(t.map(a.createableResources,(function(e){return{graphid:e.graphid,name:e.name}}))),this.search){var c=s.filterValue();this.node=s.node,this.op=e.observable(c.op||""),this.searchValue=e.observable(c.val||""),this.filterValue=e.computed((function(){return{op:l.op(),val:l.searchValue()||""}})).extend({throttle:750}),s.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){s.filterValue(e)})),this.datatype=s.datatype}else{if(this.makeFriendly=i.makeFriendly,this.getSelect2ConfigForOntologyProperties=i.getSelect2ConfigForOntologyProperties,this.isEditable=s.isEditable,this.graphIsSemantic=!!s.graph.get("ontology_id"),this.rootOntologyClass=s.graph.get("root").ontologyclass(),this.graphName=s.graph.get("root").name(),s.graph){var p=t.filter(s.graph.get("cards")(),(function(e){return e.nodegroup_id===s.nodeGroupId()}));p.length&&(this.isEditable=p[0].is_editable)}else s.widget&&(this.isEditable=s.widget.card.get("is_editable"));this.node=s,this.config=s.config,this.openSearch=function(){window.open(l.config.searchString(),"_blank")},this.selectedResourceModel=e.observable(""),this.selectedResourceModel.subscribe((function(e){e.length>0&&(e=e.concat(l.config.graphs()),l.config.graphs(e),l.selectedResourceModel([]))})),this.selectedResourceType=e.observable(null),this.toggleSelectedResource=function(e){l.selectedResourceType()===e?l.selectedResourceType(null):l.selectedResourceType(e)};var f=!1,setupConfig=function(a){var i=t.find(l.resourceModels,(function(e){return a.graphid===e.graphid}));if(a.ontologyProperty=e.observable(e.unwrap(a.ontologyProperty)),a.inverseOntologyProperty=e.observable(e.unwrap(a.inverseOntologyProperty)),a.relationshipConcept=e.observable(e.unwrap(a.relationshipConcept)||d),a.inverseRelationshipConcept=e.observable(e.unwrap(a.inverseRelationshipConcept||d)),a.useOntologyRelationship=e.observable(!1),a.removeRelationship=function(e){l.config.graphs.remove(e)},i){Object.defineProperty(a,"name",{value:i.name}),window.fetch(n.urls.graph_nodes(a.graphid)).then((function(e){if(e.ok)return e.json();throw"error"})).then((function(e){var n=t.find(e,(function(e){return e.istopnode}));Object.defineProperty(a,"ontologyClass",{value:n.ontologyclass})}));var triggerDirtyState=function(){f=!0,l.config.graphs(l.config.graphs()),f=!1};a.ontologyProperty.subscribe(triggerDirtyState),a.inverseOntologyProperty.subscribe(triggerDirtyState),a.relationshipConcept.subscribe(triggerDirtyState),a.inverseRelationshipConcept.subscribe(triggerDirtyState),a.useOntologyRelationship.subscribe(triggerDirtyState)}else Object.defineProperty(a,"name",{value:n.translations.modelDoesNotExist})};this.config.graphs().forEach((function(e){setupConfig(e)})),this.config.graphs.subscribe((function(e){f||e.forEach((function(e){setupConfig(e)}))})),this.config.searchString.subscribe((function(t){if(""!==t){var a=new URL(e.unwrap(t)),i=new URLSearchParams(a.search);window.fetch(n.urls.get_dsl+"?"+i.toString()).then((function(e){if(e.ok)return e.json();throw"error"})).then((function(e){l.config.searchDsl(e.query)}))}else l.config.searchDsl("")})),this.formatLabel=function(e,t,n){return l.graphIsSemantic?e+" ("+i.makeFriendly(t)+"/"+i.makeFriendly(n)+")":e}}},template:s}),l}.apply(t,a))||(e.exports=i)},97631:function(e,t,n){var a,i;a=[n(54922),n(46186),n(33758)],void 0===(i=function(e,t,n){var a="string-datatype-config";return e.components.register(a,{viewModel:function(n){var a=this;if(this.search=n.search,this.search){var i=n.filterValue();this.op=e.observable(i.op||"~"),this.languages=e.observableArray(),this.languages(t.languages),this.language=e.observable(t.languages.find((function(e){return e.code==t.activeLanguage}))),this.searchValue=e.observable(i.val||""),this.filterValue=e.computed((function(){var e;return{op:a.op(),lang:null===(e=a.language())||void 0===e?void 0:e.code,val:a.searchValue()}})).extend({throttle:750}),n.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){n.filterValue(e)}))}},template:n}),a}.apply(t,a))||(e.exports=i)},19062:function(e,t,n){var a,i;a=[n(54922),n(22628)],void 0===(i=function(e,t){var n="url-datatype-config";return e.components.register(n,{viewModel:function(t){var n=this;if(this.search=t.search,this.search){var a=t.filterValue();this.op=e.observable(a.op||"~"),this.searchValue=e.observable(a.val||""),this.filterValue=e.computed((function(){return{op:n.op(),val:n.searchValue()}})).extend({throttle:750}),t.filterValue(this.filterValue()),this.filterValue.subscribe((function(e){t.filterValue(e)}))}},template:t}),n}.apply(t,a))||(e.exports=i)},88866:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}a=[n(84490),n(54922),n(9999),n(46186),n(62666),n(47339),n(46562),n(87720),n(58943)],i=function(e,t,n,a,i,s){return t.components.register("branch-csv-importer",{viewModel:function(e){var s=this,l=this;function getCookie(e){if(!document.cookie)return null;var t=document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.startsWith(e+"=")}));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}this.loadDetails=e.load_details||t.observable(),this.state=e.state,this.loading=e.loading||t.observable(),this.data2=t.observable(!1),this.moduleId=e.etlmoduleid,n.apply(this,arguments),this.templates=t.observableArray(),this.selectedTemplate=t.observable(),this.loadStatus=t.observable("ready"),this.downloadMode=t.observable(!1),this.toggleDownloadMode=function(){s.downloadMode(!s.downloadMode()),s.downloadMode()&&!t.unwrap(s.templates).length&&d()},this.downloadTemplate=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var e,n,a,i,d;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return"/etl-manager",(e=new window.FormData).append("id",t.unwrap(s.selectedTemplate)),e.append("format","xls"),e.append("module",t.unwrap(l.moduleId)),e.append("action","download"),c.next=8,window.fetch("/etl-manager",{method:"POST",body:e,credentials:"same-origin",headers:{Accept:"application/json","X-CSRFToken":getCookie("csrftoken")}});case 8:return n=c.sent,c.next=11,n.blob();case 11:a=c.sent,i=window.URL.createObjectURL(a),d=window.document.createElement("a"),window.document.body.appendChild(d),d.href=i,d.download="".concat(s.templates().filter((function(e){return e.id==s.selectedTemplate()}))[0].text,".xlsx"),d.click(),setTimeout((function(){window.URL.revokeObjectURL(i),window.document.body.removeChild(d)}),0),s.loading(!1);case 20:case"end":return c.stop()}}),_callee)})));var d=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var e,t,n;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(a.urls.graphs_api);case 2:if(!(e=i.sent).ok){i.next=9;break}return i.next=6,e.json();case 6:t=i.sent,n=t.map((function(e){return{text:e.name,id:e.graphid}})),l.templates(n);case 9:case"end":return i.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();this.addFile=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(e){var t,n,a;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l.loading(!0),l.fileInfo({name:e.name,size:e.size}),(t=new window.FormData).append("file",e,e.name),i.next=6,l.submit("read",t);case 6:if(!(n=i.sent).ok){i.next=16;break}return i.next=10,n.json();case 10:a=i.sent,l.loading(!1),l.response(a),l.loadDetails(a),i.next=18;break;case 16:console.log("error"),l.loading(!1);case 18:case"end":return i.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}(),this.start=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t,n;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l.loading(!0),a.next=3,l.submit("start");case 3:if(t=a.sent,l.loading(!1),e.activeTab("import"),!t.ok){a.next=12;break}return a.next=9,t.json();case 9:n=a.sent,l.response(n),l.write();case 12:case"end":return a.stop()}}),_callee4)}))),this.write=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var e,t,n,a;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l.loading(!0),(e=new window.FormData).append("load_details",JSON.stringify(l.loadDetails())),s.next=5,l.submit("write",e);case 5:if(t=s.sent,l.loading(!1),!t.ok){s.next=14;break}return s.next=10,t.json();case 10:n=s.sent,l.response(n),s.next=18;break;case 14:return s.next=16,t.json();case 16:a=s.sent,this.alert(new i("ep-alert-red",a.data.title,a.data.message,null,(function(){})));case 18:case"end":return s.stop()}}),_callee5,this)})))},template:s})}.apply(t,a),void 0===i||(e.exports=i)},49444:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(58420),n(20198),n(59732),n(46186),n(20346),n(75524),n(5523),n(54077),n(58943),n(89910)],void 0===(i=function(e,t,n,a,i,s,l){var viewModel=function(t){var l=this;this.load_details=t.load_details,this.state=t.state,this.loading=t.loading||e.observable(),this.alert=t.alert,this.moduleId=t.etlmoduleid,this.loading(!0),this.languages=e.observable(i.languages),this.selectedLanguage=e.observable(),this.graphs=e.observable(),this.selectedGraph=e.observable(),this.nodes=e.observable(),this.selectedNode=e.observable(),this.operation=e.observable(),this.oldText=e.observable(),this.newText=e.observable(),this.validated=e.observable(),this.validationError=e.observableArray(),this.formData=new window.FormData,this.loadId=t.loadId||a.generate(),this.resourceids=e.observable(),this.getGraphs=function(){l.loading(!0),l.submit("get_graphs").then((function(e){l.graphs(e.result),l.selectedGraph(l.graphs()[0].graphid),l.loading(!1)}))},this.getGraphName=function(e){var t,n;return l.graphs()&&(n=l.graphs().find((function(t){return t.graphid==e}))),null===(t=n)||void 0===t?void 0:t.name},this.selectedGraph.subscribe((function(e){e&&(l.loading(!0),l.formData.append("graphid",e),l.submit("get_nodes").then((function(e){var t=e.result.map((function(e){return _objectSpread(_objectSpread({},e),{},{label:e.alias})}));l.nodes(t),l.loading(!1)})))})),this.selectedNode.subscribe((function(e){return console.log(e,e)})),this.write=function(){l.formData.append("operation",l.operation()),l.selectedNode()&&l.formData.append("node_id",l.selectedNode()),l.selectedGraph()&&l.formData.append("graph_id",l.selectedGraph()),l.selectedLanguage()&&l.formData.append("language_code",l.selectedLanguage().code),l.oldText()&&l.formData.append("old_text",l.oldText()),l.newText()&&l.formData.append("new_text",l.newText()),l.resourceids()&&l.formData.append("resourceids",JSON.stringify(l.resourceids())),l.loading(!0),l.submit("write").then((function(e){t.activeTab("import"),console.log(e.result)})).fail((function(e){l.alert(new s("ep-alert-red",e.responseJSON.data,null,(function(){})))}))},this.submit=function(e){return l.formData.append("action",e),l.formData.append("load_id",l.loadId),l.formData.append("module",l.moduleId),n.ajax({type:"POST",url:i.urls.etl_manager,data:l.formData,cache:!1,processData:!1,contentType:!1})},this.init=function(){this.getGraphs()},this.init()};return e.components.register("bulk-data-editor",{viewModel:viewModel,template:l}),viewModel}.apply(t,a))||(e.exports=i)},6777:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(58420),n(20198),n(46562),n(59732),n(46186),n(20346),n(98501),n(5523),n(54077),n(58943),n(89910)],void 0===(i=function(e,t,n,a,i,s,l,d){var viewModel=function(a){var d=this;this.load_details=a.load_details,this.state=a.state,this.loading=a.loading||e.observable(),this.alert=a.alert,this.moduleId=a.etlmoduleid,this.loading(!0),this.graphs=e.observable(),this.selectedGraph=e.observable(),this.nodes=e.observable(),this.fileInfo=e.observable({name:"",size:""}),this.hasHeaders=e.observable(!0),this.csvArray=e.observable(),this.headers=e.observable(),this.fieldMapping=e.observableArray(),this.csvBody=e.observable(),this.csvExample=e.observable(),this.csvFileName=e.observable(),this.numberOfCol=e.observable(),this.numberOfRow=e.observable(),this.numberOfExampleRow=e.observable(),this.languages=e.observableArray(),this.languages(s.languages),this.fileAdded=e.observable(!1),this.validated=e.observable(),this.validationError=e.observableArray(),this.formData=new window.FormData,this.loadId=a.loadId||i.generate(),this.uniqueId=i.generate(),this.uniqueidClass=e.computed((function(){return"unique_id_"+d.uniqueId})),this.createTableConfig=function(e){return{paging:!1,searching:!1,scrollCollapse:!0,info:!1,columns:Array(e).fill(null)}},this.hasHeaders.subscribe((function(e){d.headers(null),e?(d.headers(d.csvArray()[0]),d.csvBody(d.csvArray().slice(1))):(d.headers(Array.apply(0,Array(d.csvArray()[0].length)).map((function(e,t){return t+1}))),d.csvBody(d.csvArray()))})),this.headers.subscribe((function(t){t&&d.fieldMapping(t.map((function(t){return{field:t,node:e.observable(),language:e.observable(s.languages.find((function(e){return e.code==s.activeLanguage})))}})))})),this.formatSize=function(e){var t=e;if(0==t)return"0 Byte";var n=Math.floor(Math.log(t)/Math.log(1024));return"<strong>"+parseFloat((t/Math.pow(1024,n)).toFixed(2))+"</strong> "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},this.csvArray.subscribe((function(e){d.numberOfCol(e[0].length),d.hasHeaders()?(d.headers(e[0]),d.csvBody(e.slice(1))):(d.headers(null),d.csvBody(e))})),this.csvBody.subscribe((function(e){d.numberOfRow(e.length),d.csvExample(e.slice(0,5))})),this.getGraphs=function(){d.loading(!0),d.submit("get_graphs").then((function(e){d.graphs(e.result),d.selectedGraph(d.graphs()[0].graphid),d.loading(!1)}))},this.getGraphName=function(e){var t,n;return d.graphs()&&(n=d.graphs().find((function(t){return t.graphid==e}))),null===(t=n)||void 0===t?void 0:t.name},this.selectedGraph.subscribe((function(e){e&&(d.loading(!0),d.formData.append("graphid",e),d.submit("get_nodes").then((function(e){var t=e.result.map((function(e){return _objectSpread(_objectSpread({},e),{},{label:e.alias})}));d.stringNodes=t.reduce((function(e,t){return"string"===t.datatype&&e.push(t.alias),e}),[]),t.unshift({alias:"resourceid",label:s.translations.idColumnSelection}),d.nodes(t),d.loading(!1)})))})),this.addFile=function(e){d.loading(!0),d.fileInfo({name:e.name,size:e.size}),d.formData.append("file",e,e.name),d.submit("read").then((function(e){d.csvArray(e.result.csv),d.csvFileName(e.result.csv_file),e.result.config&&(d.fieldMapping(e.result.config.mapping),d.selectedGraph(e.result.config.graph)),d.formData.delete("file"),d.fileAdded(!0),d.loading(!1)})).fail((function(e){console.log(e),d.alert(new l("ep-alert-red",e.responseJSON,null,(function(){}))),d.loading(!1)}))},this.write=function(){var e=t.toJS(d.fieldMapping).map((function(e){return e.node})),n=t.toJS(d.fieldMapping);d.formData.append("fieldnames",e),d.formData.append("fieldMapping",JSON.stringify(n)),d.formData.append("hasHeaders",d.hasHeaders()),d.formData.append("graphid",d.selectedGraph()),d.formData.append("csvFileName",d.csvFileName()),d.loading(!0),d.submit("start").then((function(e){a.activeTab("import"),d.formData.append("async",!0),d.submit("write").then((function(e){console.log(e.result)})).fail((function(e){console.log(e),d.alert(new l("ep-alert-red",e.responseJSON.data,null,(function(){})))}))})).fail((function(e){return console.log(e.responseJSON.data)}))},this.validate=function(){d.validated(!1);var e=t.toJS(d.fieldMapping).map((function(e){return e.node})),n=t.toJS(d.fieldMapping);d.formData.append("fieldnames",e),d.formData.append("fieldMapping",JSON.stringify(n)),d.formData.append("hasHeaders",d.hasHeaders()),d.formData.append("graphid",d.selectedGraph()),d.submit("validate").then((function(e){d.validated(!0),d.validationError(e.result)})).fail((function(e){return console.log(e)}))},this.submit=function(e){return d.formData.append("action",e),d.formData.append("load_id",d.loadId),d.formData.append("module",d.moduleId),n.ajax({type:"POST",url:s.urls.etl_manager,data:d.formData,cache:!1,processData:!1,contentType:!1})},this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!1,autoQueue:!1,clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){d.dropzone=this,this.on("addedfile",d.addFile),this.on("error",(function(e,t){e.error=t}))}},this.init=function(){this.getGraphs()},this.init()};return e.components.register("import-single-csv",{viewModel:viewModel,template:d}),viewModel}.apply(t,a))||(e.exports=i)},76149:function(e,t,n){var a,i;a=[n(20198),n(54922),n(58420),n(83547),n(84714),n(7703)],i=function(e,t,n,a,i,s){return t.components.register("views/components/functions/local-file-storage",{viewModel:function(t){a.apply(this,arguments),window.setTimeout((function(){e("select[data-bind^=chosen]").trigger("chosen:updated")}),300)},template:s})}.apply(t,a),void 0===i||(e.exports=i)},10001:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(83547),n(84714),n(2704)],i=function(e,t,n,a,i,s,l,d){return n.components.register("views/components/functions/primary-descriptors",{viewModel:function(a){s.apply(this,arguments);var l={};this.cards=n.observableArray(),this.loading=n.observable(!1),this.cards.unshift({name:null}),this.graph.cards.forEach((function(e){this.cards.push(e),l[e.nodegroup_id]=!0}),this),this.name=a.config.descriptor_types.name,this.description=a.config.descriptor_types.description,this.map_popup=a.config.descriptor_types.map_popup,t.each([this.name,this.description,this.map_popup],(function(e){e.nodegroup_id&&e.nodegroup_id.subscribe((function(n){e.string_template(n);var a=t.filter(this.graph.nodes,(function(e){return e.nodegroup_id===n}),this),i=[];t.each(a,(function(e){i.push("<"+e.name+">")}),this);var s=i.join(", ");e.string_template(s)}),this)}),this),this.reindexdb=function(){this.loading(!0),e.ajax({type:"POST",url:i.urls.reindex,context:this,data:JSON.stringify({graphids:[this.graph.graphid]}),error:function(){console.log("error")},complete:function(){this.loading(!1)}})},window.setTimeout((function(){e("select[data-bind^=chosen]").trigger("chosen:updated")}),300)},template:d})}.apply(t,a),void 0===i||(e.exports=i)},13221:function(e,t,n){var a,i;a=[n(54922),n(46186)],void 0===(i=function(e,t){return function(a){var i=this;n.e(5136).then((function(){var e=[n(85136)];(function(e){e}).apply(null,e)})).catch(n.oe),this.placeholder=a.placeholder||e.observable("Locate a Place or Address"),this.anchorLayerId=a.anchorLayerId,this.apiKey=a.api_key||t.mapboxApiKey,this.map=a.map,this.pointstyle={id:"geocode-point",source:"geocode-point",type:"circle",maxzoom:20,paint:{"circle-radius":5,"circle-color":"#FF0000"}},this.selection=e.observable(null),this.focusItem=e.observable(null),this.options=e.observableArray(),this.options.subscribe((function(){i.selection(null)})),this.loading=e.observable(!1),this.isFocused=e.observable(!1).extend({throttle:200}),this.isFocused.subscribe((function(){i.focusItem(null)})),this.query=e.observable(),this.handleKeys=function(e,t){if(40===t.keyCode||38===t.keyCode){var n=i.options(),a=n.indexOf(i.focusItem());return 40===t.keyCode&&(a+=1),38===t.keyCode&&(a-=1)<-1&&(a=n.length-1),a>=0&&a<n.length?i.focusItem(n[a]):i.focusItem(null),!1}if(13===t.keyCode){var s=i.focusItem();s&&i.selection(s)}return!0},this.redrawLayer=function(){i.map&&(i.map.getLayer("geocode-point")&&i.map.removeLayer("geocode-point"),i.map.addLayer(i.pointstyle,i.anchorLayerId))},this.updateSelection=function(e){if(i.map&&e){var t=e.geometry.coordinates;i.map.getSource("geocode-point").setData(e.geometry),i.redrawLayer();var n=new i.mapboxgl.LngLat(t[0],t[1]);i.map.flyTo({center:n})}else i.map.removeLayer("geocode-point")},this.selection.subscribe(this.updateSelection)}}.apply(t,a))||(e.exports=i)},73350:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(13221),n(42835)],void 0===(i=function(e,t,n,a,i,s){return n.components.register("views/components/geocoders/mapbox",{viewModel:function(s){i.apply(this,[s]);var l=this;this.placeholder=s.placeholder||n.observable("Locate a Place or Address"),this.anchorLayerId=s.anchorLayerId,this.apiKey=s.api_key()||a.mapboxApiKey,this.map=s.map,this.options.subscribe((function(){l.selection(null)})),this.updateResults=function(a){l.options([]),a.length>3&&(l.loading(!0),e.ajax({type:"GET",url:"//api.mapbox.com/geocoding/v5/mapbox.places/"+l.query()+".json",data:{access_token:n.unwrap(l.apiKey)},success:function(e){var n=t.map(e.features,(function(e){return{id:e.id,text:e.place_name,geometry:{type:"Point",coordinates:[e.geometry.coordinates[0],e.geometry.coordinates[1]]}}}));l.options(n)},complete:function(){l.loading(!1)}}))},this.query.subscribe(this.updateResults),this.isFocused.subscribe((function(){l.focusItem(null)}))},template:s})}.apply(t,a))||(e.exports=i)},66639:function(e,t,n){var a,i;a=[n(54922),n(44155)],void 0===(i=function(e,t){return e.components.register("views/components/icon-selector",{viewModel:function(e){this.selectedIcon=e.selectedIconObservable,this.iconFilter=e.iconFilter,this.iconList=e.iconList,this.label=e.label},template:t})}.apply(t,a))||(e.exports=i)},22172:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(35605),n(59732),n(28459),n(91762),n(87689)],void 0===(i=function(e,t,n,a,i,s,l,d){return function(e){var c,p,f=this,v=n.observableArray(),h=new i.FeatureGroup;this.drawFeatures=v,this.widgets=e.widgets||[],this.newNodeId=null,this.featureLookup={},this.selectedFeatureIds=n.observableArray(),this.lineColor=n.observable("#3388ff"),this.fillColor=n.observable("#3388ff"),this.lineWidth=n.observable(3),this.pointRadius=n.observable(10),this.lineOpacity=n.observable(1),this.fillOpacity=n.observable(.2),this.showStylingTools=n.observable(!1),this.hideEditorTab=e.hideEditorTab||n.observable(!1),this.cancelDrawing=function(){t.each(p,(function(e){e.disable()}))},this.setDrawTool=function(e){f.cancelDrawing(),e&&p&&p[e].enable()},f.widgets.forEach((function(e){var i=n.unwrap(e.node_id);f.featureLookup[i]={features:n.computed((function(){var e=a.toJS(f.tile.data[i]);return e?e.features:[]})),selectedTool:n.observable()},f.featureLookup[i].selectedTool.subscribe((function(e){c&&(e&&(t.each(f.featureLookup,(function(e,t){t!==i&&e.selectedTool(null)})),f.newNodeId=i),f.setDrawTool(e),disableEditing())}))})),this.selectedTool=n.pureComputed((function(){var e;return t.find(f.featureLookup,(function(t){var n=t.selectedTool();n&&(e=n)})),e})),this.editing=n.pureComputed((function(){return!!(f.selectedFeatureIds().length>0||f.selectedTool())})),this.updateTiles=function(){t.each(f.featureLookup,(function(e){e.selectedTool(null)})),f.widgets.forEach((function(e){var t=n.unwrap(e.node_id),a=[];v().forEach((function(e){e.properties.nodeId===t&&a.push(e)})),n.isObservable(f.tile.data[t])?f.tile.data[t]({type:"FeatureCollection",features:a}):f.tile.data[t].features(a)}))};var updateDrawFeatures=function(){v([]),f.widgets.forEach((function(t){var i=n.unwrap(t.node_id),s=a.toJS(f.tile.data[i]);s&&s.features&&(s.features.forEach((function(t){t.properties.manifest&&!e.manifest&&(e.manifest=t.properties.manifest),t.properties.canvas&&!e.canvas&&(e.canvas=t.properties.canvas),t.properties.nodeId=i})),v(v().concat(s.features)))}))};updateDrawFeatures(),d.apply(this,[e]);var b=this.canvas.subscribe((function(e){e&&(f.expandGallery(!1),f.activeTab(n.unwrap(f.activeTab)||"editor"),b.dispose())}));this.expandGallery.subscribe((function(e){e&&f.hideSidePanel()})),this.getAnnotationCount=function(e){return v().filter((function(t){return t.properties.canvas===e})).length};var m,disableEditing=function(){g&&g.editing&&g.editing.disable(),g=void 0,f.selectedFeatureIds([])},enableEditing=function(e){disableEditing(),(g=e).options.editing||(g.options.editing={}),g.editing.enable(),f.styleProperties(e.feature.properties),f.selectedFeatureIds([e.feature.id])};this.styleProperties=n.computed({read:function(){return{color:f.lineColor(),fillColor:f.fillColor(),weight:f.lineWidth(),radius:f.pointRadius(),opacity:f.lineOpacity(),fillOpacity:f.fillOpacity()}},write:function(e){f.lineColor(e.color),f.fillColor(e.fillColor),f.lineWidth(e.weight),f.pointRadius(e.radius),f.lineOpacity(e.opacity),f.fillOpacity(e.fillOpacity)}}),this.featureClick=m;var g,x=n.computed((function(){var e=f.selectedFeatureIds(),t=f.styleProperties();return i.geoJson({type:"FeatureCollection",features:v()},{pointToLayer:function(n,a){var s;return s=e.includes(n.id)?t:{color:n.properties.color,fillColor:n.properties.fillColor,weight:n.properties.weight,radius:n.properties.radius,opacity:n.properties.opacity,fillOpacity:n.properties.fillOpacity},i.circleMarker(a,s)},style:function(n){var a;return a=e.includes(n.id)?t:{color:n.properties.color,fillColor:n.properties.fillColor,weight:n.properties.weight,radius:n.properties.radius,opacity:n.properties.opacity,fillOpacity:n.properties.fillOpacity},a},filter:function(e){return e.properties.canvas===f.canvas()},onEachFeature:function(e,t){t.on("click",(function(e){enableEditing(e.target),m=!0}))}})}));this.drawLayer=x,x.subscribe((function(e){var t=f.map(),n=f.selectedFeatureIds();t&&(h.clearLayers(),h.addLayer(e),e.getLayers().forEach((function(e){n.includes(e.feature.id)&&(e.options.editing||(e.options.editing={}),e.editing.enable())})))})),this.card&&(this.card.triggerUpdate=updateDrawFeatures),this.disableDrawing=n.computed((function(){return!f.canvas()})),this.showFeature=function(e){f.canvas(e.properties.canvas),f.manifest()!==e.properties.manifest&&(f.manifest(e.properties.manifest),f.getManifestData()),setTimeout((function(){if("Point"===e.geometry.type){var t=e.geometry.coordinates;f.map().panTo([t[1],t[0]])}else{var n=l(e);f.map().fitBounds([[n[1],n[0]],[n[3],n[2]]])}}),200)},this.editFeature=function(e){var t=h.getLayers()[0].getLayers();f.manifest()!==e.properties.manifest&&(f.manifest(e.properties.manifest),f.getManifestData()),f.canvas(e.properties.canvas),t.forEach((function(t){t.feature.id===e.id&&enableEditing(t)}))},this.deleteFeature=function(e){v().forEach((function(t){t.id===e.id&&v.remove(t)})),f.updateTiles()},this.canvas.subscribe(disableEditing),this.map.subscribe((function(e){e&&!c&&(e.addLayer(h),h.addLayer(x()),c=new i.Control.Draw({edit:{featureGroup:h}}),e.addControl(c),p={draw_point:new i.Draw.CircleMarker(e,c.options.circlemarker),draw_line_string:new i.Draw.Polyline(e,c.options.polyline),draw_polygon:new i.Draw.Polygon(e,c.options.polygon)},f.styleProperties.subscribe((function(e){t.each(p,(function(t){"circlemarker"===t.type?t.setOptions(e):t.setOptions({shapeOptions:e})})),f.selectedFeatureIds().forEach((function(t){v().forEach((function(n){n.id===t&&(n.properties=Object.assign(n.properties,e))})),f.updateTiles()}))})),e.on("draw:created",(function(e){var t=e.layer.toGeoJSON();t.id=s.generate(),t.properties=Object.assign({nodeId:f.newNodeId,canvas:f.canvas(),manifest:f.manifest()},f.styleProperties()),v.push(t),f.updateTiles(),f.editFeature(t)})),e.on("draw:editvertex draw:editmove",(function(){var e=h.getLayers()[0].getLayers();v().forEach((function(t){e.forEach((function(e){t.id===e.feature.id&&(t.geometry=e.toGeoJSON().geometry)}))})),f.updateTiles()})),e.on("click",(function(){m||disableEditing(),m=!1})),f.form&&f.form.on("tile-reset",(function(){disableEditing(),updateDrawFeatures(),t.each(f.featureLookup,(function(e){e.selectedTool()&&e.selectedTool("")}))})))}))}}.apply(t,a))||(e.exports=i)},91762:function(e,t,n){var a,i;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(20198),n(54922),n(58420),n(35605),n(46186),n(41762),n(94806),n(57602),n(99965),n(71576),n(75297),n(87720),n(66504)],i=function(e,t,n,a,i,s,l,d){var IIIFViewerViewmodel=function(d){var c,p,f,v=this,h=this;this.getManifestDataValue=function(e,t,n){var a=e[t];return Array.isArray(a)&&n&&(a=e[t][0]["@value"]),a},this.map=t.observable(),this.manifest=t.observable(d.manifest),this.editManifest=t.observable(!d.manifest),this.canvas=t.observable(d.canvas),this.manifestLoading=t.observable(),this.filter=t.observable(""),this.manifestData=t.observable(),this.manifestError=t.observable(),this.manifestName=t.observable(),this.manifestDescription=t.observable(),this.manifestAttribution=t.observable(),this.manifestLogo=t.observable(),this.manifestMetadata=n.fromJS([]),this.canvasLabel=t.observable(),this.zoomToCanvas=!(d.zoom&&d.center),this.annotationNodes=t.observableArray(),this.compareMode=t.observable(!1),this.primaryCanvas=t.observable(),this.canvasObject=t.observable(),this.secondaryCanvasObject=t.observable(),this.secondaryCanvas=t.observable(),this.compareInstruction=t.observable(),this.primaryTilesLoaded=t.observable(!1),this.secondaryTilesLoaded=t.observable(!1),this.selectPrimaryPanel=t.observable(!0),this.secondaryLabel=t.observable(),this.imageToolSelector=t.observable(this.canvas()),this.floatingLocation=t.observable("left"),this.showImageModifiers=t.observable(!1),this.renderContext=t.observable(d.renderContext),this.showModeSelector=t.observable(!0),this.primaryLayerLoaded=!0,this.secondaryLayerLoaded=!0;var b=[],m=[],g={};this.selectPrimaryPanel.subscribe((function(e){e?(v.imageToolSelector(v.canvas()),h.secondaryCanvas()&&(f=h.canvasFilterObject(),p&&(h.brightness(p.brightness),h.saturation(p.saturation),h.contrast(p.contrast),h.greyscale(p.greyscale)))):(v.imageToolSelector(v.secondaryCanvas()),p=h.canvasFilterObject(),f?(h.brightness(f.brightness),h.saturation(f.saturation),h.contrast(f.contrast),h.greyscale(f.greyscale)):(h.brightness(100),h.saturation(100),h.contrast(100),h.greyscale(!1)))})),this.imageToolSelector.subscribe((function(e){v.selectPrimaryPanel()&&v.canvas()!==v.imageToolSelector()?v.canvas(v.imageToolSelector()):v.selectPrimaryPanel()||v.secondaryCanvas()===v.imageToolSelector()||v.secondaryCanvas(v.imageToolSelector())})),this.compareMode.subscribe((function(e){if(e)h.selectPrimaryPanel(!1),h.canvasClick(h.canvasObject()),h.selectPrimaryPanel(!0);else{var t,n=h.map();if(S&&n.hasLayer(S))try{n.removeLayer(S)}catch(e){}_&&null!==(t=_)&&void 0!==t&&t._map&&n.removeControl(_),h.secondaryCanvas(void 0),h.secondaryLabel(void 0),h.showImageModifiers(!1),h.selectPrimaryPanel(!0)}})),this.panelRadio=t.pureComputed((function(){return v.compareMode()?"double":"single"})),this.showLogo=t.pureComputed((function(){return!!["bmp","gif","jpeg","jpg","png","svg","tif","tiff","webp"].find((function(e){return h.manifestLogo().endsWith(e)}))})),this.buildAnnotationNodes=d.buildAnnotationNodes||function(e){h.annotationNodes(e.map((function(e){var n=t.observableArray(),a=function(){var t,a=(t=_regeneratorRuntime().mark((function _callee(){var t,a,s,l,d;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(t=h.canvas())){c.next=14;break}if(a=i.urls.iiifannotations+"?canvas="+t+"&nodeid="+e.nodeid,g[a]){c.next=11;break}return c.next=6,window.fetch(a);case 6:return s=c.sent,c.next=9,s.json();case 9:l=c.sent,g[a]=l;case 11:(d=g[a]).features.forEach((function(t){t.properties.graphName=e.graph_name})),n(d.features);case 14:case"end":return c.stop()}}),_callee)})),function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(){return a.apply(this,arguments)}}();return h.canvas.subscribe(a),a(),{name:e.graph_name+" - "+e.name,icon:e.icon,active:t.observable(!1),opacity:t.observable(100),annotations:n}})))},window.fetch(i.urls.iiifannotationnodes).then((function(e){return e.json()})).then(h.buildAnnotationNodes);var x=t.computed((function(){var e=[];return h.annotationNodes().forEach((function(t){if(t.active()){var n=t.annotations();d.tile&&d.tile.tileid&&(n=n.filter((function(e){return e.properties.tileId!==d.tile.tileid}))),n.forEach((function(e){e.properties.opacityModifier=t.opacity()})),e=n.concat(e)}})),a.geoJson({type:"FeatureCollection",features:e},{pointToLayer:function(e,t){var n=e.properties.opacityModifier/100,i={color:e.properties.color,fillColor:e.properties.fillColor,weight:e.properties.weight,radius:e.properties.radius,opacity:e.properties.opacity*n,fillOpacity:e.properties.fillOpacity*n};return a.circleMarker(t,i)},style:function(e){var t=e.properties.opacityModifier/100,n={color:e.properties.color,fillColor:e.properties.fillColor,weight:e.properties.weight,radius:e.properties.radius,opacity:e.properties.opacity*t,fillOpacity:e.properties.fillOpacity*t};return n},onEachFeature:function(e,n){if(d.onEachFeature)d.onEachFeature(e,n);else{var s=a.popup({closeButton:!1,maxWidth:349}).setContent(l).on("add",(function(){var n={closePopup:function(){s.remove()},name:t.observable(""),description:t.observable(""),graphName:e.properties.graphName,resourceinstanceid:e.properties.resourceId,reportURL:i.urls.resource_report,translations:i.translations};window.fetch(i.urls.resource_descriptors+n.resourceinstanceid).then((function(e){return e.json()})).then((function(e){n.name(e.displayname),n.description(e.map_popup)}));var a=s.getElement().querySelector(".mapboxgl-popup-content");t.applyBindingsToDescendants(n,a)}));n.bindPopup(s)}}})})),y=new a.FeatureGroup;x.subscribe((function(e){h.map()&&(y.clearLayers(),y.addLayer(e))})),this.canvases=t.pureComputed((function(){var e=h.manifestData(),t=e?e.sequences:[],n=[];return t.forEach((function(e){e.canvases&&(e.label=h.getManifestDataValue(e,"label",!0),e.canvases.forEach((function(e){e.label=h.getManifestDataValue(e,"label",!0),"object"===_typeof(e.thumbnail)?e.thumbnail=e.thumbnail["@id"]:e.images&&e.images[0]&&e.images[0].resource&&(e.thumbnail=e.images[0].resource["@id"]),n.push(e)})))})),n}));var w;this.manifestSelectConfig={value:this.manifest,clickBubble:!0,multiple:!1,closeOnSelect:!1,allowClear:!0,ajax:{url:i.urls.iiifmanifest,dataType:"json",quietMillis:250,data:function(e,t){var n={start:10*(t-1),limit:10};return w=e,e&&(n.query=e),n},results:function(e,t){var n=e.results;return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(w)&&n.unshift({url:w,label:w}),{results:n,more:e.count>=10*t}}},id:function(e){return e.url},formatResult:function(e){return e.label},formatSelection:function(e){return e.label},clear:function(){h.manifest("")},isEmpty:t.computed((function(){return""===h.manifest()||!h.manifest()}),this),initSelection:function(){}};var k,S,_,T={clickBubble:!0,multiple:!1,closeOnSelect:!0,allowClear:!0,data:function(){return{results:v.canvases()}},id:function(e){return h.getCanvasService(e)},containerCssClass:"split-controls-drop",dropdownCssClass:"split-controls-drop",dropdownAutoWidth:!0,formatResult:function(e){return'<div class="image"><img src="'.concat(e.thumbnail,'"/></div><div class="title">').concat(e.label,"</div>")},formatSelection:function(e){return null==e?void 0:e.label},clear:function(e){h.canvases("")},isEmpty:t.computed((function(){return""===h.canvases()||!h.canvases()}),this),initSelection:function(e,t){t(h.canvases().find((function(t){return h.getCanvasService(t)==e.val()})))}};this.rightSideSelectConfig=_objectSpread(_objectSpread({},T),{},{value:this.secondaryCanvas}),this.leftSideSelectConfig=_objectSpread(_objectSpread({},T),{},{value:this.canvas}),this.imageToolConfig=_objectSpread(_objectSpread({},T),{},{value:this.imageToolSelector}),this.getManifestData=function(){var e=h.manifest();e&&(h.manifestLoading(!0),h.manifestError(void 0),c=new window.AbortController,window.fetch(e,{signal:c.signal}).then((function(e){return e.json()})).then((function(e){h.manifestData(e),h.editManifest(!1)})).catch((function(e){"The user aborted a request."!==e.message&&h.manifestError(e)})).finally((function(){h.manifestLoading(!1),c=void 0})))},this.getManifestData(),s.apply(this,[d]),this.activeTab.subscribe((function(){var e=h.map();e&&setTimeout((function(){e.invalidateSize()}),1)})),void 0===d.showGallery&&(d.showGallery=!0),this.showGallery=t.observable(d.showGallery),d.manifest||(d.expandGallery=!0),this.expandGallery=t.observable(d.expandGallery),this.expandGallery.subscribe((function(e){e&&(h.compareMode(!1),h.showGallery(!0))})),this.showGallery.subscribe((function(e){e||h.expandGallery(!1)})),this.toggleGallery=function(){h.showGallery(!h.showGallery())},this.leafletConfig={center:d.center||[0,0],crs:a.CRS.Simple,zoom:d.zoom||0,afterRender:this.map},this.imagePropertyUpdate=function(e,t,n){h.floatingLocation()!=e&&h.showImageModifiers()||h.showImageModifiers(!h.showImageModifiers()),h.floatingLocation(e),"left"==h.floatingLocation()?h.selectPrimaryPanel(!0):h.selectPrimaryPanel(!1)},this.fileUpdate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)},this.brightness=t.observable(100),this.contrast=t.observable(100),this.saturation=t.observable(100),this.greyscale=t.observable(!1),this.canvasFilter=t.pureComputed((function(){return"brightness("+h.brightness()/100+") contrast("+h.contrast()/100+") saturate("+h.saturation()/100+") grayscale("+(h.greyscale()?1:0)+")"})),this.canvasFilterObject=t.pureComputed((function(){return{brightness:h.brightness(),contrast:h.contrast(),saturation:h.saturation(),greyscale:h.greyscale()}})),this.canvasFilter.subscribe((function(e){console.log(e)}));var updateCanvasLayerFilter=function(){var e,t=h.canvasFilter(),n=h.map();n&&(e=h.selectPrimaryPanel()?n.getPane("tilePane").querySelector(".iiif-layer-primary"):n.getPane("tilePane").querySelector(".iiif-layer-secondary"))&&null!==e&&(e.style.filter=t)};this.canvasFilter.subscribe(updateCanvasLayerFilter),this.resetImageSettings=function(){h.brightness(100),h.contrast(100),h.saturation(100),h.greyscale(!1)};var zoomToBounds=function(e,t){var n=t._getInitialZoom(e.getSize()),i=t._imageSizes[n],s=e.options.crs.pointToLatLng(a.point(0,i.y),n),l=e.options.crs.pointToLatLng(a.point(i.x,0),n),d=a.latLngBounds(s,l);e.fitBounds(d)},loadComparison=function(){var e,t,n=h.map();n&&k.getContainer()&&null!==(e=S)&&void 0!==e&&e.getContainer()&&(h.zoomToCanvas&&(zoomToBounds(n,k),h.zoomToCanvas=!1),_?(_.setLeftLayers(k),_.setRightLayers(S)):_=a.control.sideBySide(k,S),null!==(t=_)&&void 0!==t&&t._map||_.addTo(n))},updatePrimaryCanvasLayer=function(){var e=h.map(),t=h.canvas();if(h.selectPrimaryPanel()&&t&&t!=h.imageToolSelector()&&h.imageToolSelector(t),e&&t){if(k&&e.hasLayer(k)){try{e.removeLayer(k)}catch(e){}k=void 0}if(t){var n=t+"/info.json";(k=getLayer(n,b))||((k=a.tileLayer.iiif(n,{fitBounds:!1,className:"iiif-layer-primary"})).on("load",(function(){h.compareMode()?loadComparison():!h.compareMode()&&h.zoomToCanvas&&k&&(zoomToBounds(e,k),h.zoomToCanvas=!1)})),b.push(k)),k.addTo(e),updateCanvasLayerFilter()}}},getLayer=function(e,t){var n=t.filter((function(t){return t._infoUrl==e}));if(n.length>0)return n[0]};this.map.subscribe((function(t){a.control.fullscreen({fullscreenElement:e(t.getContainer()).closest(".workbench-card-wrapper")[0]}).addTo(t),updatePrimaryCanvasLayer(),t.addLayer(y)})),this.canvas.subscribe(updatePrimaryCanvasLayer),this.secondaryCanvas.subscribe((function(){var e=h.map(),t=h.canvas(),n=h.secondaryCanvas();if(n&&n!=h.imageToolSelector()&&(h.selectPrimaryPanel(!1),h.imageToolSelector(n)),e&&t&&n){if(S&&e.hasLayer(S)){try{e.removeLayer(S)}catch(e){}S=void 0}var i=n+"/info.json";(S=getLayer(i,m))||((S=a.tileLayer.iiif(i,{fitBounds:!1,className:"iiif-layer-secondary"})).on("load",(function(){h.compareMode()&&loadComparison()})),m.push(S)),S.addTo(e),updateCanvasLayerFilter()}})),this.setSecondaryCanvas=function(e){var t=h.getCanvasService(e);t&&h.secondaryCanvas(t)},this.selectCanvas=function(e){var t=h.getCanvasService(e);t&&h.selectPrimaryPanel()?(h.canvas(t),h.canvasObject(e),h.canvasLabel(h.getManifestDataValue(e,"label",!0))):(h.secondaryCanvas(t),h.secondaryCanvasObject(e),h.canvasLabel(h.getManifestDataValue(e,"label",!0)))},this.canvasClick=function(e){h.selectCanvas(e),h.expandGallery(!1)},this.getCanvasService=function(e){if(e.images.length>0)return e.images[0].resource.service["@id"]},this.updateCanvas=!h.canvas(),this.manifestData.subscribe((function(e){if(e){if(e.sequences.length>0){var t=e.sequences[0],a=0;if(t.canvases.length>0){h.updateCanvas||(a=t.canvases.findIndex((function(e){return e.images[0].resource.service["@id"]===h.canvas()})));var i=t.canvases[a];h.secondaryCanvasLayer=void 0,h.canvasLayer=void 0;var s=h.getCanvasService(i);h.zoomToCanvas=!0,h.canvas(s),h.canvasObject(i),h.compareMode()&&(h.secondaryCanvas(s),h.secondaryCanvasObject(i))}}h.updateCanvas=!0,h.origManifestName=h.getManifestDataValue(e,"label",!0),h.manifestName(h.origManifestName),h.origManifestDescription=h.getManifestDataValue(e,"description",!0),h.manifestDescription(h.origManifestDescription),h.origManifestAttribution=h.getManifestDataValue(e,"attribution",!0),h.manifestAttribution(h.origManifestAttribution),h.origManifestLogo=h.getManifestDataValue(e,"logo",!0),h.manifestLogo(h.origManifestLogo),h.origManifestMetadata=n.toJSON(h.getManifestDataValue(e,"metadata")),h.manifestMetadata.removeAll(),h.getManifestDataValue(e,"metadata").forEach((function(e){h.manifestMetadata.push(n.fromJS(e))}))}})),this.toggleManifestEditor=function(){h.editManifest(!h.editManifest()),c&&c.abort()},this.getAnnotationCount=function(){return 0}};return t.components.register("iiif-viewer",{viewModel:IIIFViewerViewmodel,template:d}),IIIFViewerViewmodel}.apply(t,a),void 0===i||(e.exports=i)},35227:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(65055),n(88347),n(77823),n(44050)],void 0===(i=function(e,t,n,a,i){return n.components.register("arches-map",{viewModel:a,template:i}),a}.apply(t,a))||(e.exports=i)},54033:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(83547),n(12340),n(84714),n(96389)],i=function(e,t,n,a,i,s,l,d){return n.components.register("views/components/nodegroup-selector",{viewModel:function(a){i.apply(this,arguments);var s={};this.cards=n.observableArray(),this.graph.cards.forEach((function(e){!!t.find(this.graph.nodegroups,(function(t){return t.parentnodegroup_id===e.nodegroup_id}),this)||e.nodegroup_id in s||(this.cards.push(e),s[e.nodegroup_id]=!0)}),this),this.triggering_nodegroups=a.triggering_nodegroups,window.setTimeout((function(){e("select[data-bind^=chosen]").trigger("chosen:updated")}),300)},template:d})}.apply(t,a),void 0===i||(e.exports=i)},81:function(e,t,n){var a,i;a=[n(20198),n(54922),n(3942),n(46186),n(62666),n(28507),n(20566)],void 0===(i=function(e,t,n,a,i,s,l){return t.components.register("etl-manager",{viewModel:function(e){var s=this;this.loading=e.loading,this.alert=e.alert,this.loading(!0),this.selectedModule=t.observable(),this.activeTab=t.observable(),this.activeModules=t.observable("import"),this.loadEvents=t.observable(),this.selectedLoadEvent=t.observable(),this.validated=t.observable(),this.validationError=t.observableArray(),this.paginator=t.observable(),this.selectedLoadEvent.subscribe((function(e){e?(s.selectedModule(e.etl_module),s.fetchValidation(e.loadid)):s.loadEvents().length&&s.selectedLoadEvent(s.loadEvents()[0])})),this.moduleSearchString=t.observable(""),this.taskSearchString=t.observable(""),this.tabs=[{id:"start",title:"Start"},{id:"details",title:"Task Details"},{id:"import",title:"Import Tasks"},{id:"export",title:"Export Tasks"}],this.selectModule=function(e){s.selectedModule(e),s.activeTab("details")},this.cancel=function(){s.selectedModule(null),s.activeTab("start")},this.activeTab.subscribe((function(e){"import"==e&&s.fetchLoadEvent()})),this.fetchLoadEvent=function(e){if("import"===s.activeTab()){var t;if(!e)e=null!==(t=s.paginator())&&void 0!==t&&t.current_page?s.paginator().current_page:1;var n=a.urls.etl_manager+"?action=loadEvent&page="+e;window.fetch(n).then((function(e){if(e.ok)return e.json()})).then((function(e){s.loadEvents(e.events),s.paginator(e.paginator);var t=e.events.find((function(e){return e.loadid===s.selectedLoadEvent().loadid}));t&&t.status!=s.selectedLoadEvent().status&&s.selectedLoadEvent(t)}))}},this.loadEvents.subscribe((function(e){var t;e.map((function(e){return e.loadid})).includes(null===(t=s.selectedLoadEvent())||void 0===t?void 0:t.loadid)||s.selectedLoadEvent(e[0])})),this.newPage=function(e){e&&s.fetchLoadEvent(e)},this.cleanLoadEvent=function(e){var t="".concat(a.urls.etl_manager,"?action=cleanEvent&loadid=").concat(e);window.fetch(t).then((function(e){if(e.ok)return e.json()})).then((function(e){console.log(e),s.init(),s.activeTab("import")}))},this.reverseTransactions=function(e,t,s){this.alert(new i("ep-alert-red",t,s,(function(){}),(function(){var t=new FormData,i=a.urls.etl_manager;e.status="reversing",t.append("loadid",e.loadid),t.append("module",e.etl_module.etlmoduleid),t.append("action","reverse"),window.fetch(i,{method:"POST",body:t,credentials:"include",headers:{"X-CSRFToken":n.get("csrftoken")}}).then((function(e){return e.json()})).then((function(){}))})))},this.formatUserName=function(e){return e.first_name||e.last_name?[e.first_name,e.last_name].join(" "):e.username},this.fetchStagedData=function(e){var t=a.urls.etl_manager+"?action=stagedData&loadid="+e;window.fetch(t).then((function(e){if(e.ok)return e.json()})).then((function(e){console.log(e)}))},this.fetchValidation=function(e){var t=a.urls.etl_manager+"?action=validate&loadid="+e;window.fetch(t).then((function(e){if(e.ok)return e.json()})).then((function(e){s.validated(!0),s.validationError(e.data)}))},this.formatTime=function(e){return e?new Date(e).toLocaleString():null},this.timeDifference=function(e,t){var n=new Date(e)-new Date(t),a=Math.floor(n/36e5);n-=36e5*a;var i=Math.floor(n/6e4);n-=6e4*i;var s=Math.floor(n/1e3);return"".concat(a,":").concat(("0"+i).slice(-2),":").concat(("0"+s).slice(-2))},this.init=function(){var e=a.urls.etl_manager+"?action=modules";window.fetch(e).then((function(e){if(e.ok)return e.json()})).then((function(e){s.etlModules=e.map((function(e){return l(["".concat(e.component)]),e})),s.loading(!1)})),this.activeTab("start")},this.init(),setInterval(this.fetchLoadEvent,5e3)},template:s})}.apply(t,a))||(e.exports=i)},30395:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(58420),n(20198),n(46562),n(59732),n(46186),n(20346),n(91762),n(27171),n(58943)],void 0===(i=function(e,t,n,a,i,s,l,d,c){return e.components.register("manifest-manager",{viewModel:function(a){var c=this;this.canvasesForDeletion=e.observableArray([]),this.metadataLabel=e.observable(""),this.metadataValues=e.observable(""),this.mainMenu=e.observable(!0),this.shouldShowEditService=a.shouldShowEditService||e.observable(!0),this.editService=e.observable(!1),this.shouldShowCreateService=a.shouldShowCreateService||e.observable(!0),this.createService=e.observable(!0),this.remoteManifest=e.observable(!0),this.alert=a.alert||e.observable(),this.addCanvas=function(e){c.canvasesForDeletion.push(e),c.canvas(e.images[0].resource.service["@id"])},this.removeCanvas=function(e){c.canvasesForDeletion.remove(e),c.canvas(e.images[0].resource.service["@id"])},d.apply(this,[_objectSpread(_objectSpread({},a),{},{renderContext:null!=a&&a.renderContext?a.renderContext:"manifestManager"})]),this.showTabs(!1),this.mainMenu.subscribe((function(e){e||c.showTabs(!0)})),"manifest-workflow"==this.renderContext()&&this.showModeSelector(!1),this.isManifestDirty=e.computed((function(){return e.unwrap(c.manifestName)!==c.origManifestName||e.unwrap(c.manifestDescription)!==c.origManifestDescription||e.unwrap(c.manifestAttribution)!==c.origManifestAttribution||e.unwrap(c.manifestLogo)!==c.origManifestLogo||e.unwrap(c.metadataLabel)||e.unwrap(c.metadataValues)||t.toJSON(c.manifestMetadata)!==c.origManifestMetadata})),this.isCanvasDirty=e.computed((function(){return e.unwrap(c.canvasLabel)!==c.origCanvasLabel})),this.uniqueId=i.generate(),this.uniqueidClass=e.computed((function(){return"unique_id_"+c.uniqueId})),this.formData=new window.FormData,this.stagedMetadata=e.computed((function(){return{label:c.metadataLabel(),value:c.metadataValues()}})),this.updateMetadata=function(){(c.metadataLabel()||c.metadataValues())&&this.manifestMetadata.unshift(t.fromJS(this.stagedMetadata())),c.metadataLabel(null),c.metadataValues(null)},this.removeMetadata=function(e){this.manifestMetadata.remove(e)},this.addAllCanvases=function(){c.canvases().forEach((function(e){c.canvasesForDeletion().indexOf(e)<0&&c.canvasesForDeletion.push(e)}))},this.clearCanvasSelection=function(){c.canvasesForDeletion([])},this.reset=function(){c.formData.delete("files"),c.formData=new window.FormData,c.clearCanvasSelection(),c.metadataLabel(""),c.metadataValues(""),c.manifestName(c.origManifestName),c.manifestAttribution(c.origManifestAttribution),c.manifestLogo(c.origManifestLogo),c.manifestDescription(c.origManifestDescription),c.canvasLabel(c.origCanvasLabel),c.origManifestMetadata&&(c.manifestMetadata.removeAll(),JSON.parse(c.origManifestMetadata).forEach((function(e){c.manifestMetadata.push(t.fromJS(e))}))),c.dropzone&&c.dropzone.removeAllFiles(!0)},this.submitToManifest=function(e,t){n.ajax({type:"POST",url:s.urls.manifest_manager,data:c.formData,cache:!1,processData:!1,contentType:!1,success:function(t){c.reset(),c.manifest(t.url),c.getManifestData(),e&&e()},error:function(e){c.reset(),console.log("Failed to save manifest"),c.alert(new l("ep-alert-red",e.responseJSON)),t&&t()}})},this.deleteCanvases=function(){c.formData.append("manifest",e.unwrap(c.manifest)),c.formData.append("selected_canvases",JSON.stringify(e.unwrap(c.canvasesForDeletion))),c.submitToManifest()},this.deleteManifest=function(){c.formData.append("manifest",e.unwrap(c.manifest)),n.ajax({type:"DELETE",url:s.urls.manifest_manager,data:JSON.stringify({manifest:e.unwrap(c.manifest)}),cache:!1,processData:!1,contentType:!1,success:function(){c.reset(),c.toggleManifestEditor(),c.manifestData(null),c.manifest(null),c.canvas(null),c.manifestName(null),c.manifestDescription(null),c.manifestAttribution(null),c.expandGallery(!0),c.mainMenu(!0),c.activeTab(void 0)},error:function(e){c.reset(),console.log("Failed to delete manifest"),c.alert(new l("ep-alert-red",e.responseJSON))}})},this.createManifest=function(t){Array.from(t).forEach((function(e){c.formData.append("files",e,e.name)})),c.formData.append("manifest_title",e.unwrap(c.manifestName)),c.formData.append("manifest_description",e.unwrap(c.manifestDescription)),c.formData.append("operation","create");c.submitToManifest((function(){c.activeTab("manifest"),c.mainMenu(!1)}),(function(){c.mainMenu(!0),c.activeTab(void 0)}))},this.addFiles=function(e){Array.from(e).forEach((function(e){c.formData.append("files",e,e.name)})),c.updateManifest()},this.updateManifest=function(){c.updateMetadata(),c.formData.append("manifest_title",e.unwrap(c.manifestName)),c.formData.append("manifest_description",e.unwrap(c.manifestDescription)),c.formData.append("manifest_attribution",e.unwrap(c.manifestAttribution)),c.formData.append("manifest_logo",e.unwrap(c.manifestLogo)),c.formData.append("manifest",e.unwrap(c.manifest)),c.formData.append("canvas_label",e.unwrap(c.canvasLabel)),c.formData.append("canvas_id",e.unwrap(c.canvas)),c.formData.append("metadata",JSON.stringify(t.toJS(c.manifestMetadata))),c.updateCanvas=!1,c.submitToManifest()},this.manifestSelectConfig.placeholder="Select an Image Service",this.manifest.subscribe((function(e){c.getManifestData(e),c.mainMenu(!1)})),this.manifestData.subscribe((function(t){a.manifestData&&e.isObservable(a.manifestData)&&a.manifestData(t)})),this.manifest.subscribe((function(){c.manifest()&&"/"==c.manifest().charAt(0)?c.remoteManifest(!1):c.remoteManifest(!0),c.hideSidePanel()})),this.dropzoneOptions4create={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,acceptedFiles:["image/jpeg","image/png","image/tiff"].join(","),autoQueue:!1,clickable:".fileinput-create-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-create-previews",init:function(){c.dropzone=this,this.on("addedfiles",c.createManifest),this.on("error",(function(e,t){e.error=t}))}},this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,autoQueue:!1,clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){c.dropzone=this,this.on("addedfiles",c.addFiles),this.on("error",(function(e,t){e.error=t}))}}},template:c})}.apply(t,a))||(e.exports=i)},59948:function(e,t,n){var a,i;a=[n(54922),n(58051),n(7156)],void 0===(i=function(e,t){return e.components.register("map-plugin",{viewModel:function(){this.configJSON={zoom:0,pitch:0,basemap:"streets",bearing:0,centerX:0,centerY:0,maxZoom:20,minZoom:0,defaultValue:"",featureColor:"#FF0000",geometryTypes:[],overlayConfigs:[],overlayOpacity:0,geocodeProvider:"10000000-0000-0000-0000-010000000000",geocoderVisible:!0,defaultValueType:"",featureLineWidth:1,featurePointSize:3,geocodePlaceholder:"Search"}},template:t})}.apply(t,a))||(e.exports=i)},97190:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(84490),n(20198),n(54922),n(58420),n(46186),n(12340),n(56321),n(85725),n(75851)],void 0===(i=function(e,t,n,a,i,s,l,d,c){function viewModel(a){var c=this;this.resourceId=n.observable(n.unwrap(a.resourceid)),this.resourceId.subscribe((function(e){a.resourceid(e)})),this.getCardResourceIdOrGraphId=function(){return n.unwrap(this.resourceId)||n.unwrap(a.graphid)},this.card=n.observable(),this.tile=n.observable(),this.tile.subscribe((function(e){e&&a.hasDirtyTile&&e.dirty.subscribe((function(e){c.card()&&c.card().isDirty()||e?a.hasDirtyTile(!0):a.hasDirtyTile(!1)}))})),this.loading=a.loading||n.observable(!1),this.alert=a.alert||n.observable(null),this.complete=a.complete||n.observable(),this.graphName=a.graphName,this.loading(!0),this.customCardLabel=a.customCardLabel||!1,c.topCards=n.observableArray(),this.getJSON=function(){var p=i.urls.api_card+this.getCardResourceIdOrGraphId();t.getJSON(p,(function(t){var i={"after-update":[],"tile-reset":[]},p=n.observable(t.displayname),createLookup=function(t,n){return e.reduce(t,(function(e,t){return e[t[n]]=t,e}),{})};c.reviewer=t.userisreviewer,c.provisionalTileViewModel=new d({tile:c.tile,reviewer:t.userisreviewer});var f=new s({data:{nodes:t.nodes,nodegroups:t.nodegroups,edges:[]},datatypes:t.datatypes});t.cards.sort((function(e,t){return e.sortorder-t.sortorder}));var v=e.filter(t.cards,(function(n){var a=e.find(t.nodegroups,(function(e){return e.nodegroupid===n.nodegroup_id})),i=e.filter(t.nodes,(function(e){return e.nodegroup_id===n.nodegroup_id&&"semantic"!==e.datatype})),s=e.some(i,(function(n){var a=e.find(t.cardwidgets,(function(e){return n.nodeid===e.node_id}));return!!a&&a.visible}));return!(a&&a.parentnodegroup_id)&&s})).map((function(e){return a.nodegroupid=a.nodegroupid||e.nodegroup_id,new l({card:e,graphModel:f,tile:null,resourceId:c.resourceId,displayname:p,handlers:i,cards:t.cards,tiles:t.tiles,provisionalTileViewModel:c.provisionalTileViewModel,cardwidgets:t.cardwidgets,userisreviewer:t.userisreviewer,loading:c.loading})}));v.forEach((function(e){e.topCards=c.topCards})),c.topCards(v),c.widgetLookup=createLookup(t.widgets,"widgetid"),c.cardComponentLookup=createLookup(t.card_components,"componentid"),c.nodeLookup=createLookup(f.get("nodes")(),"nodeid"),c.on=function(e,t){i[e]&&i[e].push(t)},c.assignTile(),c.loading(!1)}))},c.assignTile=function(){c.topCards().forEach((function(e){if("CardViewModel"===e.constructor.name&&e.nodegroupid===a.nodegroupid){if(n.unwrap(a.parenttileid)&&e.parent&&n.unwrap(a.parenttileid)!==e.parent.tileid)return;c.customCardLabel&&e.model.name(n.unwrap(c.customCardLabel)),c.card(e),n.unwrap(c.resourceId)&&e.tiles().length>0?e.tiles().forEach((function(e){e.nodegroup_id===a.nodegroupid&&c.tile(e)})):!1!==n.unwrap(a.createTile)&&(c.tile(e.getNewTile()),c.resourceId()&&(c.tile().resourceinstance_id=c.resourceId()))}}))},a.tile=c.tile,!1!==n.unwrap(a.getJSONOnLoad)&&this.getJSON(),c.loadCard=function(e){c.card(e),a.nodegroupid=c.card().nodegroupid,c.assignTile()},c.close=function(){c.complete(!0)},c.onDeleteSuccess=function(){c.tile(c.card().getNewTile())},c.onSaveSuccess=function(e){var t;(e.length>0||"object"==_typeof(e))&&(t=e[0]||e,c.tile(t),c.resourceId(t.resourceinstance_id)),!0===c.completeOnSave&&c.complete(!0)}}return n.components.register("related-instance-creator",{viewModel:viewModel,template:c}),viewModel}.apply(t,a))||(e.exports=i)},91221:function(e,t,n){var a,i;a=[n(54922),n(46186),n(41762),n(90295),n(61977)],void 0===(i=function(e,t,n,a){return e.components.register("related-resources-graph",{viewModel:function(a){var i=this,s={name:"cola",animate:!0,directed:!0,edgeLength:200};this.viz=e.observable(),this.cytoscapeConfig=e.observable(),this.focusResourceId=e.isObservable(a.resourceId)?a.resourceId:e.observable(a.resourceId),this.selection=e.observable(),this.selectionMode=e.observable("information"),this.elements=e.observableArray(),this.informationElement=e.observable(),this.informationGraph=e.computed((function(){var e=i.informationElement();return e&&e.graph_id?l[e.graph_id]:{}})),this.viewInformationNodeReport=function(){var e=i.informationElement();e&&window.open(t.urls.resource_report+e.id)},this.editInformationNode=function(){var e=i.informationElement();e&&window.open(t.urls.resource_editor+e.id)},this.hoverElementId=e.observable(),this.legendEntries=e.computed((function(){var e=i.elements(),t=[];for(var n in l)e.filter((function(e){return e.data("graph_id")===n})).length>0&&t.push(l[n]);return t})),this.nodeSearchFilter=e.observable(""),this.expandedSearchId=e.observable(),this.searchNodes=e.computed((function(){var t=i.nodeSearchFilter(),n=i.elements(),a=i.viz(),s=[];return a&&n.forEach((function(n){if(n.isNode()){var i=n.data();i.shownRelationsCount||(i.shownRelationsCount=e.observable()),-1!==i.displayname.toLowerCase().indexOf(t)&&(i.graph=l[i.graph_id],i.shownRelationsCount(a.edges('[source = "'+i.id+'"]').length+a.edges('[target = "'+i.id+'"][source != "'+i.id+'"]').length),s.push(i))}})),s}));var getRelationshipLabel=function(e){var t;try{var n=new window.URL(e.relationshiptype_label);t=n.pathname.split("/")[n.pathname.split("/").length-1]}catch(n){t=e.relationshiptype_label}return t};this.informationElementRelationships=e.computed((function(){var e=[],t=i.informationElement(),n=i.viz();if(i.elements(),t&&n&&!t.source){var a=n.edges('[source = "'+t.id+'"]'),s=n.edges('[target = "'+t.id+'"]'),addRelationship=function(t,n){var a=t.data(),s=t[n]().data(),l=getRelationshipLabel(a);e.push({label:l,node:s,edge:a,informationElement:i.informationElement,hoverElementId:i.hoverElementId})};a.forEach((function(e){addRelationship(e,"target")})),s.forEach((function(e){e.source().id()!==e.target().id()&&addRelationship(e,"source")}))}return e})),this.edgeInformation=e.computed((function(){var e=i.informationElement(),t=i.viz();if(e&&t&&e.source){var n=t.getElementById(e.source).data(),a=t.getElementById(e.target).data();return{id:e.id,label:getRelationshipLabel(e),source:n,sourceGraph:l[n.graph_id],target:a,targetGraph:l[a.graph_id]}}})),n.apply(this,[a]);var getResourceRelations=function(e){var n="".concat(t.urls.related_resources).concat(e,"?paginate=false&lang=").concat(t.activeLanguage);return window.fetch(n)},l={},dataToElement=function(e){e.source=e.resourceinstanceidfrom,e.target=e.resourceinstanceidto,e.source?e.id=e.resourcexid:(e.id=e.resourceinstanceid,e.totalRelations=e.total_relations.value);var t=[];return e.graph_id&&t.push(l[e.graph_id].className),e.focus&&t.push("focus"),{data:e,classes:t,selected:e.focus}};this.refreshLayout=function(){var e=i.viz();e&&e.elements().makeLayout(s).run()},this.addMissingNodes=function(e){var t=[];e.forEach((function(e){e.data.source&&t.push(e.data.source),e.data.target&&t.push(e.data.target)}));var n=e.filter((function(e){return!!e.data.resourceinstanceid})).map((function(e){return e.data.resourceinstanceid}));return t.forEach((function(t){n.includes(t)||(e.push({classes:[],data:{graph_id:"undefined",id:t,target:void 0,source:void 0,displayname:"",totalRelations:1},selected:void 0}),n.push(t))})),e},this.expandNode=function(e){var t,n=i.viz();n&&(t=i.viz().getElementById(e.id).position()),e.id&&getResourceRelations(e.id).then((function(e){return e.json()})).then((function(a){var l=a.related_resources.concat(a.resource_relationships).map((function(e){var n=dataToElement(e);return!e.source&&t&&(n.position={x:t.x,y:t.y}),n}));l=i.addMissingNodes(l).filter((function(e){return 0===n.getElementById(e.data.id).length})),i.viz().getElementById(e.id).lock(),n.add(l),i.elements(n.elements());var d=n.elements().makeLayout(s);d.on("layoutstop",(function(){n.nodes().unlock()})),d.run()}))};var getStyle=function(){var e="#023047",t=[{selector:"node",style:{content:"data(displayname)","font-size":"18px",width:60,height:60,"text-valign":"center","text-halign":"center","border-color":"#115170","border-width":1}},{selector:"node.focus",style:{"font-weight":"bold"}},{selector:"node:selected",style:{"border-width":4,"border-color":"#000F16"}},{selector:"node.hover",style:{"border-width":4,"border-color":"#023047"}},{selector:"edge",style:{"line-color":"#BFBEBE","border-width":1}},{selector:"edge:selected",style:{width:4,"line-color":e}},{selector:"edge.hover",style:{width:4,"line-color":e}}];for(var n in l){var a=l[n].fillColor||"#CCCCCC",i={selector:"node."+l[n].className,style:{"background-color":a}};t.push(i)}return t},updateFocusResource=function(){var e=i.focusResourceId();if(e){var t=i.viz();if(t){var n=t.getElementById(e);n&&i.informationElement(n.data())}i.selection(null),getResourceRelations(e).then((function(e){return e.json()})).then((function(e){var n=0,a=e.node_config_lookup;for(var d in a)a[d].className="resource-type-"+n,n++;a[void 0]={fillColor:"#CCCCCC"},l=a,e.resource_instance.focus=!0,e.resource_instance.total_relations={value:e.resource_relationships.length};var c=[dataToElement(e.resource_instance)].concat(e.related_resources.concat(e.resource_relationships).map(dataToElement));c=i.addMissingNodes(c),i.selection(c[0].data),t?(t.remove("*"),t.add(c),t.style(getStyle()),t.layout(s).run()):function(e){i.cytoscapeConfig({selectionType:"single",elements:e,layout:s,style:getStyle()})}(c),i.elements(i.viz().elements())}))}};this.focusResourceId.subscribe(updateFocusResource),this.viz.subscribe((function(e){e?(e.on("select","node, edge",(function(t){e.elements().not(t.target).unselect(),i.selection(t.target.data())})),e.on("unselect","node, edge",(function(){i.selection(null)})),e.on("mouseover","node, edge",(function(e){i.hoverElementId(e.target.id())})),e.on("mouseout","node, edge",(function(){i.hoverElementId(null)}))):(i.cytoscapeConfig(null),i.selection(null))})),this.hoverElementId.subscribe((function(e){var t=i.viz();t&&(t.elements().removeClass("hover"),e&&t.getElementById(e).addClass("hover"))})),this.activeTab.subscribe((function(){var e=i.viz();e&&e.resize()})),this.selection.subscribe((function(e){var t=i.selectionMode(),n=i.viz();if(e)switch(t){case"expand":e.source?n.elements().unselect():i.expandNode(e);break;case"delete":var a=n.getElementById(e.id),s=i.informationElement(),l=s?s.id:null;e.source||n.edges().forEach((function(t){t.source().id()!==e.id&&t.target().id()!==e.id||(t.id()===l&&i.informationElement(null),n.remove(t),i.elements.remove(t))})),e.id===l&&i.informationElement(null),n.remove(a),i.elements.remove(a);break;case"focus":e.source?n.elements().unselect():i.focusResourceId(e.id);break;default:i.informationElement(e)}})),i.informationElement.subscribe((function(e){var t=i.viz();if(e){if(t){var n=t.getElementById(e.id);n.selected()||(i.selectionMode("information"),n.select())}i.activeTab("information")}})),this.selectionMode.subscribe((function(){i.viz().elements().unselect()})),updateFocusResource()},template:a})}.apply(t,a))||(e.exports=i)},31523:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(10762),n(70147),n(12340),n(28178),n(56321)],void 0===(i=function(e,t,a,i,s,l,d,c){var ResourceReportAbstract=function(c){var p=this,f=n(56321);this.loading=a.observable(!0),this.version=i.version,this.resourceid=a.unwrap(c.resourceid),this.summary=Boolean(c.summary),this.configForm=c.configForm,this.configType=c.configType,this.template=a.observable(),this.report=a.observable(),this.initialize=function(){var t,n,a,l;(c.cache=void 0===c.cache||c.cache,c.report)?!c.disableDisambiguatedReport&&!c.report.report_json&&null!=c&&null!==(n=c.report)&&void 0!==n&&null!==(a=n.attributes)&&void 0!==a&&a.resourceid||!c.cache?(t=i.urls.api_bulk_disambiguated_resource_instance+"?v=beta&resource_ids=".concat(""!=c.report.attributes.resourceid?c.report.attributes.resourceid:window.location.pathname.split("/")[2]),null!==(l=c.report.defaultConfig)&&void 0!==l&&l.uncompacted_reporting&&(t+="&uncompacted=true"),e.getJSON(t,(function(e){var t,n=""!=c.report.attributes.resourceid?c.report.attributes.resourceid:null===(t=window.location.pathname.split("/"))||void 0===t?void 0:t[2];c.report.report_json=null==e?void 0:e[n],p.template(s[c.report.templateId()]),p.report(c.report),p.loading(!1)}))):(this.template(s[c.report.templateId()]),this.report(c.report),p.loading(!1)):p.resourceid&&(t=i.urls.api_resource_report(p.resourceid)+"?v=beta&uncompacted=true",p.fetchResourceData(t).then((function(e){var t=e.template;p.template(t),t.preload_resource_data?p.preloadResourceData(e):(p.report({template:e.template,report_json:e.report_json}),p.loading(!1))})))},this.fetchResourceData=function(e){return window.fetch(e).then((function(e){if(e.ok)return e.json();throw new Error(i.translations.reNetworkReponseError)}))},this.preloadResourceData=function(e){var n=function(){try{var t,n;return null===(t=JSON.parse(e.displayname))||void 0===t||null===(n=t[i.activeLanguage])||void 0===n?void 0:n.value}catch(t){return e.displayname}}();e.displayname=n;var a={graphModel:new d({data:e.graph,datatypes:e.datatypes}),cards:e.cards,graph:e.graph,datatypes:e.datatypes,cardwidgets:e.cardwidgets};e.cards=t.filter(a.cards,(function(e){var n=t.find(a.graph.nodegroups,(function(t){return t.nodegroupid===e.nodegroup_id}));return!n||!n.parentnodegroup_id})).map((function(t){return new f({card:t,graphModel:a.graphModel,resourceId:p.resourceid,displayname:e.displayname,cards:a.cards,tiles:e.tiles,cardwidgets:a.cardwidgets})}));var s=new l(t.extend(e,{resourceid:p.resourceid,graphModel:a.graphModel,graph:a.graph,datatypes:a.datatypes}));s.hideEmptyNodes=e.hide_empty_nodes,s.report_json=e.report_json,p.report(s),p.loading(!1)},p.initialize()};return a.components.register("resource-report-abstract",{viewModel:ResourceReportAbstract,template:c}),ResourceReportAbstract}.apply(t,a))||(e.exports=i)},17266:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(40437),n(59197),n(15989)],void 0===(i=function(e,t,n,a,i,s,l){var d="advanced-search",c=s.extend({initialize:function(a){var l=this;a.name="Advanced Search Filter",s.prototype.initialize.call(this,a),this.urls=i.urls,this.tagId="Advanced Search",this.searchableGraphs=n.observableArray(),this.datatypelookup={},this.facetFilterText=n.observable(""),this.filter={facets:n.observableArray()},this.cardNameDict={};l.widgetLookup=null,e.ajax({type:"GET",url:i.urls.api_search_component_data+d,context:this}).done((function(e){var i,s;this.cards=e.cards,t.each(e.datatypes,(function(e){this.datatypelookup[e.datatype]=e}),this),l.widgetLookup=(i=e.cardwidgets,s="node_id",t.reduce(i,(function(e,t){return e[t[s]]=t,e}),{})),t.each(e.cards,(function(n){l.cardNameDict[n.nodegroup_id]=n.name,n.nodes=t.filter(e.nodes,(function(e){return e.nodegroup_id===n.nodegroup_id})),n.addFacet=function(){t.each(n.nodes,(function(e){l.cardNameDict[e.nodegroup_id]&&e.nodeid===e.nodegroup_id?e.label=l.cardNameDict[e.nodegroup_id]:e.nodeid!==e.nodegroup_id&&l.widgetLookup[e.nodeid]?e.label=l.widgetLookup[e.nodeid].label:e.label=e.name})),l.newFacet(n)}}),this);var d=e.graphs.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}));t.each(d,(function(a){if(a.isresource&&a.publication_id){var i=t.filter(e.cards,(function(e){return e.graph_id===a.graphid&&e.nodes.length>0}));i.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})),i.length>0&&(t.each(i,(function(e){e.getGraph=function(){return a}})),a.collapsed=n.observable(!0),a.cards=n.computed((function(){var e=this.facetFilterText().toLowerCase();return e?(a.collapsed(!1),t.filter(i,(function(t){return t.name.toLowerCase().indexOf(e)>-1}))):i}),this),this.searchableGraphs.push(a))}}),this),this.restoreState(),n.computed((function(){return JSON.stringify(n.toJS(this.filter.facets()))}),this).subscribe((function(){this.updateQuery()}),this),a.loading(!1)})),this.filters[d](this)},updateQuery:function(){var e=this.query();if(this.filter.facets().length>0){var i=this.filter.facets(),s=[];t.each(i,(function(e){var t=a.toJS(e.value);s.push(t)})),e[d]=JSON.stringify(s),!1===this.getFilter("term-filter").hasTag(this.tagId)&&this.getFilter("term-filter").addTag(this.tagId,this.name,n.observable(!1))}else delete e[d],this.getFilter("term-filter").removeTag(this.tagId);this.query(e)},newFacet:function(e){var a={card:e,value:{op:n.observable("and")}};t.each(a.card.nodes,(function(e){a.value[e.nodeid]=n.observable({})})),this.filter.facets.push(a)},restoreState:function(){var e=this.query();if(d in e){var a=JSON.parse(e[d]);a.length>0&&this.getFilter("term-filter").addTag("Advanced Search",this.name,n.observable(!1)),t.each(a,(function(e){var a=t.filter(Object.keys(e),(function(e){return"op"!==e})),i=t.find(this.cards,(function(e){var n=t.map(e.nodes,(function(e){return e.nodeid}));return t.contains(n,a[0])}),this);i&&(t.each(i.nodes,(function(t){e[t.nodeid]=n.observable(e[t.nodeid])})),e.op=n.observable(e.op),this.filter.facets.push({card:i,value:e}))}),this)}},clear:function(){this.filter.facets.removeAll()}});return n.components.register(d,{viewModel:c,template:l})}.apply(t,a))||(e.exports=i)},40437:function(e,t,n){var a,i;a=[n(20198),n(86564),n(54922)],i=function(e,t,n){return t.View.extend({constructor:function(){this.name="Base Filter",this.filter={},this.requiredFilters=[],t.View.apply(this,arguments)},initialize:function(t){e.extend(this,t),this.requiredFiltersLoaded=n.computed((function(){var e=this;return this.requiredFilters.every((function(t){return null!==e.getFilter(t)}))}),this)},getFilter:function(e){return n.unwrap(this.filters[e])}})}.apply(t,a),void 0===i||(e.exports=i)},56223:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(61999),n(40437),n(35227),n(85652),n(19356),n(90905),n(41926),n(28459),n(59732),n(94974)],void 0===(i=function(e,t,a,i,s,l,d,c,p,f,v,h,b,m){var g="map-filter",x=l.extend({initialize:function(e){var s=this;this.dependenciesLoaded=a.observable(!1),Promise.all([n.e(5136),n.e(1882)]).then((function(){var e=[n(85136),n(91882)];(function(e,t){s.mapboxgl=e,s.MapboxDraw=t,s.dependenciesLoaded(!0),s.map()&&s.map.valueHasMutated()}).apply(null,e)})).catch(n.oe),e.name="Map Filter",l.prototype.initialize.call(this,e),e.sources={"geojson-search-buffer-data":{type:"geojson",generateId:!0,data:{type:"FeatureCollection",features:[]}}},e.layers=a.observable([{id:"geojson-search-buffer-outline-base",source:"geojson-search-buffer-data",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":4}},{id:"geojson-search-buffer-outline",source:"geojson-search-buffer-data",type:"line",filter:["==","$type","Polygon"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"geojson-search-buffer",type:"fill",layout:{visibility:"visible"},paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.2},source:"geojson-search-buffer-data"}]),e.search=!0,d.apply(this,[e]),this.updateLayers=function(e){var t=s.map(),n=t.getStyle();n.layers=s.draw?e.concat(s.draw.options.styles):e,t.setStyle(n)},this.searchGeometries=a.observableArray(null),this.searchAggregations=a.observable(),this.selectedTool=a.observable(),this.geoJSONString=a.observable(void 0),this.geoJSONErrors=a.observableArray(),this.pageLoaded=!1,this.maxBuffer=1e5,this.maxBufferUnits="m",this.maxZoom=i.mapDefaultMaxZoom,this.filter.feature_collection=a.observable({type:"FeatureCollection",features:[]}),this.bufferUnits=[{name:"meters",val:"m"},{name:"feet",val:"ft"}],this.mapLinkData.subscribe((function(e){this.zoomToGeoJSON(e)}),this);var p=c(this.searchAggregations);this.geoJSONString.subscribe((function(e){if(this.geoJSONErrors(this.getGeoJSONErrors(e)),0===this.geoJSONErrors().length){var t=JSON.parse(e);if(t.features=t.features.slice(0,1),t.features.length>0){var n=h(t),a=new this.mapboxgl.LngLatBounds(n);this.map().fitBounds(a,{padding:parseInt(this.buffer(),10)})}this.searchGeometries(t.features),this.draw.set(t)}}),this),this.getGeoJSONErrors=function(e){var t=m.hint(e),n=[];try{var a=JSON.parse(e);a.features.length>1&&t.push({level:"warning",message:"Only one feature is allowed for search filtering.  Ignorning all all but the first feature."});var i,s=a.features[0];if(s.properties&&s.properties.buffer){var l=s.properties.buffer;try{if((i=parseInt(l.width,10))<0||i>this.maxBuffer)throw new Error("Whoops!")}catch(e){t.push({level:"warning",message:"Buffer must be an integer between 0 and "+this.maxBuffer})}try{var d=l.unit;if("ft"!==d&&"m"!==d)throw new Error("Whoops!")}catch(e){t.push({level:"warning",message:'Buffer unit must be either "ft" of "m"'})}}if(s.properties&&s.properties.inverted){var c=s.properties.inverted;try{if(i=parseInt(l.width,10),!0!==c&&!1!==c)throw new Error("Whoops!")}catch(e){t.push({level:"warning",message:'Property "inverted" must be the boolean "true" or "false" (no quotes)'})}}}finally{return t.forEach((function(e){"message"!==e.level&&n.push(e)})),n}},this.spatialFilterTypes=[{name:"Point",title:"Draw a Marker",class:"leaflet-draw-draw-marker",icon:"ion-location",drawMode:"draw_point",active:a.observable(!1)},{name:"Line",title:"Draw a Polyline",icon:"ion-steam",class:"leaflet-draw-draw-polyline",drawMode:"draw_line_string",active:a.observable(!1)},{name:"Polygon",title:"Draw a Polygon",icon:"fa fa-pencil-square-o",class:"leaflet-draw-draw-polygon",drawMode:"draw_polygon",active:a.observable(!1)},{name:"Extent",title:"Search by Map Extent",icon:"fa fa-pencil-square-o",class:"leaflet-draw-draw-polygon",drawMode:"extent",active:a.observable(!1)}],this.drawModes=t.pluck(this.spatialFilterTypes,"drawMode"),this.selectedTool.subscribe((function(e){e&&("extent"===e?this.searchByExtent():(this.draw.changeMode(e),s.map().draw_mode=e))}),this),this.searchResults.timestamp.subscribe((function(e){this.pageLoaded&&this.updateResults()}),this);var updateSearchResultPointLayer=function(){var e=s.map().getSource("search-results-points"),n=a.unwrap(s.searchAggregations),i=[],l=s.mouseoverInstanceId();n&&t.each(n.results,(function(e){t.each(e._source.points,(function(n){var a=f.point([n.point.lon,n.point.lat],t.extend(e._source,{resourceinstanceid:e._id,highlight:e._id===l}));i.push(a)}))}));var d=f.featureCollection(i);e.setData(d)};this.updateSearchResultsLayers=function(){if(s.filter.feature_collection()&&s.filter.feature_collection().features.length>0){var e=s.filter.feature_collection(),n=h(e),i=new this.mapboxgl.LngLatBounds(n);s.map().fitBounds(i,{padding:s.buffer()})}else s.fitToAggregationBounds();var l=[],d=a.unwrap(s.searchAggregations);t.each(d.geo_aggs.grid.buckets,(function(e){var t=v.decode(e.key),n=f.point([t.lon,t.lat],{doc_count:e.doc_count});l.push(n)}));var c=f.featureCollection(l),b=f.collect(a.unwrap(p),c,"doc_count","doc_count");t.each(b.features,(function(e){e.properties.doc_count=t.reduce(e.properties.doc_count,(function(e,t){return e+t}),0)}));var m={points:c,agg:b},g=s.map().getSource("search-results-hex"),x=s.map().getSource("search-results-hashes");g.setData(m.agg),x.setData(m.points),updateSearchResultPointLayer()},this.filters[g](this),this.map.subscribe((function(){this.setupDraw(),this.restoreState(),a.computed((function(){return JSON.stringify(a.toJS(this.filter.feature_collection()))+this.filter.inverted()}),this).subscribe((function(){this.updateQuery()}),this),this.buffer.subscribe((function(e){this.updateFilter()}),this),this.bufferUnit.subscribe((function(e){this.updateFilter()}),this),this.searchAggregations.subscribe(this.updateSearchResultsLayers,this),a.isObservable(p)&&p.subscribe(this.updateSearchResultsLayers,this),this.searchAggregations()&&this.updateSearchResultsLayers(),this.mouseoverInstanceId.subscribe(updateSearchResultPointLayer)}),this)},setupDraw:function(){if(this.map()&&this.dependenciesLoaded()){var e=this,t=this.MapboxDraw.modes;t.static={toDisplayFeatures:function(e,t,n){n(t)}},this.draw=new this.MapboxDraw({displayControlsDefault:!1,modes:t}),this.map().addControl(this.draw),this.map().on("draw.create",(function(t){e.draw.getAll().features.forEach((function(n){n.id!==t.features[0].id&&e.draw.delete(n.id)})),e.searchGeometries(t.features),e.updateFilter(),e.selectedTool(void 0)})),this.map().on("draw.update",(function(t){e.searchGeometries(t.features),e.updateFilter()})),this.map().on("draw.modechange",(function(t){e.map().draw_mode=t.mode}))}},searchByExtent:function(){t.contains(this.drawModes,this.selectedTool())&&this.draw.deleteAll();var e=this.map().getBounds(),n=e.getSouthWest().toArray(),a=[n,e.getNorthWest().toArray(),e.getNorthEast().toArray(),e.getSouthEast().toArray(),n],i={type:"Feature",properties:{},id:b.generate(),geometry:{type:"Polygon",coordinates:[a]}};this.draw.set({type:"FeatureCollection",features:[i]}),this.searchGeometries([i]),this.updateFilter(),this.selectedTool(void 0)},useMaxBuffer:function(e,t,n){return"ft"===e?.3048*t>n:t>n},updateFilter:function(){if(this.buffer()<0&&this.buffer(0),this.useMaxBuffer(this.bufferUnit(),this.buffer(),this.maxBuffer)){var e="ft"===this.bufferUnit()?328084:this.maxBuffer;this.buffer(e)}this.searchGeometries().forEach((function(e){e.properties||(e.properties={}),e.properties.buffer={width:this.buffer(),unit:this.bufferUnit()},e.properties.inverted=this.filter.inverted()}),this),this.filter.feature_collection({type:"FeatureCollection",features:this.searchGeometries()})},editGeoJSON:function(e){var t=e(),n=JSON.stringify(t,null,4);this.geoJSONString(n)},updateGeoJSON:function(){if(0===this.geoJSONErrors().length){var e=JSON.parse(this.geoJSONString());this.draw.set(e),this.searchGeometries(e.features),e.features.forEach((function(e){e.properties&&e.properties.buffer&&(this.buffer(parseInt(e.properties.buffer.width,10)),this.bufferUnit(e.properties.buffer.unit)),e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"inverted")&&this.filter.inverted(e.properties.inverted)}),this),this.selectedTool(void 0),this.geoJSONString(void 0)}},zoomToGeoJSON:function(e){var t=e.properties.geometries.reduce((function(e,t){return e.geom.features=e.geom.features.concat(t.geom.features),e}),{geom:{type:"FeatureCollection",features:[]}}),n=new this.mapboxgl.LngLatBounds(h(t.geom)),i=a.unwrap(this.maxZoom);this.map().fitBounds(n,{maxZoom:i>17?17:i})},updateQuery:function(){var e=this.query();this.filter.feature_collection().features.length>0?(!1===this.getFilter("term-filter").hasTag(this.type)&&this.getFilter("term-filter").addTag("Map Filter Enabled",this.name,this.filter.inverted),this.filter.feature_collection().features[0].properties.inverted=this.filter.inverted(),e[g]=a.toJSON(this.filter.feature_collection())):delete e[g],this.query(e)},restoreState:function(){var e=this.query(),t=10,n="m",i=!1,s=!1;if(g in e){var l=JSON.parse(e[g]);if(l.features.length>0){s=!0;var d=l.features[0].properties;i=d.inverted,this.filter.feature_collection(l),t=d.buffer.width,n=d.buffer.unit,this.draw.set({type:"FeatureCollection",features:l.features})}}this.buffer=a.observable(t).extend({deferred:!0}),this.bufferUnit=a.observable(n).extend({deferred:!0}),this.filter.inverted=a.observable(i).extend({deferred:!0}),s&&this.getFilter("term-filter").addTag("Map Filter Enabled",this.name,this.filter.inverted),this.updateResults(),this.pageLoaded=!0},updateResults:function(){if(this.searchResults.results&&(this.searchAggregations({results:this.searchResults.results.hits.hits,geo_aggs:this.searchResults.results.aggregations.geo_aggs.inner.buckets[0]}),this.fitToAggregationBounds()),this.searchResults[g]){var e=this.searchResults[g].search_buffer;this.map().getSource("geojson-search-buffer-data").setData(e)}},clear:function(e){this.filter.feature_collection({type:"FeatureCollection",features:[]}),this.map().getSource("geojson-search-buffer-data").setData({type:"FeatureCollection",features:[]}),this.getFilter("term-filter").removeTag("Map Filter Enabled"),this.draw.deleteAll(),this.searchGeometries([])},fitToAggregationBounds:function(){var e,t=this.searchAggregations();if(t&&t.geo_aggs.bounds.bounds&&this.map()){var n=[[(e=t.geo_aggs.bounds.bounds).top_left.lon,e.bottom_right.lat],[e.bottom_right.lon,e.top_left.lat]],i=a.unwrap(this.maxZoom);i=i>17?17:i,this.map().fitBounds(n,{padding:45,maxZoom:i})}}});return a.components.register(g,{viewModel:x,template:s})}.apply(t,a))||(e.exports=i)},24198:function(e,t,n){var a,i;a=[n(40437),n(54922),n(58420),n(72919)],void 0===(i=function(e,t,n,a){var i="paging-filter",s=e.extend({initialize:function(a){a.name="Paging Filter",e.prototype.initialize.call(this,a),this.page=t.observable(),this.preventLoop=!1,this.userRequestedNewPage=!1,this.pageInitialized=!1,this.paginator=n.fromJS({current_page:1,end_index:1,has_next:!1,has_other_pages:!0,has_previous:!1,next_page_number:2,pages:[],previous_page_number:null,start_index:1}),this.query.subscribe((function(){!1===this.preventLoop&&!1===this.userRequestedNewPage&&!0===this.pageInitialized?(this.preventLoop=!0,this.page(1)):(this.preventLoop=!1,this.userRequestedNewPage=!1)}),this,"beforeChange"),this.page.subscribe((function(e){this.updateQuery()}),this),this.searchResults.timestamp.subscribe((function(e){this.updateResults()}),this),this.filters[i](this),this.restoreState(),this.pageInitialized=!0},updateQuery:function(){var e=this.query();e[i]=this.page(),this.query(e)},newPage:function(e){e&&(this.userRequestedNewPage=!0,this.page(e))},restoreState:function(){var e=this.query()[i];e||(e=1),this.page(e),this.updateResults()},updateResults:function(){this.searchResults[i]&&this.searchResults[i].paginator&&n.fromJS(this.searchResults[i].paginator,this.paginator)}});return t.components.register(i,{viewModel:s,template:a})}.apply(t,a))||(e.exports=i)},16335:function(e,t,n){var a,i;a=[n(54922),n(46186),n(40437),n(80168)],void 0===(i=function(e,t,n,a){var i="provisional-filter",s=n.extend({initialize:function(a){a.name="Provisional Filter",this.translations=t.translations,this.requiredFilters=["term-filter"],n.prototype.initialize.call(this,a),this.filter=e.observableArray(),this.provisionalOptions=[{name:"Authoritative"},{name:"Provisional"}],!1===this.requiredFiltersLoaded()?this.requiredFiltersLoaded.subscribe((function(){this.restoreState()}),this):this.restoreState(),e.computed((function(){return JSON.stringify(e.toJS(this.filter()))}),this).subscribe((function(){this.updateQuery()}),this),this.filters[i](this)},updateQuery:function(){var t=this.query();this.filter().length>0?t[i]=e.toJSON(this.filter):delete t[i],this.query(t)},restoreState:function(){var t=this.query();if(i in t){var n=JSON.parse(t[i]);n.length>0&&(n.forEach((function(t){t.inverted=e.observable(!!t.inverted),this.getFilter("term-filter").addTag(t.provisionaltype,this.name,t.inverted)}),this),this.filter(n))}},selectProvisional:function(t){if(this.filter().forEach((function(e){this.getFilter("term-filter").removeTag(e.provisionaltype)}),this),t){var n=e.observable(!1);this.getFilter("term-filter").addTag(t.name,this.name,n),this.filter([{provisionaltype:t.name,inverted:n}])}else this.clear()},clear:function(){this.filter.removeAll()}});return e.components.register(i,{viewModel:s,template:a})}.apply(t,a))||(e.exports=i)},50739:function(e,t,n){var a,i;a=[n(54922),n(46186),n(76806),n(40437),n(48153),n(91221)],void 0===(i=function(e,t,n,a,i){var s="related-resources-filter",l=a.extend({initialize:function(n){n.name="Related Resources Filter",this.requiredFilters=["search-results"],a.prototype.initialize.call(this,n),this.ready=e.observable(!1),this.options=n,this.urls=t.urls;var i=this,setSearchResults=function(){n.searchResultsVm=i.getFilter("search-results"),n.searchResultsVm.relatedResourcesManager=i,n.filters[s](i),i.ready(!0)};!1===this.requiredFiltersLoaded()?this.requiredFiltersLoaded.subscribe(setSearchResults,this):setSearchResults()}});return e.components.register(s,{viewModel:l,template:i})}.apply(t,a))||(e.exports=i)},55383:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(54922),n(46186),n(40437),n(30994)],i=function(e,t,n,a){var i,s,l="resource-type-filter",d=n.extend({initialize:(i=_regeneratorRuntime().mark((function _callee(a){var i,s,d;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.name="Resource Type Filter",this.requiredFilters=["term-filter"],n.prototype.initialize.call(this,a),this.resourceModels=e.observableArray(),this.filter=e.observableArray(),i=this,c.next=8,fetch(t.urls.api_search_component_data+l);case 8:if(!(s=c.sent).ok){c.next=16;break}return c.next=12,s.json();case 12:d=c.sent,i.resourceModels(d.resources),c.next=17;break;case 16:console.log("Failed to fetch resource instance list");case 17:this.filter=e.observableArray(),e.computed((function(){return JSON.stringify(e.toJS(this.filter()))}),this).subscribe((function(){this.updateQuery()}),this),this.filters[l](this),!1===this.requiredFiltersLoaded()?this.requiredFiltersLoaded.subscribe((function(){this.restoreState()}),this):this.restoreState();case 22:case"end":return c.stop()}}),_callee,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,a){var s=i.apply(e,t);function _next(e){asyncGeneratorStep(s,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,a,_next,_throw,"throw",e)}_next(void 0)}))},function(e){return s.apply(this,arguments)}),updateQuery:function(){var t=this.query();this.filter().length>0?t[l]=e.toJSON(this.filter):delete t[l],this.query(t)},restoreState:function(){var t=this.query();if(l in t){var n=JSON.parse(t[l]);n.length>0&&(n.forEach((function(t){t.inverted=e.observable(!!t.inverted),this.getFilter("term-filter").addTag(t.name,this.name,t.inverted)}),this),this.filter(n))}},clear:function(){this.filter.removeAll()},selectModelType:function(t){if(this.filter().forEach((function(e){this.getFilter("term-filter").removeTag(e.name)}),this),t){var n=e.observable(!1);this.getFilter("term-filter").addTag(t.name,this.name,n),this.filter([{graphid:t.graphid,name:t.name,inverted:n}])}else this.clear()}});return e.components.register(l,{viewModel:d,template:a})}.apply(t,a),void 0===i||(e.exports=i)},55612:function(e,t,n){var a,i;a=[n(20198),n(54922),n(46186),n(95445),n(95461)],void 0===(i=function(e,t,n,a){var i="saved-searches";return t.components.register(i,{viewModel:function(a){var s=this;s.urls=n.urls,s.items=t.observableArray([]),e.ajax({type:"GET",url:n.urls.api_search_component_data+i,context:this}).done((function(e){e.saved_searches.forEach((function(e){var t=n.urls.url_subpath+(e.IMAGE&&e.IMAGE.length>0?e.IMAGE[0].url:"");t=t.replace("//","/"),s.items.push({image:t,title:e.SEARCH_NAME[n.activeLanguage].value,subtitle:e.SEARCH_DESCRIPTION[n.activeLanguage].value,searchUrl:e.SEARCH_URL[n.activeLanguage].value})}))})),s.options={itemSelector:".ss-grid-item",masonry:{columnWidth:500,gutterWidth:25}}},template:a})}.apply(t,a))||(e.exports=i)},52543:function(e,t,n){var a,i;a=[n(20198),n(54922),n(46186),n(63721),n(85935),n(56910),n(5523)],void 0===(i=function(e,t,n,a){return t.components.register("search-export",{viewModel:function(a){var i=this;this.total=a.total,this.query=a.query,this.downloadStarted=t.observable(!1),this.reportlink=t.observable(!1),this.format=t.observable("tilecsv"),this.precision=t.observable(6),this.result=t.observable(),this.emailInput=t.observable(n.userEmail),this.exportName=t.observable(),this.celeryRunning=t.observable(n.celeryRunning),this.hasExportHtmlTemplates=t.observable(n.exportHtmlTemplates.length>0),this.downloadPending=t.observable(!1),this.hasResourceTypeFilter=t.observable(!!a.query()["resource-type-filter"]),this.query.subscribe((function(e){e["resource-type-filter"]?i.hasResourceTypeFilter(!0):i.hasResourceTypeFilter(!1)})),this.hasResourceTypeFilter.subscribe((function(e){e||i.format("tilecsv")})),this.url=t.computed((function(){var a=n.urls.export_results,s=t.unwrap(i.query);return s.format=i.format(),s.reportlink=i.reportlink(),s.precision=i.precision(),s.total=i.total(),a=a+"?"+e.param(s)})),this.geojsonUrl=t.pureComputed((function(){if("geojson"===t.unwrap(i.format())){var e=i.url().replace("search/export_results","api/search/export_results");return window.location.origin+e}return null})),this.getExportData=function(){var a=t.unwrap(this.query);i.downloadPending(!0),a.format=this.format(),a.reportlink=this.reportlink(),a.precision=this.precision(),a.total=this.total(),a.email=this.emailInput(),a.exportName=this.exportName()||"Arches Export",e.ajax({type:"GET",url:n.urls.export_results,data:a}).done((function(e){i.downloadPending(!1),i.downloadStarted(!0),window.setTimeout((function(){i.downloadStarted(!1)}),9e3),i.result(e.message)}))},this.executeExport=function(e){"geojson"===t.unwrap(i.format())&&this.total()<=e?window.open(this.geojsonUrl()):this.total()>e?this.getExportData():this.total()>0&&window.open(this.url())}},template:a})}.apply(t,a))||(e.exports=i)},70673:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(65923),n(10762),n(40437),n(87880),n(70147),n(56321),n(31523),n(84714)],i=function(e,t,n,a,i,s,l,d,c){var p="search-result-details",f=s.extend({initialize:function(e){var l=this;e.name="Search Result Details",this.requiredFilters=["search-results"],s.prototype.initialize.call(this,e),this.options=e,this.report=n.observable(),this.loading=n.observable(!1),this.reportExpanded=n.observable();var setSearchResults=function(){e.searchResultsVm=l.getFilter("search-results"),e.searchResultsVm.details=l,e.filters[p](l)};!1===this.requiredFiltersLoaded()?this.requiredFiltersLoaded.subscribe(setSearchResults,this):setSearchResults();var f=this.query();f.tiles=!0,this.query(f),this.setupReport=function(e,t,a){l.loading(!0);var i={tiles:e.tiles,displayname:e.displayname,resourceid:e.resourceinstanceid},s=e.graph_id,d=e.resourceinstanceid;n.computed((function(){t(),a(),t()[s]&&a()[d]&&(l.createReport(i,t()[s],a()[d]),l.loading(!1))}))},this.createReport=function(e,s,p){var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(s.graph){f.cards=t.filter(s.cards,(function(e){var n=t.find(s.graph.nodegroups,(function(t){return t.nodegroupid===e.nodegroup_id}));return!n||!n.parentnodegroup_id})).map((function(e){return new c({card:e,graphModel:s.graphModel,resourceId:f.resourceid,displayname:f.displayname,cards:s.cards,tiles:f.tiles,cardwidgets:s.cardwidgets})})),f.templates=i,f.cardComponents=a;var v=new d(t.extend(f,{graphModel:s.graphModel,graph:s.graph,datatypes:s.datatypes}));v.report_json=p,l.report(v)}else l.report({templateId:n.observable(s.template_id),report_json:p})}}});return n.components.register(p,{viewModel:f,template:l})}.apply(t,a),void 0===i||(e.exports=i)},56712:function(e,t,n){var a,i;a=[n(20198),n(84490),n(40437),n(91248),n(46186),n(16950),n(54922),n(58420),n(12340),n(35436),n(85239),n(85102),n(74729)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p,f){var v="search-results";return l.components.register(v,{viewModel:n.extend({events:{"click .related-resources-graph":"showRelatedResouresGraph","click .navigate-map":"zoomToFeature","mouseover .arches-search-item":"itemMouseover","mouseout .arches-search-item":"itemMouseout"},initialize:function(e){e.name="Search Results",this.requiredFilters=["map-filter"],n.prototype.initialize.call(this,e),this.results=l.observableArray(),this.showRelationships=l.observable(),this.relationshipCandidates=l.observableArray(),this.selectedResourceId=l.observable(null),this.language=i.activeLanguage,this.showRelationships.subscribe((function(e){this.selectedResourceId(e.resourceinstanceid)}),this),this.searchResults.timestamp.subscribe((function(){this.updateResults()}),this),this.filters[v](this),this.restoreState(),!1===this.requiredFiltersLoaded()?this.requiredFiltersLoaded.subscribe((function(){this.mapFilter=this.getFilter("map-filter")}),this):this.mapFilter=this.getFilter("map-filter"),this.selectedTab.subscribe((function(e){"map-filter"===e&&l.unwrap(this.mapFilter.map)&&this.mapFilter.map().resize()}),this),this.bulkResourceReportCache=l.observable({}),this.bulkDisambiguatedResourceInstanceCache=l.observable({})},mouseoverInstance:function(){var e=this;return function(t){var n=t.resourceinstanceid||"";e.mouseoverInstanceId(n)}},showRelatedResources:function(){var e=this;return function(t){void 0===t&&(t=e.relatedResourcesManager.currentResource(),!0===e.relatedResourcesManager.showGraph()&&e.relatedResourcesManager.showGraph(!1)),e.showRelationships(t),"related-resources-filter"!==e.selectedTab()&&e.selectedTab("related-resources-filter")}},showResourceSummaryReport:function(t){var n=this,a=t._source.resourceinstanceid;return function(){if(!n.bulkDisambiguatedResourceInstanceCache()[a]){var s=i.urls.api_bulk_disambiguated_resource_instance+"?v=beta&resource_ids=".concat(a);e.getJSON(s,(function(e){var t=n.bulkDisambiguatedResourceInstanceCache();Object.keys(e).forEach((function(n){t[n]=e[n]})),n.bulkDisambiguatedResourceInstanceCache(t)}))}n.details.setupReport(t._source,n.bulkResourceReportCache,n.bulkDisambiguatedResourceInstanceCache),"search-result-details"!==n.selectedTab()&&n.selectedTab("search-result-details")}},updateResults:function(){var n=this,a=e('div[name="search-result-data"]').data();if(n.bulkResourceReportCache||(n.bulkResourceReportCache=l.observable({})),n.bulkDisambiguatedResourceInstanceCache||(n.bulkDisambiguatedResourceInstanceCache=l.observable({})),this.searchResults.results){this.results.removeAll(),this.selectedResourceId(null);var s=this.searchResults.results.hits.hits.reduce((function(e,t){var a=t._source.graph_id;return l.unwrap(n.bulkResourceReportCache)[a]||e.push(a),e}),[]);if(s.length>0){var d=i.urls.api_bulk_resource_report+"?graph_ids=".concat(s);e.getJSON(d,(function(e){var t=n.bulkResourceReportCache();Object.keys(e).forEach((function(n){var a=e[n];if(a.graph){var i=new c({data:a.graph,datatypes:a.datatypes});a.graphModel=i}t[n]=a})),n.bulkResourceReportCache(t)}))}this.searchResults.results.hits.hits.reduce((function(e,t){var a=t._source.resourceinstanceid;return l.unwrap(n.bulkDisambiguatedResourceInstanceCache)[a]||e.push(a),e}),[]);this.searchResults.results.hits.hits.forEach((function(e){var a=t.find(p.graphs,(function(t){return e._source.graph_id===t.graphid})),s=null;e._source.points.length>0&&(s=e._source.points[0].point),this.results.push({displayname:e._source.displayname,resourceinstanceid:e._source.resourceinstanceid,displaydescription:e._source.displaydescription,alternativelanguage:e._source.displayname_language!=i.activeLanguage,map_popup:e._source.map_popup,provisional_resource:e._source.provisional_resource,geometries:l.observableArray(e._source.geometries),iconclass:a?a.iconclass:"",showrelated:this.showRelatedResources(e._source.resourceinstanceid),showDetails:this.showResourceSummaryReport(e),mouseoverInstance:this.mouseoverInstance(e._source.resourceinstanceid),relationshipcandidacy:this.toggleRelationshipCandidacy(e._source.resourceinstanceid),ontologyclass:e._source.root_ontology_class,relatable:this.isResourceRelatable(e._source.graph_id),point:s,mapLinkClicked:function(){n.selectedResourceId(e._source.resourceinstanceid),"map-filter"!==n.selectedTab()&&n.selectedTab("map-filter"),n.mapLinkData({properties:e._source})},selected:l.computed((function(){return e._source.resourceinstanceid===l.unwrap(n.selectedResourceId)})),canRead:e._source.permissions&&e._source.permissions.users_without_read_perm.indexOf(this.userid)<0&&n.userCanReadResources,canEdit:e._source.permissions&&e._source.permissions.users_without_edit_perm.indexOf(this.userid)<0&&n.userCanEditResources})}),this)}return a},restoreState:function(){this.updateResults()},viewReport:function(e){window.open(i.urls.resource_report+e.resourceinstanceid)},editResource:function(e){window.open(i.urls.resource_editor+e.resourceinstanceid)},zoomToFeature:function(t){var n=e(t.currentTarget).data();this.trigger("find_on_map",n.resourceid,n)}}),template:f})}.apply(t,a))||(e.exports=i)},21801:function(e,t,n){var a,i;a=[n(20198),n(84490),n(40437),n(54922),n(91573),n(76516)],void 0===(i=function(e,t,n,a,i){var s="sort-results",l=n.extend({initialize:function(e){e.name="Sort Results",n.prototype.initialize.call(this,e),this.filter=a.observable("asc"),this.filters[s](this),this.filter.subscribe((function(){this.updateQuery()}),this),this.restoreState()},updateQuery:function(){var e=this.query();""===this.filter()?delete e[s]:e[s]=this.filter(),this.query(e)},restoreState:function(){var e=this.query();s in e&&this.filter(e[s])},clear:function(){this.filter("")}});return a.components.register(s,{viewModel:l,template:i})}.apply(t,a))||(e.exports=i)},84885:function(e,t,n){var a,i;a=[n(54922),n(58420),n(84490),n(40437),n(46186),n(94705),n(57677)],void 0===(i=function(e,t,n,a,i,s){var l="term-filter",d=a.extend({initialize:function(t){t.name="Term Filter",a.prototype.initialize.call(this,t),this.filter.terms=e.observableArray(),this.filter.tags=e.observableArray(),this.language=e.observable(),this.languages=e.observableArray();var s=i.languages.slice();s.unshift({code:"*",name:"All"}),this.languages(s),e.computed((function(){return e.toJS(this.filter.terms)}),this).subscribe((function(){this.updateQuery()}),this),this.language.subscribe((function(){this.updateQuery()}),this),this.filter.tags.subscribe((function(e){n.each(e,(function(e){"deleted"===e.status&&(n.find(this.filter.tags,(function(t){return e.value.type===t.type}),this)||n.each(this.filters,(function(t){t()&&t().name===e.value.type&&t().clear()}),this))}),this)}),this,"arrayChange"),this.filters[l](this),this.restoreState()},updateQuery:function(){var t,a=n.filter(this.filter.terms(),(function(e){return"string"===e.type||"concept"===e.type||"term"===e.type}),this),i=this.query();a.length>0?(i[l]=e.toJSON(a),i.language=null===(t=this.language())||void 0===t?void 0:t.code):delete i[l];this.query(i)},restoreState:function(){var t=this.query();if(l in t){var n=JSON.parse(t[l]);n.length>0&&(n.forEach((function(t){t.inverted=e.observable(t.inverted)})),this.filter.terms(n))}},addTag:function(e,t,n){this.filter.tags.unshift({inverted:n,type:t,context:"",context_label:"",id:e,text:e,value:e})},removeTag:function(e){this.filter.tags.remove((function(t){return t.id==e&&t.text==e&&t.value==e}))},hasTag:function(e){var t=!1;return this.filter.terms().forEach((function(n){n.text==e&&(t=!0)})),t},clear:function(){this.filter.terms.removeAll(),this.filter.tags.removeAll()}});return e.components.register(l,{viewModel:d,template:s})}.apply(t,a))||(e.exports=i)},58464:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(84826),n(46186),n(40437),n(61021),n(92387),n(84714),n(62457)],void 0===(i=function(e,t,n,a,i,s,l){var d="time-filter",c=s.extend({initialize:function(l){l.name="Time Filter",this.dateDropdownEleId="dateDropdownEleId"+t.random(2e3,3e6),s.prototype.initialize.call(this,l),this.filter={fromDate:n.observable(null),toDate:n.observable(null),dateNodeId:n.observable(null),inverted:n.observable(!1)},this.filter.fromDate.subscribe((function(e){var t=this.filter.toDate();e&&t&&!this.isFromLessThanTo(e,t)&&this.filter.toDate(e)}),this),this.filter.toDate.subscribe((function(e){var t=this.filter.fromDate();t&&e&&!this.isFromLessThanTo(t,e)&&this.filter.fromDate(e)}),this),this.dateRangeType=n.observable("custom"),this.format="YYYY-MM-DD",this.breadCrumb=n.observable(),this.selectedPeriod=n.observable(),this.wheelConfig=n.observable(),this.loading=n.observable(!1),this.getTimeWheelConfig(),this.date_nodes=n.observableArray(),this.graph_models=n.observableArray(),this.selectedPeriod.subscribe((function(e){if(e){var t=a(0,"YYYY").add(e.data.start,"years").format(this.format),n=a(0,"YYYY").add(e.data.end,"years").format(this.format);this.dateRangeType("custom"),this.filter.fromDate(n),this.filter.toDate(n),this.filter.fromDate(t)}}),this),this.dateRangeType.subscribe((function(e){var t=a(),n=t.format(this.format),i=t.format(this.format);switch(e){case"today":break;case"last-7":n=t.subtract(7,"days").format(this.format);break;case"last-30":n=t.subtract(30,"days").format(this.format);break;case"this-week":n=t.day(0).format(this.format),i=t.day(6).format(this.format);break;case"this-month":n=t.date(1).format(this.format),i=a().month(t.month()+1).date(0).format(this.format);break;case"this-quarter":n=a().date(1).quarter(t.quarter()).format(this.format),i=a().date(1).quarter(t.quarter()+1).format(this.format);break;case"this-year":var s=t.dayOfYear(1);n=s.format(this.format),i=s.add(1,"years").subtract(1,"days").format(this.format);break;default:return}this.filter.toDate(i),this.filter.fromDate(n)}),this),e.ajax({type:"GET",url:i.urls.api_search_component_data+d,context:this}).done((function(t){this.date_nodes(t.date_nodes),this.graph_models(t.graph_models),this.restoreState(),e("#"+this.dateDropdownEleId).trigger("chosen:updated"),this.filterChanged=n.computed((function(){return(this.filter.fromDate()||this.filter.toDate())&&this.getFilter("term-filter").addTag(this.name,this.name,this.filter.inverted),n.toJSON(this.filter)}),this).extend({deferred:!0}),this.filterChanged.subscribe((function(){this.updateQuery()}),this)})),this.filters[d](this)},updateQuery:function(){var e=this.query();!!this.filter.fromDate()||!!this.filter.toDate()?e[d]=n.toJSON(this.filter):delete e[d],this.query(e)},getTimeWheelConfig:function(){this.loading(!0),e.ajax({type:"GET",context:this,url:i.urls.time_wheel_config}).done((function(e){this.wheelConfig(e)})).fail((function(e){this.breadCrumb(e.responseText)})).always((function(){this.loading(!1)}))},restoreState:function(){var e=this.query();if(d in e){var t=JSON.parse(e[d]);this.filter.inverted(!!t.inverted),this.getFilter("term-filter").addTag(this.name,this.name,this.filter.inverted),["fromDate","toDate","dateNodeId"].forEach((function(e){e in t&&this.filter[e](t[e])}),this)}},isFromLessThanTo:function(e,t){return this.isBCE(e)||this.isBCE(t)?!(!this.isBCE(e)||this.isBCE(t))||!(!this.isBCE(e)&&this.isBCE(t))&&(!this.isBCE(e)||!this.isBCE(t)||e>t):e<t},isBCE:function(e){return"-"===e.charAt(0)},clear:function(){this.filter.fromDate(null),this.filter.toDate(null),this.filter.dateNodeId(null),this.filter.inverted(!1),this.dateRangeType("custom"),this.getFilter("term-filter").removeTag(this.name),this.selectedPeriod(null)}});return n.components.register(d,{viewModel:c,template:l})}.apply(t,a))||(e.exports=i)},27632:function(e,t,n){var a,i;a=[n(54922),n(54031),n(45832),n(74729)],void 0===(i=function(e,t,n){return e.components.register("concept-checkbox-widget",{viewModel:function(e){e.configKeys=["defaultValue"],t.apply(this,[e]),this.multiple=!0},template:n})}.apply(t,a))||(e.exports=i)},69883:function(e,t,n){var a,i;a=[n(54922),n(22493),n(78881),n(87720)],void 0===(i=function(e,t,n){return e.components.register("concept-multiselect-widget",{viewModel:function(n){n.multiple=!0,n.configKeys=["defaultValue"],t.apply(this,[n]);e.unwrap(this.defaultValue);var a=this;a.configForm&&(a.select2Config.value=a.defaultValue)},template:n})}.apply(t,a))||(e.exports=i)},88870:function(e,t,n){var a,i;a=[n(54922),n(54031),n(92890),n(74729)],void 0===(i=function(e,t,n){return e.components.register("concept-radio-widget",{viewModel:function(e){e.configKeys=["defaultValue"],t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},21332:function(e,t,n){var a,i;a=[n(54922),n(22493),n(78881),n(87720)],void 0===(i=function(e,t,n){return e.components.register("concept-select-widget",{viewModel:function(n){n.configKeys=["defaultValue"],t.apply(this,[n]);e.unwrap(this.defaultValue);var a=this;a.configForm&&(a.select2Config.value=a.defaultValue)},template:n})}.apply(t,a))||(e.exports=i)},99558:function(e,t,n){var a,i;a=[n(54922),n(84490),n(22023),n(84826),n(73379),n(92387),n(58795),n(84714)],void 0===(i=function(e,t,n,a,i){return e.components.register("datepicker-widget",{viewModel:function(t){var a=this;if(t.configKeys=["minDate","maxDate","viewMode","dateFormat","defaultValue"],n.apply(this,[t]),a.node.config&&e.unwrap(a.node.config.dateFormat)&&this.dateFormat(e.unwrap(a.node.config.dateFormat)),e.unwrap(this.dateFormat)||(this.dateFormat=e.observable(a.node.datatypeLookup.date.config)),this.placeholder=this.config().placeholder,this.viewModeOptions=e.observableArray([{id:"days",name:"Days"},{id:"months",name:"Months"},{id:"years",name:"Years"},{id:"decades",name:"Decades"}]),this.onViewModeSelection=function(e,t){this.viewMode(t.currentTarget.value)},this.on=this.config().on||"Date of Data Entry",this.off=this.config().off||"",this.setvalue=this.config().setvalue||function(e){e.defaultValue()===e.on?e.defaultValue(e.off):e.defaultValue(e.on)},this.setdefault=this.config().setdefault||function(e){e.defaultValue()===e.on?e.defaultValue(e.off):e.defaultValue(e.on)},this.getdefault=this.config().getdefault||e.computed((function(){return this.defaultValue()==this.on}),this),a.form&&"Date of Data Entry"===this.defaultValue()&&"Date of Data Entry"===this.value()){var i=new Date,s=i.getDate(),l=i.getMonth()+1,d=i.getFullYear();s<10&&(s="0"+s),l<10&&(l="0"+l),i=d+"-"+l+"-"+s,a.value(i)}this.disposables.push(this.getdefault)},template:i})}.apply(t,a))||(e.exports=i)},47816:function(e,t,n){var a,i;a=[n(54922),n(54085),n(45832),n(74729)],void 0===(i=function(e,t,n){return e.components.register("domain-checkbox-widget",{viewModel:function(e){e.configKeys=["defaultValue"],t.apply(this,[e]),this.multiple=!0},template:n})}.apply(t,a))||(e.exports=i)},78584:function(e,t,n){var a,i;a=[n(54922),n(54085),n(55420),n(74729)],void 0===(i=function(e,t,n){return e.components.register("domain-multiselect-widget",{viewModel:function(e){e.configKeys=["placeholder","defaultValue"],t.apply(this,[e]),this.multiple=!0},template:n})}.apply(t,a))||(e.exports=i)},53775:function(e,t,n){var a,i;a=[n(54922),n(54085),n(92890)],void 0===(i=function(e,t,n){return e.components.register("domain-radio-widget",{viewModel:function(e){e.configKeys=["defaultValue"],t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},20098:function(e,t,n){var a,i;a=[n(54922),n(54085),n(55420),n(74729)],void 0===(i=function(e,t,n){return e.components.register("domain-select-widget",{viewModel:function(e){e.configKeys=["placeholder","defaultValue"],t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},43488:function(e,t,n){var a,i;a=[n(54922),n(84490),n(46186),n(22023),n(37438)],void 0===(i=function(e,t,n,a,i){return e.components.register("edtf-widget",{viewModel:function(t){var i=this;t.configKeys=["placeholder","defaultValue"],this.showEDTFFormats=e.observable(!1),this.transformedEdtf=e.observable(),this.getEdtf=function(e){window.fetch(n.urls.transform_edtf_for_tile+"?value="+e).then((function(e){if(e.ok)return e.json();i.transformedEdtf(null)})).then((function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t[1]?i.transformedEdtf(e.data[0]):i.transformedEdtf(null)}))},this.getEdtf(e.unwrap(t.value)),"report"!==t.state&&t.value.subscribe((function(e){i.getEdtf(e)})),a.apply(this,[t])},template:i})}.apply(t,a))||(e.exports=i)},61130:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46562),n(59732),n(5165),n(29700),n(58943)],void 0===(i=function(e,t,n,a,i,s,l){return t.components.register("file-widget",{viewModel:function(e){e.configKeys=["acceptedFiles","maxFilesize"],s.apply(this,[e])},template:l})}.apply(t,a))||(e.exports=i)},16422:function(e,t,n){var a,i;a=[n(84490),n(35605),n(54922),n(58420),n(22023),n(22172),n(28459),n(9523),n(71576)],void 0===(i=function(e,t,n,a,i,s,l,d){return n.components.register("iiif-widget",{viewModel:function(d){var c=this;if(d.configKeys=["defaultManifest"],i.apply(this,[d]),d.widget&&(d.widgets=[d.widget]),d.manifest||(d.manifest=this.defaultManifest()),s.apply(this,[d]),"report"===d.state){this.canvasConfigs=[];var p={},f=a.toJS(d.value);f&&f.features&&f.features.forEach((function(e){p[e.properties.canvas]||(p[e.properties.canvas]=[]),p[e.properties.canvas].push(e)})),e.forEach(p,(function(e,n){c.canvasConfigs.push({center:[0,0],crs:t.CRS.Simple,zoom:0,afterRender:function(a){t.tileLayer.iiif(n+"/info.json").addTo(a);var i={type:"FeatureCollection",features:e},s=l(i);a.addLayer(t.geoJson(i,{pointToLayer:function(e,n){return t.circleMarker(n,e.properties)},style:function(e){return e.properties}})),t.control.fullscreen().addTo(a),setTimeout((function(){a.fitBounds([[s[1]-1,s[0]-1],[s[3]+1,s[2]+1]])}),250)}})}))}this.manifest.subscribe((function(e){e!==c.defaultManifest()&&c.defaultManifest(e)})),this.defaultManifest.subscribe((function(e){e!==c.manifest()&&c.manifest(e)})),this.displayValue=n.computed((function(){var e=a.toJS(this.value);return e&&e.features?e.features.length:0}),this)},template:d})}.apply(t,a))||(e.exports=i)},7156:function(e,t,n){var a,i;a=[n(84490),n(54922),n(58420),n(46186),n(22023),n(2370),n(93360),n(84714),n(64328),n(16950),n(96574),n(85935),n(77823),n(32222)],void 0===(i=function(e,t,n,a,i,s,l){var viewModel=function(e){this.context=e.type,this.summaryDetails=[],this.defaultValueOptions=[{name:"",defaultOptionid:0,value:""},{name:"Drawn Location",defaultOptionid:1,value:"Drawn Location"},{name:"Current Device Location",defaultOptionid:2,value:"Current Device Location"}],e.configKeys=["basemap","overlayConfigs","zoom","centerX","centerY","geometryTypes","defaultValueType","defaultValue"],i.apply(this,[e]),this.geometryTypeList=t.computed({read:function(){return(this.geometryTypes()||[]).map((function(e){return t.unwrap(e.id)}))},write:function(e){this.geometryTypes(e.map((function(e){return{id:e,text:e}})))},owner:this}),this.displayValue=t.computed((function(){var e=n.toJS(this.value);return e&&e.features?e.features.length:0}),this),e.widget&&(e.widgets=[e.widget]),null!==t.unwrap(this.value)&&(this.summaryDetails=n.toJS(this.value).features||[]),0==this.centerX()&&0==this.centerY()&&0==this.zoom()&&(this.centerX(a.mapDefaultX),this.centerY(a.mapDefaultY),this.zoom(a.mapDefaultZoom)),e.basemap=this.basemap,e.overlayConfigs=this.overlayConfigs,e.zoom=this.zoom,e.x=this.centerX,e.y=this.centerY,e.usePosition=!0,e.inWidget=!0,s.apply(this,[e])};return t.components.register("map-widget",{viewModel:viewModel,template:l}),viewModel}.apply(t,a))||(e.exports=i)},85652:function(e,t,n){var a,i;a=[n(54922),n(90905),n(46186),n(84490)],void 0===(i=function(e,t,n,a){return function(i){var s=n.hexBinSize,l=t.hexGrid(n.hexBinBounds,s,"kilometers");return a.each(l.features,(function(e,t){e.properties.id=t})),e.observable(l)}}.apply(t,a))||(e.exports=i)},19356:function(e,t,n){var a;void 0===(a=function(){return{getDrawStyles:function(e){return[{id:"gl-draw-point",type:"circle",filter:["all",["!in","$type","LineString","Polygon"],["!=","mode","static"],["!=","active","true"]],paint:{"circle-radius":e.pointsize(),"circle-color":e.color()}},{id:"gl-draw-point-active-halo",type:"circle",filter:["all",["!=","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["==","active","true"]],paint:{"circle-radius":1.25*e.pointsize(),"circle-color":"#FFF"}},{id:"gl-draw-point-active",type:"circle",layout:{},filter:["all",["!in","$type","LineString","Polygon"],["!=","mode","static"],["==","active","true"]],paint:{"circle-radius":e.pointsize(),"circle-color":e.color()}},{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":e.color(),"line-width":e.linewidth()}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":e.color(),"fill-outline-color":e.color(),"fill-opacity":.1}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":e.color(),"line-width":e.linewidth()}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":1.25*e.pointsize(),"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e.pointsize(),"circle-color":e.color()}},{id:"gl-draw-polygon-and-line-midpoint-halo-active",type:"circle",filter:["all",["==","meta","midpoint"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":1.25*e.pointsize(),"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-midpoint-active",type:"circle",filter:["all",["==","meta","midpoint"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e.pointsize(),"circle-color":e.color()}}]},getSearchQueryStyles:function(){return[{id:"search-poly",type:"fill",source:"search-query",layout:{visibility:"visible"},filter:["all",["==","$type","Polygon"]],paint:{"fill-color":"#0000FF","fill-opacity":.4}},{id:"search-line",type:"line",source:"search-query",layout:{visibility:"visible"},filter:["all",["==","$type","LineString"]],paint:{"line-color":"#0000FF","line-width":2}},{id:"search-point",type:"circle",source:"search-query",layout:{visibility:"visible"},filter:["==","$type","Point"],paint:{"circle-radius":5,"circle-color":"#0000FF"}},{id:"buffer-layer",type:"fill",source:"search-query",filter:["all",["==","$type","Polygon"],["==","id","buffer-layer"]],paint:{"fill-color":"#0000FF","fill-outline-color":"#0000FF","fill-opacity":.1}}]}}}.call(t,n,t,e))||(e.exports=a)},90076:function(e,t,n){var a,i;a=[n(54922),n(26586),n(48852),n(87720)],void 0===(i=function(e,t,n){return e.components.register("node-value-select",{viewModel:t,template:n})}.apply(t,a))||(e.exports=i)},78538:function(e,t,n){var a,i;a=[n(54922),n(84490),n(22023),n(29783),n(19475)],void 0===(i=function(e,t,n,a){return e.components.register("number-widget",{viewModel:function(t){t.configKeys=["placeholder","width","min","max","step","precision","prefix","suffix","defaultValue","format","uneditable"],n.apply(this,[t]);var a=this;if(this.disable=e.computed((function(){return e.unwrap(a.disabled)||e.unwrap(a.uneditable)}),a),this.updateVal=e.computed((function(){if(null!==a.value()&&void 0!==a.value()){var e=a.value();"number"==typeof a.min()&&(e=Number(e)<Number(a.min())?Number(a.min()):Number(e)),"number"==typeof a.max()&&(e=Number(e)>Number(a.max())?Number(a.max()):Number(e)),a.precision()&&(e=Number(e).toFixed(a.precision()))}return e||a.value()}),a).extend({throttle:600}),this.value(Number(this.updateVal())),this.displayValue=e.pureComputed((function(){if(null!==a.value()&&void 0!==a.value())return a.value().toString()}),a),e.isObservable(this.precision)){var i=this.precision.subscribe((function(e){a.value()&&e&&a.value(Number(a.value()).toFixed(e))}),a);a.disposables.push(i)}a.disposables.push(this.updateVal)},template:a})}.apply(t,a))||(e.exports=i)},1224:function(e,t,n){var a,i;a=[n(54922),n(84490),n(22023),n(70654)],void 0===(i=function(e,t,n,a){return e.components.register("radio-boolean-widget",{viewModel:function(t){t.configKeys=["trueLabel","falseLabel","defaultValue"],n.apply(this,[t]);var a=this;this.setValue=function(t){!1===e.unwrap(a.disabled)&&(t===a.value()?a.value(null):a.value(t))},this.displayValue=e.computed((function(){return!0===this.value()?this.node.config.trueLabel:!1===this.value()?this.node.config.falseLabel:void 0}),a),this.setDefaultValue=function(e){e===a.defaultValue()?a.defaultValue(null):a.defaultValue(e)};var i=e.unwrap(this.defaultValue);null===a.value()&&null!==a.defaultValue()&&a.value(a.defaultValue()),this.tile&&""==e.unwrap(this.tile.tileid)&&null!=i&&""!=i&&this.value(i)},template:a})}.apply(t,a))||(e.exports=i)},57424:function(e,t,n){var a,i;a=[n(54922),n(47960),n(74013),n(87720)],void 0===(i=function(e,t,n){return e.components.register("resource-instance-multiselect-widget",{viewModel:function(e){e.multiple=!0,e.datatype="resource-instance-list",t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},19272:function(e,t,n){var a,i;a=[n(54922),n(74013),n(87720)],void 0===(i=function(e,t){return e.components.register("resource-instance-select-widget",{viewModel:function(e){var t=n(47960);e.multiple=!1,e.datatype="resource-instance",t.apply(this,[e])},template:t})}.apply(t,a))||(e.exports=i)},13487:function(e,t,n){var a,i;a=[n(20198),n(54922),n(58420),n(84490),n(22023),n(46186),n(34735),n(67166),n(84714)],void 0===(i=function(e,t,n,a,i,s,l){return t.components.register("rich-text-widget",{viewModel:function(a){var l,d,c;a.configKeys=["placeholder","displayfullvalue"];var p=this;p.card=a.card,i.apply(p,[a]);var f={};p.showi18nOptions=t.observable(!1),f[s.activeLanguage]={value:"",direction:"ltr"};var v={code:s.activeLanguage},h=n.toJS(p.value)||f;p.currentLanguage=t.observable(v),p.form&&p.form.on("tile-reset",(function(e){var t,a;h=n.toJS(p.value),p.currentText(null===(t=h[p.currentLanguage().code])||void 0===t?void 0:t.value),p.currentDirection(null===(a=h[p.currentLanguage().code])||void 0===a?void 0:a.direction)}));var b,m,g,x,y=s.languages;(p.languages=t.observableArray(y),p.currentLanguage(y.find((function(e){return e.code==s.activeLanguage}))),null!==(l=h)&&void 0!==l&&l[v.code])?(p.currentText=t.observable(null===(b=h)||void 0===b||null===(m=b[v.code])||void 0===m?void 0:m.value),p.currentDirection=t.observable(t.unwrap(null===(g=h)||void 0===g||null===(x=g[v.code])||void 0===x?void 0:x.direction))):(p.currentText=t.observable(""),p.currentDirection=t.observable("ltr"),h[v.code]={value:"",direction:"ltr"});p.strippedValue=t.pureComputed((function(){return e("<span>".concat(p.currentText(),"</span>")).text()})),p.strippedValue(),p.defaultText=t.observable(),p.defaultText.subscribe((function(e){var t=p.config();t.placeholder=e,p.config(t)}));var w=(null===(d=p.value)||void 0===d||null===(c=d[s.activeLanguage])||void 0===c?void 0:c.value)||p.value;null==w||w.subscribe((function(e){var n,a=p.currentLanguage();a&&(JSON.stringify(h)!=JSON.stringify(t.toJS(t.unwrap(p.value)))&&p.currentText((null==e||null===(n=e[a.code])||void 0===n?void 0:n.value)||e))})),p.currentText.subscribe((function(e){var n,a=p.currentLanguage();a&&(h[a.code].value=null!=e&&e[a.code]?null===(n=e[a.code])||void 0===n?void 0:n.value:e,t.isObservable(p.value)?p.value(h):p.value[a.code].value(e))})),p.currentDirection.subscribe((function(e){var n=p.currentLanguage();n&&(h[n.code].direction=e,t.isObservable(p.value)?p.value(h):p.value[n.code].direction(e))})),p.currentLanguage.subscribe((function(){var e,t;if(p.currentLanguage()){var a=p.currentLanguage();p.currentText(null===(e=n.toJS(p.value)[a.code])||void 0===e?void 0:e.value),p.currentDirection(null===(t=n.toJS(p.value)[a.code])||void 0===t?void 0:t.direction)}})),this.displayfullvalue(a.displayfullvalue)},template:l})}.apply(t,a))||(e.exports=i)},42962:function(e,t,n){var a,i;a=[n(46186),n(54922),n(84490),n(22023),n(10675)],void 0===(i=function(e,t,n,a,i){return t.components.register("switch-widget",{viewModel:function(n){var i=this;n.configKeys=["subtitle","defaultValue"],a.apply(this,[n]);var s=this.config();this.on=this.config().on||!0,this.activeLanguage=e.activeLanguage,this.off=this.config().off||!1,this.null=this.config().null||null,this.localizedSubtitle=t.observable(this.subtitle()[this.activeLanguage]),this.localizedSubtitle.subscribe((function(e){var t=i.subtitle();""!=e?(t[i.activeLanguage]=e,i.subtitle(t)):(delete t[i.activeLanguage],i.config(s)),n.card.get("widgets").valueHasMutated()})),this.setvalue=this.config().setvalue||function(e,n){!1===t.unwrap(e.disabled)&&(e.value()===e.on?e.value(e.null):e.value()===e.null?e.value(e.off):e.value()===e.off&&e.value(e.on))},this.getvalue=this.config().getvalue||t.computed((function(){var e=null;return this.value()===this.on?e=!0:!1===this.value()&&(e=!1),e}),this),this.setdefault=this.config().setdefault||function(e){e.defaultValue()===e.on?e.defaultValue(e.null):e.defaultValue()===e.null?e.defaultValue(e.off):e.defaultValue()===e.off&&e.defaultValue(e.on)},this.getdefault=this.config().getdefault||t.computed((function(){var e=null;return this.defaultValue()===this.on?e=!0:!1===this.defaultValue()&&(e=!1),e}),this);var l=t.unwrap(this.defaultValue);null===this.value()&&null!==this.defaultValue()&&this.value(this.defaultValue()),this.tile&&""==this.tile.tileid&&null!=l&&""!=l&&this.value(l),this.disposables.push(this.getvalue),this.disposables.push(this.setdefault),this.disposables.push(this.getdefault)},template:i})}.apply(t,a))||(e.exports=i)},13087:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(54922),n(58420),n(84490),n(22023),n(46186),n(69238),n(84714)],i=function(e,t,n,a,i,s){return e.components.register("text-widget",{viewModel:function(n){var s,l;n.configKeys=["placeholder","width","maxLength","defaultValue","uneditable"],a.apply(this,[n]);var d=this;d.card=n.card,d.currentLanguage=e.observable({code:i.activeLanguage}),d.languages=e.observableArray(),d.currentText=e.observable(),d.currentDirection=e.observable(),d.showi18nOptions=e.observable(!1),d.currentDefaultText=e.observable(),d.currentDefaultDirection=e.observable(),d.currentDefaultLanguage=e.observable({code:i.activeLanguage});var c={},p={};p[i.activeLanguage]={value:"",direction:"ltr"},c[i.activeLanguage]={value:"",direction:"ltr"};var f=e.unwrap(d.defaultValue)||p,v=t.toJS(d.value)||c;d.form&&d.form.on("tile-reset",(function(e){var n,a;v=t.toJS(d.value),d.currentText(null===(n=v[d.currentLanguage().code])||void 0===n?void 0:n.value),d.currentDirection(null===(a=v[d.currentLanguage().code])||void 0===a?void 0:a.direction)}));var h=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(){var e,t,n,a,s,l,c,p,h;return _regeneratorRuntime().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:t=i.languages,n=null==t?void 0:t.find((function(e){return e.code==i.activeLanguage})),d.languages(t),d.currentLanguage(n),d.currentDefaultLanguage(n),null!=n&&n.code&&null!==(e=v)&&void 0!==e&&e[n.code]?(d.currentText(null===(a=v)||void 0===a||null===(s=a[n.code])||void 0===s?void 0:s.value),d.currentDirection(null===(l=v)||void 0===l||null===(c=l[n.code])||void 0===c?void 0:c.direction)):null!=n&&n.code?v&&(d.currentText(""),d.currentDirection("ltr"),v[n.code]={value:"",direction:"ltr"}):(d.currentText(""),d.currentDirection("ltr")),null!=n&&n.code&&null!=f&&f[n.code]?(d.currentDefaultText(null==f||null===(p=f[n.code])||void 0===p?void 0:p.value),d.currentDefaultDirection(null==f||null===(h=f[n.code])||void 0===h?void 0:h.direction)):null!=n&&n.code?f&&(d.currentDefaultText(""),d.currentDefaultDirection("ltr"),f[n.code]={value:"",direction:"ltr"}):(d.currentDefaultText(""),d.currentDefaultDirection("ltr"));case 7:case"end":return b.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(){return t.apply(this,arguments)}}();h(),d.disable=e.computed((function(){return e.unwrap(d.disabled)||e.unwrap(d.uneditable)}),d),d.currentDefaultText.subscribe((function(e){var t=d.currentDefaultLanguage();t&&(f[t.code].value=e,d.defaultValue(f),d.card._card.valueHasMutated())})),d.currentDefaultDirection.subscribe((function(e){var t=d.currentDefaultLanguage();t&&(null!=f&&f[t.code]||(f[t.code]={}),f[t.code].direction=e,d.defaultValue(f),d.card._card.valueHasMutated())})),d.currentDefaultLanguage.subscribe((function(e){var t,n,a,i;if(d.currentDefaultLanguage()){var s=d.currentDefaultLanguage();null!=f&&f[s.code]||(f[s.code]={value:"",direction:null==s?void 0:s.default_direction},d.defaultValue(f),d.card._card.valueHasMutated()),d.currentDefaultText(null===(t=d.defaultValue())||void 0===t||null===(n=t[s.code])||void 0===n?void 0:n.value),d.currentDefaultDirection(null===(a=d.defaultValue())||void 0===a||null===(i=a[s.code])||void 0===i?void 0:i.direction)}}));var b=(null===(s=d.value)||void 0===s||null===(l=s[i.activeLanguage])||void 0===l?void 0:l.value)||d.value;null==b||b.subscribe((function(t){var n,a=d.currentLanguage();a&&(JSON.stringify(v)!=JSON.stringify(e.toJS(e.unwrap(d.value)))&&d.currentText((null==t||null===(n=t[a.code])||void 0===n?void 0:n.value)||t))})),d.currentText.subscribe((function(t){var n,a=d.currentLanguage();a&&(v[a.code].value=null!=t&&t[a.code]?null===(n=t[a.code])||void 0===n?void 0:n.value:t,e.isObservable(d.value)?d.value(v):d.value[a.code].value(t))})),d.currentDirection.subscribe((function(t){var n,a=d.currentLanguage();a&&(null!==(n=v)&&void 0!==n&&n[a.code]||(v[a.code]={}),v[a.code].direction=t,e.isObservable(d.value)?d.value(v):d.value[a.code].direction(t))})),d.currentLanguage.subscribe((function(){var e,n;if(d.currentLanguage()){var a=d.currentLanguage();d.currentText(null===(e=t.toJS(d.value)[a.code])||void 0===e?void 0:e.value),d.currentDirection(null===(n=t.toJS(d.value)[a.code])||void 0===n?void 0:n.direction)}}))},template:s})}.apply(t,a),void 0===i||(e.exports=i)},5282:function(e,t,n){var a,i;a=[n(54922),n(22023),n(71578)],void 0===(i=function(e,t,n){var a="urldatatype";return e.components.register(a,{viewModel:function(n){n.configKeys=["url_placeholder","url_label_placeholder","link_color"],n.valueProperties=["url","url_label"],t.apply(this,[n]),this.urlPreviewText=e.pureComputed((function(){if(this.url()){if(this.url_label&&this.url_label())return this.url_label();if(this.url&&this.url())return this.url()}}),this)},template:n}),a}.apply(t,a))||(e.exports=i)},41762:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(73070),n(44050)],void 0===(i=function(e,t,n,a){var viewModel=function(e){var t=this;this.activeTab=n.observable(e.activeTab),this.showTabs=n.observable(!0),this.hideSidePanel=function(){t.activeTab(void 0)},this.card&&this.card.allowProvisionalEditRerender(!1),this.expandSidePanel=n.computed((function(){return!!t.tile&&(t.tile.hasprovisionaledits()&&!0===t.reviewer)})),this.workbenchWrapperClass=n.observable(),this.toggleTab=function(e){t.activeTab()===e?t.activeTab(null):t.activeTab(e)}};return n.components.register("workbench",{viewModel:viewModel,template:a}),viewModel}.apply(t,a))||(e.exports=i)},39397:function(e,t,n){var a,i;a=[n(54922),n(46186),n(11656)],void 0===(i=function(e,t,n){function viewModel(n){this.urls=t.urls,this.loading=e.observable(!0),this.resourceid=n.resourceid,this.workflowUrl="".concat(this.urls.root,"plugins/").concat(n.pageVm.plugin.slug),this.resourceEditUrl="".concat(this.urls.resource,"/").concat(this.resourceid);try{this.resourceid=e.unwrap(n.workflow.resourceId)}catch(t){try{this.resourceid=e.unwrap(n.form.resourceId)}catch(e){}}}return e.components.register("final-step",{viewModel:viewModel,template:n}),viewModel}.apply(t,a))||(e.exports=i)},23977:function(e,t,n){var a,i;a=[n(54922),n(15276),n(62666),n(69811)],void 0===(i=function(e,t,n,a){function NewMultiTileStepViewModel(a){t.apply(this,[a]);var i=this;this.itemName=e.observable(),null!=a.title()?this.itemName(a.title()):this.itemName("Items"),this.remove=function(e){e.deleteTile((function(e){i.alert(new n("ep-alert-red",e.responseJSON.title,e.responseJSON.message,null,(function(){})))}))},this.edit=function(e){i.tile(e)},i.onSaveSuccess=function(e){a.resourceid(e.resourceinstance_id),a.tileid(e.tileid),i.resourceId(e.resourceinstance_id),i.tile(i.card().getNewTile()),i.tile().reset(),setTimeout((function(){i.tile().reset()}),1)};var s=i.tile.subscribe((function(){s.dispose(),i.tile(i.card().getNewTile())}))}return e.components.register("new-multi-tile-step",{viewModel:NewMultiTileStepViewModel,template:a}),NewMultiTileStepViewModel}.apply(t,a))||(e.exports=i)},15276:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(84490),n(20198),n(54922),n(58420),n(46186),n(12340),n(56321),n(85725),n(62666),n(45736)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p){function viewModel(c){var p=this;this.resourceId=n.observable(n.unwrap(c.resourceid)),this.resourceId.subscribe((function(e){c.resourceid(e)}));var f=n.unwrap(c.value);f&&(f.tileid&&c.tileid(f.tileid),f.resourceid&&p.resourceId(f.resourceid)),!p.resourceId()&&c.workflow&&n.unwrap(c.workflow.resourceId)&&p.resourceId(n.unwrap(c.workflow.resourceId)),this.getCardResourceIdOrGraphId=function(){return n.unwrap(this.resourceId)||n.unwrap(c.graphid)},this.card=n.observable(),this.tile=n.observable(),c.hasDirtyTile(!1),this.tile.subscribe((function(e){e&&c.hasDirtyTile&&e.dirty.subscribe((function(e){p.card()&&p.card().isDirty()||e?c.hasDirtyTile(!0):c.hasDirtyTile(!1)}))})),this.loading=c.loading||n.observable(!1),this.alert=c.alert||n.observable(null),this.complete=c.complete||n.observable(),this.complete.subscribe((function(e){e&&c.value&&c.value(c.defineStateProperties())})),this.completeOnSave=!1!==c.completeOnSave,this.loading(!0),this.customCardLabel=c.customCardLabel||!1;var v=function flattenTree(t,a){return e.each(n.unwrap(t),(function(e){a.push(e);var t=e.tiles?"tiles":"cards";flattenTree(n.unwrap(e[t]),a)})),a};p.topCards=[],this.getJSON=function(){var a=i.urls.api_card+this.getCardResourceIdOrGraphId();t.getJSON(a,(function(t){var a={"after-update":[],"tile-reset":[]},i=n.observable(t.displayname),createLookup=function(t,n){return e.reduce(t,(function(e,t){return e[t[n]]=t,e}),{})};p.reviewer=t.userisreviewer,p.provisionalTileViewModel=new d({tile:p.tile,reviewer:t.userisreviewer});var f=new s({data:{nodes:t.nodes,nodegroups:t.nodegroups,edges:[]},datatypes:t.datatypes});p.topCards=e.filter(t.cards,(function(n){var a=e.find(t.nodegroups,(function(e){return e.nodegroupid===n.nodegroup_id}));return!a||!a.parentnodegroup_id})).map((function(e){return c.nodegroupid=c.nodegroupid||e.nodegroup_id,new l({card:e,graphModel:f,tile:null,resourceId:p.resourceId,displayname:i,handlers:a,cards:t.cards,tiles:t.tiles,provisionalTileViewModel:p.provisionalTileViewModel,cardwidgets:t.cardwidgets,userisreviewer:t.userisreviewer,loading:p.loading})})),p.card.subscribe((function(e){e&&(e.context="workflow",c.preSaveCallback&&(e.preSaveCallback=c.preSaveCallback),c.postSaveCallback&&(e.postSaveCallback=c.postSaveCallback)),n.unwrap(e.widgets)&&c.hiddenNodes&&e.widgets().forEach((function(e){c.hiddenNodes.indexOf(e.node_id())>-1&&e.visible(!1)}))})),p.topCards.forEach((function(e){e.topCards=p.topCards})),p.widgetLookup=createLookup(t.widgets,"widgetid"),p.cardComponentLookup=createLookup(t.card_components,"componentid"),p.nodeLookup=createLookup(f.get("nodes")(),"nodeid"),p.on=function(e,t){a[e]&&a[e].push(t)},v(p.topCards,[]).forEach((function(e){if("CardViewModel"===e.constructor.name&&e.nodegroupid===n.unwrap(c.nodegroupid)){if(n.unwrap(c.parenttileid)&&e.parent&&n.unwrap(c.parenttileid)!==e.parent.tileid)return;p.customCardLabel&&e.model.name(n.unwrap(p.customCardLabel)),p.card(e),n.unwrap(c.tileid)?n.unwrap(e.tiles).forEach((function(e){e.tileid===n.unwrap(c.tileid)&&p.tile(e)})):!1!==n.unwrap(c.createTile)&&p.tile(e.getNewTile())}})),p.loading(!1)}))},p.getTiles=function(e,t){var a=[];return v(p.topCards,[]).forEach((function(t){"CardViewModel"===t.constructor.name&&t.nodegroupid===e&&(a=a.concat(n.unwrap(t.tiles)))})),t&&(a=a.filter((function(e){return e.tileid===t}))),a},c.tile=p.tile,!1!==n.unwrap(c.getJSONOnLoad)&&this.getJSON(),c.defineStateProperties=function(){var e=n.unwrap(c.wastebin)?a.toJS(c.wastebin):void 0,t=n.unwrap(c.resourceid);return t&&(e&&"resources"in e&&e.resources.push(t),e&&"resourceid"in e&&(e.resourceid=t)),e&&"tile"in e&&n.unwrap(c.tile)&&(e.tile=a.toJS(c.tile().data),e.tile.tileid=n.unwrap(c.tile).tileid,e.tile.resourceinstance_id=n.unwrap(c.tile).resourceinstance_id),n.mapping.fromJS(e,{},c.wastebin),{resourceid:t,tile:n.unwrap(c.tile)?a.toJS(c.tile().data):void 0,tileid:n.unwrap(c.tile)?n.unwrap(c.tile().tileid):void 0,wastebin:e}},c.defineStateProperties(),p.onSaveSuccess=function(e){var t;(e.length>0||"object"==_typeof(e))&&(t=e[0]||e,c.tileid(t.tileid),p.resourceId(t.resourceinstance_id)),c.value&&c.value(c.defineStateProperties()),!0===p.completeOnSave&&p.complete(!0)}}return n.components.register("new-tile-step",{viewModel:viewModel,template:p}),viewModel}.apply(t,a))||(e.exports=i)},4261:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(20198),n(54922),n(58420),n(46186),n(12340),n(56321),n(85725),n(62666),n(59732),n(22735)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p,f){var v="workflow-component-abstracts";function NonTileBasedComponent(){var e=this;this.initialize=function(){e.loading(!1)},this.save=function(){e.complete(!1),e.saving(!0),e.savedData(e.value()),e.complete(!0),e.saving(!1)},this.reset=function(){e.value(e.savedData()?e.savedData():null)},this.initialize()}function TileBasedComponent(){var c=this;this.tile=n.observable(),this.tiles=n.observable(),this.card=n.observable(),this.topCards=n.observable(),this.loadData=function(e){var t,i=(t=Array.isArray(e)?e:[e]).reduce((function(e,t){var n=t.data||JSON.parse(t.tileData);return Object.keys(n).forEach((function(t){e[t]=n[t]})),e}),{});c.tiles().forEach((function(e){Object.keys(e.data).forEach((function(t){n.isObservable(e.data[t])&&e.data[t](i[t])})),e._tileData(a.toJSON(e.data)),t.forEach((function(t){t.tileData&&JSON.stringify(Object.keys(a.toJS(e.data)).sort())===JSON.stringify(Object.keys(JSON.parse(t.tileData)).sort())&&(e.nodegroup_id=t.nodegroupId,e.tileid=t.tileId,e.resourceinstance_id=t.resourceInstanceId)}))}))},this.initialize=function(){"one"===c.componentData.tilesManaged&&(c.tile.subscribe((function(e){c.tiles()||c.tiles([e])})),c.tiles.subscribe((function(e){e&&!c.saving()&&(c.savedData()?c.loadData(c.savedData()):c.previouslyPersistedComponentData&&c.loadData(c.previouslyPersistedComponentData))}))),t.getJSON(i.urls.api_card+this.getCardResourceIdOrGraphId(),(function(t){var a={"after-update":[],"tile-reset":[]},i=n.observable(t.displayname),createLookup=function(t,n){return e.reduce(t,(function(e,t){return e[t[n]]=t,e}),{})};c.reviewer=t.userisreviewer,c.provisionalTileViewModel=new d({tile:c.tile,reviewer:t.userisreviewer});var p=new s({data:{nodes:t.nodes,nodegroups:t.nodegroups,edges:[]},datatypes:t.datatypes});c.graphModel=p,c.topCards=e.filter(t.cards,(function(n){var a=e.find(t.nodegroups,(function(e){return e.nodegroupid===n.nodegroup_id}));return!a||!a.parentnodegroup_id})).map((function(e){return c.componentData.parameters.nodegroupid=c.componentData.parameters.nodegroupid||e.nodegroup_id,new l({card:e,graphModel:p,tile:null,resourceId:c.resourceId,displayname:i,handlers:a,cards:t.cards,tiles:t.tiles,provisionalTileViewModel:c.provisionalTileViewModel,cardwidgets:t.cardwidgets,userisreviewer:t.userisreviewer,loading:c.loading})})),c.card.subscribe((function(e){n.unwrap(e.widgets)&&c.componentData.parameters.hiddenNodes&&e.widgets().forEach((function(e){c.componentData.parameters.hiddenNodes.indexOf(e.node_id())>-1&&e.visible(!1)}))})),c.topCards.forEach((function(e){e.topCards=c.topCards})),c.widgetLookup=createLookup(t.widgets,"widgetid"),c.cardComponentLookup=createLookup(t.card_components,"componentid"),c.nodeLookup=createLookup(p.get("nodes")(),"nodeid"),c.on=function(e,t){a[e]&&a[e].push(t)},c.flattenTree(c.topCards,[]).forEach((function(e){if("CardViewModel"===e.constructor.name&&e.nodegroupid===n.unwrap(c.componentData.parameters.nodegroupid)){if(n.unwrap(c.componentData.parameters.parenttileid)&&e.parent&&n.unwrap(c.componentData.parameters.parenttileid)!==e.parent.tileid)return;c.customCardLabel&&e.model.name(n.unwrap(c.customCardLabel)),c.card(e),n.unwrap(c.componentData.parameters.tileid)?n.unwrap(e.tiles).forEach((function(e){e.tileid===n.unwrap(c.componentData.parameters.tileid)&&c.tile(e)})):!1!==n.unwrap(c.componentData.parameters.createTile)&&c.tile(e.getNewTile())}})),c.componentData.parameters.card=c.card(),c.componentData.parameters.tile=c.tile(),c.componentData.parameters.loading=c.loading,c.componentData.parameters.provisionalTileViewModel=c.provisionalTileViewModel,c.componentData.parameters.reviewer=t.userisreviewer,c.componentData.parameters.dirty=c.dirty,c.componentData.parameters.save=c.save,c.componentData.parameters.tiles=c.tiles,c.loading(!1)}))},this.onSaveSuccess=function(e){e instanceof Array||(e=[e]),c.savedData(e.map((function(e){return{tileData:e._tileData(),tileId:e.tileid,nodegroupId:e.nodegroup_id,resourceInstanceId:e.resourceinstance_id}}))),c.saving(!1),c.complete(!0)},this.reset=function(){c.tiles().forEach((function(e){e.reset()}))},this.flattenTree=function(t,a){return e.each(n.unwrap(t),(function(e){a.push(e);var t=e.tiles?"tiles":"cards";c.flattenTree(n.unwrap(e[t]),a)})),a},this.getTiles=function(e,t){var a=[];return this.flattenTree(c.topCards,[]).forEach((function(t){"CardViewModel"===t.constructor.name&&t.nodegroupid===e&&(a=a.concat(n.unwrap(t.tiles)))})),t&&(a=a.filter((function(e){return e.tileid===t}))),a},this.initialize()}function AbstractCardAdapter(){var e=this;this.cardinality=n.observable(),this.initialize=function(){e.loading(!0),t.getJSON(i.urls.api_nodegroup(e.componentData.parameters.nodegroupid),(function(n){e.cardinality(n.cardinality);var a=e.componentData.parameters.resourceid||e.componentData.parameters.graphid;t.getJSON(i.urls.resource+"/".concat(a,"/tiles?nodeid=").concat(e.componentData.parameters.nodegroupid),(function(t){"1"===e.cardinality()?(t.tiles.length&&(e.componentData.parameters.tileid=t.tiles[0].tileid,e.complete(!0)),TileBasedComponent.apply(e)):"n"===e.cardinality()&&(MultipleTileBasedComponent.apply(e),t.tiles.length&&e.complete(!0),e.card.subscribe((function(e){e.selected()||e.selected(e.tiles().length)})),e.onSaveSuccess=function(t){t instanceof Array||(t=[t]),e.card().getNewTile(),e.savedData(t.map((function(e){return{tileData:e._tileData(),tileId:e.tileid,nodegroupId:e.nodegroup_id,resourceInstanceId:e.resourceinstance_id}}))),e.componentData.parameters.dirty(!1),e.card().selected(!0),e.dirty(!1),e.saving(!1),e.complete(!0)})}))}))},this.initialize()}function MultipleTileBasedComponent(t){var i=this;TileBasedComponent.apply(this),this.tileLoadedInEditor=n.observable(),this.itemName=n.observable(n.unwrap(t)?n.unwrap(t):"Items"),this.hasDirtyTiles=n.computed((function(){var t=i.tiles(),n=!1;return t?i.savedData()?(i.savedData().length!==t.length&&(n=!0),i.savedData().forEach((function(i){var s=t.find((function(e){return e.tileid===i.tileid}));s&&e.isEqual(i.data,a.toJS(s.data))||(n=!0)}))):!i.previouslyPersistedComponentData&&t.length?n=!0:i.previouslyPersistedComponentData&&(i.previouslyPersistedComponentData.length!==t.length&&(n=!0),i.previouslyPersistedComponentData.forEach((function(i){var s=t.find((function(e){return e.tileid===i.tileid}));s&&e.isEqual(i.data,a.toJS(s.data))||(n=!0)}))):n=!0,i.multiTileUpdated(n),n})),this.initialize=function(){i.loading(!0);var e=i.saving.subscribe((function(t){t||(e.dispose(),i.initialize())})),t=i.tiles.subscribe((function(e){if(1===e.length&&!e[0].tileid){var n=[];if(i.savedData())i.savedData().forEach((function(e){var t=i.card().getNewTile(!0);t.tileid=e.tileid,t.data=a.fromJS(e.data),n.unshift(t)}));t.dispose(),i.tiles(n)}})),n=i.tiles.subscribe((function(e){if(i.previouslyPersistedComponentData&&(!e||!e.length)){var t=[];i.previouslyPersistedComponentData.forEach((function(e){var n=i.card().getNewTile(!0);n.tileid=e.tileid,n.data=a.fromJS(e.data),t.unshift(n)})),n.dispose(),i.tiles(t)}}))},this.addOrUpdateTile=function(){var t=i.tiles();i.tiles(null);var n=a.fromJSON(a.toJSON(i.tile().data)),s=i.tileLoadedInEditor();if(s){var l=e.findIndex(t,s);l>-1&&(s.data=n,t[l]=s),i.tileLoadedInEditor(null)}else{var d=i.card().getNewTile(!0);d.data=n,t.unshift(d)}i.tiles(t),i.tile().reset()},this.loadTileIntoEditor=function(e){i.tileLoadedInEditor(e);var t=i.tile();Object.keys(t.data).forEach((function(a){n.isObservable(t.data[a])&&t.data[a](e.data[a]())}))},this.tilesToRemove=n.observableArray(),this.removeTile=function(e){var t=i.tiles().filter((function(t){return t!==e}));e.tileid&&i.tilesToRemove.push(e),i.tiles(t)},this.saveMultiTiles=function(){i.complete(!1),i.saving(!0),i.previouslyPersistedComponentData=[];var e=n.observableArray();i.tiles().forEach((function(t){t.save((function(){}),(function(t){e.push(t)}))})),i.tilesToRemove().forEach((function(e){e.deleteTile((function(e){i.alert(new c("ep-alert-red",e.responseJSON.title,e.responseJSON.message,null,(function(){})))}),(function(){i.tilesToRemove.remove(e),0===i.tilesToRemove().length&&(i.complete(!0),i.loading(!0),i.saving(!1))}))}));var t=e.subscribe((function(e){if(e.length===i.tiles().length){i.complete(!0),i.loading(!0),i.saving(!1);var n=i.tiles().map((function(t){return e.find((function(e){return e.tileid===t.tileid}))}));i.savedData(n.reverse()),t.dispose()}}))},this.clearEditor=function(){i.tile().reset()},this.reset=function(){i.tileLoadedInEditor(null),i.tile().reset(),i.initialize(),i.loading(!1)},this.initialize()}return n.components.register("workflow-component-abstract",{template:f}),function(t){var i=this;this.workflowId=t.workflowId,this.componentData=t.componentData,this.alert=t.alert,this.locked=t.locked,this.lockExternalStep=t.lockExternalStep,this.lockableExternalSteps=t.lockableExternalSteps,this.id=n.observable(),this.resourceId=n.observable(),this.loading=n.observable(!1),this.saving=n.observable(!1),this.savedComponentPaths={},this.value=n.observable(),this.complete=n.observable(!1),this.error=n.observable(),this.dirty=n.observable(),this.AlertViewModel=c,this.saveOnQuit=n.observable(),this.isStepActive=t.isStepActive,this.isStepActive.subscribe((function(e){e&&i.loadComponent()})),this.savedData=n.observable(),this.savedData.subscribe((function(e){i.setToLocalStorage("value",e)})),this.multiTileUpdated=n.observable(),this.hasUnsavedData=n.computed((function(){var t=!1;return"many"===i.componentData.tilesManaged?i.multiTileUpdated()&&(t=!0):e.isEqual(i.savedData(),i.value())?i.dirty()&&(t=!0):t=!0,t})),this.initialize=function(){t.workflowComponentAbstractId?i.id(t.workflowComponentAbstractId):i.id(p.generate()),i.getFromLocalStorage("value")&&(i.savedData(i.getFromLocalStorage("value")),i.complete(!0))},this.loadComponent=function(){if(i.loading(!0),i.componentData.parameters&&Object.keys(i.componentData.parameters).forEach((function(e){var n=i.componentData.parameters[e];t.isValidComponentPath(n)?(i.componentData.parameters[e]=t.getDataFromComponentPath(n),i.savedComponentPaths[e]=n):i.savedComponentPaths[e]&&(i.componentData.parameters[e]=t.getDataFromComponentPath(i.savedComponentPaths[e]))})),i.savedData()&&(i.value(i.savedData()),i.complete(!0)),i.componentData&&i.componentData.parameters&&(i.resourceId(n.unwrap(i.componentData.parameters.resourceid)),i.componentData.parameters.renderContext="workflow"),"card"===i.componentData.componentType){var e,a=i.getFromLocalStorage("value");a&&(a instanceof Array||function(e){throw new TypeError('"'+e+'" is read-only')}("previouslySavedValue"),a[0].resourceInstanceId&&(e=a[0].resourceInstanceId,t.componentData.parameters.resourceid=e)),AbstractCardAdapter.apply(i)}else i.componentData.tilesManaged&&"none"!==i.componentData.tilesManaged?"one"===i.componentData.tilesManaged?TileBasedComponent.apply(i):"many"===i.componentData.tilesManaged&&MultipleTileBasedComponent.apply(i,[t.title]):NonTileBasedComponent.apply(i)},this.setToLocalStorage=function(e,t){var n=JSON.parse(localStorage.getItem(v))||{};n[i.id()]||(n[i.id()]={}),n[i.id()][e]=t?a.toJSON(t):t,localStorage.setItem(v,JSON.stringify(n))},this.getFromLocalStorage=function(e){var t=JSON.parse(localStorage.getItem(v))||{};if(t[i.id()]&&void 0!==t[i.id()][e])return JSON.parse(t[i.id()][e])},this.getCardResourceIdOrGraphId=function(){return n.unwrap(i.componentData.parameters.resourceid)||n.unwrap(i.componentData.parameters.graphid)},this.save=function(){},this._saveComponent=function(e,t){i.complete(!1);var n=i.complete.subscribe((function(t){t&&(e&&e(_defineProperty({},i.componentData.uniqueInstanceName,i.savedData())),n.dispose(),a.dispose())})),a=i.error.subscribe((function(e){e&&(t&&(t(e),i.error(null)),n.dispose(),a.dispose())}));"many"===i.componentData.tilesManaged?i.saveMultiTiles():i.save()},this._resetComponent=function(e){n.unwrap(i.tile)&&n.unwrap(i.tile).reset(),e(i.reset())},this.initialize()}}.apply(t,a))||(e.exports=i)},14884:function(e,t,n){Promise.all([n.e(3556),n.e(1259),n.e(2171),n.e(4077)]).then((function(){var e=[n(94333),n(54077)];(function(e){return new(e.extend({initialize:function(t){t.viewModel.resourceTableConfig={responsive:!0,paging:!0,scrollY:"50vh",scrollCollapse:!0,language:{paginate:{previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'}},order:[[3,"desc"]],columns:[null,null,null,{orderData:7},null,null,null,{visible:!1}]},e.prototype.initialize.call(this,t)}}))}).apply(null,e)})).catch(n.oe)},46248:function(e,t){var n;void 0===(n=function(){function forceDoubleQuotes(e){return e.replace(/'/g,'"')}var e=document.querySelector("#graphDesignerData").getAttribute("graphDesignerData"),t=JSON.parse(e.replace(/,\s*}*$/,"}"));return t.restrictedNodegroups=JSON.parse(forceDoubleQuotes(t.restrictedNodegroups)),t.ontology_namespaces=JSON.parse(forceDoubleQuotes(t.ontology_namespaces)),t}.apply(t,[]))||(e.exports=n)},34793:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(10762),n(35436),n(46248),n(94333),n(62666),n(20346),n(12340),n(70147),n(62246),n(79793),n(34337),n(85233),n(84600),n(63313),n(56321),n(89910),n(5523),n(94242),n(3460)],i=function(e,t,n,a,i,s,l,d,c,p,f,v,h,b,m,g,x,y,w,k){var S=c.extend({initialize:function(k){var S=k.viewModel;S.graphid=n.observable(d.graphid),S.activeTab=n.observable("graph"),S.viewState=n.observable("design"),S.helpTemplate(l.help),S.graphSettingsVisible=n.observable(!1),S.graph=a.fromJS(d.graph),S.ontologies=n.observable(d.ontologies),S.ontologyClasses=n.observable(d.ontologyClasses),S.cardComponents=d.cardComponents,S.appliedFunctions=n.observable(d.appliedFunctions),S.activeLanguageDir=n.observable(i.activeLanguageDir),S.isGraphPublished=n.observable(n.unwrap(d.graph.publication_id)),S.graphPublicationNotes=n.observable(),S.shouldShowGraphPublishButtons=n.pureComputed((function(){var e=!0;if(S.dirty())e=!1;else if(S.graphSettingsViewModel&&S.graphSettingsViewModel.dirty())e=!1;else if(S.selectedNode()&&S.selectedNode().dirty()&&0==S.selectedNode().istopnode)e=!1;else if(n.unwrap(S.cardTree.selection)){var t=n.unwrap(S.cardTree.selection);(t.model&&t.model.dirty()||t.card&&t.card.dirty())&&(e=!1)}return e})),S.primaryDescriptorFunction=n.observable(d.primaryDescriptorFunction);var _=n.utils.arrayFilter(l.graphs,(function(e){return e.isresource})),T=n.utils.arrayFilter(l.graphs,(function(e){return!e.isresource})),newGraph=function(t,n){n=n||{},S.loading(!0),e.ajax({type:"POST",url:t,data:JSON.stringify(n),success:function(e){window.open(i.urls.graph_designer(e.graphid),"_blank"),S.loading(!1)},error:function(){S.loading(!1)}})};S.newResource=function(){newGraph("/graph/new",{isresource:!0})},S.newBranch=function(){newGraph("/graph/new",{isresource:!1})},S.exportMappingFile=function(){window.open(i.urls.export_mapping_file(S.graph.graphid()),"_blank")},S.shouldShowPublishModal=n.observable(!1),S.displayUnpublishWarning=function(){S.alert(new p("ep-alert-red","Unpublish the graph?","This will make the graph inaccessible to other users.",(function(){}),S.unpublishGraph))},S.publishGraph=function(){S.loading(!0),e.ajax({type:"POST",data:JSON.stringify({notes:S.graphPublicationNotes()}),url:i.urls.publish_graph(S.graph.graphid()),complete:function(e,t){"success"===t?(S.isGraphPublished(!0),S.alert(new p("ep-alert-blue",e.responseJSON.title,e.responseJSON.message))):S.alert(new f("ep-alert-red",e.responseJSON)),S.graphPublicationNotes(null),S.shouldShowPublishModal(!1),S.loading(!1)}})},S.unpublishGraph=function(){S.loading(!0),e.ajax({type:"POST",url:i.urls.unpublish_graph(S.graph.graphid()),complete:function(e,t){"success"===t?S.isGraphPublished(!1):S.alert(new f("ep-alert-red",e.responseJSON)),S.shouldShowPublishModal(!1),S.loading(!1)}})},S.deleteGraph=function(){S.alert(new p("ep-alert-red",i.translations.confirmGraphDelete.title,i.translations.confirmGraphDelete.text,(function(){}),(function(){S.loading(!0),e.ajax({type:"DELETE",url:i.urls.delete_graph(S.graph.graphid()),complete:function(e,t){S.loading(!1),"success"===t?window.location=i.urls.graph:S.alert(new f("ep-alert-red",e.responseJSON))}})})))},S.cloneGraph=function(){newGraph(i.urls.clone_graph(S.graph.graphid()))},S.exportGraph=function(){window.open(i.urls.export_graph(S.graph.graphid()),"_blank")},S.importGraph=function(t,n){var a=new FormData;a.append("importedGraph",n.target.files[0]),e.ajax({type:"POST",url:"/graph/import/",processData:!1,data:a,cache:!1,contentType:!1,success:function(e){0!=e[0].length?(_typeof(e[0])&&(e=e[0].join("<br />")),S.alert(new p("ep-alert-red",i.translations.graphImportFailed.title,e))):(S.loading(!1),window.open(i.urls.graph_designer(e[1].graph_id),"_blank"))},error:function(e){S.alert(new p("ep-alert-red",i.translations.graphImportFailed.title,i.translations.pleaseContactSystemAdministrator)),S.loading(!1)}})},S.importButtonClick=function(){e("#fileupload").trigger("click")},S.deleteInstances=function(){S.alert(new p("ep-alert-red",i.translations.confirmAllResourceDelete.title,i.translations.confirmAllResourceDelete.text,(function(){}),(function(){S.loading(!0),e.ajax({type:"DELETE",url:i.urls.delete_instances(S.graph.graphid()),complete:function(e,t){S.loading(!1),"success"===t?S.alert(new p("ep-alert-blue",e.responseJSON.title,e.responseJSON.message)):S.alert(new f("ep-alert-red",e.responseJSON))}})})))},S.graph.ontology=n.computed((function(){return S.ontologies().find((function(e){return e.ontologyid===S.graph.ontology_id()}))})),S.groupedGraphs=n.observable({groups:[{name:"Resource Models",items:_},{name:"Branches",items:T}]}),S.graphid.subscribe((function(e){e&&""!==e&&S.navigate(i.urls.graph_designer(e))})),S.graphModel=new v({data:d.graph,datatypes:d.datatypes,ontology_namespaces:d.ontology_namespaces}),S.datatypes=t.keys(S.graphModel.get("datatypelookup")),S.graphModel.on("changed",(function(e,t){S.alert(null),200!==t.status&&(S.loading(!1),S.alert(new f("ep-alert-red",t.responseJSON)))})),S.graphModel.on("error",(function(e){S.alert(new f("ep-alert-red",e.responseJSON))})),S.selectedNode=S.graphModel.get("selectedNode"),S.saveNode=function(e){e&&(S.loading(!0),e.save((function(e){!1===e.responseJSON.success||500===e.status?S.alert(new f("ep-alert-red",e.responseJSON)):(S.cardTree.updateCards(S.selectedNode().nodeGroupId(),e.responseJSON),S.permissionTree.updateCards(S.selectedNode().nodeGroupId(),e.responseJSON)),S.loading(!1)})))},S.saveSelectedNode=function(){S.selectedNode()&&S.saveNode(S.selectedNode())},S.cardTree=new x({graph:S.graph,appliedFunctions:S.appliedFunctions,primaryDescriptorFunction:S.primaryDescriptorFunction,graphModel:S.graphModel}),S.permissionTree=new x({graph:S.graph,graphModel:S.graphModel,appliedFunctions:S.appliedFunctions,primaryDescriptorFunction:S.primaryDescriptorFunction,multiselect:!0}),S.selectedCards=n.computed((function(){var e=S.permissionTree.selection();return e?e.widgets?e:e.parent:null})),S.selectedCard=n.computed((function(){var e=S.cardTree.selection();return e?e.widgets?e:e.parent:null})),S.nodeForm=new m({graph:S.graph,graphModel:S.graphModel,loading:S.loading,node:S.selectedNode,appliedFunctions:S.appliedFunctions,primaryDescriptorFunction:S.primaryDescriptorFunction,restrictedNodegroups:d.restrictedNodegroups}),S.branchListView=new g({el:e("#branch-library"),branches:d.branches,graphModel:S.graphModel,loading:S.loading,disableAppendButton:n.computed((function(){}))}),S.permissionsDesigner=new y({cardTree:S.permissionTree}),S.graphSettingsViewModel=new w({designerViewModel:S,graph:S.graph,graphModel:S.graphModel,ontologyClasses:S.ontologyClasses,ontologies:S.ontologies,ontologyClass:n.observable(""),iconFilter:n.observable(""),rootNodeColor:n.observable(""),ontology_namespaces:d.ontology_namespaces,onReset:function(){var e=a.toJS(S.graphSettingsViewModel.graph);S.report.resetConfigs(e.config),S.report.get("template_id")()!==e.template_id&&S.report.get("template_id")(e.template_id)}}),S.report=new h(t.extend(d,{graphModel:S.graphModel,cards:S.cardTree.topCards,preview:!0})),S.report.configJSON.subscribe((function(e){var t=a.toJS(S.graphSettingsViewModel.graph);t.config=a.toJS(e),a.fromJS(t,S.graphSettingsViewModel.graph)})),S.report.configJSON.extend({deferred:!0}),S.report.get("template_id").subscribe((function(e){S.graphSettingsViewModel.graph.template_id(e)})),S.reportLookup=s,S.reportTemplates=t.map(s,(function(e,t){return e.id=t,e})),S.graphTree=new b({graphModel:S.graphModel,graphSettings:S.graphSettingsViewModel,cardTree:S.cardTree,permissionTree:S.permissionTree,appliedFunctions:S.appliedFunctions,primaryDescriptorFunction:S.primaryDescriptorFunction,restrictedNodegroups:d.restrictedNodegroups}),S.graphTree.branchListVisible.subscribe((function(e){e&&S.branchListView.loadDomainConnections()}),this),S.loadGraphSettings=function(){var t=this;S.loading(!0),e.ajax({type:"GET",url:i.urls.graph_settings(d.graphid),data:{search:!0,csrfmiddlewaretoken:"{{ csrf_token }}"}}).done((function(e){t.graphSettingsViewModel.resource_data(e.resources),t.graphSettingsViewModel.icon_data(e.icons),t.graphSettingsViewModel.jsonCache(t.graphSettingsViewModel.jsonData()),t.graphSettingsViewModel.contentLoading=S.loading,t.graphSettingsVisible(!0),S.loading(!1)})).fail((function(){throw"error loading graph settings"}))};var correspondingCard=function(e,n){var a,i,s=n.cachedFlatTree;if(void 0===s&&(s=n.flattenTree(n.topCards(),[]),n.cachedFlatTree=s),e&&"string"!=typeof e)if(e.nodeGroupId){var l=t.filter(s,(function(t){return t.nodegroupid===e.nodeGroupId()}));t.each(l,(function(n){var a;(a=t.find(n.widgets(),(function(t){return t.node_id()===e.nodeid})))&&(i=a)})),a=i||l[0]}else a=t.find(s,(function(t){return e.nodegroupid?t.nodegroupid===e.nodegroupid:t.nodegroupid===e.node.nodeGroupId()}));return a},correspondingNode=function(e,n){return t.find(n.items(),(function(t){if(e)return e.node?t.nodeid===e.node_id():t.nodeGroupId()===e.nodegroupid&&t.nodeid===t.nodeGroupId()}))},updateGraphSelection=function(){var e=correspondingNode(S.cardTree.selection(),S.graphTree);e&&S.graphTree.selectItem(e)},updateCardSelection=function(){var e,t=S.graphTree.selectedItems().length>0?S.graphTree.selectedItems()[0]:null;t&&(!0===t.istopnode?S.cardTree.selection(S.cardTree.topCards()[0]):(e=correspondingCard(t,S.cardTree))&&(S.cardTree.selection(e),S.cardTree.expandToRoot(S.cardTree.selection())))},updatePermissionCardSelection=function(){var e=correspondingCard(S.cardTree.selection(),S.permissionTree);e&&(S.permissionTree.expandToRoot(e),S.permissionTree.selection.removeAll(),e.selectChildCards())};"graph"===S.activeTab()&&S.loadGraphSettings();var C=S.activeTab.subscribe((function(e){"permissions"===e&&(S.permissionsDesigner.getPermissionManagerData(),C.dispose())})),I={permissions:{title:"xxxx",template:"permissions-tab-help"},graph:{title:"xxxx",template:"graph-tab-help"},card:{title:"xxxx",template:"cards-tab-help"}};S.activeTab.subscribe((function(e){switch(S.helpTemplate(I[e].template),S.getHelp(),e){case"card":updateCardSelection();break;case"graph":updateGraphSelection();break;case"permissions":updatePermissionCardSelection();break;default:return}})),S.graphModel.on("select-node",(function(e){S.graphTree.expandParentNode(e)})),c.prototype.initialize.apply(this,arguments)}});return new S}.apply(t,a),void 0===i||(e.exports=i)},40080:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#graphManagerData").getAttribute("graphManagerData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},88527:function(e,t,n){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}Promise.all([n.e(3556),n.e(2171),n.e(9263)]).then((function(){var e=[n(20198),n(84490),n(54922),n(46186),n(40080),n(94333),n(62666),n(20346),n(91248),n(32253),n(84714),n(94242)];(function(e,t,n,a,i,s,l,d){return new(s.extend({initialize:function(c){var p=this,_newGraph=function(t,n){n=n||{},p.viewModel.loading(!0),e.ajax({type:"POST",url:t,data:JSON.stringify(n),success:function(e){window.location=a.urls.graph_designer(e.graphid)},error:function(){p.viewModel.loading(!1)}})};this.viewModel.leaveDropdown=function(){e(".dropdown").dropdown("toggle")},this.viewModel.allGraphs().forEach((function(s){s.root=null,s.isCard=!1,i&&"object"===_typeof(i.root_nodes)&&(s.root=t.find(i.root_nodes,(function(e){return e.graph_id===s.graphid})),s.root&&(s.isCard=s.root.nodegroup_id===s.root.nodeid)),s.hover=n.observable(!1),s.clone=function(){_newGraph(a.urls.clone_graph(s.graphid))},s.exportGraph=function(e){window.open(a.urls.export_graph(s.graphid),"_blank")},s.exportMappingFile=function(e){window.open(a.urls.export_mapping_file(s.graphid),"_blank")},s.deleteGraph=function(){p.viewModel.alert(new l("ep-alert-red",a.translations.confirmGraphDelete.title,a.translations.confirmGraphDelete.text,(function(){}),(function(){p.viewModel.loading(!0),e.ajax({type:"DELETE",url:a.urls.delete_graph(s.graphid),complete:function(e,t){p.viewModel.loading(!1),"success"===t?p.viewModel.allGraphs.remove(s):p.viewModel.alert(new d("ep-alert-red",e.responseJSON))}})})))},s.deleteInstances=function(){p.viewModel.alert(new l("ep-alert-red",a.translations.confirmAllResourceDelete.title,a.translations.confirmAllResourceDelete.text,(function(){}),(function(){p.viewModel.loading(!0),e.ajax({type:"DELETE",url:a.urls.delete_instances(s.graphid),complete:function(e,t){p.viewModel.loading(!1),"success"===t?p.viewModel.alert(new l("ep-alert-blue",e.responseJSON.title,e.responseJSON.message)):p.viewModel.alert(new d("ep-alert-red",e.responseJSON))}})})))}})),this.viewModel.showResources=n.observable("#branches"!==window.location.hash),t.defaults(this.viewModel,{arches:a,groupedGraphs:n.observable({groups:[{name:"Resource Models",items:p.viewModel.resources()},{name:"Branches",items:p.viewModel.graphs()}]}),graphId:n.observable(null),showFind:n.observable(!1),currentList:n.computed((function(){return p.viewModel.showResources()?p.viewModel.resources():p.viewModel.graphs()})),newResource:function(){_newGraph("new",{isresource:!0})},newGraph:function(){_newGraph("new",{isresource:!1})},importGraph:function(t,n){var i=new FormData;i.append("importedGraph",n.target.files[0]),e.ajax({type:"POST",url:"import/",processData:!1,data:i,cache:!1,contentType:!1,success:function(e){0!=e[0].length?(_typeof(e[0])&&(e=e[0].join("<br />")),p.viewModel.alert(new l("ep-alert-red",a.translations.graphImportFailed.title,e))):window.location.reload(!0)},error:function(e){p.viewModel.alert(new l("ep-alert-red",a.translations.graphImportFailed.title,a.translations.pleaseContactSystemAdministrator)),p.viewModel.loading(!1)}})},importButtonClick:function(){e("#fileupload").trigger("click")}}),this.viewModel.graphId.subscribe((function(e){e&&""!==e&&p.viewModel.navigate(a.urls.graph_designer(e))})),s.prototype.initialize.call(this,c)}}))}).apply(null,e)})).catch(n.oe)},57788:function(e,t,n){var a,i;a=[n(86564),n(84490),n(54922),n(44050)],void 0===(i=function(e,t,n){return e.View.extend({initialize:function(e){t.extend(this,t.pick(e,"card")),this.selection=e.selection||n.observable(this.card)},beforeMove:function(e){e.cancelDrop=e.sourceParent!==e.targetParent}})}.apply(t,a))||(e.exports=i)},28008:function(e,t,n){var a,i;a=[n(86564),n(84490),n(54922),n(5207),n(44050)],void 0===(i=function(e,t,n,a){return e.View.extend({initialize:function(e){var t=this;this.card=e.card,this.graph=e.graphModel,this.selection=e.selection||n.observable(this.card),this.helpPreviewActive=e.helpPreviewActive||n.observable(!1),this.widgetLookup=a,this.currentTabIndex=n.computed((function(){if(!t.card.isContainer()||t.selection()===t.card)return 0;var e=t.selection();return e.node&&(e=e.card),t.card.get("cards")().indexOf(e)})),this.currentTabCard=n.computed((function(){return 0===this.card.get("cards")().length?this.card:this.card.get("cards")()[this.currentTabIndex()]}),this)},beforeMove:function(e){e.cancelDrop=e.sourceParent!==e.targetParent}})}.apply(t,a))||(e.exports=i)},68928:function(e,t,n){var a,i;a=[n(91429)],i=function(e){var t=e.extend({filterFunction:null,initialize:function(t){this.items=t.functions,this.items.sort((function(e,t){return e.function.name().toLowerCase()==t.function.name().toLowerCase()?0:e.function.name().toLowerCase()<t.function.name().toLowerCase()?-1:1})),e.prototype.initialize.apply(this,arguments)}});return t}.apply(t,a),void 0===i||(e.exports=i)},81878:function(e,t,n){var a,i;a=[n(91429)],i=function(e){var t=e.extend({filterFunction:null,initialize:function(t){this.items=t.functions,this.items.sort((function(e,t){return e.name().toLowerCase()==t.name().toLowerCase()?0:e.name().toLowerCase()<t.name().toLowerCase()?-1:1})),e.prototype.initialize.apply(this,arguments)}});return t}.apply(t,a),void 0===i||(e.exports=i)},60662:function(e,t,n){var a;void 0===(a=function(e){var t=document.querySelector("#graphBaseData").getAttribute("graphBaseData");return JSON.parse(t.replace(/,\s*}*$/,"}"))}.apply(t,[n]))||(e.exports=a)},85233:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(46248),n(56321),n(88280),n(59732),n(44050),n(86535)],void 0===(i=function(e,t,n,a,i,s,l,d){return function(c){var p,f=this,v=n.observable(""),h=n.observable(!1);f.multiselect=c.multiselect||!1,p=c.multiselect?n.observableArray([]):n.observable();var b=n.observable(),m=n.observable(),g=i.cards,getBlankConstraint=function(e){return[{uniquetoallinstances:!1,nodes:[],cardid:e.cardid,constraintid:d.generate()}]};this.flattenTree=function(e,a){return t.each(n.unwrap(e),(function(e){a.push(e),f.flattenTree(n.unwrap(e.cards),a)}),this),a},this.updateNodeList=function(){void 0===f.cachedFlatTree&&(f.cachedFlatTree=f.flattenTree(f.topCards(),[]))};var toggleAll=function(e){f.updateNodeList(),t.each(f.cachedFlatTree,(function(t){t.expanded(e)})),e&&f.rootExpanded(!0)},selectAll=function(e){f.updateNodeList(),t.each(f.cachedFlatTree,(function(t){t.selected()!==e&&t.selected(e)}))},x=function removeCard(e,n){var a;return t.each(e(),(function(t){t&&(t.nodegroupid===n?(e.remove(t),a=t):removeCard(t.cards,n))})),a},createLookup=function(e,a){return t.reduce(e,(function(e,t){return e[n.unwrap(t[a])]=t,e}),{})};t.extend(this,{filterEnterKeyHandler:function(e,n){if(13===n.keyCode){var a=t.filter(f.flattenTree(f.topCards(),[]),(function(e){return e.highlight&&e.highlight()})),i=m();if(m(null),a.length>0){var s=0,l=a.indexOf(i);i&&a[l+1]&&(s=l+1),m(a[s])}return!1}return!0},loading:h,showIds:n.observable(!1),showGrid:n.observable(!1),cachedFlatTree:undefined,widgetLookup:createLookup(i.widgets,"widgetid"),cardComponentLookup:createLookup(i.cardComponents,"componentid"),nodeLookup:createLookup(c.graphModel.get("nodes")(),"nodeid"),graphid:c.graph.graphid,graphname:c.graph.name,graphiconclass:c.graph.iconclass,graph:c.graph,graphModel:c.graphModel,appliedFunctions:c.appliedFunctions(),primaryDescriptorFunction:c.primaryDescriptorFunction(),toggleIds:function(){f.showIds(!f.showIds())},expandAll:function(){toggleAll(!0)},collapseAll:function(){toggleAll(!1)},toggleGrid:function(){f.showGrid(!this.showGrid())},selectAllCards:function(){selectAll(!0)},clearSelection:function(){selectAll(!1)},expandToRoot:function expandToRoot(e){f.updateNodeList(),e.parent?(e.parent.expanded(!0),expandToRoot(e.parent)):(e.expanded(!0),t.each(f.cachedFlatTree,(function(t){null!==e.parentnodegroup_id&&e.parentnodegroup_id===t.nodegroupid&&expandToRoot(t)})))},rootExpanded:n.observable(!0),on:function(){},beforeMove:function(e){e.cancelDrop=e.sourceParent!==e.targetParent},updateCard:function(e,a,i){return t.each(n.unwrap(e),(function(e){if(e.nodegroupid===a.parentnodegroupId){var s={card:a,nodegroup:t.filter(i.nodegroups,(function(e){return i.updated_values.card.nodegroup_id===e.nodegroupid}))[0]};f.addCard(s,e.cards,e)}else f.updateCard(n.unwrap(e.cards),a,i)}),this),[]},updateNode:function(e,a){return!1===t.contains(t.keys(f.nodeLookup),a.nodeid)&&(f.nodeLookup[a.nodeid]=a),t.each(n.unwrap(e),(function(e){if(e.nodegroupid===a.nodegroup_id){var i=e.model.attributes;t.each(e.model.nodes(),(function(s){if(s.nodeid===a.nodeid){var d=i.datatypelookup[n.unwrap(s.datatype)];if(s.nodeDatatypeSubscription||(s.nodeDatatypeSubscription=s.datatype.subscribe((function(){e.model._card(JSON.stringify(e.model.toJSON()))}),this)),d.defaultwidget_id){var c,p=t.find(i.data.widgets,(function(e){return e.node_id===a.nodeid})),v=new l(p,{node:s,card:e.model,datatype:d,disabled:i.data.disabled});t.each(e.widgets(),(function(e,t){e.node_id()===v.node_id()&&(c=t)}),f),void 0!==c?e.widgets.splice(c,1,v):e.widgets.push(v)}}})),e.model._card(JSON.stringify(e.model.toJSON()))}else f.updateNode(n.unwrap(e.cards),a)}),this),[]},updateCards:function(e,n){if(f.updateNode(f.topCards(),n.updated_values.node),n.updated_values.card){var a=n.updated_values.card,i=n.default_card_name;f.cachedFlatTree&&f.cachedFlatTree.forEach((function(e){e.model.name().startsWith(i)&&e.model.cardid()===a.cardid&&n.updated_values.node&&(e.model.name(n.updated_values.node.name),a.name=e.model.name,e.model.save())})),a.parentnodegroupId=t.filter(n.nodegroups,(function(e){return n.updated_values.card.nodegroup_id===e.nodegroupid}))[0].parentnodegroup_id,f.updateCard(f.topCards(),a,n)}else if(n.updated_values.node.nodegroup_id!==n.updated_values.node.nodeid){var s=t.find(f.flattenTree(f.topCards(),[]),(function(e){return e.nodegroupid===n.updated_values.node.nodeid}));if(s){var l=s.parentCard?s.parentCard.cards:f.topCards;l.remove(s),l(l().concat(s.cards()))}}t.each(f.cachedFlatTree,(function(e){e.dispose()})),f.cachedFlatTree=f.flattenTree(f.topCards(),[]),t.each(f.cachedFlatTree,(function(t){t.nodegroupid===e&&(f.collapseAll(),f.multiselect?f.selection([t]):f.selection(t),f.expandToRoot(t))}))},deleteCard:function(e){x(f.topCards,e),f.topCards().length&&f.topCards()[0].selected(!0)},addCard:function(e,a,i){a||(a=f.topCards),f.graphModel.set("nodegroups",f.graphModel.get("nodegroups").concat([e.nodegroup]));var l=new s({card:e.card,graphModel:f.graphModel,tile:null,resourceId:n.observable(),displayname:n.observable(),handlers:{},cards:g,tiles:[],selection:p,hover:b,scrollTo:m,multiselect:f.multiselect,loading:h,filter:v,provisionalTileViewModel:null,cardwidgets:e.cardwidgets,userisreviewer:!0,perms:n.observableArray(),permsLiteral:n.observableArray(),parentCard:i,constraints:getBlankConstraint(e.card),topCards:f.topCards});a.push(l);var d=t.find(f.graphModel.get("nodes")(),(function(t){return t.nodeid===e.card.nodegroup_id}));return f.graphModel.getChildNodesAndEdges(d).nodes.forEach((function(e){var i=t.find(n.unwrap(a),(function(t){return t.nodegroupid===(n.unwrap(e.nodeGroupId)||n.unwrap(e.nodegroup_id))&&t.model.cardid()!==l.model.cardid()}));if(i){a.remove(i);var s=l.cards().map((function(e){return e.cardid}));t.contains(s,i.cardid)||l.cards.push(i)}})),!1===t.contains(t.keys(this.nodeLookup),d.nodeid)&&(this.nodeLookup[d.nodeid]=d),f.cachedFlatTree=f.flattenTree(f.topCards(),[]),l},reorderCards:function(){h(!0);var n=t.map(f.topCards(),(function(e,t){return e.model.get("sortorder")(t),{id:e.model.id,name:e.model.get("name")(),sortorder:t}}));e.ajax({type:"POST",data:JSON.stringify({cards:n}),url:a.urls.reorder_cards,complete:function(){h(!1)}})},selection:p,filter:v,isFuncNode:function(){var e=null,t=this.primaryDescriptorFunction;if(c.card&&t){for(var n in e=c.card.nodegroup_id,["name","description"])try{if(e===t.config.descriptor_types[n].nodegroup_id)return!0}catch(e){console.log("No descriptor configuration for "+n)}return!1}}}),this.topCards=n.observableArray();var y=t.filter(i.cards,(function(e){var a=t.find(n.unwrap(c.graphModel.get("nodegroups")),(function(t){return n.unwrap(t.nodegroupid)===e.nodegroup_id}));return!a||!n.unwrap(a.parentnodegroup_id)})).sort((function(e,t){return e.sortorder<t.sortorder?-1:e.sortorder===t.sortorder?0:1}));this.topCards(y.map((function(e){var t=i.constraints.filter((function(t){return t.card_id===e.cardid}));return 0===t.length&&(t=getBlankConstraint(e)),new s({card:e,appliedFunctions:c.appliedFunctions(),primaryDescriptorFunction:c.primaryDescriptorFunction(),graphModel:c.graphModel,tile:null,resourceId:n.observable(),displayname:n.observable(),handlers:{},cards:i.cards,constraints:t,tiles:[],selection:p,hover:b,scrollTo:m,multiselect:f.multiselect,loading:h,filter:v,provisionalTileViewModel:null,cardwidgets:i.cardwidgets,userisreviewer:!0,perms:n.observableArray(),permsLiteral:n.observableArray(),topCards:f.topCards})})));var w=f.topCards()[0];null!=w&&(!0===f.multiselect?p.push(w.tiles().length>0?w.tiles()[0]:w):p(w.tiles().length>0?w.tiles()[0]:w)),f.graphModel.get("cards").subscribe((function(e){var a=f.flattenTree(f.topCards(),[]),i=a.map((function(e){return e.model.cardid()})),s=e.filter((function(e){return!t.contains(i,e.cardid)}));g=g.concat(s),s.forEach((function(e){var i=t.find(n.unwrap(c.graphModel.get("nodegroups")),(function(t){return n.unwrap(t.nodegroupid)===e.nodegroup_id})),s=t.find(a,(function(e){return e.nodegroupid===i.parentnodegroup_id}));!s&&i.parentnodegroup_id||f.addCard({nodegroup:i,card:e,cardwidgets:f.graphModel.get("cardwidgets")},s?s.cards:f.topCards,s)}))}))}}.apply(t,a))||(e.exports=i)},62246:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46186),n(42084)],i=function(e,t,n,a,i){var s=t.observable(!1),l=i.extend({filterFunction:function(){var e=this.filter().toLowerCase();this.items().forEach((function(t){t.filtered(!0),e.length>2&&(-1!==t.name().toLowerCase().indexOf(e)||-1!==t.datatype().toLowerCase().indexOf(e)||t.ontologyclass()&&-1!==t.ontologyclass().toLowerCase().indexOf(e))&&(t.filtered(!1),this.expandParentNode(t))}),this)},filterEnterKeyHandler:function(e,t){var a=this;if(13===t.keyCode){var i=n.filter(this.items(),(function(e){return!e.filtered()})),s=a.scrollTo();if(a.scrollTo(null),i.length>0){var l=0,d=i.indexOf(s);s&&i[d+1]&&(l=d+1),a.scrollTo(i[l])}return!1}return!0},initialize:function(e){var n=this;this.graphModel=e.graphModel,this.graphSettings=e.graphSettings,this.cardTree=e.cardTree,this.appliedFunctions=e.appliedFunctions,this.primaryDescriptorFunction=e.primaryDescriptorFunction,this.permissionTree=e.permissionTree,this.items=this.graphModel.get("nodes"),this.branchListVisible=t.observable(!1),this.scrollTo=t.observable(),this.restrictedNodegroups=e.restrictedNodegroups,this.showIds=t.observable(!1),this.toggleIds=function(){n.showIds(!n.showIds())},this.showGrid=t.observable(!1),this.activeLanguageDir=t.observable(a.activeLanguageDir),i.prototype.initialize.apply(this,arguments)},getDisplayName:function(e){return t.computed((function(){var t=e.name();return""!=e.ontologyclass_friendlyname()&&(t=t+" ("+e.ontologyclass_friendlyname().split("_")[0]+")"),t}),this)},isFuncNode:function(e){var t,n={},a=this.primaryDescriptorFunction;return this.primaryDescriptorFunction()?(["name","description"].forEach((function(e){try{n[a().config.descriptor_types[e].nodegroup_id]=e}catch(t){console.log("No descriptor configuration for "+e)}})),[e].concat(e.childNodes()?e.childNodes():[]).find((function(e){return!!(t=n[e.id])})),!!t):null},isChildSelected:function(e){var n=function isChildSelected(e){var t=!1;if(!e.istopnode)return e.childNodes().forEach((function(e){(e&&e.selected()||isChildSelected(e))&&(t=!0)})),t};return t.computed((function(){return n(e)}),this)},expandParentNode:function(e){e.parent&&(e.parent.expanded(!0),this.expandParentNode(e.parent))},selectItem:function(e){this.graphSettings.dirty()||(this.graphModel.selectNode(e),this.trigger("node-selected",e))},toggleBranchList:function(e,t){t.stopImmediatePropagation(),this.branchListVisible(!this.branchListVisible()),this.branchListVisible()&&e.expanded(!0),this.trigger("toggle-branch-list")},addChildNode:function(e,t){t.stopImmediatePropagation(),this.graphModel.appendNode(e,(function(t,n){"success"===n&&(e.expanded(!0),e.istopnode&&this.graphModel.get("isresource")&&(this.cardTree.addCard(t.responseJSON),this.permissionTree.addCard(t.responseJSON)))}),this)},deleteNode:function(t,n){n.stopImmediatePropagation(),e(n.target).tooltip("destroy"),this.graphModel.deleteNode(t,(function(e,n){"success"===n&&t.isCollector()&&(this.cardTree.deleteCard(t.nodeGroupId()),this.permissionTree.deleteCard(t.nodeGroupId()))}),this)},exportBranch:function(e,t){t.stopImmediatePropagation(),this.graphModel.exportBranch(e,(function(e){var t=a.urls.graph_designer(e.responseJSON.graphid);window.open(t)}))},beforeMove:function(e){e.cancelDrop=e.sourceParent!==e.targetParent},reorderNodes:function(t){s(!0);var i=n.map(t.sourceParent(),(function(e){return e.attributes.source}));e.ajax({type:"POST",data:JSON.stringify({nodes:i}),url:a.urls.reorder_nodes,complete:function(){s(!1)}})},_initializeItem:function(e){e.expanded||(e.expanded=t.observable(e.istopnode)),i.prototype._initializeItem.apply(this,arguments)},collapseAll:function(){this.items().forEach((function(e){e.istopnode||e.expanded(!1)}),this)},toggleGrid:function(){this.showGrid(!this.showGrid())}});return l}.apply(t,a),void 0===i||(e.exports=i)},79793:function(e,t,n){var a,i;a=[n(20198),n(84490),n(86564),n(54922),n(46186),n(5523),n(84714)],void 0===(i=function(e,t,n,a){return n.View.extend({initialize:function(e){var n=this;t.extend(this,t.pick(e,"graphModel")),this.datatypes=t.keys(this.graphModel.get("datatypelookup")),this.node=e.node,this.isExportable=a.observable(null),this.graph=e.graph,this.loading=e.loading||a.observable(!1),this.hasOntology=a.computed((function(){return null!==n.graph.ontology_id()})),this.isResourceTopNode=a.computed((function(){var e=n.node();return n.graphModel.get("isresource")&&e&&e.istopnode})),this.restrictedNodegroups=e.restrictedNodegroups,this.appliedFunctions=e.appliedFunctions,this.primaryDescriptorFunction=e.primaryDescriptorFunction,this.isFuncNode=function(){var e=n.node(),t={},a=null,i=this.primaryDescriptorFunction;return!(!i||!i())&&(["name","description"].forEach((function(e){try{t[i().config.descriptor_types[e].nodegroup_id]=e}catch(t){console.log("No descriptor configuration for "+e)}})),[e].concat(e.childNodes()?e.childNodes():[]).find((function(e){return!!(a=t[e.id])})),!!a&&("name"===a?"This node participates in the name function":"This node participates in the descriptor function"))},this.checkIfImmutable=function(){return t.contains(this.restrictedNodegroups,n.node().nodeGroupId())},this.extendNode=function(e,n){return t.extend(e,n)},this.toggleRequired=function(){!1===n.checkIfImmutable()&&n.node().isrequired(!n.node().isrequired())},this.disableDatatype=a.computed((function(){var e=!1;return n.node()&&(e=n.checkIfImmutable()),n.isResourceTopNode()||e})),this.displayMakeCard=a.computed((function(){var e=!0;n.node()&&n.graphModel.get("isresource")&&(!0===n.graphModel.getParentNode(n.node()).istopnode&&(e=!1));return e})),this.disableIsCollector=a.computed((function(){var e=n.node(),a=!1,i=!1,s=!1,l=!1,d=!1,c=!1;if(e){a=e.isCollector(),i=n.graphModel.isNodeInChildGroup(e);var p=n.graphModel.getGroupedNodes(e),f=n.graphModel.getChildNodesAndEdges(e).nodes;f.push(e);var v=t.difference(p,f);s=!!t.find(v,(function(e){return"semantic"!==e.datatype()})),d=!!t.find(p,(function(e){return"semantic"!==e.datatype()})),c=!!t.find(f,(function(e){return e.isCollector()})),l=n.graphModel.isNodeInParentGroup(e)}return n.isResourceTopNode()||!a&&(i||s)||!a&&l&&c||a&&d&&(l||i)||n.graphModel.get("nodes")().length>1&&e&&e.istopnode}))},cancel:function(){this.node().reset()},callAsync:function(e){var t=this;this.loading(!0),this.graphModel[e](this.node(),(function(){t.loading(!1)}))},save:function(){this.callAsync("updateNode")},deleteNode:function(){this.callAsync("deleteNode")},toggleIsCollector:function(){!1===this.checkIfImmutable()&&this.node().toggleIsCollector()}})}.apply(t,a))||(e.exports=i)},72151:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#graphFunctionsData").getAttribute("graphFunctionsData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},34337:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(91429),n(79202),n(12340)],i=function(e,t,n,a,i,s){var l=a.extend({initialize:function(e){var i=this;a.prototype.initialize.apply(this,arguments),this.loading=e.loading||n.observable(!1),this.disableAppendButton=e.disableAppendButton||n.observable(!1),this.graphModel=e.graphModel,this.selectedNode=this.graphModel.get("selectedNode"),e.branches.forEach((function(e){e.selected=n.observable(!1),e.filtered=n.observable(!1),e.graphModel=new s({data:e,selectRoot:!1}),this.items.push(e)}),this),this.selectedBranch=n.observable(null),this.viewMetadata=n.observable(!1),this.loadingBranchDomains=n.observable(!1),this.filtered_items=n.pureComputed((function(){var e=t.filter(this.items(),(function(e){return!e.filtered()}),this);return e.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})),e}),this);var l=n.computed((function(){var e=i.selectedNode;return!!e()&&e().ontologyclass()+e().datatype()+e().isCollector()}),this).extend({deferred:!0});l.subscribe((function(){this.loadDomainConnections()}),this)},loadDomainConnections:function(){var t=this,n=[];this.loadingBranchDomains(!0),this.items().forEach((function(e,t){n.push(e.graphModel.loadDomainConnections())}),this),e.when.apply(e,n).then((function(){t.loadingBranchDomains(!1),t.filterFunction()}))},filterFunction:function(){var e=this.filter().toLowerCase();this.items().forEach((function(t){var a="string"==typeof t.name?t.name:t.name();t.filtered||(t.filtered=n.observable()),t.filtered(!0),-1!==a.toLowerCase().indexOf(e)&&this.graphModel.canAppend(t.graphModel)&&t.filtered(!1)}),this)},selectItem:function(t,n){a.prototype.selectItem.apply(this,arguments),t.isactive&&(t.selected()?(this.selectedBranch(t),this.graph=new i({el:e("#branch-preview"),graphModel:t.graphModel}),this.viewMetadata(!0)):(this.selectedBranch(null),this.viewMetadata(!1)))},appendBranch:function(e,n){this.selectedNode()&&(this.loading(!0),this.graphModel.appendBranch(this.selectedNode(),null,e.graphModel,(function(e,n){t.delay(t.bind((function(){"success"===n&&(window.location.reload(),this.closeForm())}),this),300,!0)}),this))},closeForm:function(){this.clearSelection(),this.selectedBranch(null),this.viewMetadata(!1),this.trigger("close")}});return l}.apply(t,a),void 0===i||(e.exports=i)},79202:function(e,t,n){var a,i;a=[n(86564),n(20198),n(84490),n(54922),n(38198),n(19438)],void 0===(i=function(e,t,n,a,i,s){return e.View.extend({initialize:function(e){var t=this;e=n.defaults(e,{nodeSize:11,labelOffset:2,loading:a.observable(!1)}),this.loading=e.loading,this.nodeSize=e.nodeSize,this.labelOffset=e.labelOffset,this.nodeLabelOffset=this.nodeSize+this.labelOffset,this.currentOffset=[0,0],this.currentScale=1,this.graphModel=e.graphModel,this.nodes=e.graphModel.get("nodes")||a.observableArray([]),this.edges=e.graphModel.get("edges")||a.observableArray([]),this.getsize=function(){return 1e3};this.$el.width()<this.$el.height()?this.$el.width():this.$el.height();this.tree=s.layout.tree().children((function(e){return e.childNodes()})).size([360,this.getsize()]).separation((function(e,t){return(e.parent==t.parent?1:2)/e.depth})),this.diagonal=s.svg.diagonal.radial().projection((function(e){return[e.y,e.x/180*Math.PI]})),this.zoom=s.behavior.zoom().on("zoom",(function(){t.redraw()})),this.svg=s.select(this.el).append("svg").attr("width","100%").attr("height",this.$el.height()).call(this.zoom).append("g"),this.render(),setTimeout((function(){t.resize()}),50)},render:function(){this.root=void 0,this.nodes().forEach((function(e){e.istopnode&&(this.root=e)}),this),this.tree_nodes=this.tree.nodes(this.root),this.tree_nodes.forEach((function(e){isNaN(e.x)&&(e.x=0)})),this.renderLinks(),this.renderNodes()},renderNodes:function(){this.allNodes=this.svg.selectAll("g").data(this.tree_nodes,(function(e){return e.nodeid})),this.node=this.allNodes.enter().append("g").attr("class","node").attr("transform",(function(e){return"rotate("+(e.x-90)+")translate("+e.y+")"})),this.node.append("circle").attr("r",this.nodeSize),this.renderNodeText()},renderNodeText:function(){var e=this;this.node.append("text").attr("dy",(function(e){return e.children?"-.31em":".31em"})).attr("class","graph-node-text").attr("text-anchor",(function(e){return e.x<180?"start":"end"})).attr("transform",(function(t){return t.x<180?"translate("+e.nodeLabelOffset+")":"rotate(180)translate(-"+e.nodeLabelOffset+")"})).text((function(t){return t.name().length>16*e.currentScale?t.name().substring(0,16*e.currentScale)+"...":t.name()}))},renderLinks:function(){var e=this.tree.links(this.tree_nodes),t=this.svg.selectAll(".link").data(e,(function(e){return e.target.nodeid}));t.enter().append("path").attr("class","link").attr("d",this.diagonal),t.exit().remove()},redraw:function(e){var t=this.currentScale;e=e||!1,s.event&&(this.currentScale=s.event.scale||this.currentScale,this.currentOffset=s.event.translate||this.currentOffset),this.center||(this.center=[this.$el.width()/2,this.$el.height()/2]);var n=this.currentOffset[0]+this.center[0],a=this.currentOffset[1]+this.center[1];this.svg.attr("transform","translate("+n+","+a+") scale("+this.currentScale+")"),(e||t!==this.currentScale)&&(this.allNodes.remove(),this.svg.selectAll(".link").remove(),this.tree=s.layout.tree().children((function(e){return e.childNodes()})).size([360,this.getsize()*this.currentScale]).separation((function(e,t){return(e.parent==t.parent?1:2)/e.depth})),this.render())},resize:function(){s.select(this.el).style("height",this.$el.height()+"px").select("svg").attr("height",this.$el.height()),this.center=[this.$el.width()/2,this.$el.height()/2];var e=this.currentOffset[0]+this.center[0],t=this.currentOffset[1]+this.center[1];this.svg.attr("transform","translate("+e+","+t+") scale("+this.currentScale+")")},zoomTo:function(e){var t=-e.y*Math.cos((e.x-90)/180*Math.PI)*this.currentScale,n=-e.y*Math.sin((e.x-90)/180*Math.PI)*this.currentScale,a=this.zoom.translate([t,n]);this.svg.transition().duration(1e3).call(a.event)}})}.apply(t,a))||(e.exports=i)},63784:function(e,t,n){var a,i;a=[n(54922),n(84490),n(94333),n(60662),n(84714)],i=function(e,t,n,a){var i=n.extend({constructor:function(t){var i=this;return t.viewModel.graphid=e.observable(a.graphid),n.apply(this,arguments),t.viewModel.graphid.subscribe((function(e){var t=window.location.pathname.replace(/\b[a-f\d-]{36}\b/,e);i.viewModel.navigate(t)})),this}});return i}.apply(t,a),void 0===i||(e.exports=i)},21415:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#graphSettingsData").getAttribute("graphSettingsData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},21973:function(e,t,n){Promise.all([n.e(3556),n.e(5112),n.e(2171),n.e(2798)]).then((function(){var e=[n(20198),n(84490),n(54922),n(58420),n(63784),n(21415),n(32222),n(46839),n(66639)];(function(e,t,n,a,i,s,l,d){var c=JSON.stringify(s.resources);s.resources.forEach((function(e){e.isRelatable=n.observable(e.is_relatable)}));var p=JSON.stringify(s.graph),f=a.fromJS(s.graph),v=n.observable(""),h=new d({source:s.node,datatypelookup:[],graph:f,ontology_namespaces:s.ontology_namespaces}),b=n.observable(s.node.ontologyclass),m=n.computed((function(){var e=t.filter(s.resources,(function(e){return e.isRelatable()})).map((function(e){return e.id}));return void 0===f.ontology_id()&&f.ontology_id(null),JSON.stringify({graph:a.toJS(f),relatable_resource_ids:e,ontology_class:b()})})),g=n.observable(m()),x={dirty:n.computed((function(){return m()!==g()})),iconFilter:v,icons:n.computed((function(){return t.filter(s.icons,(function(e){return e.name.indexOf(v())>=0}))})),graph:f,relatable_resources:s.resources,ontologies:s.ontologies,ontologyClass:b,ontologyClasses:n.computed((function(){return t.filter(s.ontologyClasses,(function(e){return e.display=h.getFriendlyOntolgyName(e.source),e.ontology_id===f.ontology_id()}))})),save:function(){y.viewModel.loading(!0),e.ajax({type:"POST",url:"",data:m(),success:function(e){g(m()),y.viewModel.loading(!1)},error:function(e){y.viewModel.loading(!1)}})},reset:function(){t.each(JSON.parse(p),(function(e,t){n.isObservable(f[t])&&f[t](e)})),JSON.parse(c).forEach((function(e){t.find(s.resources,(function(t){return t.id===e.id})).isRelatable(e.is_relatable)})),g(m())}},y=new i({viewModel:x})}).apply(null,e)})).catch(n.oe)},84600:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(27883),n(31129)],void 0===(i=function(e,t,n,a,i,s,l,d){return function(a){var d=this,c={no_access_to_nodegroup:"ion-close",read_nodegroup:"ion-ios-book",write_nodegroup:"ion-edit",delete_nodegroup:"ion-android-delete"};d.identityList=new s({items:n.observableArray()}),d.identityList.selectedItems.subscribe((function(e){d.updatePermissions()})),d.showPermissionsForm=n.observable(!1),d.cardTree=a.cardTree,d.cardList=null,d.selectedCards=n.pureComputed((function(){return d.cardTree.selection()})),d.getPermissionManagerData=function(){d.cardList=d.cardTree.flattenTree(n.unwrap(d.cardTree.topCards),[]),e.ajax({url:i.urls.permission_manager_data}).done((function(e){e.identities.forEach((function(e){e.permsLiteral=" - "+t.pluck(e.default_permissions,"name").join(", ")})),d.identityList.items(e.identities),e.permissions.forEach((function(e){e.icon=c[e.codename]})),d.permissionSettingsForm=new l({identityList:d.identityList,selectedIdentities:d.identityList.selectedItems,selectedCards:d.selectedCards,nodegroupPermissions:e.permissions,cardList:d.cardList}),d.showPermissionsForm(!0),d.permissionSettingsForm.on("save",(function(){d.updatePermissions()})),d.permissionSettingsForm.on("revert",(function(){d.updatePermissions()}))})).fail((function(e){console.log(e)}))},this.updatePermissions=function(){var n=d.identityList.selectedItems()[0],a=[];n&&(d.cardList.forEach((function(e){a.push(e.model.nodegroup_id())})),e.ajax({type:"GET",url:i.urls.permission_data,data:{nodegroupIds:JSON.stringify(a),identityType:n.type,identityId:n.id},success:function(e){e.forEach((function(e){var n=t.find(d.cardList,(function(t){return t.model.nodegroup_id()===e.nodegroup_id}));0===e.perms.length&&(e.perms=d.identityList.selectedItems()[0].default_permissions),e.perms.forEach((function(e){e.icon=c[e.codename]})),n.perms(e.perms),n.permsLiteral(" - "+t.pluck(e.perms,"name").join(", ")),"card"===n.type&&n.children.length>0&&n.children.forEach((function(t){"node"===t.type&&t.perms(e.perms)}))}))}}))}}}.apply(t,a))||(e.exports=i)},27883:function(e,t,n){var a,i;a=[n(54922),n(91429)],i=function(e,t){var n=t.extend({singleSelect:!0,initialize:function(e){t.prototype.initialize.apply(this,arguments),this.items=e.items}});return n}.apply(t,a),void 0===i||(e.exports=i)},31129:function(e,t,n){var a,i;a=[n(20198),n(84490),n(86564),n(54922),n(46186)],void 0===(i=function(e,t,n,a,i){return n.View.extend({initialize:function(e){this.selectedIdentities=e.selectedIdentities,this.identityList=e.identityList,this.selectedCards=e.selectedCards,this.noAccessPerm=void 0,this.whiteListPerms=[],this.groupedNodeList=e.groupedNodeList,this.groups=a.utils.arrayFilter(this.identityList.items(),(function(e){return"group"===e.type})),this.groups=t.forEach(this.groups,(function(e){e.combinedId="group-"+e.id})),this.users=a.utils.arrayFilter(this.identityList.items(),(function(e){return"user"===e.type})),this.users=t.forEach(this.users,(function(e){e.combinedId="user-"+e.id})),this.identityid=a.observable(this.groups[0]),this.identityid.subscribe((function(n){t.forEach(e.identityList.items(),(function(e){e.combinedId!=n?e.selected(!1):e.selected(!0)}))})),this.groupedIdentities=a.observable({groups:[{name:"Groups",items:this.groups},{name:"Accounts",items:this.users}]}),e.nodegroupPermissions.forEach((function(e){e.selected=a.observable(!1),"no_access_to_nodegroup"===e.codename?(this.noAccessPerm=e,e.selected.subscribe((function(e){e&&this.whiteListPerms.forEach((function(e){e.selected(!1)}),this)}),this)):(this.whiteListPerms.push(e),e.selected.subscribe((function(e){e&&this.noAccessPerm.selected(!1)}),this))}),this),this.nodegroupPermissions=a.observableArray(e.nodegroupPermissions)},save:function(){var n=this,a={selectedIdentities:this.selectedIdentities().map((function(e){return{type:e.type,id:e.id}})),selectedCards:this.selectedCards().map((function(e){return{nodegroupid:e.nodegroupid}})),selectedPermissions:t.filter(this.nodegroupPermissions(),(function(e){return e.selected()})).map((function(e){return{codename:e.codename}}))};e.ajax({type:"POST",url:i.urls.permission_data,data:JSON.stringify(a),success:function(e){n.trigger("save"),n.clearUserPermissionCache()}})},revert:function(){var t=this,n={selectedIdentities:this.selectedIdentities(),selectedCards:this.selectedCards()};e.ajax({type:"DELETE",url:i.urls.permission_data,data:JSON.stringify(n),success:function(e){t.clearUserPermissionCache(),t.trigger("revert")}})},clearUserPermissionCache:function(){return e.ajax({type:"POST",url:i.urls.clear_user_permission_cache})}})}.apply(t,a))||(e.exports=i)},71e3:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#mapLayerManagerData").getAttribute("mapLayerManagerData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},58126:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(46186),n(90905),n(41926),n(94333),n(46839),n(62666),n(85652),n(71e3),n(77823),n(64328),n(63412),n(3460),n(66639),n(80508)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p,f){var v={map:null,geomNodes:[],loading:t.observable(!1),minZoom:t.observable(a.mapDefaultMinZoom),maxZoom:t.observable(a.mapDefaultMaxZoom),pitch:t.observable(0),bearing:t.observable(0),iconFilter:t.observable(""),selectedList:t.observable()};v.icons=t.computed((function(){return n.filter(f.icons,(function(e){return e.name.indexOf(v.iconFilter())>=0}))}));var h=t.observableArray(e.extend(!0,[],a.mapLayers));n.each(h(),(function(i){i._layer=t.observable(JSON.stringify(i)),i.layerJSON=t.observable(JSON.stringify(i.layer_definitions,null,"\t")),i.activated=t.observable(i.activated),i.addtomap=t.observable(i.addtomap),i.name=t.observable(i.name),i.icon=t.observable(i.icon),i.legend=t.observable(i.legend),i.searchonly=t.observable(i.searchonly),i.centerX=t.observable(i.centerx),i.centerY=t.observable(i.centery),i.zoom=t.observable(i.zoom),i.toJSON=t.computed((function(){var e;try{e=JSON.parse(i.layerJSON())}catch(t){e=[]}return JSON.stringify({maplayerid:i.maplayerid,name:i.name(),layer_definitions:e,isoverlay:i.isoverlay,icon:i.icon(),legend:i.legend(),searchonly:i.searchonly(),activated:i.activated(),addtomap:i.addtomap(),is_resource_layer:!1,centerx:i.centerX(),centery:i.centerY(),zoom:i.zoom()})})),i.dirty=t.computed((function(){return i.toJSON()!==i._layer()})),i.save=function(){v.loading(!0),e.ajax({type:"POST",url:window.location.pathname+"/"+i.maplayerid,data:i.toJSON(),success:function(e){i._layer(i.toJSON()),T.viewModel.loading(!1);var t=n.find(a.mapLayers,(function(e){return e.maplayerid===i.maplayerid}));n.extend(t,JSON.parse(i._layer())),!t.isoverlay&&t.addtomap&&(n.each(v.basemaps(),(function(e){e.maplayerid!==i.maplayerid&&e.addtomap(!1)})),n.each(a.mapLayers,(function(e){e.isoverlay||e.maplayerid===i.maplayerid||(e.addtomap=!1)})))},error:function(e){T.viewModel.loading(!1)}})},i.reset=function(){var e=JSON.parse(i._layer());i.layerJSON(JSON.stringify(e.layer_definitions,null,"\t")),i.activated(e.activated),i.addtomap(e.addtomap),i.name(e.name),i.icon(e.icon),i.centerX(e.centerx),i.centerY(e.centery),i.zoom(e.zoom),i.legend(e.legend),i.searchonly(e.searchonly)},i.delete=function(){T.viewModel.alert(new c("ep-alert-red",a.translations.confirmMaplayerDelete.title,a.translations.confirmMaplayerDelete.text,(function(){}),(function(){v.loading(!0),e.ajax({type:"DELETE",url:window.location.pathname+"/"+i.maplayerid,success:function(e){h.remove(i),a.mapLayers=n.without(a.mapLayers,n.findWhere(a.mapLayers,{maplayerid:i.maplayerid}));var s=null,l=t.unwrap(v.selectedList());l&&l.length>0&&(s=l[0]),v.selection(s),T.viewModel.loading(!1)},error:function(e){T.viewModel.loading(!1)}})})))}})),v.selectedBasemapName=t.observable(""),v.basemaps=t.computed((function(){return n.filter(h(),(function(e){return!e.isoverlay}))})),v.basemaps().forEach((function(e){e.select=function(){v.selectedBasemapName(e.name())}}));var b=n.find(v.basemaps(),(function(e){return e.addtomap()}));b||(b=v.basemaps()[0]),b&&v.selectedBasemapName(b.name()),v.overlays=t.computed((function(){return n.filter(h(),(function(e){return e.isoverlay&&!e.is_resource_layer}))}));var getBasemapLayers=function(){return n.filter(v.basemaps(),(function(e){return e.name()===v.selectedBasemapName()})).reduce((function(e,t){return e.concat(t.layer_definitions)}),[])},m=e.extend(!0,{},a.mapSources);m["search-results-hex"]={type:"geojson",data:{type:"FeatureCollection",features:[]}},m["search-results-points"]={type:"geojson",data:{type:"FeatureCollection",features:[]}},m["search-results-hashes"]={type:"geojson",data:{type:"FeatureCollection",features:[]}},n.each(m,(function(e,t){e.tiles&&e.tiles.forEach((function(t,n){t.startsWith("/")&&(e.tiles[n]=window.location.origin+t)}))}));var g,x={};switch(n.each(f.datatypes,(function(e){x[e.datatype]=e}),this),n.each(f.geom_nodes,(function(e){v.geomNodes.push(new d({url:a.urls.node_layer,loading:v.loading,permissions:f.node_permissions[e.nodeid],source:e,datatypelookup:x,icons:f.icons,layer:n.find(f.resource_map_layers,(function(t){return t.nodeid===e.nodeid})),mapSource:n.find(f.resource_map_sources,(function(t){return t.nodeid===e.nodeid})),graph:n.find(f.graphs,(function(t){return t.graphid===e.graph_id}))}))})),window.location.hash){case"#basemaps":g=v.basemaps;break;case"#overlays":g=v.overlays;break;default:g=v.geomNodes}v.selectedList(g),v.selection=t.observable(t.unwrap(g)[0]||null),v.selectedLayerJSON=t.computed({read:function(){return v.selection()&&v.selection().maplayerid?v.selection().layerJSON():"[]"},write:function(e){v.selection()&&v.selection().maplayerid&&v.selection().layerJSON(e)}});var y=JSON.parse(v.selectedLayerJSON()),w=getBasemapLayers();v.mapStyle={version:8,name:"Basic",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template"},sources:m,sprite:a.mapboxSprites,glyphs:a.mapboxGlyphs,layers:w.concat(y)};var k=t.observable(null),S=t.observable(null),_=p(k),updateSearchResultsLayer=function(){if(v.map&&k()){var e=v.map.getSource("search-results-hex"),a=v.map.getSource("search-results-hashes");if(e&&a){var l=function(){var e=t.unwrap(k);if(!e||!e.geo_aggs.grid.buckets)return{type:"FeatureCollection",features:[]};var a=[];n.each(e.geo_aggs.grid.buckets,(function(e){var t=s.decode(e.key),n=i.point([t.lon,t.lat],{doc_count:e.doc_count});a.push(n)}));var l=i.featureCollection(a),d=i.collect(t.unwrap(_),l,"doc_count","doc_count");return n.each(d.features,(function(e){e.properties.doc_count=n.reduce(e.properties.doc_count,(function(e,t){return e+t}),0)})),{points:l,agg:d}}();e.setData(l.agg),a.setData(l.points)}!function(){var e=v.map.getSource("search-results-points");if(v.map&&e){var a=t.unwrap(S);if(!a||!a.results)return{type:"FeatureCollection",features:[]};var s=[];n.each(a.results.hits.hits,(function(e){n.each(e._source.points,(function(t){var a=i.point([t.point.lon,t.point.lat],n.extend(e._source,{resourceinstanceid:e._id,highlight:!1}));s.push(a)}))}));var l=i.featureCollection(s);e.setData(l)}}()}};v.setupMap=function(e){v.map=e,e.on("moveend",(function(t){if(t.originalEvent){var n=e.getCenter(),a=e.getZoom();v.zoom()!==a&&v.zoom(a),v.centerX(n.lng),v.centerY(n.lat)}})),k.subscribe(updateSearchResultsLayer),t.isObservable(_)&&_.subscribe(updateSearchResultsLayer),updateSearchResultsLayer()},e.ajax({dataType:"json",url:a.urls.search_results,data:{"paging-filter":1},success:function(e){e.results.aggregations.geo_aggs=e.results.aggregations.geo_aggs.inner.buckets[0],k(e.results.aggregations),S(e)}});var updateMapStyle=function(){var e;try{e=JSON.parse(v.selectedLayerJSON())}catch(t){e=[]}var t=getBasemapLayers();v.selection()&&v.selection().isoverlay?v.mapStyle.layers=t.concat(e):v.mapStyle.layers=e,v.map&&(v.map.setStyle(v.mapStyle),updateSearchResultsLayer())};v.selectedBasemapName.subscribe(updateMapStyle),v.selection.subscribe(updateMapStyle),v.selectedLayerJSON.subscribe(updateMapStyle),v.selectedList.subscribe((function(e){var n=null,a=t.unwrap(e);a&&a.length>0&&(n=a[0]),v.selection(n)})),v.listFilter=t.observable(""),v.listItems=t.computed((function(){var e=v.listFilter().toLowerCase(),a=t.unwrap(v.selectedList());return n.filter(a,(function(t){var n=t.nodeid?t.config.layerName()?t.config.layerName():t.layer.name:t.name();return(n=n.toLowerCase()).indexOf(e)>-1}))}));var addMapConfig=function(e,n){v[e]=t.computed({read:function(){var t,a=v.selection();return a&&a[e]&&(t=a[e]()),t||n},write:function(t){var a=v.selection();t=t===n?null:t,a&&a[e]&&a[e](t)}})};addMapConfig("centerX",a.mapDefaultX),addMapConfig("centerY",a.mapDefaultY),addMapConfig("zoom",a.mapDefaultZoom);var T=new l({viewModel:v});return T}.apply(t,a))||(e.exports=i)},76242:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#pluginData").getAttribute("pluginData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},54150:function(e,t,n){var a,i;a=[n(54922),n(94333),n(76242),n(83994)],void 0===(i=function(e,t,n){return n.config||(n.config={}),n.config.loading=e.observable(!1),n.config.alert=e.observable(null),n.config.plugin=n,new t({viewModel:{loading:n.config.loading,alert:n.config.alert,plugin:n}})}.apply(t,a))||(e.exports=i)},56433:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#profileManagerData").getAttribute("profileManagerData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},25517:function(e,t,n){Promise.all([n.e(3556),n.e(2171)]).then((function(){var e=[n(20198),n(84490),n(54922),n(46186),n(94333),n(84714)];(function(e,t,n,a,i){return new(i.extend({initialize:function(e){var s=this;t.defaults(this.viewModel,{showFind:n.observable(!1),graphId:n.observable(null),arches:a}),this.viewModel.graphId.subscribe((function(e){e&&""!==e&&s.viewModel.navigate(a.urls.add_resource(e))})),i.prototype.initialize.call(this,e)}}))}).apply(null,e)})).catch(n.oe)},29379:function(e,t,n){Promise.all([n.e(3556),n.e(2171),n.e(3094)]).then((function(){var e=[n(20198),n(84490),n(54922),n(84826),n(94333),n(83094),n(84714)];(function(e,t,n,a,i,s){return new(i.extend({initialize:function(e){var l=this,d=s.cards,c=s.edits,p={create:{icon:"fa fa-chevron-circle-right fa-lg",color:"bg-mint"},"tile edit":{icon:"fa fa-repeat fa-lg",color:"bg-purple"},"tile create":{icon:"fa fa-plus fa-lg",color:"bg-dark"},"tile delete":{icon:"fa fa-minus fa-lg",color:"bg-danger"},"delete edit":{icon:"fa fa-minus fa-lg",color:"bg-danger"}},f=function handleChildCards(e){e.cards.length>0&&t.each(e.cards,(function(n){t.each(t.where(c,{nodegroupid:n.nodegroup_id}),(function(t){t.card=n,t.cardContainerName=e.name})),handleChildCards(n)}),this)};!function(){t.each(d,(function(e){t.each(t.where(c,{nodegroupid:e.nodegroup_id}),(function(t){t.card=e,t.cardContainerName=null})),f(e)}),this)}();var createFullValue=function(e,n){var a={};function rounder(e,t){return"number"==typeof t?Math.round(1e7*t)/1e7:t}return t.each(e,(function(e,i){t.isObject(e)&&e.features&&(e=t.map(e.features,(function(e){return JSON.stringify(e.geometry,rounder,4)}))),a[i]={new_value:e},n.card&&t.each(n.card.nodes,(function(e){i==e.nodeid&&(a[e.nodeid].node=e)}),this)})),t.map(a,(function(e,t){return e}))};t.each(c,(function(e){var t=a(e.timestamp);e.time=t.format("HH:mm"),e.day=t.format("DD MMMM, YYYY"),e.editor=""!=e.user_email?e.user_email:e.user_username,e.edit_type_icon=p[e.edittype],e.nodegroupid&&(e.full_new_value=createFullValue(e.newvalue,e),e.full_old_value=createFullValue(e.oldvalue,e),e.full_new_provisional_value=createFullValue(e.newprovisionalvalue,e),e.full_old_provisional_value=createFullValue(e.oldprovisionalvalue,e))})),this.viewModel.displayname=s.displayname,this.viewModel.description=s.description,this.viewModel.sortOrder=n.observable("time_desc"),this.viewModel.edits=n.observableArray(c),this.viewModel.edits.sort((function(e,t){return e.timestamp==t.timestamp?0:e.timestamp>t.timestamp?-1:1})),this.viewModel.currentDate=a().format("MMMM D, YYYY"),this.viewModel.sortOrder.subscribe((function(e){var t={time_desc:{property:"timestamp",direction:"gt"},time_asc:{property:"timestamp",direction:"lt"},editor_asc:{property:"user_email",direction:"lt"},type_desc:{property:"edittype",direction:"gt"}},n=t[e].property;"gt"==t[e].direction?l.viewModel.edits.sort((function(e,t){return e[n]==t[n]?0:e[n]>t[n]?-1:1})):l.viewModel.edits.sort((function(e,t){return e[n]==t[n]?0:e[n]<t[n]?-1:1}))})),i.prototype.initialize.call(this,e)}}))}).apply(null,e)})).catch(n.oe)},84241:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(46186),n(10762),n(94333),n(62666),n(20346),n(12340),n(70147),n(56321),n(85725),n(37347),n(89910),n(44050),n(84826)],void 0===(i=function(e,t,a,i,s,l,d,c,p,f,v,h,b){var m={"after-update":[],"tile-reset":[]},g=b.tiles,x=a.observable(""),y=a.observable(!1),w=a.observable("root"),k=a.observable(),S=void 0;try{"string"==typeof b.displayname&&(S=JSON.parse(b.displayname))}catch(e){}var _=void 0;if(S){var T,C,I,$,j=null===(T=S)||void 0===T||null===(C=T[i.activeLanguage])||void 0===C?void 0:C.value;_=j||"("+(null===(I=S[null===($=Object.keys(S).filter((function(e){return e!=i.activeLanguage})))||void 0===$?void 0:$[0]])||void 0===I?void 0:I.value)+")"}else _=b.displayname;var P=a.observable(_),O=a.observable(b.resourceid),A=a.observable(b.appliedFunctions),D=a.observable(b.primaryDescriptorFunction),N=b.useriscreator,E=b.creator,L=a.computed((function(){var e=w();if(e&&"string"!=typeof e)return e.tileid?e:e.getNewTile()})),R=new h({tile:L,reviewer:b.user_is_reviewer}),M=function flattenTree(e,n){return t.each(a.unwrap(e),(function(e){n.push(e);var t=e.tiles?"tiles":"cards";flattenTree(a.unwrap(e[t]),n)})),n},toggleAll=function(e){var n=M(z.topCards,[]);t.each(n,(function(t){t.expanded(e)})),e&&z.rootExpanded(!0)},createLookup=function(e,n){return t.reduce(e,(function(e,t){return e[t[n]]=t,e}),{})},V=new p({data:{nodes:b.nodes,nodegroups:b.nodegroups,edges:[]},datatypes:b.datatypes}),G=t.filter(b.cards,(function(e){var n=t.find(b.nodegroups,(function(t){return t.nodegroupid===e.nodegroup_id}));return n&&!n.parentnodegroup_id})).sort((function(e,t){return e.sortorder<t.sortorder?-1:e.sortorder===t.sortorder?0:1})).map((function(e){return new v({card:e,graphModel:V,tile:null,resourceId:O,displayname:P,handlers:m,cards:b.cards,tiles:g,appliedFunctions:A(),primaryDescriptorFunction:D(),selection:w,scrollTo:k,loading:y,filter:x,provisionalTileViewModel:R,cardwidgets:b.cardwidgets,userisreviewer:b.userisreviewer})}));G.forEach((function(e){e.topCards=G}));var z={loading:y,scrollTo:k,filterEnterKeyHandler:function(e,n){if(13===n.keyCode){var a=t.filter(M(z.topCards,[]),(function(e){return e.highlight&&e.highlight()})),i=k();if(k(null),a.length>0){var s=0,l=a.indexOf(i);i&&a[l+1]&&(s=l+1),k(a[s])}return!1}return!0},widgetLookup:createLookup(b.widgets,"widgetid"),cardComponentLookup:createLookup(b.cardComponents,"componentid"),nodeLookup:createLookup(V.get("nodes")(),"nodeid"),graphid:b.graphid,graphname:b.graphname,issystemsettings:b.issystemsettings,reviewer:b.userisreviewer,graphiconclass:b.graphiconclass,relationship_types:b.relationship_types,userIsCreator:N,showGrid:a.observable(!1),creator:E,graph:{graphid:b.graphid,name:b.graphname,iconclass:b.graphiconclass,ontologyclass:b.ontologyclass},displayname:P,expandAll:function(){toggleAll(!0)},collapseAll:function(){toggleAll(!1)},toggleGrid:function(){z.showGrid(!z.showGrid())},activeLanguageDir:a.observable(i.activeLanguageDir),rootExpanded:a.observable(!0),topCards:G,selection:w,selectedTile:L,selectedCard:a.computed((function(){var e=w();if(e&&"string"!=typeof e)return e.tileid?e.parent:e})),addableCards:a.computed((function(){var e=L();return t.filter(e?e.cards:[],(function(e){return e.canAdd()}))})),provisionalTileViewModel:R,filter:x,on:function(e,t){m[e]&&m[e].push(t)},resourceId:O,reportLookup:s,copyResource:function(){b.graph&&!b.graph.publication_id?z.alert(new d("ep-alert-red",i.translations.resourceHasUnpublishedGraph.title,i.translations.resourceHasUnpublishedGraph.text,null,(function(){}))):O()?(z.menuActive(!1),y(!0),e.ajax({type:"GET",url:i.urls.resource_copy.replace("//","/"+O()+"/"),success:function(e){z.alert(new d("ep-alert-blue",i.translations.resourceCopySuccess.title,"<a style='color: #fff; font-weight: 700;' target='_blank' href="+i.urls.resource_editor+e.resourceid+">"+i.translations.resourceCopySuccess.text+"</a>",null,(function(){})))},error:function(){z.alert(new d("ep-alert-red",i.translations.resourceCopyFailed.title,i.translations.resourceCopyFailed.text,null,(function(){})))},complete:function(){y(!1)}})):z.alert(new d("ep-alert-red",i.translations.resourceCopyFailed.title,i.translations.resourceCopyFailed.text,null,(function(){})))},deleteResource:function(){O()&&(z.menuActive(!1),z.alert(new d("ep-alert-red",i.translations.confirmResourceDelete.title,i.translations.confirmResourceDelete.text,(function(){}),(function(){y(!0),e.ajax({type:"DELETE",url:i.urls.resource_editor+O(),error:function(e){z.alert(new c("ep-alert-red",e.responseJSON))},complete:function(e,t){y(!1),"success"===t&&z.navigate(i.urls.resource)}})}))))},viewEditHistory:function(){O()&&(z.menuActive(!1),z.navigate(i.urls.get_resource_edit_log(O())))},viewReport:function(e){if(O()){var t=i.urls.resource_report+O();e&&(t+="?print"),z.menuActive(!1),window.open(t,"_blank")}}};return z.selectedTile.subscribe((function(){e(".main-panel")[0].scrollTop=0})),z.report=null,z.report=new f(t.extend(b,{graphModel:V,cards:z.topCards})),z.resourceId.subscribe((function(){history.pushState({},"",i.urls.resource_editor+O())})),z.showRelatedResourcesManager=function(){Promise.resolve().then((function(){var t=[n(76806)];(function(){null==z.graph.domain_connections?e.ajax({url:i.urls.relatable_resources,data:{graphid:z.graphid}}).done((function(t){z.graph.relatable_resources=t,e.ajax({url:i.urls.get_domain_connections(z.graphid),data:{ontology_class:z.graph.ontologyclass}}).done((function(e){z.graph.domain_connections=e,z.relatedResourcesManagerObj={searchResultsVm:void 0,resourceEditorContext:!0,editing_instance_id:z.resourceId(),relationship_types:z.relationship_types,graph:z.graph,loading:z.loading},z.selection("related-resources")}))})):z.selection("related-resources")}).apply(null,t)})).catch(n.oe)},z.showInstancePermissionsManager=function(){Promise.resolve().then((function(){var e=[n(29438)];(function(){!0!==z.userIsCreator&&null!==z.userIsCreator||z.selection("permissions-manager")}).apply(null,e)})).catch(n.oe)},z.selectionBreadcrumbs=a.computed((function(){var e=z.selectedTile(),t=[];if(e)for(;e.parent;)e=e.parent,t.unshift(e);return t})),new l({viewModel:z})}.apply(t,a))||(e.exports=i)},29438:function(e,t,n){var a,i;a=[n(20198),n(54922),n(58420),n(46186),n(62666),n(91566),n(87720)],void 0===(i=function(e,t,n,a,i,s){return t.components.register("permissions-manager",{viewModel:function(s){var l=this;this.instancePermissions=t.observable(),this.resourceId=s.resourceId(),this.alert=s.alert,this.openEditor=t.observable(void 0),this.identities=t.observableArray(),this.filter=t.observable(""),this.dirty=t.observable(!1),this.creatorid=s.creator,this.alertTitle=s.alertTitle,this.alertMessage=s.alertMessage,this.permissionLabelLookup=s.permissionLabelLookup,this.getInstancePermissions=function(){e.ajax({url:a.urls.resource_permission_data,data:{instanceid:t.unwrap(l.resourceId)}}).done((function(e){l.openEditor(e.limitedaccess);var t=l.initPermissions(e);l.instancePermissions(t)}))},this.updatePermissions=function(){if(t.unwrap(l.dirty)){var i={selectedIdentities:[],selectedInstances:[{resourceinstanceid:t.unwrap(this.resourceId)}],instanceid:t.unwrap(l.resourceId)};l._currentPermissions.identities.forEach((function(e){var t=e.default_permissions.map((function(e){return{codename:e.codename}}));i.selectedIdentities.push({type:e.type,id:e.id,selectedPermissions:t})})),e.ajax({type:"POST",url:a.urls.resource_permission_data,data:JSON.stringify(i)}).done((function(e){l._startPermissions=JSON.stringify(e),l._currentPermissions=JSON.parse(l._startPermissions),l.dirty(n.toJSON(l._currentPermissions)!==l._startPermissions)}))}},this.revertPermissions=function(){t.unwrap(l.dirty)&&JSON.parse(l._startPermissions).identities.forEach((function(e){if(Number(e.id)===Number(l.creatorid)&&"user"==e.type);else{var t=e.default_permissions.map((function(e){return e.codename}));l.instancePermissions().identities.forEach((function(n){n.id===e.id&&n.type===e.type&&n.availablePermissions.forEach((function(e){var n=t.indexOf(e.codename)>-1;e.selected()!==n&&e.selected(n)}))}))}}))},this.removePermission=function(e,t){var n=e.findIndex((function(e){return e.codename===t}));e.splice(n,1)},this.checkDirty=function(e,t){return!e.identities.every((function(e,n){var a=e.default_permissions,i=t.identities[n].default_permissions;return JSON.stringify(a.map((function(e){return e.id})).sort())===JSON.stringify(i.map((function(e){return e.id})).sort())}))},this.updateState=function(e,t,n,a){l._currentPermissions.identities.forEach((function(i){if(i.type===n&&i.id===t)if(e){var s=l.filteredPermissions().find((function(e){return e.type===n&&e.id===t}));"no_access_to_resourceinstance"===a.codename?(i.default_permissions=[],s.availablePermissions.forEach((function(e){"no_access_to_resourceinstance"!==e.codename&&e.selected(!1)}))):s.availablePermissions.forEach((function(e){"no_access_to_resourceinstance"===e.codename&&e.selected(!1)})),i.default_permissions.push(a)}else l.removePermission(i.default_permissions,a.codename)}),l),l.dirty(l.checkDirty(l._currentPermissions,JSON.parse(l._startPermissions)))},this.initPermissions=function(e){return l._startPermissions=JSON.stringify(e),l._currentPermissions=JSON.parse(l._startPermissions),l._permissionLookup={},e.permissions.forEach((function(e){l._permissionLookup[e.codename]=e})),e.identities.forEach((function(n){n.selected=t.observable(!1),n.creatorOrSuperUser=Number(l.creatorid)===Number(n.id)&&"user"===n.type,n.availablePermissions=JSON.parse(JSON.stringify(e.permissions)).filter((function(e){if("change_resourceinstance"===e.codename||"delete_resourceinstance"===e.codename){if("user"===n.type){if(n.creatorOrSuperUser||n.is_editor_or_reviewer)return!0}else if("Resource Editor"===n.name||"Resource Reviewer"===n.name)return!0;return!1}return!0}));var a=n.default_permissions.map((function(e){return e.codename})),i={view_resourceinstance:"ion-ios-book",change_resourceinstance:"ion-edit",no_access_to_resourceinstance:"ion-close",delete_resourceinstance:"ion-android-delete"};n.availablePermissions.forEach((function(e){e.icon=i[e.codename];var s=a.indexOf(e.codename)>-1;e.selected=t.observable(s),e.selected.subscribe((function(t){l.updateState(t,n.id,n.type,l._permissionLookup[e.codename])}))}))})),e},this.filteredPermissions=t.pureComputed((function(){var e=[];return t.unwrap(l.instancePermissions)&&(e=l.instancePermissions().identities.filter((function(e){return e.name.toLowerCase().includes(l.filter().toLowerCase())}),this)),e}),this).extend({deferred:!0}),this.makeInstancePrivate=function(){e.ajax({type:"POST",url:a.urls.resource_permission_data,data:{instanceid:s.resourceId,action:"restrict",graphid:s.graphId}}).done((function(e){l.openEditor(e.limitedaccess);var t=l.initPermissions(e);l.instancePermissions(t)}))},this.makeInstancePublic=function(){this.alert(new i("ep-alert-red",this.alertTitle,this.alertMessage,(function(){}),(function(){e.ajax({type:"POST",url:a.urls.resource_permission_data,data:{instanceid:s.resourceId,action:"open",graphid:s.graphId}}).done((function(e){var t=l.initPermissions(e);l.instancePermissions(t),l.openEditor(e.limitedaccess)}))})))},this.getInstancePermissions()},template:s})}.apply(t,a))||(e.exports=i)},76806:function(e,t,n){var a,i;a=[n(20198),n(84490),n(86564),n(54922),n(58420),n(46186),n(57424),n(95368),n(37395),n(62972),n(91221),n(74729),n(92387),n(54077)],void 0===(i=function(e,t,n,a,i,s,l,d,c,p){var f=n.View.extend({initialize:function(n){var l=this;this.searchResults=n.searchResultsVm,this.editingInstanceId=n.editing_instance_id,this.graph=n.graph,this.urls=s.urls,this.loading=n.loading,this.rootOntologyClass="",this.activeTab=a.observable(),this.graph&&(n.graph.ontologyclass?this.rootOntologyClass=n.graph.ontologyclass:n.graph.root&&(this.rootOntologyClass=n.graph.root.ontologyclass)),this.graphIsSemantic=!!this.rootOntologyClass,this.makeFriendly=c.makeFriendly,this.getSelect2ConfigForOntologyProperties=c.getSelect2ConfigForOntologyProperties,this.graphNameLookup=t.indexBy(s.resources,"graphid"),this.currentResource=a.observable(),this.currentResourceSubscriptions=[],this.resourceEditorContext=n.resourceEditorContext,this.containerBottomMargin=a.observable(0),this.showRelatedProperties=a.observable(!1),this.showGraph=a.observable(void 0===this.editingInstanceId),this.displaySplash=a.observable(!1),this.graphNodeSelection=a.observableArray(),this.graphNodeList=a.observableArray(),this.newResource=a.observableArray(),this.filter=a.observable(""),this.selectedResourceRelationship=a.observable(),this.relationshipCandidates=a.observableArray([]),this.relationshipCandidateIds=a.observable([]),this.selectedOntologyClass=a.observable(),this.reportResourceId=a.observable(),this.reportGraphId=a.observable(null),this.resourceRelationships=a.observableArray(),this.paginator=i.fromJS({}),this.totalRelationships=a.observable(0),this.relationshipsInFilter=a.computed((function(){return l.resourceRelationships().filter((function(e){return""===l.filter().toLowerCase()||e.resource.displayname.toLowerCase().includes(l.filter().toLowerCase())}))})),this.toggleTab=function(e){l.activeTab()===e?l.activeTab(null):l.activeTab(e)},this.toggleSelectedResourceRelationship=function(e){l.selectedResourceRelationship()===e?l.selectedResourceRelationship(null):l.selectedResourceRelationship(e)},this.selectedResourceRelationship.subscribe((function(e){e?l.selectedOntologyClass(e.resource.root_ontology_class):l.selectedOntologyClass(void 0)})),this.selectedOntologyClass.subscribe((function(){l.graphIsSemantic?l.relationshipTypes(l.validproperties[l.selectedOntologyClass()]):l.relationshipTypes(n.relationship_types.values)})),this.disableSearchResults=function(e){var n=this.editingInstanceId,a=this.graph;return e._id===n||!1===t.contains(a.relatable_resources,e._source.graph_id)},this.selected=a.computed((function(){var e=t.filter(l.resourceRelationships(),(function(e){if(!0===e.selected())return e}),l);return l.graphIsSemantic&&!0===l.resourceEditorContext&&(e.length>0&&l.graphIsSemantic?(l.selectedOntologyClass(e[0].resource.root_ontology_class),l.resourceRelationships().forEach((function(e){e.resource.root_ontology_class!==l.selectedOntologyClass()&&e.unselectable(!0)}))):(l.selectedOntologyClass(void 0),l.resourceRelationships().forEach((function(e){e.unselectable(!1)})))),e})),this.dirty=a.computed((function(){return l.resourceRelationships().some((function(e){return e.dirty()}),l)})),this.newPage=function(e,t){e&&this.currentResource().get(e)};this.createResource=function(l){var d=this;return{resourceinstanceid:l,relatedresources:a.observableArray(),relationships:a.observableArray(),resourceRelationships:a.observableArray(),paging:a.observable(),parse:function(n,l){var c=n.related_resources,p=[],f=c.related_resources;c.resource_relationships.forEach((function(n){var d=t.filter(f,(function(e){if(t.contains([n.resourceinstanceidto,n.resourceinstanceidfrom],e.resourceinstanceid))return e}));(n=i.fromJS(n)).node={name:a.observable(),ontologyclass:a.observable()},n.reset=function(){i.fromJS(JSON.parse(this._json()),n)},n._json=a.observable(JSON.stringify(i.toJS(n))),n.dirty=a.computed((function(){return JSON.stringify(i.toJS(n))!==n._json()})),n.selected=a.observable(!1),n.unselectable=a.observable(!1),n.updateSelection=function(e){return function(e){var t=l;t.graphIsSemantic&&(!t.graphIsSemantic||t.selectedOntologyClass()!==e.resource.root_ontology_class&&t.selectedOntologyClass())||e.selected(!e.selected())}},n.nodeid()&&function(t,n){e.ajax({url:s.urls.api_nodes(t),context:this,dataType:"json"}).done((function(e){n.node.name(e[0].name),n.node.ontologyclass(e[0].ontologyclass)})).fail((function(e){console.log("Failed to get Node data",e)}))}(n.nodeid(),n),n.resource=d.length>0?d[0]:"",n.resource&&(n.iconclass=l.graphNameLookup[n.resource.graph_id].icon),p.push(n)}),this);var v=t(p).chain().sortBy((function(e){return e.created})).value().reverse();this.paging(n.paginator),this.resourceRelationships(v),this.displayname=c.resource_instance.displayname,this.graphid=c.resource_instance.graph_id,d.totalRelationships(c.total.value)},get:function(n){var a=n||1;e.ajax({url:s.urls.related_resources+l,context:this,dataType:"json",data:{page:a}}).done((function(e){d.graphNameLookup=t.indexBy(s.resources,"graphid"),this.parse(e,d),d.newResource(this)})).fail((function(e){console.log("Related resource request failed",e)}))},save:function(t,a,i){this.defaultRelationshipType=n.relationship_types.default,a.relationshiptype||(a.relationshiptype=n.relationship_types.default);var c={relationship_properties:a,instances_to_relate:t,root_resourceinstanceid:l,relationship_ids:i};e.ajax({url:s.urls.related_resources,data:c,context:this,type:"POST",dataType:"json"}).done((function(e){this.parse(e,d)})).fail((function(e){console.log("Related resource request failed",e)}))},delete:function(t){var n={resourcexids:t,root_resourceinstanceid:l};e.ajax({url:s.urls.related_resources+"?"+e.param(n),type:"DELETE",context:this,dataType:"json"}).done((function(e){this.parse(e,d)})).fail((function(e){console.log("Related resource request failed",e)}))}}},!0===this.resourceEditorContext?(this.relationshipTypes=a.observableArray(),this.graphIsSemantic||this.relationshipTypes(n.relationship_types.values),this.validproperties={},this.graph.domain_connections.forEach((function(e){e.ontology_classes.forEach((function(t){this.validproperties[t]?this.validproperties[t].push({id:e.ontology_property,text:e.ontology_property}):this.validproperties[t]=[]}),this)}),this),t.each(this.validproperties,(function(e){e.sort((function(e,t){return e.id>t.id?1:-1}))})),this.relationshipTypePlaceholder=a.observable("Select a Relationship Type"),this.relatedProperties=i.fromJS({datestarted:"",dateended:"",relationshiptype:void 0,notes:""}),this.currentResource(l.createResource(this.editingInstanceId)),this.getRelatedResources(),this.currentResource().resourceRelationships.subscribe((function(e){this.resourceRelationships(e),0===e.length&&this.displaySplash(!0)}),this),this.currentResource().paging.subscribe((function(e){i.fromJS(e,this.paginator)}),this)):(this.searchResults.relationshipCandidates.subscribe((function(e){e.length>0&&this.saveRelationships(e)}),this),this.searchResults.showRelationships.subscribe((function(e){this.currentResource(this.createResource(e.resourceinstanceid)),this.getRelatedResources(),this.currentResource().resourceRelationships.subscribe((function(e){this.resourceRelationships(e)}),this),this.currentResource().paging.subscribe((function(e){i.fromJS(e,this.paginator)}),this)}),this));var d=a.observable(s.urls.search_results);this.url=d,this.select2Config={placeholder:"Search for resources",value:this.relationshipCandidateIds,clickBubble:!0,multiple:!1,closeOnSelect:!0,allowClear:!0,disabled:this.disabled,ajax:{url:function(){return d()},dataType:"json",quietMillis:250,data:function(e,t){if(e.startsWith("http"))return d(e.replace("search","search/resources")),{};d(s.urls.search_results);var n={"paging-filter":t};return l.graph.relatable_resources.length>0&&(n["resource-type-filter"]=JSON.stringify(l.graph.relatable_resources.map((function(e){return{graphid:e,inverted:!1}})))),e&&(n["term-filter"]=JSON.stringify([{inverted:!1,type:"string",context:"",context_label:"",id:e,text:e,value:e}])),n},results:function(e,t){return{results:e.results.hits.hits,more:e["paging-filter"].paginator.has_next}}},onSelect:function(t){e.ajax(s.urls.related_resource_candidates,{dataType:"json",data:{resourceids:t._id}}).done((function(e){l.relationshipCandidates(e),l.saveRelationships(),l.relationshipCandidateIds(null)}))},id:function(e){return e._id},formatResult:function(e){return!1===l.disableSearchResults(e)?e._source?e._source.displayname:"<b> Create a new "+e.name+" . . . </b>":"<span>"+e._source.displayname+" Cannot be related</span>"},formatResultCssClass:function(e){return!1===l.disableSearchResults(e)?"":"disabled"},formatSelection:function(e){return e._source?e._source.displayname:e.name},initSelection:function(e,t){}}},deleteRelationships:function(e){var n,a=this.currentResource();n=e?[e.resourcexid]:t.pluck(this.selected(),"resourcexid"),a.delete(n)},saveRelationship:function(e){this.currentResource().save([],i.toJS(e),[e.resourcexid()])},saveRelationships:function(){var e=t.pluck(this.relationshipCandidates(),"resourceinstanceid"),n=t.pluck(this.selected(),"resourcexid"),a=this.currentResource();this.relationshipCandidates().forEach((function(e){!this.relatedProperties.relationshiptype()&&e.ontologyclass&&this.validproperties[e.ontologyclass]?this.relatedProperties.relationshiptype(this.validproperties[e.ontologyclass][0].id):this.relatedProperties.relationshiptype(this.defaultRelationshipType)}),this),(e.length>0||n.length>0)&&(a.save(e,i.toJS(this.relatedProperties),n),e.length>0&&this.relationshipCandidates.removeAll()),this.relatedProperties.relationshiptype(void 0)},getRelatedResources:function(){var e=this.currentResource();e.get(),this.resourceRelationships(e.resourceRelationships())},updateTile:function(e,t){var n=this;n.loading(!0),window.fetch(s.urls.api_tiles(t.tileid()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(a){var l=[],d=a.data;d[t.nodeid()].forEach((function(e){e.resourceXresourceId===t.resourcexid()?(e.ontologyProperty=t.relationshiptype(),e.inverseOntologyProperty=t.inverserelationshiptype()):l.push(e)})),e.delete&&(d[t.nodeid()]=l),window.fetch(s.urls.api_tiles(t.tileid()),{method:"POST",credentials:"include",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(a){a.ok&&(t._json(JSON.stringify(i.toJS(t))),e.delete&&window.setTimeout((function(){n.newPage(1),n.loading(!1)}),1e3))})).catch((function(e){console.log("Tile update failed",e),n.loading(!1)}))})).catch((function(e){console.log("Tile update failed",e),n.loading(!1)}))}});return a.components.register("related-resources-manager",{viewModel:f,template:p})}.apply(t,a))||(e.exports=i)},95368:function(e,t,n){var a,i;a=[n(84490),n(54922),n(46186),n(91429)],void 0===(i=function(e,t,n,a){return a.extend({initialize:function(a){var i=this;a.items&&(this.items=a.items),a.items&&(this.groups=a.groups);var initializeItem=function(e){var n=i.items().length>0?1:0;e.filtered||(e.filtered=t.observable(!1)),e.selected||(e.selected=t.observable(!1)),e.hovered||(e.hovered=t.observable(!1)),e.total||(e.total=t.observable(n)),e.loaded||(e.loaded=t.observable(n)),e.loadcount||(e.loadcount=t.observable(0))};this.items.subscribe((function(e){e.forEach(initializeItem,this)}),this),this.filterFunction&&(this.filter=t.observable(""),this.filter.subscribe(this.filterFunction,this,"change"),this.filterFunction()),this.selectNode=function(t){e.each(i.selectedItems(),(function(e){this.entityid!=e.entityid&&e.selected(!1)}),this),t.selected(!t.selected())},this.hoverNode=function(e){!1===e.hovered()?e.hovered(!0):e.hovered(!1)},this.reportURL=n.urls.resource_report,this.editURL=n.urls.resource_editor,this.selectedItems=t.computed((function(){return this.items().filter((function(e){return initializeItem(e),e.selected()}),this)}),this)}})}.apply(t,a))||(e.exports=i)},83094:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#resourceEditHistoryData").getAttribute("resourceEditHistoryData");return JSON.parse(e.replace(/,\s*}*$/,"}"))}.apply(t,[]))||(e.exports=n)},37347:function(e,t){var n;void 0===(n=function(){var e=document.querySelector("#resourceEditorData").getAttribute("resourceEditorData"),t=JSON.parse(e.replace(/,\s*}*$/,"}"));return t.relationship_types=JSON.parse(function(e){return e.replace(/'/g,'"')}(t.relationship_types)),t.creator=JSON.parse(t.creator),t.userisreviewer=Boolean("True"===t.userisreviewer),t.useriscreator=["true","True"].includes(t.useriscreator),t}.apply(t,[]))||(e.exports=n)},6755:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(62666),n(38814),n(94333),n(3460)],void 0===(i=function(e,t,n,a,i,s,l,d){n.subscribable.fn.subscribeChanged=function(e,t){var n=this.peek();return this.subscribe((function(a){var i=n;n=a,e.call(t,a,i)}))};var CommonSearchViewModel=function(){this.filters={},this.filtersList=t.sortBy(Object.values(l),(function(e){return e.sortorder}),this),Object.values(l).forEach((function(e){this.filters[e.componentname]=n.observable(null)}),this);var e=t.find(this.filtersList,(function(e){return"filter"===e.type&&!0===e.enabled}),this);this.selectedTab=n.observable(e.componentname),this.selectedPopup=n.observable(""),this.resultsExpanded=n.observable(!0),this.query=n.observable(t.chain(decodeURIComponent(location.search).slice(1).split("&")).map((function(e){if(e)return e.split("=")})).compact().object().value()),this.clearQuery=function(){Object.values(this.filters).forEach((function(e){e()&&e().clear&&e().clear()}),this),this.query({"paging-filter":"1",tiles:"true"})},this.filterApplied=n.pureComputed((function(){var e=this;return Object.keys(this.filters).some((function(t){return!(!n.unwrap(e.filters[t])||"paging-filter"===t)&&!!n.unwrap(e.filters[t]).query()[t]}))}),this),this.mouseoverInstanceId=n.observable(),this.mapLinkData=n.observable(null),this.userIsReviewer=n.observable(!1),this.userid=n.observable(null),this.searchResults={timestamp:n.observable()},this.selectPopup=function(e){""!==this.selectedPopup()&&e===this.selectedPopup()?this.selectedPopup(""):this.selectedPopup(e)},this.isResourceRelatable=function(e){var n=!1;return this.graph&&(n=t.contains(this.graph.relatable_resource_model_ids,e)),n},this.toggleRelationshipCandidacy=function(){var e=this;return function(n){t.contains(e.relationshipCandidates(),n)?e.relationshipCandidates.remove(n):e.relationshipCandidates.push(n)}}};return new(d.extend({initialize:function(e){this.viewModel.sharedStateObject=new CommonSearchViewModel,this.viewModel.total=n.observable(),t.extend(this,this.viewModel.sharedStateObject),this.viewModel.sharedStateObject.total=this.viewModel.total,this.viewModel.sharedStateObject.loading=this.viewModel.loading,this.viewModel.sharedStateObject.resources=this.viewModel.resources,this.viewModel.sharedStateObject.userCanEditResources=this.viewModel.userCanEditResources,this.viewModel.sharedStateObject.userCanReadResources=this.viewModel.userCanReadResources,this.queryString=n.computed((function(){return JSON.stringify(this.query())}),this),this.queryString.subscribe((function(){this.doQuery()}),this),this.viewModel.loading(!0),d.prototype.initialize.call(this,e)},doQuery:function(){var n=JSON.parse(this.queryString());this.updateRequest&&this.updateRequest.abort(),this.updateRequest=e.ajax({type:"GET",url:i.urls.search_results,data:n,context:this,success:function(e){t.each(this.viewModel.sharedStateObject.searchResults,(function(e,t,n){"timestamp"!==t&&delete this.viewModel.sharedStateObject.searchResults[t]}),this),t.each(e,(function(e,t,n){"timestamp"!==t&&(this.viewModel.sharedStateObject.searchResults[t]=e)}),this),this.viewModel.sharedStateObject.searchResults.timestamp(e.timestamp),this.viewModel.sharedStateObject.userIsReviewer(e.reviewer),this.viewModel.sharedStateObject.userid(e.userid),this.viewModel.total(e.total_results),this.viewModel.alert(!1)},error:function(e,t,n){"abort"!==this.updateRequest.statusText&&this.viewModel.alert(new s("ep-alert-red",i.translations.requestFailed.title,e.responseText))},complete:function(t,a){this.updateRequest=void 0,window.history.pushState({},"","?"+e.param(n).split("+").join("%20"))}})}}))}.apply(t,a))||(e.exports=i)},28275:function(e,t,n){var a,i;a=[n(20198),n(86564),n(16950)],void 0===(i=function(e,t){return t.View.extend({initialize:function(){this.$el.find(".arches_simple_search").select2({minimumResultsForSearch:10})}})}.apply(t,a))||(e.exports=i)},42084:function(e,t,n){var a,i;a=[n(20198),n(86564),n(54922),n(91429)],void 0===(i=function(e,t,n,a){return a.extend({_initializeItem:function(e){e.filtered||(e.filtered=n.observable(!1)),"selectable"in e||(e.selectable=!0),e.selected||(e.selected=n.observable(!1)),e.expanded||(e.expanded=n.observable(!1))},expandAll:function(){this.items().forEach((function(e){e.expanded(!0)}),this)},collapseAll:function(){this.items().forEach((function(e){e.expanded(!1)}),this)}})}.apply(t,a))||(e.exports=i)},46475:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(46186),n(62666),n(94333),n(56433),n(94242)],void 0===(i=function(e,t,n,a,i,s,l,d){var c=l.extend({initialize:function(t){var c=this;c.viewModel.showChangePasswordForm=n.observable(!1),c.viewModel.showEditUserForm=n.observable(!!d.error_count),c.viewModel.validationErrors=n.observableArray(),c.viewModel.invalidPassword=n.observable(),c.viewModel.mismatchedPasswords=n.observable(),c.viewModel.changePasswordSuccess=n.observable(),c.viewModel.notifTypeObservables=n.observableArray(),c.viewModel.isTwoFactorAuthenticationEnabled=d.two_factor_authentication_settings.ENABLE_TWO_FACTOR_AUTHENTICATION,c.viewModel.isTwoFactorAuthenticationForced=d.two_factor_authentication_settings.FORCE_TWO_FACTOR_AUTHENTICATION,c.viewModel.hasUserEnabledTwoFactorAuthentication=n.observable(d.two_factor_authentication_settings.user_has_enabled_two_factor_authentication),c.viewModel.toggleChangePasswordForm=function(){this.showChangePasswordForm(!this.showChangePasswordForm()),this.showChangePasswordForm()&&(c.viewModel.validationErrors([]),c.viewModel.invalidPassword(""),c.viewModel.mismatchedPasswords(""),c.viewModel.changePasswordSuccess(""))},c.viewModel.toggleEditUserForm=function(){this.showEditUserForm(!this.showEditUserForm())},c.viewModel.getNotifTypes=function(){c.viewModel.notifTypeObservables.removeAll(),e.ajax({url:i.urls.get_notification_types,method:"GET"}).done((function(e){var t;e.types.forEach((function(e){t=n.mapping.fromJS(e),c.viewModel.notifTypeObservables.push(t)}))}))},c.viewModel.getNotifTypes(),c.viewModel.updateNotifTypes=function(){var t,a=c.viewModel.notifTypeObservables().map((function(e){return delete(t=n.mapping.toJS(e))._state,t}));e.ajax({url:i.urls.update_notification_types,method:"POST",data:{types:JSON.stringify(a)}})},c.jsonNotifTypes=n.computed((function(){return n.mapping.toJS(c.viewModel.notifTypeObservables)})).extend({throttle:100}),c.jsonNotifTypes.subscribe((function(e){e&&!c.viewModel.loading()&&c.viewModel.notifTypeObservables().length>0&&c.viewModel.updateNotifTypes()})),c.viewModel.credentials=a.fromJS({old_password:"",new_password:"",new_password2:""}),c.viewModel.changePassword=function(){var t=a.toJS(c.viewModel.credentials);e.ajax({url:i.urls.change_password,method:"POST",data:t}).done((function(e){c.viewModel.invalidPassword(e.invalid_password),c.viewModel.mismatchedPasswords(e.mismatched),c.viewModel.validationErrors(e.password_validations),e.success&&(c.viewModel.changePasswordSuccess(e.success),c.viewModel.toggleChangePasswordForm())}))},c.viewModel.alertTwoFactorAuthenticationChange=function(t){c.viewModel.alert(new s("ep-alert-blue",i.translations.confirmSendTwoFactorAuthenticationEmail.title,i.translations.confirmSendTwoFactorAuthenticationEmail.text,(function(){}),(function(){e.ajax({url:i.urls.two_factor_authentication_reset,method:"POST",data:{email:t}}).done((function(){c.viewModel.alert(new s("ep-alert-blue",i.translations.twoFactorAuthenticationEmailSuccess.title,i.translations.twoFactorAuthenticationEmailSuccess.text,null,(function(){})))})).error((function(e){c.viewModel.alert(new s("ep-alert-red",e.statusText,e.responseText))}))})))},l.prototype.initialize.call(this,t)}});return new c}.apply(t,a))||(e.exports=i)},5207:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#widgetData").getAttribute("widgets"),n=JSON.parse(t.replace(/,\s*}*$/,"}"));return e(Object.values(n).map((function(e){return e.component}))),n}.apply(t,a))||(e.exports=i)},74729:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(16950)],void 0===(i=function(e,t,n){return t.bindingHandlers.select2={init:function(a,i,s,l,d){var c=s().select2,p=t.utils.unwrapObservable(c.select2Config),f=p.value;function formatData(e){n.each(e,(function(e){"collector"===e.collector&&delete e.id}))}t.utils.domNodeDisposal.addDisposeCallback(a,(function(){e(a).select2("destroy")})),p.formatResult=function(e){return t.unwrap(e.text)};var v="function"==typeof p.placeholder?p.placeholder:t.observable(p.placeholder);v.subscribe((function(t){p.placeholder=t,e(a).select2("destroy").select2(p)})),p.placeholder=v(),p.data.extend({rateLimit:500}).subscribe((function(t){formatData(t),p.data=t,e(a).select2("destroy").select2(p),e(a).select2("val",p.value)})),p.data=p.data(),formatData(p.data),p.createSearchChoice=function(n,a){if(0===e(a).filter((function(){return 0===t.unwrap(this.text).localeCompare(n)})).length)return{id:n,text:n}},p.getConceptPath=function(e){var t={children:p.data},a=[],i=!1;return function lookForChild(e,s){if(i=!1,n.each(e.children,(function(t){t.conceptid===s&&(i=!0,a.push(e))})),!1===i)for(var l=0;l<e.children.length;l+=1)lookForChild(e.children[l],s);else lookForChild(t,e.conceptid)}(t,e),a},p.formatSelection=function(e){var n=[],a=t.unwrap(e.text);return!0===p.showParents&&(n=this.getConceptPath(e.conceptid)).length>1&&(a=t.unwrap(n[0].text)+": "+t.unwrap(e.text)),a},p.value=f(),e(a).select2(p),e(a).select2("val",f()),e(a).on("change",(function(e){return""===e.val&&(e.val=null),f(e.val)})),t.unwrap(p.disabled)&&e(a).select2("disable"),e(a).on("select2-opening",(function(){p.clickBubble&&e(a).parent().trigger("click")})),f.subscribe((function(t){p.value=t,e(a).select2("val",t)}),this)}},t.bindingHandlers.select2}.apply(t,a))||(e.exports=i)},75297:function(e,t,n){var a,i;a=[n(35605)],i=function(){!function r(e,t,n){function o(i,s){if(!t[i]){if(!e[i]){if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=t[i]={exports:{}};e[i][0].call(d.exports,(function(t){return o(e[i][1][t]||t)}),d,d.exports,r,e,t,n)}return t[i].exports}for(var a=void 0,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,a){(function(n){var a,i,s="undefined"!=typeof window?window.L:void 0!==n?n.L:null;function on(e,t,n,a){t.split(" ").forEach((function(t){s.DomEvent.on(e,t,n,a)}))}function off(e,t,n,a){t.split(" ").forEach((function(t){s.DomEvent.off(e,t,n,a)}))}function getRangeEvent(e){return"oninput"in e?"input":"change"}function cancelMapDrag(){a=this._map.dragging.enabled(),i=this._map.tap&&this._map.tap.enabled(),this._map.dragging.disable(),this._map.tap&&this._map.tap.disable()}function uncancelMapDrag(e){this._refocusOnMap(e),a&&this._map.dragging.enable(),i&&this._map.tap.enable()}function asArray(e){return"undefined"===e?[]:Array.isArray(e)?e:[e]}e("./layout.css"),e("./range.css"),s.Control.SideBySide=s.Control.extend({options:{thumbSize:42,padding:0},initialize:function(e,t,n){this.setLeftLayers(e),this.setRightLayers(t),s.setOptions(this,n)},getPosition:function(){var e=this._range.value,t=(.5-e)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().x*e+t},setPosition:function(){},includes:s.Evented.prototype||s.Mixin.Events,addTo:function(e){this.remove(),this._map=e;var t=this._container=s.DomUtil.create("div","leaflet-sbs",e._controlContainer);this._divider=s.DomUtil.create("div","leaflet-sbs-divider",t);var n=this._range=s.DomUtil.create("input","leaflet-sbs-range",t);return n.type="range",n.min=0,n.max=1,n.step="any",n.value=.5,n.style.paddingLeft=n.style.paddingRight=this.options.padding+"px",this._addEvents(),this._updateLayers(),this},remove:function(){if(!this._map)return this;if(this._leftLayer){var e=this._leftLayer.getContainer();null!=e&&e.style&&(e.style.clip="")}if(this._rightLayer){var t=this._rightLayer.getContainer();null!=t&&t.style&&(t.style.clip="")}return this._removeEvents(),s.DomUtil.remove(this._container),this._map=null,this},setLeftLayers:function(e){return this._leftLayers=asArray(e),this._updateLayers(),this},setRightLayers:function(e){return this._rightLayers=asArray(e),this._updateLayers(),this},_updateClip:function(){var e=this._map,t=e.containerPointToLayerPoint([0,0]),n=e.containerPointToLayerPoint(e.getSize()),a=t.x+this.getPosition(),i=this.getPosition();this._divider.style.left=i+"px",this.fire("dividermove",{x:i});var s="rect("+[t.y,a,n.y,t.x].join("px,")+"px)",l="rect("+[t.y,n.x,n.y,a].join("px,")+"px)";if(this._leftLayer){var d=this._leftLayer.getContainer();null!=d&&d.style&&(d.style.clip=s)}if(this._rightLayer){var c=this._rightLayer.getContainer();null!=c&&c.style&&(c.style.clip=l)}},_updateLayers:function(){if(!this._map)return this;var e=this._leftLayer,t=this._rightLayer;this._leftLayer=this._rightLayer=null,this._leftLayers.forEach((function(e){this._map.hasLayer(e)&&(this._leftLayer=e)}),this),this._rightLayers.forEach((function(e){this._map.hasLayer(e)&&(this._rightLayer=e)}),this),e!==this._leftLayer&&(e&&this.fire("leftlayerremove",{layer:e}),this._leftLayer&&this.fire("leftlayeradd",{layer:this._leftLayer})),t!==this._rightLayer&&(t&&this.fire("rightlayerremove",{layer:t}),this._rightLayer&&this.fire("rightlayeradd",{layer:this._rightLayer})),this._updateClip()},_addEvents:function(){var e=this._range,t=this._map;t&&e&&(t.on("move",this._updateClip,this),t.on("layeradd layerremove",this._updateLayers,this),on(e,getRangeEvent(e),this._updateClip,this),on(e,s.Browser.touch?"touchstart":"mousedown",cancelMapDrag,this),on(e,s.Browser.touch?"touchend":"mouseup",uncancelMapDrag,this))},_removeEvents:function(){var e=this._range,t=this._map;e&&(off(e,getRangeEvent(e),this._updateClip,this),off(e,s.Browser.touch?"touchstart":"mousedown",cancelMapDrag,this),off(e,s.Browser.touch?"touchend":"mouseup",uncancelMapDrag,this)),t&&(t.off("layeradd layerremove",this._updateLayers,this),t.off("move",this._updateClip,this))}}),s.control.sideBySide=function(e,t,n){return new s.Control.SideBySide(e,t,n)},t.exports=s.Control.SideBySide}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./layout.css":2,"./range.css":4}],2:[function(e,t,n){var a=".leaflet-sbs-range {\r\n    position: absolute;\r\n    top: 50%;\r\n    width: 100%;\r\n    z-index: 999;\r\n}\r\n.leaflet-sbs-divider {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 50%;\r\n    margin-left: -2px;\r\n    width: 4px;\r\n    background-color: #fff;\r\n    pointer-events: none;\r\n    z-index: 999;\r\n}\r\n";e("./node_modules/cssify")(a,void 0,"_i6aomd"),t.exports=a},{"./node_modules/cssify":3}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n){var a=t||document;if(a.createStyleSheet){var i=a.createStyleSheet();return i.cssText=e,i.ownerNode}return function(e,t,n){var a=e.getElementById(t);if(a)n(a);else{var i=e.getElementsByTagName("head")[0];a=e.createElement("style"),null!=t&&(a.id=t),n(a),i.appendChild(a)}return a}(a,n,(function(t){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e}))},t.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=e,t.appendChild(n),n}},{}],4:[function(e,t,n){var a='.leaflet-sbs-range {\r\n    -webkit-appearance: none;\r\n    display: inline-block!important;\r\n    vertical-align: middle;\r\n    height: 0;\r\n    padding: 0;\r\n    margin: 0;\r\n    border: 0;\r\n    background: rgba(0, 0, 0, 0.25);\r\n    min-width: 100px;\r\n    cursor: pointer;\r\n    pointer-events: none;\r\n    z-index: 999;\r\n}\r\n.leaflet-sbs-range::-ms-fill-upper {\r\n    background: transparent;\r\n}\r\n.leaflet-sbs-range::-ms-fill-lower {\r\n    background: rgba(255, 255, 255, 0.25);\r\n}\r\n/* Browser thingies */\r\n\r\n.leaflet-sbs-range::-moz-range-track {\r\n    opacity: 0;\r\n}\r\n.leaflet-sbs-range::-ms-track {\r\n    opacity: 0;\r\n}\r\n.leaflet-sbs-range::-ms-tooltip {\r\n    display: none;\r\n}\r\n/* For whatever reason, these need to be defined\r\n * on their own so dont group them */\r\n\r\n.leaflet-sbs-range::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range::-ms-thumb {\r\n    margin: 0;\r\n    padding: 0;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range::-moz-range-thumb {\r\n    padding: 0;\r\n    right: 0    ;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range:disabled::-moz-range-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled::-ms-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled::-webkit-slider-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:focus {\r\n    outline: none!important;\r\n}\r\n.leaflet-sbs-range::-moz-focus-outer {\r\n    border: 0;\r\n}\r\n\r\n';e("./node_modules/cssify")(a,void 0,"_1tlt668"),t.exports=a},{"./node_modules/cssify":3}]},{},[1])}.apply(t,a),void 0===i||(e.exports=i)},6797:function(e,t,n){var a,i;a=[n(20566)],void 0===(i=function(e){var t=document.querySelector("#afsFormatData").getAttribute("afsFormats");return JSON.parse(t.replace(/,\s*}*$/,"}"))}.apply(t,a))||(e.exports=i)},54077:function(e,t,n){var a,i;a=[n(20198),n(54922),n(84490),n(85852),n(63361),n(63366),n(35135)],void 0===(i=function(e,t,n,a){t.bindingHandlers.datatable={init:function(a,i){var s=t.unwrap(i()),l=e(a).DataTable(s);s.columnVis&&n.each(s.columnVis,(function(e,t){e.subscribe((function(e){l.column(t).visible(e)}))}))}};var i=[];return t.bindingHandlers.dataTablesForEach={page:0,init:function(n,a,s,l,d){var c=t.unwrap(a());t.unwrap(c.data);var p=a().data();i=t.unwrap(null==l?void 0:l.removedTiles)||i,a().data(p.filter((function(e){return!i.includes(null==e?void 0:e.tileid)}))),c.dataTableOptions.paging&&a().data.subscribe((function(a){var i=e(n).closest("table").DataTable();t.bindingHandlers.dataTablesForEach.page=i.page(),i.destroy()}),null,"arrayChange");var f=Array.prototype.slice.call(n.childNodes,0);return t.utils.arrayForEach(f,(function(e){e&&1!==e.nodeType&&e.parentNode.removeChild(e)})),t.bindingHandlers.foreach.init(n,a,s,l,d)},update:function(n,a,i,s,l){var d,c=t.unwrap(a()),p="DataTablesForEach_Initialized";return t.unwrap(c.data),c.dataTableOptions.paging||(d=e(n).closest("table").DataTable()).destroy(),t.bindingHandlers.foreach.update(n,a,i,s,l),d=e(n).closest("table").DataTable(c.dataTableOptions),c.dataTableOptions.paging&&(d.page.info().pages-t.bindingHandlers.dataTablesForEach.page==0?d.page(--t.bindingHandlers.dataTablesForEach.page).draw(!1):d.page(t.bindingHandlers.dataTablesForEach.page).draw(!1)),t.utils.domData.get(n,p)||!c.data&&!c.length||t.utils.domData.set(n,p,!0),{controlsDescendantBindings:!0}}},t.bindingHandlers.datatable}.apply(t,a))||(e.exports=i)},10352:function(e,t,n){var a,i;a=[n(20198),n(54922),n(68996)],void 0===(i=function(e,t,n){return t.bindingHandlers.plotly={init:function(a,i){var s=t.unwrap(i()),l={x:s.data().value,y:s.data().count,type:"scatter",mode:"lines",name:s.data().name,line:{color:s.primarySeriesColor,width:3}},d={title:{text:s.title(),font:{family:"Arial, monospace",size:s.titleSize()},xref:"paper",x:.05},xaxis:{title:{text:s.xAxisLabel(),font:{family:"Arial, monospace",size:s.xAxisLabelSize(),color:"#7f7f7f"}}},yaxis:{title:{text:s.yAxisLabel(),font:{family:"Arial, monospace",size:s.yAxisLabelSize(),color:"#7f7f7f"}}},legend:{font:{family:"Arial, monospace",color:"#7f7f7f"}},width:e(a).width()-2},c={responsive:!1,modeBarButtonsToAdd:[{name:"expand height",icon:{width:1800,height:1400,path:"M704 1216q0 -26 -19 -45t-45 -19h-128v-1024h128q26 0 45 -19t19 -45t-19 -45l-256 -256q-19 -19 -45 -19t-45 19l-256 256q-19 19 -19 45t19 45t45 19h128v1024h-128q-26 0 -45 19t-19 45t19 45l256 256q19 19 45 19t45 -19l256 -256q19 -19 19 -45z"},click:function(){s.autosize=void 0!==t.unwrap(s.autosize)&&!t.unwrap(s.autosize),t.unwrap(s.autosize)?d.height=450:d.height=t.unwrap(s.height)||window.innerHeight-250,n.relayout(a,d)}}]};this.chart=n.newPlot(a,[l],d,c),e(window).resize((function(){d.width=e(a).width()-2,n.relayout(a,d)})),s.title.subscribe((function(e){d.title.text=e,n.relayout(a,d)})),s.titleSize.subscribe((function(e){d.title.font.size=e,n.relayout(a,d)})),s.xAxisLabel.subscribe((function(e){d.xaxis.title.text=e,n.relayout(a,d)})),s.xAxisLabelSize.subscribe((function(e){d.xaxis.title.font.size=e,n.relayout(a,d)})),s.yAxisLabel.subscribe((function(e){d.yaxis.title.text=e,n.relayout(a,d)})),s.yAxisLabelSize.subscribe((function(e){d.yaxis.title.font.size=e,n.relayout(a,d)})),s.seriesStyles.subscribe((function(e){var t;e.length>=1&&e.forEach((function(e){t=[],a.data.forEach((function(n,a){n.tileid===e.tileid&&(t=[a])})),1===t.length&&n.restyle(a,{"marker.color":e.color},t)}))})),s.seriesData.subscribe((function(e){e.forEach((function(e){if("added"===e.status){var t=s.seriesStyles().find((function(t){return t.tileid===e.value.tileid}));t&&n.addTraces(a,{x:e.value.data.value,y:e.value.data.count,opacity:.9,marker:{color:t.color},name:e.value.name,tileid:e.value.tileid},a.data.length)}else a.data.forEach((function(t,i){t.name===e.value.name&&n.deleteTraces(a,i)}))}))}),this,"arrayChange"),t.utils.domNodeDisposal.addDisposeCallback(a,(function(){}),this)}},t.bindingHandlers.plotly}.apply(t,a))||(e.exports=i)},20393:function(e,t,n){var a,i;a=[n(20198),n(54922)],void 0===(i=function(e,t){return t.bindingHandlers.threePCD={init:function(n,a){var i,s,l=t.unwrap(a());function getRendererSize(){var t=e(n).width(),a=window.innerHeight;return l.camera.aspect=t/a,l.camera.updateProjectionMatrix(),{height:a,width:t}}function animate(){i=window.requestAnimationFrame(animate),l.controls.handleResize(),l.controls.update(),l.renderers.forEach((function(e){e.render(l.scene,l.camera)}))}l.renderers.forEach((function(e){var t=getRendererSize();e.setSize(t.width,t.height),n.append(e.domElement)})),s=l.displayContent.url,l.loader.load(s,(function(e){e.material.color.set(16716185),l.scene.add(e);var t=e.geometry.boundingSphere.center;l.controls.target.set(t.x,t.y,t.z),l.controls.handleResize(),l.controls.update(),animate(),l.loading(!1)})),window.addEventListener("resize",(function(){var e=getRendererSize();l.renderers.forEach((function(t){t.setSize(e.width,e.height)})),l.controls.handleResize()}),!1),t.utils.domNodeDisposal.addDisposeCallback(n,(function(){window.cancelAnimationFrame(i)}))}},t.bindingHandlers.threePCD}.apply(t,a))||(e.exports=i)},32672:function(e,t,n){var a,i;a=[n(20198),n(54922),n(71663)],void 0===(i=function(e,t,n){return t.bindingHandlers.threePDB={init:function(a,i){var s,l=t.unwrap(i());function getRendererSize(){var t=e(a).width(),n=window.innerHeight;return l.camera.aspect=t/n,l.camera.updateProjectionMatrix(),{height:n,width:t}}function animate(){s=window.requestAnimationFrame(animate),l.controls.handleResize(),l.controls.update();var e=4e-4*Date.now();l.root.rotation.x=e,l.root.rotation.y=.7*e,render()}function render(){l.renderers.forEach((function(e){e.render(l.scene,l.camera)}))}l.renderers.forEach((function(e){var t=getRendererSize();e.setSize(t.width,t.height),a.append(e.domElement)})),function(e){for(;l.root.children.length>0;){var t=l.root.children[0];t.parent.remove(t)}l.loader.load(e,(function(e){var t=e.geometryAtoms,a=e.geometryBonds,i=e.json,s=new n.BoxBufferGeometry(1,1,1),d=new n.IcosahedronGeometry(1,2);t.computeBoundingBox(),t.boundingBox.getCenter(l.offset).negate(),t.translate(l.offset.x,l.offset.y,l.offset.z),a.translate(l.offset.x,l.offset.y,l.offset.z);for(var c=t.getAttribute("position"),p=t.getAttribute("color"),f=new n.Vector3,v=new n.Color,h=0;h<c.count;h++){f.x=c.getX(h),f.y=c.getY(h),f.z=c.getZ(h),v.r=p.getX(h),v.g=p.getY(h),v.b=p.getZ(h);var b=new n.MeshPhongMaterial({color:v}),m=new n.Mesh(d,b);m.position.copy(f),m.position.multiplyScalar(75),m.scale.multiplyScalar(25),l.root.add(m);var g=i.atoms[h],x=window.document.createElement("div");x.className="label",x.style.color="rgb("+g[3][0]+","+g[3][1]+","+g[3][2]+")",x.textContent=g[4];var y=new n.CSS2DObject(x);y.position.copy(m.position),l.root.add(y)}c=a.getAttribute("position");for(var w=new n.Vector3,k=new n.Vector3,S=0;S<c.count;S+=2){w.x=c.getX(S),w.y=c.getY(S),w.z=c.getZ(S),k.x=c.getX(S+1),k.y=c.getY(S+1),k.z=c.getZ(S+1),w.multiplyScalar(75),k.multiplyScalar(75);var _=new n.Mesh(s,new n.MeshPhongMaterial(16777215));_.position.copy(w),_.position.lerp(k,.5),_.scale.set(5,5,w.distanceTo(k)),_.lookAt(k),l.root.add(_)}render(),animate(),l.loading(!1)}))}(l.displayContent.url),window.addEventListener("resize",(function(){var e=getRendererSize();l.renderers.forEach((function(t){t.setSize(e.width,e.height)})),l.controls.handleResize()}),!1),t.utils.domNodeDisposal.addDisposeCallback(a,(function(){window.cancelAnimationFrame(s)}))}},t.bindingHandlers.threePDB}.apply(t,a))||(e.exports=i)},36523:function(e,t,n){var a,i;a=[n(54922),n(8373),n(95963)],void 0===(i=function(e,t,n){return e.components.register("default-report",{viewModel:function(e){e.configKeys=[],t.apply(this,[e])},template:n})}.apply(t,a))||(e.exports=i)},12598:function(e,t,n){var a,i;a=[n(32274)],void 0===(i=function(e){return{getManifests:function(t){return new Promise((function(n){var a=e.getNodeValues({nodeId:"2fe9f066-b31e-11e9-b3be-a4d18cec433a",returnTiles:!1},t);0===a.length&&n([]),a.forEach((function(t){e.lookupResourceInstanceData(t.resourceId).then((function(t){var a=e.getNodeValues({nodeId:"9743a1b2-8591-11ea-97eb-acde48001122",returnTiles:!1},t._source.tiles);0===a.length&&n([]),a.forEach((function(t){e.lookupResourceInstanceData(t.resourceId).then((function(t){var a=e.getNodeValues({nodeId:"db05c421-ca7a-11e9-bd7a-a4d18cec433a",where:{nodeId:"db05c05e-ca7a-11e9-8824-a4d18cec433a",contains:"f32d0944-4229-4792-a33c-aadc2b181dc7"},returnTiles:!1},t._source.tiles);n(a)}))}))}))}))}))}}}.apply(t,a))||(e.exports=i)},31599:function(e,t,n){var a,i,s=n(20198);function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(46186),n(54922)],i=function(e,t){var n,a,i,standardizeNode=function(e){e&&Object.keys(e).forEach((function(t){e[t.toLowerCase().trim()]=e[t]}))},getRawNodeValue=function(e){for(var t,n=e,a=void 0,i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];"object"==_typeof(null==s?void 0:s[0])?a=null===(t=s[0])||void 0===t?void 0:t.testPaths:a=[s];var d,c=_createForOfIteratorHelper(a);try{for(c.s();!(d=c.n()).done;){path=d.value;for(var p=n,f=0;f<path.length;++f){var v;standardizeNode(p);var h=path[f];p=null===(v=p)||void 0===v?void 0:v[h]}if(p)return p}}catch(e){c.e(e)}finally{c.f()}},l=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t,n){var a;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(a=n.tiles().find((function(e){return t==e.tileid})))){i.next=3;break}return i.abrupt("return",s.ajax({type:"DELETE",url:e.urls.tile,data:JSON.stringify(a.getData()),success:function(){var e=n.tiles(),t=e.indexOf(a);e.splice(t,1),n.tiles(e)}}));case 3:throw Error("Couldn't delete; tile was not found.");case 4:case"end":return i.stop()}}),_callee)})));return function(e,n){return t.apply(this,arguments)}}(),d=t.observableArray(),processRawNodeValue=function(e){if("string"==typeof e)return e;if(!e)return"--";var t=(null==e?void 0:e["@display_value"])||(null==e?void 0:e.display_value),n=null==e?void 0:e.geojson;return n||(null!=t&&""!==t?s("<span>".concat(t,"</span>")).text():"--")},getResourceLink=function(t){if(t){var n=t.resourceId;if(n)return"".concat(e.urls.resource,"\\").concat(n)}};return{defaultTableConfig:{responsive:{breakpoints:[{name:"infinity",width:1/0},{name:"bigdesktop",width:1900},{name:"meddesktop",width:1480},{name:"smalldesktop",width:1280},{name:"medium",width:1188},{name:"tabletl",width:1024},{name:"btwtabllandp",width:848},{name:"tabletp",width:768},{name:"mobilel",width:480},{name:"mobilep",width:320}]},paging:!1,searching:!1,scrollCollapse:!0,info:!1,columnDefs:[{orderable:!1,targets:-1}]},getRelatedResources:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",window.fetch(e.urls.related_resources+t+"?paginate=false").then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),_callee2)}))),function(e){return i.apply(this,arguments)}),removedTiles:d,toggleVisibility:function(e){e(!e())},deleteTile:(a=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(e,t){var n,a,i,c,p,f,v=arguments;return _regeneratorRuntime().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,l(e,t);case 3:h.next=9;break;case 5:return h.prev=5,h.t0=h.catch(0),console.log(h.t0),h.abrupt("return");case 9:for(a=v.length,i=new Array(a>2?a-2:0),c=2;c<a;c++)i[c-2]=v[c];(p=null==i||null===(n=i[1])||void 0===n?void 0:n.target)&&(f=s(p).closest("table").DataTable(),d.push(e),f.row(s(p).closest("tr")).remove().draw());case 12:case"end":return h.stop()}}),_callee3,null,[[0,5]])}))),function(e,t){return a.apply(this,arguments)}),editTile:function(e,t){if(t){var n=t.tiles().find((function(t){return e==t.tileid}));n&&n.selected(!0)}},addNewTile:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(e){var t,n,a,i;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=e,!e.parentCard||null!==(t=e.parent)&&void 0!==t&&t.tileid){s.next=5;break}return s.next=4,e.parentCard.saveParentTile();case 4:n=null===(a=e.parentCard.tiles())||void 0===a?void 0:a[0].cards.find((function(t){return t.nodegroupid==e.nodegroupid}));case 5:n.canAdd()?n.selected(!0):n.tiles()[0].selected(!0),("n"==n.cardinality||"1"==n.cardinality&&!n.tiles().length)&&(i=n.selected.subscribe((function(){n.showForm(!0),i.dispose()})));case 7:case"end":return s.stop()}}),_callee4)}))),function(e){return n.apply(this,arguments)}),createCardDictionary:function(e){if(e){var t,n={},a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;)card=t.value,n[card.model.name()]=card}catch(e){a.e(e)}finally{a.f()}return standardizeNode(n),n}},getRawNodeValue:getRawNodeValue,processRawValue:processRawNodeValue,getResourceLink:getResourceLink,getTileId:function(e){if(e)return null==e?void 0:e["@tile_id"]},getNodeValue:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=getRawNodeValue.apply(void 0,[e].concat(n));return processRawNodeValue(i)},getResourceListNodeValue:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=getRawNodeValue.apply(void 0,[e].concat(n)),s=Array.isArray(i)?i.reduce((function(e,t){return e.concat(getRawNodeValue(t,"instance_details"))}),[]):getRawNodeValue(i,"instance_details"),l=null==s?void 0:s.map((function(e){return displayValue=processRawNodeValue(e),link=getResourceLink(e),{displayValue:displayValue,link:link}}));return l},stripTags:function(e){return e.replace(/(<([^>]+)>)/gi,"")},nestedDataExists:function checkNestedData(e){if(!e)return!1;for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var i=0,s=Object.keys(e);i<s.length;i++)if(key=s[i],!n.includes(key)){var l=getRawNodeValue(e,key);if(l&&"object"===_typeof(l)){if("--"!=processRawNodeValue(l))return!0;try{if(checkNestedData(l))return!0}catch(e){console.log(e)}}}return!1}}}.apply(t,a),void 0===i||(e.exports=i)},1661:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(10352),n(87720)],void 0===(i=function(e,t,n){return function(a){var i,s=this;this.params=a,this.fileType="text/plain",this.url="",this.type="",this.loading=n.observable(!0),this.commonData=a.state,this.fileViewer=a.fileViewer,this.filter=n.observable(""),this.displayContent=n.unwrap(this.params.displayContent);var l=window.localStorage,d=this.displayContent.renderer.id,c={title:l.getItem(d+"title")||"",titlesize:l.getItem(d+"titlesize")||24,xaxislabel:l.getItem(d+"xaxislabel")||"",xaxislabelsize:l.getItem(d+"xaxislabelsize")||17,yaxislabel:l.getItem(d+"yaxislabel")||"",yaxislabelsize:l.getItem(d+"yaxislabelsize")||17};"chartData"in a.state==!1&&(this.commonData.chartData=n.observable(),this.commonData.seriesData=n.observableArray([]),this.commonData.stagedSeries=n.observableArray([]),this.commonData.seriesStyles=n.observableArray([]),this.commonData.compatibleSeries=n.pureComputed((function(){if(s.fileViewer)return s.fileViewer.card.tiles().filter((function(e){return s.fileViewer.getUrl(e).renderer&&s.fileViewer.getUrl(e).renderer.id===s.fileViewer.displayContent().renderer.id&&s.fileViewer.selected().tileid!==e.tileid})).map((function(e){return{text:s.fileViewer.getUrl(e).name,id:e.tileid}}))}))),"chartTitle"in a.state==!1&&(this.commonData.chartTitle=n.observable(c.title),this.commonData.titleSize=n.observable(c.titlesize),this.commonData.xAxisLabel=n.observable(c.xaxislabel),this.commonData.xAxisLabelSize=n.observable(c.xaxislabelsize),this.commonData.yAxisLabel=n.observable(c.yaxislabel),this.commonData.yAxisLabelSize=n.observable(c.yaxislabelsize),this.commonData.selectedSeriesTile=n.observable(null),this.commonData.colorHolder=n.observable("#ff00ff")),this.parsedData=this.commonData.parsedData,this.chartData=this.commonData.chartData,this.chartTitle=this.commonData.chartTitle,this.titleSize=this.commonData.titleSize,this.xAxisLabel=this.commonData.xAxisLabel,this.xAxisLabelSize=this.commonData.xAxisLabelSize,this.yAxisLabel=this.commonData.yAxisLabel,this.yAxisLabelSize=this.commonData.yAxisLabelSize,this.seriesData=this.commonData.seriesData,this.stagedSeries=this.commonData.stagedSeries,this.selectedSeriesTile=this.commonData.selectedSeriesTile,this.seriesStyles=this.commonData.seriesStyles,this.colorHolder=this.commonData.colorHolder,this.compatibleSeries=this.commonData.compatibleSeries,this.primarySeriesColor=this.fileViewer?null===(i=JSON.parse(l.getItem(d+"series"+this.fileViewer.tile.tileid)))||void 0===i?void 0:i.color:"#3333ff",this.selectedSeriesTile.subscribe((function(e){if(e){var t=s.seriesStyles().find((function(t){return t.tileid===e.tileid}));t&&s.colorHolder(t.color)}})),this.colorHolder.subscribe((function(e){var t,n,a;if(s.selectedSeriesTile()&&(a=s.selectedSeriesTile(),(t=s.seriesStyles().find((function(e){return e.tileid===a.tileid})))&&e)){(n=t).color=e,s.seriesStyles.replace(t,n);var i=JSON.parse(l.getItem(d+"series"+a.tileid));i.color=e,l.setItem(d+"series"+a.tileid,JSON.stringify(i))}})),this.toggleSelected=function(e){var t=1===s.seriesData().filter((function(t){return t.tileid===e.tileid})).length;e&&e!=s.selectedSeriesTile()?(t||e)&&s.selectedSeriesTile(e):s.selectedSeriesTile(null)};var p={title:this.chartTitle,titlesize:this.titleSize,xaxislabel:this.xAxisLabel,xaxislabelsize:this.xAxisLabelSize,yaxislabel:this.yAxisLabel,yaxislabelsize:this.yAxisLabelSize};t.each(p,(function(e,t){e.subscribe((function(e){l.setItem(d+t,e)}))})),this.addAllToChart=function(e){(e=s.fileViewer?s.fileViewer.card.tiles():e)&&e.forEach((function(e){s.stagedSeries().indexOf(e.tileid)>-1&&s.addData(e)}))},this.addData=function(e){var t={tileid:e.tileid,color:s.colorHolder()},n=s.seriesStyles().find((function(t){return t.tileid===e.tileid})),a=l.getItem(d+"series"+e.tileid);a?t.color=JSON.parse(a).color:l.setItem(d+"series"+e.tileid,JSON.stringify({color:s.colorHolder()})),n||s.seriesStyles.push(t);var i=this.fileViewer.getUrl(e);this.getChartingData(e.tileid,i.url,i.name),s.toggleSelected(e)},this.removeData=function(e){s.selectedSeriesTile()?s.selectedSeriesTile().tileid===e&&s.selectedSeriesTile(null):s.selectedSeriesTile(null);var t=s.seriesStyles().find((function(t){return t.tileid===e}));this.seriesData().forEach((function(n){n.tileid===e&&(this.seriesData.remove(n),this.stagedSeries.remove(n.tileid),l.removeItem(d+"series"+n.tileid),t&&s.seriesStyles.remove(t))}),this)},this.getChartingData=function(t,n,a){var i={value:[],count:[]};0===this.seriesData().filter((function(e){return e.tileid===t})).length&&e.ajax({url:n,dataType:"text"}).done((function(e){s.parse(e,i),s.seriesData.push({tileid:t,data:i,name:a})}),this)},this.loadSeriesDataFromLocalStorage=function(){var e=[];this.compatibleSeries().forEach((function(t){var n,a=s.params.card.tiles().reduce((function(e,t){return e[t.tileid]=t,e}),{});l.getItem(d+"series"+t.id)&&(n=a[t.id],s.stagedSeries.push(n.tileid),e.push(n))})),this.addAllToChart(e)},this.render=function(){var t={value:[],count:[],name:this.displayContent.name};e.ajax({url:this.displayContent.url,dataType:"text"}).done((function(e){s.displayContent.validRenderer(!0);try{s.parse(e,t),s.chartData(void 0),s.chartData(t),s.fileViewer?s.loadSeriesDataFromLocalStorage():(0==t.count&&s.displayContent.validRenderer(!1),s.seriesData.push({data:t,name:s.displayContent.name}))}catch(e){s.displayContent.validRenderer(!1)}s.loading(!1),s.displayContent.validRenderer.valueHasMutated()}),this)},this.isFiltered=function(e){return s.fileViewer.getUrl(e).name.toLowerCase().includes(s.filter().toLowerCase())},this.chartOptions={axis:{x:{tick:{count:5}}},zoom:{enabled:!0}},this.displayContent&&(this.url=this.displayContent.url,this.type=this.displayContent.type,"render"===s.params.context&&s.render())}}.apply(t,a))||(e.exports=i)},15521:function(e,t,n){var a,i;a=[n(54922),n(28459),n(35605),n(46186),n(38096),n(22023),n(91762),n(66504),n(54077)],void 0===(i=function(e,t,n,a,i){return e.components.register("views/components/annotation-summary",{viewModel:function(i){var s=this;this.map=e.observable(),this.selectedAnnotationTileId=e.observable(),this.annotationTableConfig={info:!1,paging:!1,scrollCollapse:!0,searching:!1,ordering:!1,columns:[null,null]};this.prepareAnnotation=function(i){var l=i.features[0].properties.canvas;return{center:[0,0],crs:n.CRS.Simple,zoom:0,afterRender:function(d){n.tileLayer.iiif(l+"/info.json").addTo(d);var c=t(i);d.addLayer(n.geoJson(i,{pointToLayer:function(e,t){return n.circleMarker(t,e.properties)},style:function(e){return e.properties},onEachFeature:function(t,i){if(!1===t.properties.active){var l=n.popup({closeButton:!1,maxWidth:250}).setContent('\n            <div class="mapboxgl-popup-content">\n                <button class="mapboxgl-popup-close-button" type="button" aria-label="Close popup" data-bind="click: closePopup">×</button>\n                <div class="hover-feature-title-bar">\n                    <div class="hover-feature-title">\n                        <span class="" data-bind="text: name"></span>\n                    </div>\n                </div>\n                <div class="hover-feature-body">\n                    <div class="hover-feature" data-bind="html: description"></div>\n                    <div class="hover-feature-metadata">\n                        Resource Model:\n                        <span data-bind="text: graphName"></span>\n                    </div>\n                    <div class="hover-feature-metadata">\n                        ID:\n                        <span data-bind="text: resourceinstanceid"></span>\n                    </div>\n                </div>\n                <div class="hover-feature-footer">\n                    <a data-bind="click: function () {\n                        window.open(reportURL + resourceinstanceid);\n                    }" href="javascript:void(0)">\n                        <i class="ion-document-text"></i>\n                        Report\n                    </a>\n                </div>\n            </div>').on("add",(function(){var n=t.properties.name.split("["),i=n[0].trim(),s=n[1].startsWith("Region")?"Analysis Area":n[1].startsWith("Sample Area")?"Sample Area":"Part",d=n[1].startsWith("Region")?n[1].replace("Region of ","").replace("]",""):n[1].startsWith("Sample Area")?n[1].replace("Sample Area of ","").replace("]",""):n[1].replace("]",""),c="".concat(i," is a ").concat(s," of ").concat(d," created before"),p={closePopup:function(){l.remove()},name:t.properties.name,description:c,graphName:"Physical Thing",resourceinstanceid:t.properties.sampleAreaResourceId,reportURL:a.urls.resource_report},f=l.getElement().querySelector(".mapboxgl-popup-content");e.applyBindingsToDescendants(p,f)}));i.bindPopup(l)}i.on("click",(function(){t.properties&&t.properties.tileId&&!1!==t.properties.active&&s.highlightAnnotation(t.properties.tileId)}))}})),n.control.fullscreen().addTo(d),setTimeout((function(){d.fitBounds([[c[1]-1,c[0]-1],[c[3]+1,c[2]+1]])}),250),s.map(d)}}},this.leafletConfig=this.prepareAnnotation(i.annotation.featureCollection),this.highlightAnnotation=function(e){e!==s.selectedAnnotationTileId()?s.selectedAnnotationTileId(e):s.selectedAnnotationTileId(null),s.map()&&s.map().eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){var t=e.feature.properties.color;s.selectedAnnotationTileId()===e.feature.properties.tileId?e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}):e.setStyle({color:t,fillColor:t})}))}))}},template:i})}.apply(t,a))||(e.exports=i)},98978:function(e,t,n){var a,i;a=[n(20198),n(54922),n(33993),n(1661),n(10352),n(87720)],void 0===(i=function(e,t,n,a){return t.components.register("fors-reader",{viewModel:function(e){var t=this;a.apply(this,[e]),this.parse=function(e,n){var a=e.split("\n"),i={};a.forEach((function(e){if(e.startsWith("##")&&(e.startsWith("##YFACTOR")&&(i.yfactor=Number(e.split("=")[1])),e.startsWith("##XUNITS")&&(i.xunits=e.split("=")[1]),e.startsWith("##YUNITS"))){var t=e.split("=")[1];i.yunits=t?"".concat(t[0].toUpperCase()).concat(t.slice(1).toLowerCase()):""}if(e.startsWith("Spectrum file is ")){var a=e.split(" ")[3];i.yunits=a?"".concat(a[0].toUpperCase()).concat(a.slice(1).toLowerCase()):""}var s;if(e.includes("\t"))s=e.trim().split("\t"),Number(s[0]>=350&&s[0]<=2500)&&(n.value.push(Number(s[0])),n.count.push(Number(s[1])));else if(s=e.trim().split(/(?=[+-])/g),Number(s[0]>=350&&s[0]<=2500)){n.value.push(Number(s[0])),s.splice(0,1);var l=s.reduce((function(e,t){return Number(e)+Number(t)}),0)/s.length;n.count.push(l*i.yfactor)}})),t.chartTitle("ASD Spectrum"),t.xAxisLabel("Wavelength (nm)"),t.yAxisLabel(i.yunits)}},template:n})}.apply(t,a))||(e.exports=i)},50714:function(e,t,n){var a,i;a=[n(20198),n(54922),n(59412),n(71663),n(33094),n(99267),n(20393)],void 0===(i=function(e,t,n,a){return t.components.register("pcdreader",{viewModel:function(e){this.params=e,this.displayContent=t.unwrap(this.params.displayContent),this.fileType="",this.url="",this.type="",this.renderers=[],this.loading=t.observable(!0);var n,i=this;i.scene=new a.Scene,i.scene.background=new a.Color(0),i.camera=new a.PerspectiveCamera(15,window.innerWidth/window.innerHeight,.01,40),i.camera.position.x=.4,i.camera.position.z=-2,i.camera.up.set(0,0,1),i.scene.add(i.camera),(n=new a.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),i.loader=new a.PCDLoader,i.controls=new a.TrackballControls(i.camera,n.domElement),i.controls.rotateSpeed=2,i.controls.zoomSpeed=.3,i.controls.panSpeed=.2,i.controls.staticMoving=!0,i.controls.minDistance=.3,i.controls.maxDistance=30,i.renderers.push(n)},template:n})}.apply(t,a))||(e.exports=i)},6706:function(e,t,n){var a,i;a=[n(20198),n(54922),n(70453),n(71663),n(69711),n(8287),n(99267),n(32672)],void 0===(i=function(e,t,n,a){return t.components.register("pdbreader",{viewModel:function(e){this.params=e,this.displayContent=t.unwrap(this.params.displayContent),this.fileType="",this.url="",this.type="",this.loading=t.observable(!0);var n,i,s=this;this.loader=new a.PDBLoader,s.offset=new a.Vector3,s.renderers=[],s.scene=new a.Scene,s.params.state.scene=s.scene,s.scene.background=new a.Color(0),s.camera=new a.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,5e3),s.camera.position.z=1e3,s.scene.add(s.camera),s.light=new a.DirectionalLight(16777215,.8),s.light.position.set(1,1,1),s.scene.add(s.light),s.light2=new a.DirectionalLight(16777215,.5),s.light2.position.set(-1,-1,1),s.scene.add(s.light2),s.root=new a.Group,s.scene.add(s.root),(n=new a.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),(i=new a.CSS2DRenderer).domElement.style.position="absolute",i.domElement.style.top="0",i.domElement.style.pointerEvents="none",s.controls=new a.TrackballControls(s.camera,n.domElement),s.controls.minDistance=500,s.controls.maxDistance=2e3,s.renderers.push(n),s.renderers.push(i)},template:n})}.apply(t,a))||(e.exports=i)},50333:function(e,t,n){var a,i;a=[n(20198),n(54922),n(33993),n(1661),n(10352),n(87720)],void 0===(i=function(e,t,n,a){return t.components.register("raman-reader",{viewModel:function(e){a.apply(this,[e]),this.parse=function(e,t){e.split("\n").forEach((function(e){var n=e.trim().split("\t");Number(n[1])>30&&n[0]>.5&&(t.count.push(Number(n[1])),t.value.push(Number(n[0])))})),this.chartTitle("Raman Spectrum"),this.xAxisLabel("Raman Shift (cm<sup>-1</sup>)"),this.yAxisLabel("Intensity")}},template:n})}.apply(t,a))||(e.exports=i)},89614:function(e,t,n){var a,i;a=[n(20198),n(54922),n(33993),n(1661),n(10352),n(87720)],void 0===(i=function(e,t,n,a){return t.components.register("xrf-reader",{viewModel:function(e){a.apply(this,[e]),this.parse=function(e,t){var n;try{n=e.split("Energy Counts")[1].trim().split("\n")}catch(t){n=e.split("\n")}n.forEach((function(e){var n=e.trim().split(/[ ,]+/);Number(n[1])>30&&n[0]>.5&&(t.count.push(Number(n[1])),t.value.push(Number(n[0])))}))},this.chartTitle("XRF Spectrum"),this.xAxisLabel("keV"),this.yAxisLabel("Count")},template:n})}.apply(t,a))||(e.exports=i)},3058:function(e,t,n){var a,i;a=[n(54922),n(32441),n(84490),n(20025),n(12598)],void 0===(i=function(e,t,n,a,i){return e.components.register("physical-thing-iiif-card",{viewModel:function(t){var n=this;if(a.apply(this,[t]),this.form&&"form"===this.state){var s=[];e.unwrap(this.form.topCards).reduce((function(t,a){return e.unwrap(a.tiles).forEach((function(e){t.push(e),t.concat(n.getTiles(e))})),t}),s),s=s.map((function(e){return e.getData()})),this.loading(!0),i.getManifests(s).then((function(e){n.loading(!1),e.length>0&&(n.manifest(e[0]),n.getManifestData())}))}},template:t})}.apply(t,a))||(e.exports=i)},37221:function(e,t,n){var a,i;a=[n(54922),n(59732),n(23605),n(58943)],void 0===(i=function(e,t,n){return e.components.register("file-upload",{viewModel:function(n){this.acceptedFiles=e.observableArray([]);var a=this;this.uniqueId=t.generate(),this.uniqueidClass=e.computed((function(){return"unique_id_"+a.uniqueId})),this.addFiles=function(e){console.log("got files"),console.log(e)},this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,autoQueue:!1,clickable:".fileinput-button."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){a.dropzone=this,this.on("addedfiles",a.addFiles),this.on("error",(function(e,t){e.error=t}))}}},template:n})}.apply(t,a))||(e.exports=i)},18174:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(58420),n(91429),n(83547),n(84714),n(74509)],i=function(e,t,n,a,i,s,l,d){return n.components.register("views/components/functions/file-to-iiif",{viewModel:function(t){s.apply(this,arguments);var a={};this.triggering_nodegroups=t.config.triggering_nodegroups,this.cards=n.observableArray(),this.graph.cards.forEach((function(e){this.cards.push(e),a[e.nodegroup_id]=!0}),this),window.setTimeout((function(){e("select[data-bind^=chosen]").trigger("chosen:updated")}),300)},template:d})}.apply(t,a),void 0===i||(e.exports=i)},11451:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(3082),n(40471),n(30184),n(62314),n(6135),n(63754)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("analysis-areas-workflow",{viewModel:function(e){this.componentName="analysis-areas-workflow",this.stepConfig=[{title:"Project Info",name:"select-project",required:!0,informationboxdata:{heading:"Workflow Goal: Record Locations and Regions of Interest",text:"\n                            Regions of interest are the areas on a physical object (whole object or sample) in which a measurement -- whether non-invasive or minimally invasive -- was performed.\n                            To be meaningful, you need to describe the location or region of a physical object that is being described/measured.\n                            This workflow will guide you through the steps to document the location of your regions of interest.\n                        "},layoutSections:[{componentConfigs:[{componentName:"select-phys-thing-step",uniqueInstanceName:"select-phys-thing",parameters:{graphids:["9519cb4f-b25b-11e9-8c7b-a4d18cec433a","0b9235d9-ca85-11e9-9fa2-a4d18cec433a"]}}]}]},{title:"Image",name:"image-step",required:!0,informationboxdata:{heading:"Image Services",text:"\n                            Image Services provide you with picture(s) of an object, often from multiple vantage points, that can be annotated to indicate the location or region of an observation. \n                            If you wish, you can upload photographs and automatically create a new image service to document the location of your observations of an object.\n                        "},lockableExternalSteps:["select-project"],layoutSections:[{sectionTitle:"Image Service",componentConfigs:[{componentName:"analysis-areas-image-step",uniqueInstanceName:"image-service-instance",tilesManaged:"one",parameters:{graphid:"707cbd78-ca7a-11e9-990b-a4d18cec433a",physicalThingResourceId:"['select-project']['select-phys-thing']['physicalThing']"}}]}]},{title:"Regions",name:"regions-step",required:!0,workflowstepclass:"analysis-areas-workflow-regions-step",lockableExternalSteps:["image-step"],hiddenWorkflowButtons:["undo","save"],layoutSections:[{componentConfigs:[{componentName:"analysis-areas-annotation-step",uniqueInstanceName:"annotation-instance",tilesManaged:"one",parameters:{graphid:"9519cb4f-b25b-11e9-8c7b-a4d18cec433a",physicalThingResourceId:"['select-project']['select-phys-thing']['physicalThing']",projectResourceId:"['select-project']['select-phys-thing']['project']",imageStepData:"['image-step']['image-service-instance'][0]['data']",projectSet:"['select-project']['select-phys-thing']['projectSet']"}}]}]},{title:"Summary",name:"analysis-areas-complete",description:"Summary",layoutSections:[{componentConfigs:[{componentName:"analysis-areas-final-step",uniqueInstanceName:"analysis-areas-final",tilesManaged:"none",parameters:{sampleObjectResourceId:"['select-project']['select-phys-thing']['physicalThing']",relatedProjectData:"['select-project']['select-phys-thing']",regionsStepData:"['regions-step']['annotation-instance']",imageStepData:"['image-step']['image-service-instance'][0]['data']",digitalReferenceResourceId:"['image-step']['image-service-instance'][0]['resourceinstance_id']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},41773:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(57223),n(40471),n(65438),n(85284),n(93650)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("create-project-workflow",{viewModel:function(e){this.componentName="create-project-workflow",this.stepConfig=[{title:"Project Name",name:"set-project-name",required:!0,informationboxdata:{heading:"Project Name",text:"Identify the project by giving it a name"},layoutSections:[{componentConfigs:[{componentName:"project-name-step",uniqueInstanceName:"project-name",parameters:{}}]}]},{title:"Project Statement",name:"set-project-statement",required:!1,informationboxdata:{heading:"Project Statement",text:"Indicate the objectives or motivation of the project"},layoutSections:[{componentConfigs:[{componentName:"default-card",uniqueInstanceName:"project-statement",tilesManaged:"one",parameters:{graphid:"0b9235d9-ca85-11e9-9fa2-a4d18cec433a",nodegroupid:"0b92a414-ca85-11e9-b725-a4d18cec433a",resourceid:"['set-project-name']['project-name']['projectResourceId']"}}]}]},{title:"Project Start",name:"set-project-timespan",required:!1,informationboxdata:{heading:"Project Start",text:"Indicate the date the project started if known"},layoutSections:[{componentConfigs:[{componentName:"default-card",uniqueInstanceName:"project-timespan",tilesManaged:"one",parameters:{graphid:"0b9235d9-ca85-11e9-9fa2-a4d18cec433a",nodegroupid:"0b925e3a-ca85-11e9-a308-a4d18cec433a",resourceid:"['set-project-name']['project-name']['projectResourceId']",hiddenNodes:["0b92f57d-ca85-11e9-a353-a4d18cec433a","0b931623-ca85-11e9-b235-a4d18cec433a","0b930905-ca85-11e9-8aca-a4d18cec433a"]}}]}]},{title:"Project Team",name:"set-project-team",required:!1,informationboxdata:{heading:"Project Team",text:"Add the names of people involved in the project"},layoutSections:[{componentConfigs:[{componentName:"default-card",uniqueInstanceName:"project-team",tilesManaged:"one",parameters:{graphid:"0b9235d9-ca85-11e9-9fa2-a4d18cec433a",nodegroupid:"dbaa2022-9ae7-11ea-ab62-dca90488358a",resourceid:"['set-project-name']['project-name']['projectResourceId']"}}]}]},{title:"Add Objects to Your Project",name:"object-search-step",required:!0,workflowstepclass:"create-project-add-things-step",informationboxdata:{heading:"Add Objects",text:"Add Objects to Your Project"},layoutSections:[{componentConfigs:[{componentName:"add-things-step",uniqueInstanceName:"add-phys-things",tilesManaged:"one",parameters:{graphid:"1b210ef3-b25c-11e9-a037-a4d18cec433a",nodegroupid:"466f81d4-c451-11e9-b7c9-a4d18cec433a",nodeid:"466fa421-c451-11e9-9a6d-a4d18cec433a",resourceid:"['set-project-name']['project-name']['projectResourceId']",projectStepData:"['set-project-name']['project-name']"}}]}]},{title:"Summary",name:"add-project-complete",description:"Summary",layoutSections:[{componentConfigs:[{componentName:"create-project-final-step",uniqueInstanceName:"create-project-final",tilesManaged:"none",parameters:{resourceid:"['set-project-name']['project-name']['projectResourceId']",collectionResourceId:"['object-search-step']['add-phys-things'][0]['collectionResourceId']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},19321:function(e,t,n){var a,i;a=[n(54922),n(46186),n(14682)],void 0===(i=function(e,t,n){return e.components.register("init-workflow",{viewModel:function(e){this.workflows=e.workflows.map((function(e){return e.url=t.urls.plugin(e.slug),e}),this)},template:n})}.apply(t,a))||(e.exports=i)},52598:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(23841),n(40471),n(30184),n(85284),n(84229)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("project-collection-workflow",{viewModel:function(e){this.componentName="project-collection-workflow",this.stepConfig=[{title:"Select Project",name:"select-project",required:!0,informationboxdata:{heading:"Select Project",text:"Select a project to update"},layoutSections:[{sectionTitle:"Select Project",componentConfigs:[{componentName:"resource-instance-select-widget",uniqueInstanceName:"select-project",parameters:{graphids:["0b9235d9-ca85-11e9-9fa2-a4d18cec433a"]}}]}]},{title:"Add Objects to Your Project",name:"object-search-step",required:!1,workflowstepclass:"create-project-add-things-step",informationboxdata:{heading:"Update Objects",text:"Update Objects in Your Project"},lockableExternalSteps:["select-project"],layoutSections:[{componentConfigs:[{componentName:"add-things-step",uniqueInstanceName:"add-phys-things",tilesManaged:"one",parameters:{graphid:"1b210ef3-b25c-11e9-a037-a4d18cec433a",nodegroupid:"466f81d4-c451-11e9-b7c9-a4d18cec433a",nodeid:"466fa421-c451-11e9-9a6d-a4d18cec433a",resourceid:"['select-project']['select-project']",action:"update"}}]}]},{title:"Summary",name:"project-collection-complete",description:"Summary",layoutSections:[{componentConfigs:[{componentName:"project-collection-final-step",uniqueInstanceName:"project-collection-final",tilesManaged:"none",parameters:{projectResourceId:"['select-project']['select-project']",resourceid:"['object-search-step']['add-phys-things'][0]['collectionResourceId']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},49269:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(33057),n(40471),n(43178),n(90529),n(74935)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("review-dataset-workflow",{viewModel:function(e){this.componentName="review-dataset-workflow",this.stepConfig=[{title:"Datasets",name:"select-datasets",required:!0,layoutSections:[{componentConfigs:[{componentName:"select-dataset",uniqueInstanceName:"select-dataset-instances",tilesManaged:"none",parameters:{graphids:["9519cb4f-b25b-11e9-8c7b-a4d18cec433a"]}}]}]},{title:"File Interpretation",name:"file-interpretation",required:!1,workflowstepclass:"upload-dataset-step-workflow-component-based-step",hiddenWorkflowButtons:["undo","save"],informationboxdata:{heading:"Add interpretations for the uploaded dataset",text:"Select a file from a dataset and add any relevant parameter and interpretation details."},layoutSections:[{componentConfigs:[{componentName:"file-interpretation-step",uniqueInstanceName:"file-interpretation",parameters:{activeTab:"edit",datasetInfo:"['select-datasets']['dataset-select-instance']['digitalResources']"}}]}]},{title:"Summary",name:"review-dataset-complete",layoutSections:[{componentConfigs:[{componentName:"review-dataset-final-step",uniqueInstanceName:"review-dataset-final",tilesManaged:"none",parameters:{sampleObjectResourceInstanceId:"['select-datasets']['select-dataset-instances']['resourceid']",selectedDatasets:"['select-datasets']['select-dataset-instances']['digitalResources']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},7337:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(98222),n(40471),n(30184),n(24879),n(91834),n(30808),n(64067)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("sample-taking-workflow",{viewModel:function(e){this.componentName="sample-taking-workflow",this.stepConfig=[{title:"Project Info",name:"select-project",required:!0,informationboxdata:{heading:"Projects and related object",text:"Select the project and object that you are sampling"},layoutSections:[{componentConfigs:[{componentName:"select-phys-thing-step",uniqueInstanceName:"select-phys-thing",parameters:{graphids:["9519cb4f-b25b-11e9-8c7b-a4d18cec433a","0b9235d9-ca85-11e9-9fa2-a4d18cec433a"]}}]}]},{title:"Sampling Activity Info",name:"sample-info",description:"The date that the sample was taken",informationboxdata:{heading:"Sampling Information",text:"Enter the people, date, method, and notes describing the sampling activities on the object"},required:!0,lockableExternalSteps:["select-project"],layoutSections:[{sectionTitle:null,componentConfigs:[{componentName:"sampling-info-step",uniqueInstanceName:"sampling-info",parameters:{selectPhysThingData:"['select-project']['select-phys-thing']"}}]}]},{title:"Image",name:"image-step",required:!0,informationboxdata:{heading:"Image Services",text:"Image services provide you with picture(s) of an object, often from multiple vantage points,                         that can be annotated to indicate the location or region of an observation.                         If you wish, you can upload photographs and automatically create a new image service                         to document the location of your observations of an object"},layoutSections:[{sectionTitle:"Image Service",componentConfigs:[{componentName:"sample-taking-image-step",uniqueInstanceName:"image-service-instance",tilesManaged:"one",parameters:{graphid:"707cbd78-ca7a-11e9-990b-a4d18cec433a",physicalThingResourceId:"['select-project']['select-phys-thing']['physicalThing']",samplingInfoData:"['sample-info']['sampling-info']"}}]}]},{title:"Sample Info",name:"sample-location-step",required:!0,workflowstepclass:"analysis-areas-workflow-regions-step",hiddenWorkflowButtons:["undo","save"],layoutSections:[{componentConfigs:[{componentName:"sample-taking-sample-location-step",uniqueInstanceName:"sample-location-instance",tilesManaged:"one",parameters:{graphid:"9519cb4f-b25b-11e9-8c7b-a4d18cec433a",physicalThingResourceId:"['select-project']['select-phys-thing']['physicalThing']",physicalThingName:"['select-project']['select-phys-thing']['physThingName']",imageServiceInstanceData:"['image-step']['image-service-instance'][0]['data']",projectSet:"['select-project']['select-phys-thing']['projectSet']",samplingActivityResourceId:"['sample-info']['sampling-info']['samplingActivityResourceId']"}}]}]},{title:"Summary",name:"add-project-complete",graphid:"0b9235d9-ca85-11e9-9fa2-a4d18cec433a",layoutSections:[{componentConfigs:[{componentName:"sample-taking-final-step",uniqueInstanceName:"sample-taking-final",parameters:{samplingActivityResourceId:"['sample-info']['sampling-info']['samplingActivityResourceId']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},63842:function(e,t,n){var a,i;a=[n(54922),n(20198),n(46186),n(33571),n(62666),n(59841),n(40471),n(37221),n(30184),n(77693),n(78266),n(91627),n(74935),n(65330),n(14098)],void 0===(i=function(e,t,n,a,i,s){return e.components.register("upload-dataset-workflow",{viewModel:function(e){this.componentName="upload-dataset-workflow";var s={title:"Data Files and Location",name:"select-dataset-files-step",required:!0,workflowstepclass:"upload-dataset-step-workflow-component-based-step",lockableExternalSteps:["select-instrument-and-files"],hiddenWorkflowButtons:["undo","save"],layoutSections:[{componentConfigs:[{componentName:"select-dataset-files-step",uniqueInstanceName:"select-dataset-files-step",parameters:{projectInfo:"['project-info']['select-phys-thing-step']",observationInfo:"['select-instrument-and-files']['instrument-info']"}}]}]},l={title:"Upload Files",name:"upload-files",description:"The date that the sample was taken",component:"views/components/workflows/component-based-step",componentname:"component-based-step",workflowstepclass:"upload-dataset-step-workflow-component-based-step",autoAdvance:!1,informationboxdata:{heading:"Upload observation files ...",text:"Select files generated by the instrument selected in the previous step"},required:!0,hiddenWorkflowButtons:["undo","save"],layoutSections:[{sectionTitle:null,componentConfigs:[{componentName:"upload-files-step",uniqueInstanceName:"upload-files-step",parameters:{renderContext:"workflow",projectinfo:'["project-info"]',observationinfo:'["select-instrument-and-files"]'},required:!0}]}]};this.stepConfig=[{title:"Dataset Type",name:"dataset-step",required:!0,layoutSections:[{sectionTitle:"Dataset Type",componentConfigs:[{componentName:"dataset-step",uniqueInstanceName:"dataset-step",tilesManaged:"none",parameters:{}}]}],stepInjectionConfig:{defaultStepChoice:null,stepNameToInjectAfter:function(e){return"select-instrument-and-files"},injectionLogic:function(e){return e.workflowComponentAbstractLookup()&&"non-destructive"===e.workflowComponentAbstractLookup()["dataset-step"].savedData()?s:e.workflowComponentAbstractLookup()&&"destructive"===e.workflowComponentAbstractLookup()["dataset-step"].savedData()?l:void 0}}},{title:"Project Info",name:"project-info",required:!0,informationboxdata:{heading:"Workflow Step: Project and related object",text:"Select the project and object that you're sampling"},layoutSections:[{componentConfigs:[{componentName:"select-phys-thing-step",uniqueInstanceName:"select-phys-thing-step",parameters:{graphids:["9519cb4f-b25b-11e9-8c7b-a4d18cec433a","0b9235d9-ca85-11e9-9fa2-a4d18cec433a"],validateThing:!0,datasetRoute:"['dataset-step']['dataset-step']"}}]}]},{title:"Observation Info",name:"select-instrument-and-files",required:!0,informationboxdata:{heading:"Add the observation information used for the analysis",text:"Select the instrument, the procedure, and add any special parameters/configuration for the instrument"},lockableExternalSteps:["project-info"],layoutSections:[{componentConfigs:[{componentName:"instrument-info-step",uniqueInstanceName:"instrument-info",parameters:{projectInfoData:"['project-info']['select-phys-thing-step']"}}]}]},{title:"File Interpretation",name:"file-interpretation",workflowstepclass:"upload-dataset-step-workflow-component-based-step",required:!1,hiddenWorkflowButtons:["undo","save"],informationboxdata:{heading:"Add interpretations for the uploaded dataset",text:"Select a file from a dataset and add any relevant parameter and interpretation details"},layoutSections:[{componentConfigs:[{componentName:"file-interpretation-step",uniqueInstanceName:"file-interpretation",parameters:{activeTab:"edit",datasetInfo:"['select-dataset-files-step']",datasetInfoFromUploadFilesStep:"['upload-files']"}}]}]},{title:"Summary",name:"upload-dataset-complete",layoutSections:[{componentConfigs:[{componentName:"upload-dataset-final-step",uniqueInstanceName:"upload-dataset-final",tilesManaged:"none",parameters:{observationInstanceResourceId:"['select-instrument-and-files']['instrument-info']['observationInstanceId']",uploadedDatasets:"['select-dataset-files-step']['select-dataset-files-step']['parts']",uploadedDataset:"['upload-files']['upload-files-step']",parentPhysThingResourceId:"['project-info']['select-phys-thing-step']['physicalThing']"}}]}]}],a.apply(this,[e]),this.reverseWorkflowTransactions=function(){var a=this.quitUrl;return t.ajax({type:"POST",url:n.urls.transaction_reverse(this.id())}).then((function(){e.loading(!1),window.location.href=a}))},this.quitWorkflow=function(){var t=this;this.alert(new i("ep-alert-red","Are you sure you would like to delete this workflow?","All data created during the course of this workflow will be deleted.",(function(){}),(function(){e.loading("Cleaning up..."),t.reverseWorkflowTransactions()})))},this.quitUrl=n.urls.plugin("init-workflow")},template:s})}.apply(t,a))||(e.exports=i)},23247:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(94982),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("collection-set-report",{viewModel:function(e){var t,a,i,s,d=this;e.configKeys=["tabs","activeTabIndex"],Object.assign(d,l),d.sections=[{id:"name",title:"Names, Identifiers, Classification"},{id:"description",title:"Description"},{id:"existence",title:"Timeline"},{id:"events",title:"Events"},{id:"projects",title:"Related Projects"},{id:"publications",title:"Publications"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],d.visible={textualReference:n.observable(!0),relatedProject:n.observable(!0)},d.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),d.resource=n.observable(null===(a=d.reportMetadata())||void 0===a?void 0:a.resource),d.displayname=n.observable(null===(i=n.unwrap(d.reportMetadata))||void 0===i?void 0:i.displayname),d.activeSection=n.observable("name"),d.nameDataConfig={exactMatch:void 0},d.documentationDataConfig={subjectOf:void 0,label:void 0},d.existenceEvents=["creation"],d.existenceDataConfig={creation:{graph:"created",metadata:[{key:"creator",path:"created_carried out by",type:"resource"},{key:"creation event location",path:"created_location",type:"resource"},{key:"creation event type",path:"created_type",type:"resource"}]}},d.eventEvents=["curation"],d.eventDataConfig={curation:{graph:"curation",metadata:[{key:"person in curation event",path:"curation_carried out by",type:"resource"},{key:"location of curation event",path:"curation_location",type:"resource"},{key:"curation event type",path:"curation_type",type:"kv"}]}},d.nameCards={},d.descriptionCards={},d.documentationCards={},d.existenceCards={},d.eventCards={},d.summary=e.summary,d.textualReferenceTableConfig=_objectSpread(_objectSpread({},d.defaultTableConfig),{},{columns:Array(3).fill(null)}),d.relatedProjectTableConfig=_objectSpread(_objectSpread({},d.defaultTableConfig),{},{columns:Array(2).fill(null)}),d.textualReference=n.observableArray();var c=d.getRawNodeValue(d.resource(),"textual reference");Array.isArray(c)&&d.textualReference(c.map((function(e){return{textualSource:d.getNodeValue(e,"textual source"),textualSourceLink:d.getResourceLink(d.getRawNodeValue(e,"textual source")),textualReferenceType:d.getNodeValue(e,"textual reference type"),tileid:d.getTileId(e)}}))),d.relatedProject=n.observableArray();var p=d.getRawNodeValue(d.resource(),"used in");p&&(d.relatedProjectTileid=d.getTileId(p),d.relatedProject(d.getRawNodeValue(p,"instance_details").map((function(e){return{displayname:d.getNodeValue(e),link:d.getResourceLink(d.getRawNodeValue(e))}})))),d.getTableConfig=function(e){return _objectSpread(_objectSpread({},d.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},d.nameSummary=n.observable(),d.typeSummary=n.observable(),d.relatedProjectSummary=n.observable(),d.statementSummary=n.observable(),d.nameSummary(null===(s=d.resource().Name)||void 0===s?void 0:s.map((function(e){return{content:d.getNodeValue(e,"name_content"),type:d.getNodeValue(e,"name_type")}}))),d.relatedProjectSummary(d.getResourceListNodeValue(d.resource(),"used in"));var f=d.getNodeValue(d.resource(),"type");f&&"--"!=f&&d.typeSummary({type:d.getNodeValue(d.resource(),"type")});var v=d.getNodeValue(d.resource(),"statement","statement_content");if(v&&"--"!=v&&d.statementSummary({content:v,type:d.getNodeValue(d.resource(),"statement","statement_type")}),e.report.cards){var h,b,m,g,x,y,w,k=e.report.cards;d.cards=d.createCardDictionary(k),d.nameCards={name:null===(h=d.cards)||void 0===h?void 0:h["name of collection"],identifier:null===(b=d.cards)||void 0===b?void 0:b["identifier of collection"],type:null===(m=d.cards)||void 0===m?void 0:m["type of collection"]},d.descriptionCards={statement:null===(g=d.cards)||void 0===g?void 0:g["statement about collection"]},d.documentationCards={digitalReference:null===(x=d.cards)||void 0===x?void 0:x["digital reference to collection"]},d.existenceCards={creation:{card:null===(y=d.cards)||void 0===y?void 0:y["creation event of collection"],subCards:{name:"name for creation event",identifier:"identifier of creation event",timespan:"timespan of creation event",statement:"statement about creation event"}}},d.eventCards={curation:{card:null===(w=d.cards)||void 0===w?void 0:w["curation event of collection"],subCards:{name:"name for curation event",identifier:"identifier of curation event",timespan:"timespan of curation event",statement:"statement about curation event"}}}}},template:a})}.apply(t,a))||(e.exports=i)},66978:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(18869),n(46186),n(32274),n(31599),n(76234),n(92933),n(52226),n(45243),n(57886),n(76581),n(24343)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("digital-resource-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v,h=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(h,l),h.sections=[{id:"name",title:"Names and Classifications"},{id:"existence",title:"Existence"},{id:"substance",title:"Substance"},{id:"events",title:"Events"},{id:"parthood",title:"Parthood"},{id:"sethood",title:"Sethood"},{id:"carriers",title:"Information Carriers & Information Carried"},{id:"aboutness",title:"Aboutness"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],h.filesTable=_objectSpread(_objectSpread({},h.defaultTableConfig),{},{columns:Array(3).fill(null)}),h.getTableConfig=function(e){return _objectSpread(_objectSpread({},h.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},h.visible={files:n.observable(!0)},h.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),h.resource=n.observable(null===(a=h.reportMetadata())||void 0===a?void 0:a.resource),h.displayname=n.observable(null===(i=n.unwrap(h.reportMetadata))||void 0===i?void 0:i.displayname),h.activeSection=n.observable("name"),h.nameDataConfig={exactMatch:void 0},h.documentationDataConfig={subjectOf:void 0,digitalReference:void 0},h.existenceDataConfig={creation:{graph:"creation",metadata:[{key:"creator",path:"creation_carried out by",type:"resource"},{key:"creation event location",path:"creation_location",type:"resource"},{key:"creation event type",path:"creation_type",type:"resource"},{key:"creation event technique",path:"creation_technique",type:"resource"},{key:"physical object used in creation event",path:"creation_used object",type:"resource"}]}},h.eventsDataConfig={"digital service":{graph:"service",metadata:[{key:"conforms to",path:"service_conforms to",type:"resource"},{key:"service type",path:"service_type",type:"resource"}]}},h.existenceEvents=["creation"],h.eventsEvents=["digital service"],h.nameCards={},h.descriptionCards={},h.documentationCards={},h.substanceCards={},h.existenceCards={},h.eventsCards={},h.summary=e.summary,e.report.cards){var b,m,g,x,y,w=e.report.cards;h.cards=h.createCardDictionary(w),h.nameCards={name:null===(b=h.cards)||void 0===b?void 0:b["name of digital resource"],identifier:null===(m=h.cards)||void 0===m?void 0:m["identifier of digital resource"],type:null===(g=h.cards)||void 0===g?void 0:g["type of digital resource"]},h.descriptionCards={statement:h.cards["statement about digital resource"]},h.substanceCards={dimension:null===(x=h.cards)||void 0===x?void 0:x["dimension of digital resource"]},h.existenceCards={creation:{card:null===(y=h.cards)||void 0===y?void 0:y["creation event of digital resource"],subCards:{name:"name for creation event",identifier:"identifier for creation event",timespan:"timespan of creation event",statement:"statement about creation event"}}}}h.aboutnessData=n.observable({sections:[{title:"Aboutness",data:[{key:"text carried by object",value:h.getRawNodeValue(h.resource(),"carries text"),card:null===(s=h.cards)||void 0===s?void 0:s["text carried by object"],type:"resource"}]}]}),h.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"parent digital resource",value:h.getRawNodeValue(h.resource(),"part of"),type:"resource"}]}]}),h.files=n.observableArray(null===(d=h.getRawNodeValue(h.resource(),"file"))||void 0===d?void 0:d.map((function(e){var t=h.getNodeValue(e,"file_details",0,"name"),n=h.getTileId(e);return{name:t,metadataExists:h.nestedDataExists(e,"@node_id","@tile_id","file_details"),tileid:n}}))),h.sethoodData=n.observable({sections:[{title:"Sethood",data:[{key:"collection that includes digital resource",value:h.getRawNodeValue(h.resource(),"member of"),card:null===(c=h.cards)||void 0===c?void 0:c["collection that includes digital resource"],type:"resource"}]}]}),h.additionalData=n.observableArray([{key:"standards conformed to by digital resource",value:h.getNodeValue(h.resource(),"conforms to"),href:h.getNodeValue(h.resource(),"conforms to"),card:null===(p=h.cards)||void 0===p?void 0:p["standards conformed to by digital resource"],type:"href"}]),h.nameSummary=n.observable(),h.statementsSummary=n.observable();var k=[h.getRawNodeValue(null===(f=h.resource())||void 0===f?void 0:f.name)];k&&h.nameSummary(k.map((function(e){return{type:h.getNodeValue(e,"name_type"),content:h.getNodeValue(e,"name_content")}})));var S=h.getRawNodeValue(null===(v=h.resource())||void 0===v?void 0:v.statement);S&&h.statementsSummary(S.map((function(e){return{type:h.getNodeValue(e,"Statement_type"),content:h.getNodeValue(e,"Statement_content")}})))},template:a})}.apply(t,a))||(e.exports=i)},65519:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(23836),n(46186),n(32274),n(31599),n(76234),n(35913)],i=function(e,t,n,a,i,s,l){return n.components.register("group-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(v,l),v.sections=[{id:"name",title:"Names, Identifiers, Classifications"},{id:"description",title:"Description"},{id:"existence",title:"Timeline"},{id:"location",title:"Location"},{id:"documentation",title:"Documentation"},{id:"communication",title:"Contacts"},{id:"members",title:"Group Members"},{id:"entities",title:"Larger Entities"},{id:"json",title:"JSON"}],v.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),v.resource=n.observable(null===(a=v.reportMetadata())||void 0===a?void 0:a.resource),v.displayname=n.observable(null===(i=n.unwrap(v.reportMetadata))||void 0===i?void 0:i.displayname),v.activeSection=n.observable("name"),v.sourceData=n.observable({sections:[{title:"References",data:[{key:"source reference work",value:v.getRawNodeValue(v.resource(),"source"),type:"resource"}]}]}),v.nameDataConfig={exactMatch:"exact match"},v.documentationDataConfig={subjectOf:void 0,label:void 0},v.existenceEvents=["formation","dissolution"],v.existenceDataConfig={formation:{graph:"formation",metadata:[{key:"person in formation event",path:"formation_carried out by",type:"resource"},{key:"location of formation event",path:"formation_location",type:"resource"}]},dissolution:{graph:"dissolution",metadata:[{key:"source reference for dissolution event",path:"dissolution_source",type:"resource"},{key:"location of dissolution event",path:"dissolution_location",type:"resource"}]}},v.eventEvents=["professional activity"],v.eventDataConfig={"professional activity":{graph:"professional activity",metadata:[{key:"professional activity type",path:"professional activity_type",type:"kv"},{key:"location of professional activity",path:"professional activity_location",type:"resource"},{key:"source reference work for professional activity",path:"professional activity_source",type:"resource"}]}},v.nameCards={},v.descriptionCards={},v.documentationCards={},v.existenceCards={},v.eventCards={},v.communicationCards={},v.summary=e.summary,v.nameSummary=n.observable(),v.parentGroupSummary=n.observable(),v.locationSummary=n.observable(),v.activitySummary=n.observable(),v.identifierSummary=n.observable(),v.nameSummary(null===(s=v.resource().name)||void 0===s?void 0:s.map((function(e){return{content:v.getNodeValue(e,"name_content"),type:v.getNodeValue(e,"name_type")}}))),v.parentGroupSummary(v.getResourceListNodeValue(v.resource(),"member of")),v.locationSummary(v.getResourceListNodeValue(v.resource(),"residence")),v.activitySummary(null===(d=v.resource()["professional activity"])||void 0===d?void 0:d.map((function(e){return{type:v.getNodeValue(e,"professional activity_type"),technique:v.getNodeValue(e,"professional activity_technique"),locations:v.getResourceListNodeValue(e,"professional activity_location"),sources:v.getResourceListNodeValue(e,"professional activity_source")}}))),v.identifierSummary(null===(c=v.resource().identifier)||void 0===c?void 0:c.map((function(e){return{content:v.getNodeValue(e,"identifier_content"),type:v.getNodeValue(e,"identifier_type")}}))),e.report.cards){var h,b,m,g,x,y,w,k,S,_,T=e.report.cards;v.cards=v.createCardDictionary(T),v.nameCards={name:null===(h=v.cards)||void 0===h?void 0:h["name of group"],identifier:null===(b=v.cards)||void 0===b?void 0:b["identifier of group"],exactMatch:null===(m=v.cards)||void 0===m?void 0:m["external uri of group"],type:null===(g=v.cards)||void 0===g?void 0:g["type of group"]},v.descriptionCards={statement:null===(x=v.cards)||void 0===x?void 0:x["statement about group"]},v.documentationCards={digitalReference:null===(y=v.cards)||void 0===y?void 0:y["digital reference to group"]},v.communicationCards={contactPoints:null===(w=v.cards)||void 0===w?void 0:w["address or contact point of group"]},v.existenceCards={formation:{card:null===(k=v.cards)||void 0===k?void 0:k["formation event of group"],subCards:{name:"name for formation event",identifier:"identifier for formation event",timespan:"timespan of formation event",statement:"statement about formation event"}},dissolution:{card:null===(S=v.cards)||void 0===S?void 0:S["dissolution event of group"],subCards:{name:"name for formation event",identifier:"identifier for dissolution event",timespan:"timespan of dissolution event",statement:"statement about dissolution event"}}},v.eventCards={"professional activity":{card:null===(_=v.cards)||void 0===_?void 0:_["professional activity group known for"],subCards:{name:"name for professional activity",identifier:"identifier for professional activity",timespan:"timespan of professional activity",statement:"statement about professional activity"}}}}v.locationData=n.observable({sections:[{title:"Location",data:[{key:"residence or associated location of group",value:v.getRawNodeValue(v.resource(),"residence"),card:null===(p=v.cards)||void 0===p?void 0:p["residence or associated location of group"],type:"resource"}]}]}),v.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"parent group",value:v.getRawNodeValue(v.resource(),"member of"),card:null===(f=v.cards)||void 0===f?void 0:f["parent group"],type:"resource"}]}]}),v.groupMemberTableConfig=_objectSpread(_objectSpread({},v.defaultTableConfig),{},{columns:Array(4).fill(null)}),v.getTableConfig=function(e){return _objectSpread(_objectSpread({},v.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},v.collectionOfGroupMembers=n.observableArray(),v.collectionOfLargerEntities=n.observableArray(),v.visible={groupMembers:n.observable(!0),largerEntities:n.observable(!0)};var C=n.unwrap(v.reportMetadata).resourceinstanceid,I=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(){var e,t,n,a,i;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.getRelatedResources(C);case 2:e=s.sent,t=null==e?void 0:e.related_resources,n=null==e?void 0:e.resource_relationships.map((function(e){return e.resourceinstanceidto})),a=null==e?void 0:e.resource_relationships.map((function(e){return e.resourceinstanceidfrom})),(i=t.filter((function(e){return"f71f7b9c-b25b-11e9-901e-a4d18cec433a"===(null==e?void 0:e.graph_id)||"07883c9e-b25c-11e9-975a-a4d18cec433a"===(null==e?void 0:e.graph_id)}))).map((function(t){return t.link=l.getResourceLink({resourceId:t.resourceinstanceid}),t.resourceType=null==e?void 0:e.node_config_lookup[t.graph_id].name,t.displaydescription=l.stripTags(t.displaydescription),t})),v.collectionOfGroupMembers(i.filter((function(e){return a.includes(e.resourceinstanceid)}))),v.collectionOfLargerEntities(i.filter((function(e){return n.includes(e.resourceinstanceid)})));case 12:case"end":return s.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(){return t.apply(this,arguments)}}();I()},template:a})}.apply(t,a),void 0===i||(e.exports=i)},44489:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(66779),n(46186),n(10053),n(32274),n(31599),n(76234),n(92933),n(52226),n(76581),n(24343)],void 0===(i=function(e,t,n,a,i,s,l,d){return n.components.register("instrument-report",{viewModel:function(e){var t,a,i,s,l,c,p,f,v,h=this;e.configKeys=["tabs","activeTabIndex"],Object.assign(h,d),h.sections=[{id:"name",title:"Names, Identifiers, Classification"},{id:"description",title:"Description"},{id:"actor-relations",title:"Actor Relations"},{id:"location",title:"Location"},{id:"component",title:"Components"},{id:"instrument",title:"Instrument Configuration"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],h.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),h.resource=n.observable(null===(a=h.reportMetadata())||void 0===a?void 0:a.resource),h.displayname=n.observable(null===(i=n.unwrap(h.reportMetadata))||void 0===i?void 0:i.displayname),h.activeSection=n.observable("name"),h.nameDataConfig={exactMatch:void 0},h.documentationDataConfig={subjectOf:void 0},h.nameCards={},h.descriptionCards={},h.documentationCards={},h.textualReferenceCards={},h.summary=e.summary,h.textualReferenceTableConfig=_objectSpread(_objectSpread({},h.defaultTableConfig),{},{columns:Array(3).fill(null)}),h.getTableConfig=function(e){return _objectSpread(_objectSpread({},h.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},h.visible={textualReference:n.observable(!0)},h.textualReference=n.observableArray(),h.textualReferenceDisplay=n.observable(!0);var b=h.resource()["Textual Reference"];if(b&&h.textualReference(b.map((function(e){var t=h.getNodeValue(e,"textual reference type"),n=h.getNodeValue(e,"textual source");return{link:h.getResourceLink(h.getRawNodeValue(e,"textual source")),type:t,source:n,tileid:h.getTileId(e)}}))),e.report.cards){var m,g,x,y,w,k,S=e.report.cards;h.cards=h.createCardDictionary(S),h.nameCards={name:null===(m=h.cards)||void 0===m?void 0:m["name of instrument"],identifier:null===(g=h.cards)||void 0===g?void 0:g["identifier for instrument"],type:null===(x=h.cards)||void 0===x?void 0:x["type of instrument"]},h.documentationCards={digitalReference:null===(y=h.cards)||void 0===y?void 0:y["digital reference to instrument"]},h.textualReferenceCards=null===(w=h.cards)||void 0===w?void 0:w["textual reference to instrument"],h.descriptionCards={statement:null===(k=h.cards)||void 0===k?void 0:k["statement about instrument"]}}h.locationData=n.observable({sections:[{title:"Location",data:[{key:"current location",value:h.getRawNodeValue(h.resource(),"current location"),card:null===(s=h.cards)||void 0===s?void 0:s["current location of instrument"],type:"resource"}]}]}),h.parthoodData=n.observable({sections:[{title:"Parent Instrument",data:[{key:"parent instrument",value:h.getRawNodeValue(h.resource(),"part of"),card:null===(l=h.cards)||void 0===l?void 0:l["parent instrument"],type:"resource"}]}]}),h.actorData=n.observable({sections:[{title:"Actor Relations",data:[{key:"current owner",value:h.getRawNodeValue(h.resource(),"current owner"),card:null===(c=h.cards)||void 0===c?void 0:c["current owner of instrument"],type:"resource"}]}]}),h.sethoodData=n.observable({sections:[{title:"Instrument Configuration",data:[{key:"Member of Set",value:h.getRawNodeValue(h.resource(),"member of"),card:null===(p=h.cards)||void 0===p?void 0:p["part of set"],type:"resource"}]}]}),h.nameSummary=n.observable(),h.typeSummary=n.observable();var _=null===(f=h.resource())||void 0===f?void 0:f.Name;_&&h.nameSummary(_.map((function(e){return{type:h.getNodeValue(e,"name_type"),content:h.getNodeValue(e,"name_content"),language:h.getNodeValue(e,"name_language")}})));var T=null===(v=h.resource())||void 0===v?void 0:v.type;T&&h.typeSummary([{type:h.getNodeValue(T)}])},template:a})}.apply(t,a))||(e.exports=i)},26386:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(67192),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("modification-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v,h,b,m,g=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(g,l),g.sections=[{id:"name",title:"Names and Classifications"},{id:"substance",title:"Substance"},{id:"location",title:"Location"},{id:"parameters",title:"Parameters & Outcomes"},{id:"parthood",title:"Parthood"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],g.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),g.resource=n.observable(null===(a=g.reportMetadata())||void 0===a?void 0:a.resource),g.displayname=n.observable(null===(i=n.unwrap(g.reportMetadata))||void 0===i?void 0:i.displayname),g.activeSection=n.observable("name"),g.nameDataConfig={exactMatch:void 0},g.documentationDataConfig={subjectOf:void 0},g.nameCards={},g.descriptionCards={},g.documentationCards={},g.substanceCards={},g.summary=e.summary,g.getTableConfig=function(e){return _objectSpread(_objectSpread({},g.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},e.report.cards){var x,y,w,k,S,_,T=e.report.cards;g.cards=g.createCardDictionary(T),g.documentationCards={digitalReference:null===(x=g.cards)||void 0===x?void 0:x["digital reference to modification"]},g.nameCards={name:null===(y=g.cards)||void 0===y?void 0:y["name of modification"],identifier:null===(w=g.cards)||void 0===w?void 0:w["identifier for modification"],type:null===(k=g.cards)||void 0===k?void 0:k["type of modification"]},g.descriptionCards={statement:null===(S=g.cards)||void 0===S?void 0:S["statement about modification"]},g.substanceCards={timespan:null===(_=g.cards)||void 0===_?void 0:_["timespan of modification"]}}g.locationData=n.observable({sections:[{title:"Location",data:[{key:"location of modification",value:g.getRawNodeValue(g.resource(),"took place at"),card:null===(s=g.cards)||void 0===s?void 0:s["location of modification"],type:"resource"}]}]}),g.parameterData=n.observable({sections:[{title:"Parameters & Outcomes",data:[{key:"technique of modification",value:g.getRawNodeValue(g.resource(),"technique"),card:null===(d=g.cards)||void 0===d?void 0:d["technique of modification"],type:"resource"},{key:"procedure of modification",value:g.getRawNodeValue(g.resource(),"used process"),card:null===(c=g.cards)||void 0===c?void 0:c["procedure of modification"],type:"resource"},{key:"object modified during modification",value:g.getRawNodeValue(g.resource(),"modified"),card:null===(p=g.cards)||void 0===p?void 0:p["object modified during modification"],type:"resource"},{key:"person carrying out modification",value:g.getRawNodeValue(g.resource(),"carried out by"),card:null===(f=g.cards)||void 0===f?void 0:f["person carrying out modification"],type:"resource"},{key:"tool for modification",value:g.getRawNodeValue(g.resource(),"used object"),card:null===(v=g.cards)||void 0===v?void 0:v["tool for modification"],type:"resource"}]}]}),g.substanceDataConfig={dimension:void 0,timespan:{path:"timespan",key:"timespan of modification"}},g.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"parent project of modification",value:g.getRawNodeValue(g.resource(),"part of"),card:null===(h=g.cards)||void 0===h?void 0:h["parent project of modification"],type:"resource"}]}]}),g.nameSummary=n.observable(),g.statementsSummary=n.observable();var C=g.getRawNodeValue(null===(b=g.resource())||void 0===b?void 0:b.name);C&&g.nameSummary(C.map((function(e){return{type:g.getNodeValue(e,"type"),content:g.getNodeValue(e,"content")}})));var I=g.getRawNodeValue(null===(m=g.resource())||void 0===m?void 0:m.statement);I&&g.statementsSummary(I.map((function(e){return{type:g.getNodeValue(e,"type"),content:g.getNodeValue(e,"content")}})))},template:a})}.apply(t,a))||(e.exports=i)},13432:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(87381),n(46186),n(32274),n(31599),n(76234),n(76581)],i=function(e,t,n,a,i,s,l){return n.components.register("observation-report",{viewModel:function(e){var t,a,s,d,c,p,f,v,h,b,m,g,x,y=this;e.configKeys=["tabs","activeTabIndex"],Object.assign(y,l),y.sections=[{id:"name",title:"Names, Identifiers, Classification"},{id:"description",title:"Description"},{id:"substance",title:"Dates"},{id:"data",title:"Data"},{id:"parthood",title:"Parent Project"},{id:"objects",title:"Related Objects"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],y.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),y.resource=n.observable(null===(a=y.reportMetadata())||void 0===a?void 0:a.resource),y.displayname=n.observable(null===(s=n.unwrap(y.reportMetadata))||void 0===s?void 0:s.displayname),y.activeSection=n.observable("name"),y.nameDataConfig={exactMatch:void 0},y.documentationDataConfig={subjectOf:void 0,label:void 0},y.substanceDataConfig={dimension:void 0,timespan:{path:"timespan",key:"timespan of observation"}},y.nameCards={},y.descriptionCards={},y.documentationCards={},y.substanceCards={},y.summary=e.summary,y.relatedObjectsTableConfig=_objectSpread(_objectSpread({},y.defaultTableConfig),{},{columns:Array(3).fill(null)}),y.collectionOfRelatedObjects=n.observableArray(),y.visible={relatedObjects:n.observable(!0)};var w=n.unwrap(y.reportMetadata).resourceinstanceid,k=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var e,t,a,s,d,c,p,f,v,h,b,m,g,x,k,S;return _regeneratorRuntime().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return e="9519cb4f-b25b-11e9-8c7b-a4d18cec433a",t="707cbd78-ca7a-11e9-990b-a4d18cec433a",a="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",s="f8d5fe4c-b31d-11e9-9625-a4d18cec433a",d=["77d8cf19-ce9c-4e0a-bde1-9148d870e11c"],_.next=7,l.getRelatedResources(w);case 7:if(c=_.sent,p=null==c?void 0:c.related_resources.filter((function(t){return(null==t?void 0:t.graph_id)===e})),f=null==c?void 0:c.related_resources.filter((function(e){return(null==e?void 0:e.graph_id)===t})),y.collectionOfRelatedObjects(p.map((function(e){return e.link=l.getResourceLink({resourceId:e.resourceinstanceid}),e.displaydescription=l.stripTags(e.displaydescription),e}))),y.annotations=[],f.map(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var a,d,c,p,f,v,h,b,m;return _regeneratorRuntime().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,l.getRelatedResources(t.resourceinstanceid);case 2:if(a=g.sent,d=null==a?void 0:a.related_resources.find((function(t){return t.graph_id==e})),c=null==d?void 0:d.resourceinstanceid,!d){g.next=16;break}if(!(p=null==d?void 0:d.tiles.find((function(e){return e.data[s]})).data[s][0].resourceId)){g.next=11;break}return g.next=10,window.fetch(i.urls.api_resources(p)+"?format=json&compact=false&v=beta").then((function(e){return e.json()})).then((function(e){v=e.resource}));case 10:f=y.getRawNodeValue(v,"part identifier assignment").filter((function(e){return y.getRawNodeValue(e,"part identifier assignment_physical part of object","resourceId")==c}));case 11:h=f?{info:f.map((function(e){var t,n=y.getNodeValue(e,"part identifier assignment_label"),a=y.getRawNodeValue(e,"part identifier assignment_physical part of object"),i=y.getRawNodeValue(e,"part identifier assignment_annotator"),s=y.getTileId(e),l=y.getNodeValue(e,"part identifier assignment_polygon identifier"),d=_createForOfIteratorHelper(l.features);try{for(d.s();!(t=d.n()).done;)feature=t.value,feature.properties.tileId=s}catch(e){d.e(e)}finally{d.f()}return{column1:n,column2:a,column3:i,tileId:s,featureCollection:l}}))}:{},b=_objectSpread(_objectSpread({},y.defaultTableConfig),{},{columns:Array(4).fill(null)}),'<tr class="afs-table-header">\n                                <th>Area Name</th>\n                                <th>Part of Object</th>\n                                <th class="min-tabletl">Annotator</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>',m=n.observable(),y.annotations.push({annotation:h,annotationTableConfig:b,selectedAnnotationTileId:m,annotationTableHeader:'<tr class="afs-table-header">\n                                <th>Area Name</th>\n                                <th>Part of Object</th>\n                                <th class="min-tabletl">Annotator</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>'});case 16:case"end":return g.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}()),v=p.find((function(e){return!!e.tiles.find((function(e){return e.data[a]&&e.data[a].filter((function(e){return d.includes(e)})).length>0}))})),h=null==v?void 0:v.resourceinstanceid,b="03357848-1d9d-11eb-a29f-024e0d439fdb",!h){_.next=27;break}return _.next=19,l.getRelatedResources(h);case 19:m=_.sent,g=null==m?void 0:m.related_resources.find((function(e){return(null==e?void 0:e.graph_id)===b})),x=null==g?void 0:g.tiles.filter((function(e){return"b3e171a7-1d9d-11eb-a29f-024e0d439fdb"==e.nodegroup_id&&e.data["b3e171ab-1d9d-11eb-a29f-024e0d439fdb"][0].resourceId==h})),k=x?{info:x.map((function(e){var t,n=v.displayname,a=e.tileid,i=e.data["b3e171ae-1d9d-11eb-a29f-024e0d439fdb"],s=_createForOfIteratorHelper(i.features);try{for(s.s();!(t=s.n()).done;)feature=t.value,feature.properties.tileId=a}catch(e){s.e(e)}finally{s.f()}return{column1:n,tileId:a,featureCollection:i}}))}:{},S=n.observable(),void 0,void 0,y.annotations.push({annotation:k,annotationTableConfig:undefined,selectedAnnotationTileId:S,annotationTableHeader:undefined});case 27:case"end":return _.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();k(),y.getTableConfig=function(e){return _objectSpread(_objectSpread({},y.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},y.timespanTableConfig=_objectSpread(_objectSpread({},y.defaultTableConfig),{},{columns:Array(4).fill(null),columnDefs:[],ordering:!1}),y.nameSummary=n.observable(),y.statementSummary=n.observable(),y.objectObservedSummary=n.observable(),y.procedureSummary=n.observable(),y.personSummary=n.observable(),y.timeSpanSummary=n.observable(),y.nameSummary(null===(d=y.resource().Name)||void 0===d?void 0:d.map((function(e){return{content:y.getNodeValue(e,"name_content"),type:y.getNodeValue(e,"name_type")}}))),y.statementSummary(null===(c=y.resource().Statement)||void 0===c?void 0:c.map((function(e){return{content:y.getNodeValue(e,"statement_content"),type:y.getNodeValue(e,"statement_type")}}))),y.objectObservedSummary(y.getResourceListNodeValue(y.resource(),"observed")),y.personSummary(y.getResourceListNodeValue(y.resource(),"carried out by")),y.getRawNodeValue(y.resource(),"used process")&&(displayValue=y.getNodeValue(y.resource(),"used process"),link=y.getResourceLink(y.getRawNodeValue(y.resource(),"used process")),y.procedureSummary({displayValue:displayValue,link:link}));var S=y.getRawNodeValue(y.resource(),"timespan");if(S){var _=y.getNodeValue(S,"TimeSpan_begin of the begin"),T=y.getNodeValue(S,"TimeSpan_begin of the end"),C=y.getNodeValue(S,"TimeSpan_end of the begin"),I=y.getNodeValue(S,"TimeSpan_end of the end");y.timeSpanSummary({earliestBegin:_,lastestBegin:T,earliestEnd:C,lastestEnd:I})}if(e.report.cards){var $,j,P,O,A,D,N=e.report.cards;y.cards=y.createCardDictionary(N),y.nameCards={name:null===($=y.cards)||void 0===$?void 0:$["name of observation"],identifier:null===(j=y.cards)||void 0===j?void 0:j["identifier of observation"],type:null===(P=y.cards)||void 0===P?void 0:P["type of observation"]},y.descriptionCards={statement:null===(O=y.cards)||void 0===O?void 0:O["statement about observation"]},y.documentationCards={digitalReference:null===(A=y.cards)||void 0===A?void 0:A["digital reference to observation"]},y.substanceCards={timespan:null===(D=y.cards)||void 0===D?void 0:D["timespan of observation"]}}y.parthoodData=n.observable({sections:[{title:"Parent Event",data:[{key:"parent event of observation",value:y.getRawNodeValue(y.resource(),"part of"),card:null===(p=y.cards)||void 0===p?void 0:p["parent event of observation"],type:"resource"}]}]}),y.dataData=n.observable({sections:[{title:"Recorded Value",data:[{key:"recorded value of observation",value:y.getRawNodeValue(y.resource(),"recorded value"),card:null===(f=y.cards)||void 0===f?void 0:f["recorded value of observation"],type:"resource"}]}]}),y.descriptionData=n.observable({sections:[{title:"Parameters & Outcomes",data:[{key:"technique of observation",value:y.getRawNodeValue(y.resource(),"technique"),card:null===(v=y.cards)||void 0===v?void 0:v["technique of observation"],type:"resource"},{key:"location of observation",value:y.getRawNodeValue(y.resource(),"took place at"),card:null===(h=y.cards)||void 0===h?void 0:h["location of observation"],type:"resource"},{key:"procedure / method used during observation",value:y.getRawNodeValue(y.resource(),"used process"),card:null===(b=y.cards)||void 0===b?void 0:b["parent event of observation"],type:"resource"},{key:"person carrying out observation",value:y.getRawNodeValue(y.resource(),"carried out by"),card:null===(m=y.cards)||void 0===m?void 0:m["person carrying out observation"],type:"resource"},{key:"instrument / tool used for observation",value:y.getRawNodeValue(y.resource(),"used instrument"),card:null===(g=y.cards)||void 0===g?void 0:g["instrument/tool used for observation"],type:"resource"},{key:"digital resource used in observation",value:y.getRawNodeValue(y.resource(),"used digital resource"),card:null===(x=y.cards)||void 0===x?void 0:x["digital resource used in observation"],type:"resource"}]}]})},template:a})}.apply(t,a),void 0===i||(e.exports=i)},681:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(88651),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("period-report",{viewModel:function(e){var t,a,i,s=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(s,l),s.sections=[{id:"name",title:"Names and Classifications"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"}],s.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),s.resource=n.observable(null===(a=s.reportMetadata())||void 0===a?void 0:a.resource),s.displayname=n.observable(null===(i=n.unwrap(s.reportMetadata))||void 0===i?void 0:i.displayname),s.activeSection=n.observable("name"),s.nameDataConfig={exactMatch:"exact match"},s.documentationDataConfig={subjectOf:void 0},s.nameCards={},s.descriptionCards={},s.documentationCards={},s.summary=e.summary,e.report.cards){var d=e.report.cards;s.cards=s.createCardDictionary(d),s.nameCards={name:s.cards.name,identifier:s.cards.Identifier,exactMatch:s.cards.ExactMatch,type:s.cards.Classification},s.descriptionCards={statement:s.cards.Statement}}},template:a})}.apply(t,a))||(e.exports=i)},33866:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(48851),n(46186),n(32274),n(31599)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("person-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v,h,b,m,g,x=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(x,l),x.sections=[{id:"name",title:"Names and Classifications"},{id:"existence",title:"Existence"},{id:"events",title:"Events"},{id:"parthood",title:"Parthood"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"communication",title:"Communication"},{id:"json",title:"JSON"}],x.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),x.resource=n.observable(null===(a=x.reportMetadata())||void 0===a?void 0:a.resource),x.displayname=n.observable(null===(i=n.unwrap(x.reportMetadata))||void 0===i?void 0:i.displayname),x.activeSection=n.observable("name"),x.contactPointsTable=_objectSpread(_objectSpread({},x.defaultTableConfig),{},{columns:Array(3).fill(null)}),x.getTableConfig=function(e){return _objectSpread(_objectSpread({},x.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},x.visible={contactPoints:n.observable(!0)},x.sourceData=n.observable({sections:[{title:"References",data:[{key:"source reference work",value:x.getRawNodeValue(x.resource(),"source"),type:"resource"}]}]}),x.nameDataConfig={type:void 0},x.documentationDataConfig={subjectOf:void 0},x.existenceEvents=["birth","death"],x.existenceDataConfig={birth:{graph:"birth",metadata:[],children:{names:!0,statements:!0,identifiers:!1,timespan:!0,location:!0}},death:{graph:"death",metadata:[],children:{names:!0,statements:!0,identifiers:!1,timespan:!0,location:!0}}},x.eventEvents=["professional activity","group joining","group leaving"],x.eventDataConfig={"professional activity":{graph:"profession activity",metadata:[{key:"professional activity type",path:"profession activity_type",type:"kv"},{key:"particular professional activity technique",path:"profession activity_technique",type:"kv"},{key:"location of professional activity",path:"profession activity_location",type:"resource"}],children:{names:!0,statements:!0,identifiers:!1,timespan:!0,location:!1}},"group joining":{graph:"joined group",metadata:[{key:"group joined",path:"joined group_joined to",type:"resource"},{key:"group role",path:"joined group_type",type:"kv"},{key:"location of group joining event",path:"joined group_location",type:"resource"}],children:{names:!0,statements:!0,identifiers:!1,timespan:!0,location:!1}},"group leaving":{graph:"left group",metadata:[{key:"group left",path:"left group_left group",type:"resource"},{key:"group leaving event type",path:"left group_type",type:"kv"},{key:"location of group leaving event",path:"left group_location",type:"resource"}],children:{names:!0,statements:!0,identifiers:!1,timespan:!0,location:!1}}},x.nameCards={},x.descriptionCards={},x.documentationCards={},x.existenceCards={},x.communicationCards={},x.eventCards={},x.summary=e.summary,x.cards={},e.report.cards){var y,w,k,S,_,T,C,I,$,j,P,O=e.report.cards;x.cards=x.createCardDictionary(O),x.nameCards={name:null===(y=x.cards)||void 0===y?void 0:y["name of person"],identifier:null===(w=x.cards)||void 0===w?void 0:w["identifier for person"],exactMatch:null===(k=x.cards)||void 0===k?void 0:k["external uri for person"]},x.descriptionCards={statement:null===(S=x.cards)||void 0===S?void 0:S["statement about person"]},x.documentationCards={digitalReference:null===(_=x.cards)||void 0===_?void 0:_["digital reference for person"]},x.communicationCards={contactPoints:null===(T=x.cards)||void 0===T?void 0:T["contact information for person"]},x.existenceCards={birth:{card:null===(C=x.cards)||void 0===C?void 0:C["birth event of person"],subCards:{name:"name for birth event",timespan:"timespan of birth event",statement:"statement about birth event",location:"location of birth event"}},death:{card:null===(I=x.cards)||void 0===I?void 0:I["death event of person"],subCards:{name:"name for death event",timespan:"timespan of death event",statement:"statement about death event",location:"location of death event"}}},x.eventCards={"professional activity":{card:null===($=x.cards)||void 0===$?void 0:$["professional activity of person"],subCards:{name:"name for professional activity",timespan:"timespan of professional activity",statement:"statement about professional activity"}},"group joining":{card:null===(j=x.cards)||void 0===j?void 0:j["group joining event of person"],subCards:{name:"name for group joining event",timespan:"timespan of group joining event",statement:"statement about group joining event"}},"group leaving":{card:null===(P=x.cards)||void 0===P?void 0:P["group leaving event of person"],subCards:{name:"name for group leaving event",timespan:"timespan of group leaving event",statement:"statement about group leaving event"}}}}x.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"member of group",value:x.getRawNodeValue(x.resource(),"member of"),card:null===(s=x.cards)||void 0===s?void 0:s["group person is member of"],type:"resource"}]}]}),x.nameSummary=n.observable(),x.groupSummary=n.observable(),x.contactSummary=n.observable(),x.externalURISummary=n.observable(),x.nationalitySummary=n.observable(),x.birthSummary=n.observable(),x.deathSummary=n.observable();var A=null===(d=x.resource())||void 0===d?void 0:d.name;A&&x.nameSummary(A.map((function(e){return{type:x.getNodeValue(e,"name_type"),content:x.getNodeValue(e,"name_content")}})));var D=null===(c=x.resource())||void 0===c?void 0:c["member of"];D&&x.groupSummary([{group:x.getNodeValue(D)}]);var N=null===(p=x.resource())||void 0===p?void 0:p["contact point"];N&&x.contactSummary(N.map((function(e){return{type:x.getNodeValue(e,"contact point_type"),content:x.getNodeValue(e,"contact point_content")}})));var E=null===(f=x.resource())||void 0===f?void 0:f.exactmatch;E&&x.externalURISummary(E.map((function(e){return{content:x.getNodeValue(e)}})));var L=null===(v=x.resource())||void 0===v?void 0:v.nationality;L&&x.nationalitySummary([{content:x.getNodeValue(L)}]);var R=null===(h=x.resource())||void 0===h||null===(b=h.birth)||void 0===b?void 0:b.Birth_time;R&&x.birthSummary([{beginning_of_beginning:x.getNodeValue(R,"Birth_time_begin of the begin"),end_of_beginning:x.getNodeValue(R,"Birth_time_end of the begin"),beginning_of_end:x.getNodeValue(R,"Birth_time_begin of the end"),end_of_end:x.getNodeValue(R,"Birth_time_end of the end")}]);var M=null===(m=x.resource())||void 0===m||null===(g=m.death)||void 0===g?void 0:g.Death_time;M&&x.deathSummary([{beginning_of_beginning:x.getNodeValue(M,"Death_time_begin of the begin"),end_of_beginning:x.getNodeValue(M,"Death_time_end of the begin"),beginning_of_end:x.getNodeValue(M,"Death_time_begin of the end"),end_of_end:x.getNodeValue(M,"Death_time_end of the end")}])},template:a})}.apply(t,a))||(e.exports=i)},59355:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(14886),n(31599),n(54077),n(54833)],i=function(e,t,n,a){return t.components.register("physical-thing-report",{viewModel:function(n){var i,s,l,d,c,p,f,v,h,b,m,g,x,y,w,k,S,_=this;if(n.configKeys=["tabs","activeTabIndex"],Object.assign(_,a),_.sections=[{id:"name",title:"Names, Identifiers, Classification"},{id:"description",title:"Description"},{id:"existence",title:"Key Events"},{id:"substance",title:"Physical Description"},{id:"actor-relations",title:"Provenance"},{id:"location",title:"Location"},{id:"parthood",title:"Components"},{id:"sethood",title:"Related Collection and Sets"},{id:"aboutness",title:"Content and Iconography"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],_.physicalThingProvenanceDescriptionTypes=["provenance statement"],_.physicalThingPhysicalDescriptionTypes=["dimensions description","materials/technique description"],_.physicalThingExcludedDescriptionTypes=e.union(_.physicalThingProvenanceDescriptionTypes,_.physicalThingPhysicalDescriptionTypes),_.annotationTableConfig=_objectSpread(_objectSpread({},_.defaultTableConfig),{},{columns:Array(6).fill(null)}),_.getTableConfig=function(e){return _objectSpread(_objectSpread({},_.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},_.annotationTableHeader='<tr class="afs-table-header">\n                    <th>Region Name</th>\n                    <th>Part of Object</th>\n                    <th class="min-tabletl">Annotator</th>\n                    <th class="none">Assigned Property Type</th>\n                    <th class="none">Geometric Annotation Identifier</th>\n                    <th class="afs-table-control all"></th>\n                </tr>',_.reportMetadata=t.observable(null===(i=n.report)||void 0===i?void 0:i.report_json),_.resource=t.observable(null===(s=_.reportMetadata())||void 0===s?void 0:s.resource),_.displayname=t.observable(null===(l=t.unwrap(_.reportMetadata))||void 0===l?void 0:l.displayname),_.activeSection=t.observable("name"),_.visible={parts:t.observable(!0)},_.selectedAnnotationTileId=t.observable(null),_.nameCards={},_.descriptionCards={},_.documentationCards={},_.existenceEvents=["production","destruction","removal from object"],_.existenceDataConfig={production:{graph:"production",metadata:[{key:"creator in production event",path:"production_carried out by",type:"resource"},{key:"physical object used in production event",path:"production_used object",type:"resource"},{key:"production event technique",path:"production_technique",type:"resource"},{key:"production event type",path:"production_type",title:!0,type:"resource"},{key:"location of production event",path:"production_location",type:"resource"},{key:"influenced on production event",path:"production_influence",type:"resource"}],parts:{graph:"production_part",metadata:[{key:"creator of event",path:"production_part_carried out by",type:"resource"},{key:"physical object used in production event",path:"production_part_used object",type:"resource"},{key:"production event technique",path:"production_part_technique",type:"kv"},{key:"production event type",path:"production_part_type",title:!0,type:"kv"},{key:"location of production event",path:"production_part_location",type:"resource"},{key:"influenced on production event",path:"production_part_influence",type:"resource"}]}},destruction:{graph:"destruction",metadata:[{key:"location of destruction event",path:"destruction_location",type:"resource"},{key:"destruction event type",path:"destruction_type",type:"kv"}]},"removal from object":{graph:"removal from object",metadata:[{key:"object removed by part removal event",path:"removal from object_removed from",type:"resource"},{key:"person in part removal event",path:"removal from object_carried out by",type:"resource"},{key:"removal from object event technique",path:"removal from object_technique",type:"kv"},{key:"location of part removal event",path:"removal from object_location",type:"resource"},{key:"influence on part removal event",path:"removal from object_influence",type:"resource"}]}},_.setEvents=["addition","removal"],_.setDataConfig={addition:{graph:"addition to collection",metadata:[{key:"collection added to",path:"addition to collection_added to",type:"resource"},{key:"addition event type",path:"addition to collection_type",type:"kv"},{key:"person in removal event",path:"addition to collection_carried out by",type:"resource"}]},removal:{graph:"removal from set",metadata:[{key:"collection removed from",path:"removal from set_removed from",type:"resource"},{key:"removal event type",path:"removal from set_type",type:"kv"},{key:"person in removal event",path:"removal from set_carried out by",type:"resource"}]}},_.existenceCards={},_.substanceCards={},_.setCards={},_.summary=n.summary,n.report.cards){var T,C,I,$,j,P,O,A,D,N,E,L,R,M,V=n.report.cards;if(_.cards=_.createCardDictionary(V),null!==(T=_.cards)&&void 0!==T&&T["production event of object"]){var G,z,J=null!==(G=_.cards["production event of object"].tiles())&&void 0!==G&&null!==(z=G[0])&&void 0!==z&&z.cards?_.cards["production event of object"].tiles()[0].cards:_.cards["production event of object"].cards();_.cards["production event of object"].children=_.createCardDictionary(J)}_.nameCards={name:null===(C=_.cards)||void 0===C?void 0:C["name of object"],identifier:null===(I=_.cards)||void 0===I?void 0:I["identifier of object"],exactMatch:null===($=_.cards)||void 0===$?void 0:$["external uri for object"],type:null===(j=_.cards)||void 0===j?void 0:j["type of object"]},_.descriptionCards={statement:null===(P=_.cards)||void 0===P?void 0:P["statement or interpretation about object"]},_.documentationCards={digitalReference:null===(O=_.cards)||void 0===O?void 0:O["digital reference to object"],subjectOf:null===(A=_.cards)||void 0===A?void 0:A["source reference work for object"]},_.existenceCards={production:{card:null===(D=_.cards)||void 0===D?void 0:D["production event of object"],subCards:{name:"name of production event",identifier:"identifier of production event",timespan:"timespan of production event",statement:"statement about production event",part:"production event part"},partCards:{name:"name for production event part",identifier:"identifier for production event part",timespan:"timespan of production event part",statement:"statement about production event part"}},destruction:{card:null===(N=_.cards)||void 0===N?void 0:N["destruction event of object"],subCards:{name:"name for destruction event",identifier:"identifier for destruction event",timespan:"timespan of destruction event",statement:"statement about destruction event"}},"removal from object":{card:null===(E=_.cards)||void 0===E?void 0:E["part removal event of object"],subCards:{name:"name for part removal event",identifier:"identifier for part removal event",timespan:"timespan of part removal event",statement:"statement about part removal event"}}},_.setCards={addition:{card:null===(L=_.cards)||void 0===L?void 0:L["addition event of object to collection"],subCards:{name:"name for addition event",identifier:"identifier for addition event",timespan:"timespan of addition event",statement:"statement about addition event"}},removal:{card:null===(R=_.cards)||void 0===R?void 0:R["removal event of object from collection"],subCards:{name:"name for addition event",identifier:"identifier for addition event",timespan:"timespan of addition event",statement:"statement about addition event"}}},_.substanceCards={dimension:null===(M=_.cards)||void 0===M?void 0:M["dimension of object"]}}_.aboutnessData=t.observable({sections:[{title:"Content and Iconography",data:[{key:"text carried by object",value:_.getRawNodeValue(_.resource(),"carries"),card:null===(d=_.cards)||void 0===d?void 0:d["text carried by object"],type:"resource"}]}]}),_.locationData=t.observable({sections:[{title:"Current Location of Object",data:[{key:"current location",value:_.getRawNodeValue(_.resource(),"current location"),card:null===(c=_.cards)||void 0===c?void 0:c["current location of object"],type:"resource"}]}]}),_.parthoodData=t.observable({sections:[{title:"Components",data:[{key:"parent object",value:_.getRawNodeValue(_.resource(),"part of"),card:null===(p=_.cards)||void 0===p?void 0:p["parent object"],type:"resource"}]}]}),_.selectedAnnotationTileId=t.observable();var B=_.getRawNodeValue(_.resource(),"part identifier assignment");_.annotation=B?{info:B.map((function(e){var t,n=_.getNodeValue(e,"part identifier assignment_label"),a=_.getRawNodeValue(e,"part identifier assignment_physical part of object"),i=_.getRawNodeValue(e,"part identifier assignment_annotator"),s=_.getNodeValue(e,"part identifier assignment_assigned property type"),l=_.getNodeValue(e,"part identifier assignment_polygon identifier","part identifier assignment_polygon identifier_classification"),d=_.getTileId(e),c=_.getNodeValue(e,"part identifier assignment_polygon identifier"),p=_createForOfIteratorHelper(c.features);try{for(p.s();!(t=p.n()).done;)feature=t.value,feature.properties.tileId=d}catch(e){p.e(e)}finally{p.f()}return{column1:n,column2:a,column3:i,column4:s,column5:l,tileId:d,featureCollection:c}})),card:null===(f=_.cards)||void 0===f?void 0:f["parts of object"]}:{},_.actorData=t.observable({sections:[{title:"Provenance",data:[{key:"current owner of object",value:_.getRawNodeValue(_.resource(),"current owner"),card:null===(v=_.cards)||void 0===v?void 0:v["current owner of object"],type:"resource"}]}]}),_.parts=t.observableArray(),_.sethoodData=t.observable({sections:[{title:"Related Collection and Sets",data:[{key:"Collection Object is Part Of",value:_.getRawNodeValue(_.resource(),"member of"),card:null===(h=_.cards)||void 0===h?void 0:h["collection object is part of"],type:"resource"}]}]}),_.nameSummary=t.observable(),_.imageSummary=t.observable(),_.statementsSummary=t.observable(),_.typeSummary=t.observable(),_.identifierSummary=t.observable(),_.ownerSummary=t.observable(),_.dimensionsSummary=t.observable(),_.creationSummary=t.observable(),_.externalURISummary=t.observable();var W=null===(b=_.resource())||void 0===b?void 0:b.name;W&&_.nameSummary(W.map((function(e){return{type:_.getNodeValue(e,"name_type"),content:_.getNodeValue(e,"name_content"),language:_.getNodeValue(e,"name_language")}}))),_.getThumbnail=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var t;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"56f8e26e-ca7c-11e9-9aa3-a4d18cec433a","56f8e9bd-ca7c-11e9-b578-a4d18cec433a",t=e.tiles.find((function(e){return"56f8e26e-ca7c-11e9-9aa3-a4d18cec433a"===e.nodegroup_id})),n.abrupt("return",window.fetch(t.data["56f8e9bd-ca7c-11e9-b578-a4d18cec433a"]).then((function(e){if(e.ok)return e.json()})));case 4:case"end":return n.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}();var q=t.unwrap(_.reportMetadata).resourceinstanceid,U=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var e,t,n,i,s;return _regeneratorRuntime().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e="707cbd78-ca7a-11e9-990b-a4d18cec433a",t="0c682c76-a6a4-48f0-9c5b-1203a6dc33da",l.next=4,a.getRelatedResources(q);case 4:n=l.sent,i=null==n?void 0:n.related_resources,(s=i.filter((function(t){return t.graph_id===e}))).length&&s.forEach(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.domains.map((function(e){return e.conceptid})).includes(t)){a.next=6;break}return a.next=4,_.getThumbnail(e);case 4:(n=a.sent)&&_.imageSummary([{displayname:n.label,thumbnail:n.sequences[0].canvases[0].thumbnail["@id"]}]);case 6:case"end":return a.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return l.stop()}}),_callee3)})));return function(){return e.apply(this,arguments)}}();U();var H=null===(m=_.resource())||void 0===m?void 0:m.statement;H&&_.statementsSummary(H.map((function(e){return{type:_.getNodeValue(e,"statement_type"),content:_.getNodeValue(e,"statement_content"),language:_.getNodeValue(e,"statement_language")}})));var Y=null===(g=_.resource())||void 0===g?void 0:g.type;Y&&_.typeSummary([{type:_.getNodeValue(Y)}]);var K=null===(x=_.resource())||void 0===x?void 0:x.identifier;K&&_.identifierSummary(K.map((function(e){return{type:_.getNodeValue(e,"identifier_type"),content:_.getNodeValue(e,"identifier_content")}})));var Q=null===(y=_.resource())||void 0===y?void 0:y["current owner"];Q&&_.ownerSummary(Q.instance_details.map((function(e){return{displayValue:_.getNodeValue(e),link:_.getResourceLink({resourceId:_.getNodeValue(e,"resourceId")})}})));var X=null===(w=_.resource())||void 0===w?void 0:w.dimension;X&&_.dimensionsSummary(X.map((function(e){var t=_.getNodeValue(e,"Dimension_value "),n=_.getNodeValue(e,"dimension_unit");return{type:_.getNodeValue(e,"dimension_type"),value:t,unit:n}})));var Z=null===(k=_.resource())||void 0===k?void 0:k.production;Z&&_.creationSummary(Z.map((function(e){var t,n,i=_.getNodeValue(e,"Production_carried out by"),s=_.getNodeValue(null==e?void 0:e.production_time,"Production_time_begin of the begin"),l=_.getNodeValue(e,"Production_type"),d=_.getNodeValue(e,"Production_technique"),c=_.getNodeValue(e,"Production_location"),p=null!=e&&null!==(t=e.production_location)&&void 0!==t&&t.instance_details?null==e||null===(n=e.production_location)||void 0===n?void 0:n.instance_details[0]:null;return{creator:i,creationDate:s,type:l,technique:d,location:c,locationLink:a.getResourceLink({resourceId:null==p?void 0:p.resourceId})}})));var ee=null===(S=_.resource())||void 0===S?void 0:S.exactmatch;ee&&_.externalURISummary([{displayValue:_.getNodeValue(ee)}])},template:n})}.apply(t,a),void 0===i||(e.exports=i)},58751:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(405),n(46186),n(31599),n(76234),n(48245)],void 0===(i=function(e,t,n,a,i,s){return n.components.register("place-report",{viewModel:function(e){var t,a,i,l,d,c=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(c,s),c.sections=[{id:"name",title:"Names and Classifications"},{id:"location",title:"Location"},{id:"parthood",title:"Parthood"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],c.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),c.resource=n.observable(null===(a=c.reportMetadata())||void 0===a?void 0:a.resource),c.displayname=n.observable(null===(i=n.unwrap(c.reportMetadata))||void 0===i?void 0:i.displayname),c.activeSection=n.observable("name"),c.nameDataConfig={exactMatch:"external uri"},c.documentationDataConfig={subjectOf:void 0,label:void 0},c.nameCards={},c.descriptionCards={},c.documentationCards={},c.locationCards={},c.summary=e.summary,c.nameSummaryTableConfig=_objectSpread(_objectSpread({},c.defaultTableConfig),{},{columns:Array(2).fill(null),columnDefs:[]}),c.nameSummary=n.observable(),c.nameSummary(null===(l=c.resource().Name)||void 0===l?void 0:l.map((function(e){return{content:c.getNodeValue(e,"content"),type:c.getNodeValue(e,"type")}}))),e.report.cards){var p,f,v,h,b,m,g,x=e.report.cards;c.cards=c.createCardDictionary(x),c.nameCards={name:null===(p=c.cards)||void 0===p?void 0:p["name of place"],identifier:null===(f=c.cards)||void 0===f?void 0:f.identifier,exactMatch:null===(v=c.cards)||void 0===v?void 0:v["external uri for place"],type:null===(h=c.cards)||void 0===h?void 0:h["type of place"]},c.descriptionCards={statement:null===(b=c.cards)||void 0===b?void 0:b["statement about place"]},c.documentationCards={digitalReference:null===(m=c.cards)||void 0===m?void 0:m["digital reference to place"]},c.locationCards={locationGeometry:null===(g=c.cards)||void 0===g?void 0:g["geospatial definition of place"]}}c.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"parent place",value:c.getRawNodeValue(c.resource(),"part of"),card:null===(d=c.cards)||void 0===d?void 0:d["parent place"],type:"resource"}]}]}),c.geojson=c.getNodeValue(c.resource(),"defined by")},template:a})}.apply(t,a))||(e.exports=i)},74119:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(68666),n(46186),n(32274),n(31599),n(76234)],i=function(e,t,n,a,i,s,l){return n.components.register("project-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v,h,b,m,g,x,y,w=this;e.configKeys=["tabs","activeTabIndex"],Object.assign(w,l),w.sections=[{id:"name",title:"Names, Identifiers, Classification"},{id:"substance",title:"Project Timeline"},{id:"parthood",title:"Parent Project"},{id:"components",title:"Component Projects"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],w.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),w.resource=n.observable(null===(a=w.reportMetadata())||void 0===a?void 0:a.resource),w.displayname=n.observable(null===(i=n.unwrap(w.reportMetadata))||void 0===i?void 0:i.displayname),w.activeSection=n.observable("name"),w.nameDataConfig={exactMatch:void 0},w.documentationDataConfig={label:void 0,subjectOf:"influenced by"},w.substanceDataConfig={dimension:void 0,timespan:{path:"timespan",key:"dates of project"}},w.nameCards={},w.descriptionCards={},w.documentationCards={},w.summary=e.summary,w.getTableConfig=function(e){return _objectSpread(_objectSpread({},w.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},w.identifierTableConfig=_objectSpread(_objectSpread({},w.defaultTableConfig),{},{columns:Array(2).fill(null)}),w.collectionOfChildProjects=n.observableArray(),w.visible={childProjects:n.observable(!0),names:n.observable(!0),identifiers:n.observable(!0),classifications:n.observable(!0),statements:n.observable(!0)};var k=n.unwrap(w.reportMetadata).resourceinstanceid,S=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(){var e,t,n,a;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.getRelatedResources(k);case 2:e=i.sent,t=null==e?void 0:e.related_resources,n=null==e?void 0:e.resource_relationships,a=n.filter((function(e){return(null==e?void 0:e.resourceinstancefrom_graphid)===(null==e?void 0:e.resourceinstanceto_graphid)})).map((function(e){return e.resourceinstanceidfrom})),w.collectionOfChildProjects(t.filter((function(e){return a.includes(e.resourceinstanceid)}))),w.collectionOfChildProjects().map((function(e){return e.link=l.getResourceLink({resourceId:e.resourceinstanceid}),e.displaydescription=l.stripTags(e.displaydescription),e}));case 8:case"end":return i.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(){return t.apply(this,arguments)}}();if(S(),e.report.cards){var _,T,C,I,$,j,P,O=e.report.cards;w.cards=w.createCardDictionary(O),w.nameCards={name:null===(_=w.cards)||void 0===_?void 0:_["name of project"],identifier:null===(T=w.cards)||void 0===T?void 0:T["identifier for project"],type:null===(C=w.cards)||void 0===C?void 0:C["scale of project"]},w.descriptionCards={statement:null===(I=w.cards)||void 0===I?void 0:I["statement about project"]},w.documentationCards={digitalReference:null===($=w.cards)||void 0===$?void 0:$["digital reference to project"],subjectOf:null===(j=w.cards)||void 0===j?void 0:j["source reference work for project"]},w.substanceCards={timespan:null===(P=w.cards)||void 0===P?void 0:P["dates of project"]}}w.parthoodData=n.observable({sections:[{title:"Parent Project",data:[{key:"parent project",value:w.getRawNodeValue(w.resource(),"part of"),card:null===(s=w.cards)||void 0===s?void 0:s["parent project"],type:"resource"}]}]}),w.temporalData=n.observable({sections:[{title:"Temporal Relations of Project",data:[{key:"Occurs After Event",value:w.getRawNodeValue(w.resource(),"starts after"),card:null===(d=w.cards)||void 0===d?void 0:d["temporal relations of project"],type:"resource"},{key:"Occurs Before Event",value:w.getRawNodeValue(w.resource(),"ends before"),card:null===(c=w.cards)||void 0===c?void 0:c["temporal relations of project"],type:"resource"}]}]}),w.parameterData=n.observable({sections:[{title:"Project Team",data:[{key:"project team",value:w.getRawNodeValue(w.resource(),"carried out by"),card:null===(p=w.cards)||void 0===p?void 0:p["project team"],type:"resource"}]},{title:"Activity Type of Project",data:[{key:"activity type of project",value:w.getRawNodeValue(w.resource(),"technique"),card:null===(f=w.cards)||void 0===f?void 0:f["activity type of project"],type:"resource"}]}]}),w.nameSummary=n.observable(),w.datesSummary=n.observable(),w.activityTypeSummary=n.observable(),w.parentProjectSummary=n.observable(),w.teamSummary=n.observable(),w.statementsSummary=n.observable(),w.identifierSummary=n.observable(),w.typeSummary=n.observable();var A=null===(v=w.resource())||void 0===v?void 0:v.Name;A&&w.nameSummary(A.map((function(e){return{type:w.getNodeValue(e,"Name_type"),content:w.getNodeValue(e,"Name_content"),language:w.getNodeValue(e,"Name_language")}})));var D=null===(h=w.resource())||void 0===h?void 0:h.timespan;D&&w.datesSummary([{beginning_of_beginning:w.getNodeValue(D,"TimeSpan_begin of the begin"),end_of_beginning:w.getNodeValue(D,"TimeSpan_end of the begin"),beginning_of_end:w.getNodeValue(D,"TimeSpan_begin of the end"),end_of_end:w.getNodeValue(D,"TimeSpan_end of the end")}]);var N=null===(b=w.resource())||void 0===b?void 0:b.technique;N&&w.activityTypeSummary([{content:w.getNodeValue(N)}]);var E=null===(m=w.resource())||void 0===m?void 0:m["part of"];E&&w.parentProjectSummary([{content:w.getNodeValue(E),link:w.getResourceLink({resourceId:w.getNodeValue(E,"resourceId")})}]);var L=null===(g=w.resource())||void 0===g?void 0:g["carried out by"];L&&w.teamSummary(L.instance_details.map((function(e){return{content:w.getNodeValue(e),link:w.getResourceLink({resourceId:w.getNodeValue(e,"resourceId")})}})));var R=null===(x=w.resource())||void 0===x?void 0:x.Statement;R&&w.statementsSummary(R.map((function(e){return{type:w.getNodeValue(e,"Statement_type"),content:w.getNodeValue(e,"Statement_content"),language:w.getNodeValue(e,"Statement_language")}})));var M=null===(y=w.resource())||void 0===y?void 0:y.Identifier;M&&w.identifierSummary(M.map((function(e){return{type:w.getNodeValue(e,"Identifier_type"),content:w.getNodeValue(e,"Identifier_content")}})))},template:a})}.apply(t,a),void 0===i||(e.exports=i)},69960:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(29529),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("provenance-activity-report",{viewModel:function(e){var t,a,i,s=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(s,l),s.sections=[{id:"name",title:"Names and Classifications"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"}],s.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),s.resource=n.observable(null===(a=s.reportMetadata())||void 0===a?void 0:a.resource),s.displayname=n.observable(null===(i=n.unwrap(s.reportMetadata))||void 0===i?void 0:i.displayname),s.activeSection=n.observable("name"),s.nameDataConfig={exactMatch:void 0,type:"Classification"},s.nameCards={},s.descriptionCards={},s.documentationCards={},s.documentationDataConfig={subjectOf:"Textual Source"},s.summary=e.summary,e.report.cards){var d,c=e.report.cards;s.cards=s.createCardDictionary(c),s.nameCards={name:s.cards.name,identifier:s.cards.Identifier,exactMatch:s.cards.ExactMatch,type:s.cards.Classification},s.descriptionCards={statement:s.cards.Statement},s.documentationCards={subjectOf:null===(d=s.cards)||void 0===d?void 0:d["Reference in Source Material"]}}},template:a})}.apply(t,a))||(e.exports=i)},12155:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(54912),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("sampling-activity-report",{viewModel:function(e){var t,a,i,s,d,c,p,f,v,h,b,m,g,x=this;if(e.configKeys=["tabs","activeTabIndex"],Object.assign(x,l),x.sections=[{id:"name",title:"Names and Classifications"},{id:"substance",title:"Substance"},{id:"temporal",title:"Temporal Relations"},{id:"parameters",title:"Parameters & Outcomes"},{id:"parthood",title:"Parthood"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],x.annotationTableConfig=_objectSpread(_objectSpread({},x.defaultTableConfig),{},{columns:Array(4).fill(null)}),x.annotationTableHeader='<tr class="afs-table-header">\n                    <th>Sampling Area</th>\n                    <th>Sample Created</th>\n                    <th>Overall Object</th>\n                    <th class="afs-table-control all"></th>\n                </tr>',x.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),x.resource=n.observable(null===(a=x.reportMetadata())||void 0===a?void 0:a.resource),x.displayname=n.observable(null===(i=n.unwrap(x.reportMetadata))||void 0===i?void 0:i.displayname),x.activeSection=n.observable("name"),x.selectedAnnotationTileId=n.observable(null),x.nameDataConfig={exactMatch:void 0},x.documentationDataConfig={label:void 0,subjectOf:void 0},x.substanceDataConfig={dimension:void 0,timespan:{path:"timespan",key:"dates of sampling activiy"}},x.nameCards={},x.descriptionCards={},x.documentationCards={},x.visible={parts:n.observable(!0)},x.summary=e.summary,x.getTableConfig=function(e){return _objectSpread(_objectSpread({},x.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},x.parentProjectSummary=n.observable(),x.nameSummary=n.observable(),x.statementSummary=n.observable(),x.typeSummary=n.observable(),x.getRawNodeValue(x.resource(),"part of")&&(displayValue=x.getNodeValue(x.resource(),"part of"),link=x.getResourceLink(x.resource(),"part of"),x.parentProjectSummary({displayValue:displayValue,link:link})),x.nameSummary(null===(s=x.resource().Name)||void 0===s?void 0:s.map((function(e){return{content:x.getNodeValue(e,"name_content"),type:x.getNodeValue(e,"name_type")}}))),x.statementSummary(null===(d=x.resource().Statement)||void 0===d?void 0:d.map((function(e){return{content:x.getNodeValue(e,"statement_content"),type:x.getNodeValue(e,"statement_type")}}))),x.getRawNodeValue(x.resource(),"type")&&(displayValue=x.getNodeValue(x.resource(),"type"),x.typeSummary({displayValue:displayValue})),e.report.cards){var y,w,k,S,_,T,C=e.report.cards;x.cards=x.createCardDictionary(C),x.nameCards={name:null===(y=x.cards)||void 0===y?void 0:y["name of sampling activity"],identifier:null===(w=x.cards)||void 0===w?void 0:w["identifier for sampling activity"],type:null===(k=x.cards)||void 0===k?void 0:k["type of sampling activity"]},x.descriptionCards={statement:null===(S=x.cards)||void 0===S?void 0:S["statement about sampling activity"]},x.documentationCards={digitalReference:null===(_=x.cards)||void 0===_?void 0:_["digital reference to sampling activity"]},x.substanceCards={timespan:null===(T=x.cards)||void 0===T?void 0:T["dates of sampling activity"]}}x.temporalData=n.observable({sections:[{title:"Temporal Relations of Sampling Activity",data:[{key:"Occurs After Event",value:x.getRawNodeValue(x.resource(),"starts after"),card:null===(c=x.cards)||void 0===c?void 0:c["occurs after event in sampling activity"],type:"resource"},{key:"Occurs Before Event",value:x.getRawNodeValue(x.resource(),"ends before"),card:null===(p=x.cards)||void 0===p?void 0:p["occurs before event in sampling activity"],type:"resource"}]}]}),x.parthoodData=n.observable({sections:[{title:"Parthood",data:[{key:"parent project of sampling activity",value:x.getRawNodeValue(x.resource(),"part of"),card:null===(f=x.cards)||void 0===f?void 0:f["parent project of sampling activity"],type:"resource"}]}]}),x.parameterData=n.observable({sections:[{title:"Sampling Info",data:[{key:"sampling activity technique",value:x.getRawNodeValue(x.resource(),"technique"),card:null===(v=x.cards)||void 0===v?void 0:v["technique of sampling activity"],type:"resource"},{key:"sampling procedure",value:x.getRawNodeValue(x.resource(),"used process"),card:null===(h=x.cards)||void 0===h?void 0:h["procedure used for sampling activity"],type:"resource"},{key:"sampling activity tool type",value:x.getRawNodeValue(x.resource(),"used object type"),card:null===(b=x.cards)||void 0===b?void 0:b["tool type used in sampling activity"],type:"resource"},{key:"samplers",value:x.getRawNodeValue(x.resource(),"carried out by"),card:null===(m=x.cards)||void 0===m?void 0:m.samplers,type:"resource"}]}]});var I=x.getRawNodeValue(x.resource(),"sampling unit");x.annotation=I?{info:I.map((function(e){var t,n=x.getRawNodeValue(e,"sampling area"),a=x.getRawNodeValue(e,"sample created"),i=x.getRawNodeValue(e,"sampling area","overall object sampled"),s=x.getTileId(e),l=x.getNodeValue(e,"sampling area","sampling area identification","Sampling Area Visualization"),d=_createForOfIteratorHelper(l.features);try{for(d.s();!(t=d.n()).done;)feature=t.value,feature.properties.tileId=s}catch(e){d.e(e)}finally{d.f()}return{column1:n,column2:a,column3:i,tileId:s,featureCollection:l}})),card:null===(g=x.cards)||void 0===g?void 0:g["Sampling Unit for Sampling Activity"]}:{}},template:a})}.apply(t,a))||(e.exports=i)},54833:function(e,t,n){var a,i;a=[n(54922),n(14671),n(28459),n(35605),n(31599),n(22023),n(91762),n(66504),n(54077)],void 0===(i=function(e,t,n,a,i){return e.components.register("views/components/reports/scenes/annotation-parts",{viewModel:function(t){var s=this,l=this;Object.assign(l,i),l.maps=e.observableArray(),l.selectedAnnotationTileId=t.selectedAnnotationTileId||e.observable(),l.annotations=[],l.annotationTableConfig=t.annotationTableConfig,l.annotationTableHeader=t.annotationTableHeader,l.prepareAnnotation=function(e){var t=e.features[0].properties.canvas;return{center:[0,0],crs:a.CRS.Simple,zoom:0,afterRender:function(i){a.tileLayer.iiif(t+"/info.json").addTo(i);var s=n(e);i.addLayer(a.geoJson(e,{pointToLayer:function(e,t){return a.circleMarker(t,e.properties)},style:function(e){return e.properties},onEachFeature:function(e,t){t.on("click",(function(){e.properties&&e.properties.tileId&&l.selectedAnnotationTileId(e.properties.tileId)}))}})),a.control.fullscreen().addTo(i),setTimeout((function(){i.fitBounds([[s[1]-1,s[0]-1],[s[3]+1,s[2]+1]])}),250),l.maps.push(i)}}};var d={};t.annotation.info.forEach((function(e){var t=e.featureCollection.features[0].properties.canvas;t in d?d[t].push(e):d[t]=[e]}));var _loop=function(){var n,a=e.observableArray();d[c].forEach((function(e){n?n.features=n.features.concat(e.featureCollection.features):n=e.featureCollection,a.push(e)}));var i=s.prepareAnnotation(n);l.annotations.push({leafletConfig:i,info:a,card:t.annotation.card})};for(var c in d)_loop();l.selectedAnnotationTileId.subscribe((function(e){l.maps()&&l.maps().forEach((function(t){t.eachLayer((function(t){t.eachLayer&&t.eachLayer((function(t){var n=t.feature.properties.color;e===t.feature.properties.tileId?t.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}):t.setStyle({color:n,fillColor:n})}))}))}))}))},template:t})}.apply(t,a))||(e.exports=i)},35913:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(40046),n(31599),n(54077)],void 0===(i=function(e,t,n){return e.components.register("views/components/reports/scenes/communication",{viewModel:function(t){var a,i=this;(Object.assign(i,n),i.map=e.observable(),i.selectedAnnotationTileId=e.observable(),i.cards={},i.visible={contactPoints:e.observable(!0)},i.contactPointsTableConfig=_objectSpread(_objectSpread({},i.defaultTableConfig),{},{columns:Array(3).fill(null)}),i.dataConfig={name:"contact point"},i.contactPoints=e.observableArray(),i.cards=Object.assign({},t.cards),Object.assign(i.dataConfig,t.dataConfig||{}),null!=t&&t.compiled)?i.contactPoints(t.data.contactPoints):i.contactPoints(null===(a=i.getRawNodeValue(e.unwrap(t.data),i.dataConfig.name))||void 0===a?void 0:a.map((function(e){return{content:i.getNodeValue(e,"".concat(i.dataConfig.name,"_content")),type:i.getNodeValue(e,"".concat(i.dataConfig.name,"_type")),tileid:i.getTileId(e)}})))},template:t})}.apply(t,a))||(e.exports=i)},24343:function(e,t,n){var a,i;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(84490),n(54922),n(66145),n(46186),n(31599),n(54077),n(45888)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/default",{viewModel:function(e){var n=this;Object.assign(n,i),n.cards=Object.assign({},e.cards),n.edit=e.editTile||n.editTile,n.delete=e.deleteTile||n.deleteTile,n.add=e.addTile||n.addNewTile,n.data=t.observable(),n.data(t.unwrap(e.data)),n.visible={};var a,s=_createForOfIteratorHelper(t.unwrap(e.data).sections);try{for(s.s();!(a=s.n()).done;){var l=a.value;n.visible[l.title]=t.observable(!0)}}catch(e){s.e(e)}finally{s.f()}},template:n})}.apply(t,a))||(e.exports=i)},92933:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(32925),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/description",{viewModel:function(n){var a=this;if(Object.assign(a,i),a.statementTableConfig=_objectSpread(_objectSpread({},a.defaultTableConfig),{},{columns:Array(4).fill(null)}),a.dataConfig={statement:"Statement"},a.cards=Object.assign({},n.cards),a.edit=n.editTile||a.editTile,a.delete=n.deleteTile||a.deleteTile,a.add=n.addTile||a.addNewTile,a.statements=t.observableArray(),a.visible={statements:t.observable(!0)},Object.assign(a.dataConfig,n.dataConfig||{}),a.requestedTypes=n.requestedTypes,a.excludedTypes=n.excludedTypes,null!=n&&n.compiled)a.statements(n.data.statements);else{var s=n.data()[a.dataConfig.statement];s&&(void 0===s.length&&(s=[s]),a.statements(s.reduce((function(t,n){var i=a.getNodeValue(n,{testPaths:[["".concat(a.dataConfig.statement.toLowerCase(),"_type")],["type"]]}),s=a.getNodeValue(n,{testPaths:[["".concat(a.dataConfig.statement.toLowerCase(),"_content")],["content"]]}),l=a.getNodeValue(n,{testPaths:[["".concat(a.dataConfig.statement.toLowerCase(),"_language")],["language"]]}),d=a.getTileId(n),c=i.split(",");return a.requestedTypes&&!Array.isArray(a.requestedTypes)&&(a.requestedTypes=[a.requestedTypes]),(!a.requestedTypes&&!a.excludedTypes||a.requestedTypes&&e.intersection(c,a.requestedTypes).length>0||a.excludedTypes&&0==e.intersection(c,a.excludedTypes).length)&&t.push({type:i,content:s,language:l,tileid:d}),t}),[])))}},template:n})}.apply(t,a))||(e.exports=i)},52226:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(53101),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/documentation",{viewModel:function(e){var n=this;if(Object.assign(n,i),n.digitalReferenceTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(3).fill(null)}),n.subjectOfTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(1).fill(null)}),n.dataConfig={label:"_label",digitalReference:"Digital Reference",subjectOf:"subject of"},n.cards=Object.assign({},e.cards),n.edit=e.editTile||n.editTile,n.delete=e.deleteTile||n.deleteTile,n.add=e.addTile||n.addNewTile,n.digitalReference=t.observableArray(),n.label=t.observable(),n.subjectOf=t.observableArray(),n.visible={digitalReference:t.observable(!0),subjectOf:t.observable(!0),label:t.observable(!0)},n.subjectOfDisplay=t.observable(!0),n.digitalReferenceDisplay=t.observable(!0),Object.assign(n.dataConfig,e.dataConfig||{}),n.dataConfig.digitalReference||n.toggleVisibility(n.digitalReferenceDisplay),n.dataConfig.subjectOf||n.toggleVisibility(n.subjectOfDisplay),null!=e&&e.compiled)n.label(e.data.label),n.digitalReference(e.data.digitalReference),n.subjectOf(e.data.subjectOf);else{if(n.dataConfig.label&&n.label(n.getNodeValue(e.data(),n.dataConfig.label)),n.dataConfig.digitalReference){var a=e.data()[n.dataConfig.digitalReference];a&&(void 0===a.length&&(a=[a]),n.digitalReference(a.map((function(e){var t=n.getNodeValue(e,{testPaths:[["digital reference_digital reference type"],["digital reference type"]]}),a=n.getNodeValue(e,{testPaths:[["digital reference_digital source"],["digital source"]]});return{link:n.getResourceLink(n.getRawNodeValue(e,{testPaths:[["digital reference_digital source"],["digital source"]]})),type:t,source:a,tileid:null==e?void 0:e["@tile_id"]}}))))}if(n.dataConfig.subjectOf){var s=n.getRawNodeValue(e.data(),n.dataConfig.subjectOf);if(s){var l=null==s?void 0:s["@tile_id"];n.subjectOf(null==s?void 0:s.instance_details.map((function(e){return{display:null==e?void 0:e.display_value,link:n.getResourceLink(e),tileid:l}})))}}}},template:n})}.apply(t,a))||(e.exports=i)},45243:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(38536),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/existence",{viewModel:function(e){var n=this;Object.assign(n,i),n.nameTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(4).fill(null)}),n.identifierTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(3).fill(null)}),n.statementsTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(5).fill(null)}),n.productionTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(7).fill(null)}),n.dataConfig={production:{graph:"production",metadata:[]}},n.cards=Object.assign({},e.cards),n.edit=e.editTile||n.editTile,n.delete=e.deleteTile||n.deleteTile,n.add=e.addTile||n.addNewTile,n.events=e.events||["production"],n.eventDataArray={},n.visible={},Object.assign(n.dataConfig,e.dataConfig||{});var a=function extractEventData(e,a,i,s){if(!a)return[];Array.isArray(a)||(a=[a]);var l=i.graph;return a.map((function(a){var d={children:i.children||{names:!0,identifiers:!0,statements:!0,timespan:!0,location:!1},names:t.observableArray(),title:t.observable(),visible:t.observable(!0),identifiers:t.observableArray(),statements:t.observableArray(),timespan:t.observable(),location:t.observable(),parts:t.observableArray(),metadata:t.observableArray()};d.tileid=null==a?void 0:a["@tile_id"];var c=null==s?void 0:s.card;if(c){var p,f=s.subCards,v=n.createCardDictionary(null===(p=c.tiles().find((function(e){return e.tileid==d.tileid})))||void 0===p?void 0:p.cards);v&&(v.name=null==v?void 0:v[f.name],v.statement=null==v?void 0:v[f.statement],v.timespan=null==v?void 0:v[f.timespan],v.identifier=null==v?void 0:v[f.identifier],v.location=null==v?void 0:v[f.location],v.part=null==v?void 0:v[f.part],d.cards=v)}if(a){var h,b=n.getRawNodeValue(a,"".concat(l,"_name"));if(b&&n.nestedDataExists(b)){var m=b.length?b:[b];d.names(m.map((function(e){var t=n.getNodeValue(e,"".concat(l,"_name_content")),a=n.getNodeValue(e,"".concat(l,"_name_type"));return{language:n.getNodeValue(e,"".concat(l,"_name_language")),name:t,tileid:null==e?void 0:e["@tile_id"],type:a}})))}var g=n.getRawNodeValue(a,"".concat(l,"_identifier"));if(g&&n.nestedDataExists(g)){var x=g.length?g:[g];d.identifiers(x.map((function(e){var t=n.getNodeValue(e,"".concat(l,"_identifier_content")),a=n.getNodeValue(e,"".concat(l,"_identifier_type"));return{name:t,tileid:null==e?void 0:e["@tile_id"],type:a}})))}var y=n.getRawNodeValue(a,"".concat(l,"_location"));y&&n.nestedDataExists(y)&&d.location(y);var w=n.getRawNodeValue(a,"".concat(l,"_time"));if(w&&n.nestedDataExists(w)){var k=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_begin of the begin")],["".concat(l,"_begin of the begin")]]}),S=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_begin of the end")],["".concat(l,"_begin of the end")]]}),_=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_end of the begin")],["".concat(l,"_end of the begin")]]}),T=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_end of the end")],["".concat(l,"_end of the end")]]}),C=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_name"),"".concat(l,"_time_name_content")],["".concat(l,"_time_name"),0,"".concat(l,"_time_name_content")]]}),I=n.getNodeValue(w,"".concat(l,"_time_duration"),"".concat(l,"_time_duration_value")),$=n.getNodeValue(w,"".concat(l,"_time_duration"),"".concat(l,"_time_duration_unit")),j="".concat(I," ").concat($.replace(/\([^()]*\)/g,"")),P=n.getNodeValue(w,{testPaths:[["".concat(l,"_time_duration"),"".concat(l,"_time_duration_name"),"".concat(l,"_time_duration_name_content")],["".concat(l,"_time_duration"),"".concat(l,"_time_duration_name"),0,"".concat(l,"_time_duration_name_content")]]});d.timespan({beginningComplete:S,beginningStart:k,duration:j,durationEventName:P,endingComplete:T,endingStart:_,name:C})}var O=n.getRawNodeValue(a,"".concat(l,"_statement"));if(O&&n.nestedDataExists(O)){var A=O.length?O:[O];d.statements(A.map((function(e){var t=n.getNodeValue(e,"".concat(l,"_statement_content")),a=n.getNodeValue(e,"".concat(l,"_statement_name"),"".concat(l,"_statement_name_content")),i=n.getNodeValue(e,"".concat(l,"_statement_type"));return{content:t,language:n.getNodeValue(e,"".concat(l,"_statement_language")),name:a,tileid:null==e?void 0:e["@tile_id"],type:i}})))}var D=n.getRawNodeValue(a,null==i||null===(h=i.parts)||void 0===h?void 0:h.graph);if(null!=D&&D.length){var N=D.map((function(t){var n,a={};if(null!=s&&s.partCards)a=s.partCards;else if(null!=s&&s.subCards){var l=Object.keys(null==s?void 0:s.subCards);a=JSON.parse(JSON.stringify(null==s?void 0:s.subCards));for(var c=0,p=l;c<p.length;c++){a[p[c]]+=" part"}}var f=extractEventData(e,t,i.parts,{card:null==d||null===(n=d.cards)||void 0===n?void 0:n.part,subCards:a});return _objectSpread({},null==f?void 0:f[0])}));d.parts(N)}var E,L=[],R=_createForOfIteratorHelper(i.metadata);try{for(R.s();!(E=R.n()).done;){configuration=E.value;var M=configuration.key,V=configuration.type,G=n.getNodeValue(a,{testPaths:[[configuration.path]]}),z="resource"==V?n.getRawNodeValue(a,{testPaths:[[configuration.path]]}):G;configuration.title&&"--"!=G&&d.title(n.getNodeValue(a,{testPaths:[[configuration.path]]})),L.push({key:M,type:V,value:z})}}catch(e){R.e(e)}finally{R.f()}return d.metadata(L),d}}))};if(null!=e&&e.compiled)n.eventDataArray=e.data.eventData;else{var s,l=_createForOfIteratorHelper(n.events);try{for(l.s();!(s=l.n()).done;){var d,c,p,f;existenceEvent=s.value,n.visible[existenceEvent]=t.observable(!0),n.visible[existenceEvent].parts=t.observable(!0),n.eventDataArray[existenceEvent]=a(existenceEvent,n.getRawNodeValue(e.data(),null===(d=n.dataConfig)||void 0===d||null===(c=d[existenceEvent])||void 0===c?void 0:c.graph),null===(p=n.dataConfig)||void 0===p?void 0:p[existenceEvent],null===(f=n.cards)||void 0===f?void 0:f[existenceEvent],e.metadata)}}catch(e){l.e(e)}finally{l.f()}}},template:n})}.apply(t,a))||(e.exports=i)},76581:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(54922),n(56291),n(31599),n(46186),n(22023),n(64328)],i=function(e,t,n,a){return e.components.register("views/components/reports/scenes/json",{viewModel:function(t){var i=this;Object.assign(i,n),i.selectedJSON=e.observable(),i.selectedFormat=e.observable(),i.codeMirrorJsonLDMode=e.observable(),i.codeMirrorJsonMode=e.observable(),i.resourceInstanceId=t.resourceInstanceId,i.json={},i.visible={json:e.observable(!0)},i.setSelectedJson=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(e){var t;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.json[e]){n.next=7;break}return n.next=3,fetch("".concat(a.urls.api_resources(i.resourceInstanceId),"?format=").concat(e));case 3:return t=n.sent,n.next=6,t.json();case 6:i.json[e]=n.sent;case 7:i.selectedJSON(JSON.stringify(i.json[e],null,2)),i.selectedFormat(e),"json-ld"==e?i.codeMirrorJsonLDMode(!0)&&i.codeMirrorJsonMode(!1):i.codeMirrorJsonLDMode(!1)&&i.codeMirrorJsonMode(!0);case 10:case"end":return n.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(e){return t.apply(this,arguments)}}(),i.setSelectedJson("json")},template:t})}.apply(t,a),void 0===i||(e.exports=i)},45888:function(e,t,n){var a,i;a=[n(84490),n(54922),n(56795),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/keyvalue",{viewModel:function(e){var n=this;Object.assign(n,i),n.cards=Object.assign({},e.cards),n.edit=e.editTile||n.editTile,n.delete=e.deleteTile||n.deleteTile,n.add=e.addTile||n.addNewTile,n.item=t.unwrap(e.data),n.visible={},n.inline=e.inline||!1,n.small=e.small||!1},template:n})}.apply(t,a))||(e.exports=i)},48245:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(25239),n(28459),n(35605),n(31599),n(35227),n(64058),n(22023),n(66504),n(54077)],void 0===(i=function(e,t,n,a,i,s,l){return e.components.register("views/components/reports/scenes/location",{viewModel:function(t){var a,d=this;Object.assign(d,i),d.map=e.observable(),d.selectedAnnotationTileId=e.observable(),d.mapOnly=t.mapOnly||!1,d.cards=Object.assign({},t.cards),d.selectedGeometry=t.selectedGeometry||e.observable(),d.visible={geometry:e.observable(!0),metadata:e.observable(!0),locality:e.observable(!0)},d.locationTableConfig=_objectSpread(_objectSpread({},d.defaultTableConfig),{},{columns:Array(6).fill(null)}),d.geometryMetadata=void 0;d.jumpToDesignationGeometry=function(e){d.map().fitBounds(n(e.geometry)),d.map().getSource("selected-designation")?data=e.geometry:d.map().addSource("selected-designation",{type:"geojson",data:e.geometry}),function(e,t){e.forEach((function(e){e.id.startsWith("select-")&&(e.source=t)}))}(d.layers,"selected-designation")},d.prepareMap=function(t,a){if(a){var i={};a.features.length>0&&(i.bounds=n(a),i.fitBoundsOptions={padding:20});var c,p,f,v={};v[t]={type:"geojson",data:a},i.sources=Object.assign(v,i.sources),i.layers=[].concat(_toConsumableArray(l("",t,void 0,[],!0,"#ff2222")),_toConsumableArray((c=t,(f=[{id:"unselected-feature-polygon-fill",type:"fill",minzoom:11,filter:["all",["==","$type","Polygon"]],paint:{"fill-color":p="#A020F0","fill-outline-color":p,"fill-opacity":.2},layout:{visibility:"visible"}},{id:"unselected-feature-polygon-under-stroke",type:"line",minzoom:11,filter:["all",["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fff","line-width":4}},{id:"unselected-feature-polygon-stroke",type:"line",minzoom:11,filter:["all",["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":p,"line-width":2}},{id:"unselected-feature-line",type:"line",minzoom:11,filter:["all",["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":p,"line-width":2}},{id:"unselected-feature-point-point-stroke",type:"circle",minzoom:11,filter:["all",["==","$type","Point"]],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"},layout:{visibility:"visible"}},{id:"unselected-feature-point",type:"circle",minzoom:11,filter:["all",["==","$type","Point"]],paint:{"circle-radius":4,"circle-color":p},layout:{visibility:"visible"}}]).forEach((function(e){e.source=c})),f))),s.apply(d,[Object.assign({},i,{activeTab:e.observable(!1),zoom:null})]),d.layers=i.layers,d.sources=i.sources,d.map=e.observable()}},d.geojson=Array.isArray(t.geojson)?t.geojson:t.geojson&&"--"!=t.geojson?[t.geojson]:void 0,d.prepareMap("app-area-map-data",null===(a=d.geojson)||void 0===a?void 0:a[0])},template:t})}.apply(t,a))||(e.exports=i)},76234:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(74911),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/name",{viewModel:function(e){var n=this;if(Object.assign(n,i),n.nameTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(4).fill(null)}),n.identifierTableConfig=_objectSpread(_objectSpread({},n.defaultTableConfig),{},{columns:Array(3).fill(null)}),n.dataConfig={name:"Name",identifier:"Identifier",exactMatch:"exactmatch",type:"type"},n.cards=Object.assign({},e.cards),n.edit=e.editTile||n.editTile,n.delete=e.deleteTile||n.deleteTile,n.add=e.addTile||n.addNewTile,n.names=t.observableArray(),n.identifiers=t.observableArray(),n.exactMatch=t.observableArray(),n.type=t.observable(),n.summary=e.summary||!1,n.visible={names:t.observable(!0),identifiers:t.observable(!0),classifications:t.observable(!0)},Object.assign(n.dataConfig,e.dataConfig||{}),null!=e&&e.compiled)n.names(e.data.names),n.identifiers(e.data.identifiers),n.exactMatch(e.data.exactMatch),n.type(e.data.type);else{var a,s=e.data()[n.dataConfig.name];void 0===(null===(a=s)||void 0===a?void 0:a.length)&&(s=[s]),n.names(s.map((function(e){return{type:n.getNodeValue(e,{testPaths:[["".concat(n.dataConfig.name.toLowerCase(),"_type")],["type"]]}),content:n.getNodeValue(e,{testPaths:[["".concat(n.dataConfig.name.toLowerCase(),"_content")],["content"]]}),language:n.getNodeValue(e,{testPaths:[["".concat(n.dataConfig.name.toLowerCase(),"_language")],["language"]]}),tileid:n.getTileId(e)}})));var l=e.data()[n.dataConfig.identifier];l&&(void 0===l.length&&(l=[l]),n.identifiers(l.map((function(e){return{type:n.getNodeValue(e,{testPaths:[["".concat(n.dataConfig.identifier.toLowerCase(),"_type")],["type"]]}),content:n.getNodeValue(e,{testPaths:[["".concat(n.dataConfig.identifier.toLowerCase(),"_content")],["content"]]}),tileid:n.getTileId(e)}}))));var d=n.getRawNodeValue(e.data(),n.dataConfig.exactMatch);d&&(void 0===d.length&&(d=[d]),n.exactMatch(d.map((function(e){return n.getNodeValue(e)})))),n.type(n.getNodeValue(e.data(),n.dataConfig.type))}},template:n})}.apply(t,a))||(e.exports=i)},57886:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(54922),n(40146),n(46186),n(31599),n(54077)],void 0===(i=function(e,t,n,a,i){return t.components.register("views/components/reports/scenes/substance",{viewModel:function(e){var n,a=this;if(Object.assign(a,i),a.dimensionTableConfig=_objectSpread(_objectSpread({},a.defaultTableConfig),{},{columns:Array(6).fill(null)}),a.dataConfig={dimension:"dimension"},a.cards=Object.assign({},e.cards),a.edit=e.editTile||a.editTile,a.delete=e.deleteTile||a.deleteTile,a.add=e.addTile||a.addNewTile,a.dimensions=t.observableArray(),a.material=t.observable(),a.visible={dimensions:t.observable(!0),additionalData:t.observable(!0)},a.additionalData=e.additionalData||void 0,Object.assign(a.dataConfig,e.dataConfig||{}),a.timeSpanData=t.observable({sections:[{title:"TimeSpan",data:[{key:(null===(n=a.dataConfig.timespan)||void 0===n?void 0:n.key)||"Timespan",value:void 0,card:a.cards.timespan,type:"timespan"}]}]}),null!=e&&e.compiled&&(a.dimensions(e.data.dimensions),a.timeSpanData({sections:[{title:"TimeSpan",data:[{key:e.data.timespan.key,value:e.data.timespan.data,card:a.cards.timespan,type:"timespan"}]}]})),a.dataConfig.dimension){var s=a.getRawNodeValue(e.data(),a.dataConfig.dimension);if(s){var l=Array.isArray(s)?s:[s];a.dimensions(l.map((function(e){var t=a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_type")),n=a.getNodeValue(e,{testPaths:[["".concat(a.dataConfig.dimension,"_name"),0,"".concat(a.dataConfig.dimension,"_name_content")],["".concat(a.dataConfig.dimension,"_name"),"".concat(a.dataConfig.dimension,"_name_content")]]}),i=a.getNodeValue(e,{testPaths:[["".concat(a.dataConfig.dimension,"_value")]]}),s=a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_lowest possible value")),l=a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_highest possible value")),d=a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_source"));return{type:t,unit:a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_unit")),name:n,highestValue:l,label:a.getNodeValue(e,"".concat(a.dataConfig.dimension,"_label")),lowestValue:s,dimensionValue:i,source:d,tileid:a.getTileId(e)}})))}}if(a.dataConfig.timespan){var d=a.getRawNodeValue(e.data(),a.dataConfig.timespan.path);if(d){var c=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_begin of the begin")],["begin of the begin"]]}),p=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_begin of the end")],["begin of the end"]]}),f=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_end of the begin")],["end of the begin"]]}),v=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_end of the end")],["end of the end"]]}),h=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_name"),"".concat(a.dataConfig.timespan.path,"_name_content")],["".concat(a.dataConfig.timespan.path,"_name"),0,"".concat(a.dataConfig.timespan.path,"_name_content")],["name",0,"content"]]}),b=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_duration"),"".concat(a.dataConfig.timespan.path,"_duration_value")],["duration","value"]]}),m=a.getNodeValue(d,{testPaths:[["".concat(a.dataConfig.timespan.path,"_duration"),"".concat(a.dataConfig.timespan.path,"_duration_unit")],["duration","unit"]]}),g="".concat(b," ").concat(m.replace(/\([^()]*\)/g,"")),x=a.getNodeValue(d,{testPaths:[["timespan_duration","timespan_duration_name","timespan_duration_name_content"],["timespan_duration","timespan_duration_name",0,"timespan_duration_name_content"],["duration","name",0,"content"]]});a.timeSpanData({sections:[{title:"TimeSpan",data:[{key:a.dataConfig.timespan.key,value:{beginningComplete:p,beginningStart:c,duration:g,durationEventName:x,endingComplete:v,endingStart:f,name:h},card:a.cards.timespan,type:"timespan"}]}]})}}},template:n})}.apply(t,a))||(e.exports=i)},13102:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(20198),n(84490),n(54922),n(78287),n(46186),n(32274),n(31599),n(76234)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("textual-work-report",{viewModel:function(e){var t,a,i,s,d=this;e.configKeys=["tabs","activeTabIndex"],Object.assign(d,l),d.sections=[{id:"name",title:"Names and Classifications"},{id:"existence",title:"Existence"},{id:"substance",title:"Substance"},{id:"event",title:"Event"},{id:"parthood",title:"Parthood"},{id:"aboutness",title:"Aboutness"},{id:"description",title:"Description"},{id:"documentation",title:"Documentation"},{id:"json",title:"JSON"}],d.reportMetadata=n.observable(null===(t=e.report)||void 0===t?void 0:t.report_json),d.resource=n.observable(null===(a=d.reportMetadata())||void 0===a?void 0:a.resource),d.displayname=n.observable(null===(i=n.unwrap(d.reportMetadata))||void 0===i?void 0:i.displayname),d.activeSection=n.observable("name"),d.nameDataConfig={name:"name (top)",exactMatch:"exact match"},d.nameCards={},d.descriptionDataConfig={statement:"statement (top)"},d.descriptionCards={},d.documentationDataConfig={subjectOf:"is about",label:void 0},d.documentationCards={},d.existenceEvents=["creation"],d.existenceDataConfig={creation:{graph:"creation (partitioned)",metadata:[{key:"Creation Event Type",path:"creation (partitioned)_type",type:"kv"},{key:"Creator of Textual Work",path:"creation (partitioned)_carried out by",type:"resource"},{key:"Creation Event Location",path:"creation (partitioned)_location",type:"resource"}],parts:{graph:"creation (partitioned)_part",metadata:[{key:"Creation Event Part Type",path:"creation (partitioned)_part_type",type:"kv"},{key:"Creator in Creation Event Part",path:"creation (partitioned)_part_carried out by",type:"resource"},{key:"Creation Event Part Location",path:"creation (partitioned)_part_location",type:"resource"}]}}},d.existenceCards={},d.eventEvents=["publication"],d.eventDataConfig={publication:{graph:"publication",metadata:[{key:"Publication Event Type",path:"Publication_type",type:"kv"},{key:"Particular Technique",path:"Publication_technique",type:"kv"},{key:"Publication Event Location",path:"Publication_location",type:"resource"}]}},d.eventCards={},d.substanceCards={},d.summary=e.summary,d.getTableConfig=function(e){return _objectSpread(_objectSpread({},d.defaultTableConfig),{},{columns:Array(e).fill(null),columnDefs:[]})},d.nameSummary=n.observable(),d.statementSummary=n.observable();var c=d.getNodeValue(d.resource(),"name (top)","name (top)_content");if(c&&"--"!=c&&d.nameSummary({content:c,type:d.getNodeValue(d.resource(),"name (top)","name (top)_type")}),d.statementSummary(null===(s=d.resource()["statement (top)"])||void 0===s?void 0:s.map((function(e){return{content:d.getNodeValue(e,"statement (top)_content"),type:d.getNodeValue(e,"statement (top)_type")}}))),e.report.cards){var p,f,v,h,b,m,g,x,y,w,k,S,_,T,C=e.report.cards;d.cards=d.createCardDictionary(C),d.nameCards={name:null===(p=d.cards)||void 0===p?void 0:p["name of textual work"],identifier:null===(f=d.cards)||void 0===f?void 0:f["identifier of textual work"],exactMatch:null===(v=d.cards)||void 0===v?void 0:v["external uri of textual work"],type:null===(h=d.cards)||void 0===h?void 0:h["type of textual work"]},d.descriptionCards={statement:null===(b=d.cards)||void 0===b?void 0:b["statement about textual work"]},d.documentationCards={digitalReference:null===(m=d.cards)||void 0===m?void 0:m["digital reference to textual work"],subjectOf:null===(g=d.cards)||void 0===g?void 0:g["subject(s) of textual work"]},d.existenceCards={creation:{card:null===(x=d.cards)||void 0===x?void 0:x["creation event of textual work"],subCards:{name:"name for creation event",timespan:"timespan for creation event",statement:"statement about creation",part:"creation event part"},partCards:{name:"name for creation event part",statement:"statement about creation event part",timespan:"timespan of creation event part"}}},d.eventCards={publication:{card:null===(y=d.cards)||void 0===y?void 0:y["publication event of textual work"],subCards:{name:"name for publication event",statement:"statement of publication event",timespan:"timespan of publication event"}}},d.substanceData=n.observable({sections:[{title:"Substance",data:[{key:"language of textual work",value:d.getRawNodeValue(d.resource(),"language"),card:null===(w=d.cards)||void 0===w?void 0:w["language of textual work"],type:"resource"},{key:"content of textual work",value:d.getRawNodeValue(d.resource(),"content"),card:null===(k=d.cards)||void 0===k?void 0:k["content of textual work"],type:"resource"}]}]}),d.parthoodData=n.observable({sections:[{title:"Part of Text",data:[{key:"parent textual work",value:d.getRawNodeValue(d.resource(),"part of"),card:null===(S=d.cards)||void 0===S?void 0:S["parent textual work"],type:"resource"}]}]}),d.aboutnessData=n.observable({sections:[{title:"Aboutness",data:[{key:"subject of textual work",value:d.getRawNodeValue(d.resource(),"subject"),card:null===(_=d.cards)||void 0===_?void 0:_["subject(s) of textual work"],type:"resource"},{key:"source reference work of textual work",value:d.getRawNodeValue(d.resource(),"is about"),card:null===(T=d.cards)||void 0===T?void 0:T["source reference work of textual work"],type:"resource"}]}]})}},template:a})}.apply(t,a))||(e.exports=i)},87155:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(23614),n(58420),n(46186),n(8373),n(84714)],void 0===(i=function(e,t,n,a,i,s,l){NODE_ID="@node_id",TILE_ID="@tile_id",VALUE="@value",NON_DATA_COLLECTING_NODE="NON_DATA_COLLECTING_NODE",TAB_DATA=[{title:"Names/Classification",sections:[{nodeId:"b9c1ced7-b497-11e9-a4da-a4d18cec433a",sectionTitle:"Name(s) of Thing",hasPlusSign:!0,childNodeInformation:[{nodeId:"b9c1d8a6-b497-11e9-876b-a4d18cec433a",columnName:"Name"},{nodeId:"b9c1d7ab-b497-11e9-9ab7-a4d18cec433a",columnName:"Name Type"},{nodeId:"b9c1d400-b497-11e9-90ea-a4d18cec433a",columnName:"Language"}]},{nodeId:"8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",sectionTitle:"Type of Object"},{nodeId:"22c150ca-b498-11e9-9adc-a4d18cec433a",sectionTitle:"Identifiers",hasPlusSign:!0,childNodeInformation:[{nodeId:"22c169b5-b498-11e9-bdad-a4d18cec433a",columnName:"Identifier"},{nodeId:"22c15cfa-b498-11e9-b5e3-a4d18cec433a",columnName:"Identifier Type"}]}]},{title:"Existence",sections:[]},{title:"Parameters",sections:[]},{title:"Parts",sections:[]},{title:"Temporal Relations",sections:[]},{title:"Location",sections:[]},{title:"Descriptions",sections:[]}];var ThematicReportTab=function(e,t,a){var i=this;this.hideEmptySections=a,this.title=e.title,this.sections=n.observableArray(e.sections),this.initialize=function(){i.mapResourceInstanceDataToSections(e,t)},this.mapResourceInstanceDataToSections=function(e,t){e.sections.forEach((function(e){var n=Object.values(t.resource).find((function(t){return t instanceof Array?t[0][NODE_ID]===e.nodeId:t[NODE_ID]===e.nodeId}));n instanceof Array||(n=n?[n]:[]),e.resourceInstanceData=n}))},this.getResourceInstanceNodeData=function(e,t){return t[NODE_ID]===e?t[NODE_ID]:Object.values(t).find((function(t){return t[NODE_ID]===e}))},this.initialize()};n.components.register("thematic-report",{viewModel:function(t){var a=this;l.apply(this,[t]),this.loading=n.observable(),this.disambiguatedResourceGraph=n.observable(),this.reportTabs=n.observableArray(),this.activeTabIndex=n.observable(0),this.activeTab=n.computed((function(){if(a.reportTabs().length)return a.reportTabs()[a.activeTabIndex()]})),this.emptyReportSectionsHidden=n.observable(!1),this.initialize=function(){a.loading(!0);var n=s.urls.api_resources(t.report.get("resourceid"))+"?format=json&compact=false";e.get(n,(function(e){a.disambiguatedResourceGraph(e),TAB_DATA.forEach((function(e){a.reportTabs.push(new ThematicReportTab(e,a.disambiguatedResourceGraph(),a.emptyReportSectionsHidden))})),a.loading(!1)}))},this.toggleEmptyReportSections=function(){a.emptyReportSectionsHidden(!a.emptyReportSectionsHidden())},this.initialize()},template:a})}.apply(t,a))||(e.exports=i)},11198:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(98908),n(46186),n(10053),n(32274)],void 0===(i=function(e,t,n,a,i,s,l){return n.components.register("visual-work-report",{viewModel:function(t){var a=this;if(t.configKeys=["tabs","activeTabIndex"],s.apply(this,[t]),t.summary){this.editorLink=i.urls.resource_editor+this.report.attributes.resourceid;this.description=l.getNodeValues({nodeId:"e58ecc2e-c062-11e9-ba30-a4d18cec433a",where:{nodeId:"e58eb7b5-c062-11e9-b08d-a4d18cec433a",contains:"df8e4cf6-9b0b-472f-8986-83d5b2ca28a0"},returnTiles:!1},this.report.get("tiles"),this.report.graph),this.DepictsPhysicalValue=l.getNodeValues({nodeId:"5513933a-c062-11e9-9e4b-a4d18cec433a",returnTiles:!1},this.report.get("tiles"),this.report.graph),this.depictsPhysicalName=n.observableArray([]),this.DepictsPhysicalValue.forEach((function(e){e&&l.lookupResourceInstanceData(e.resourceId).then((function(t){a.depictsPhysicalName.push({name:t._source.displayname,link:i.urls.resource_report+e.resourceId})}))})),this.TypeOfWorkName=n.observable(),this.TypeOfWorkValue=l.getNodeValues({nodeId:"28a4ae07-c062-11e9-a11d-a4d18cec433a",returnTiles:!1},this.report.get("tiles"),this.report.graph),this.TypeOfWorkValue.length&&e.ajax(i.urls.concept_value+"?valueid="+a.TypeOfWorkValue,{dataType:"json"}).done((function(e){a.TypeOfWorkName(e.value)}))}},template:a})}.apply(t,a))||(e.exports=i)},82769:function(e,t,n){var a,i;a=[n(54922),n(46186),n(32274),n(47960),n(74013),n(87720)],void 0===(i=function(e,t,n,a,i){return e.components.register("views/components/resource-instance-nodevalue",{viewModel:function(i){var s,l=this;a.apply(this,[i]),this.relatedResourceId=i.relatedResourceId,this.relatedNodeId=i.relatedNodeId,this.lookupResourceInstanceData(l.relatedResourceId).then((function(e){s=n.getNodeValues({nodeId:l.relatedNodeId},e._source.tiles).map((function(e){return e.resourceId}))})),this.select2Config={value:"search"===l.renderContext?l.value:l.resourceToAdd,clickBubble:!0,disabled:l.disabled,multiple:!l.displayOntologyTable&&l.multiple,placeholder:this.placeholder()||t.translations.riSelectPlaceholder,closeOnSelect:!0,allowClear:"search"===l.renderContext,onSelect:function(e){if(l.selectedItem(e),"search"!==l.renderContext){var t=l.makeObject(e.resourceinstanceid,e);l.setValue(t),window.setTimeout((function(){l.displayOntologyTable&&l.resourceToAdd("")}),250)}},ajax:{url:t.urls.related_resources+l.relatedResourceId+"?paginate=false",dataType:"json",results:function(e){return{results:e.related_resources.filter((function(e){return s.includes(e.resourceinstanceid)}))}}},id:function(e){return e.resourceinstanceid},formatResult:function(e){if(e.displayname)return e.displayname},formatSelection:function(e){if(e.displayname)return e.displayname},initSelection:function(t,n){if("search"===l.renderContext&&""!==l.value()){var a=l.value();Array.isArray(l.value())||(a=[l.value()]);var i=[];a.forEach((function(t){var n;"string"==typeof t?n=t:e.unwrap(t.resourceId)&&(n=e.unwrap(t.resourceId));var a=l.lookupResourceInstanceData(n).then((function(e){return e}));a&&i.push(a)})),Promise.all(i).then((function(e){if(e.length){var t=e.map((function(e){return{displayname:e._source.displayname,resourceinstanceid:e._id}}));!1===l.multiple&&(t=t[0]),n(t)}}))}}}},template:i})}.apply(t,a))||(e.exports=i)},6135:function(e,t,n){var a,i;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}a=[n(84490),n(20198),n(46186),n(54922),n(58420),n(28459),n(35605),n(48303),n(32274),n(12340),n(56321),n(50021),n(22172),n(94806),n(28003),n(82769)],i=function(e,t,n,a,i,s,l,d,c,p,f,v,h,b,m){function viewModel(d){var m=this;e.extend(this,d),this.getStrValue=function(e){return"object"==_typeof(e)?a.toJS(e)[n.activeLanguage].value:a.unwrap(e)[n.activeLanguage].value},this.physicalThingResourceId=i.toJS(d.physicalThingResourceId);var g="b240c366-8594-11ea-97eb-acde48001122",x="97c30c42-8594-11ea-97eb-acde48001122";this.allFeatureIds=[],this.sampleLocationResourceIds=[],this.manifestUrl=a.observable(this.getStrValue(d.imageStepData["56f8e9bd-ca7c-11e9-b578-a4d18cec433a"])),this.savingTile=a.observable(),this.savingMessage=a.observable(),this.physThingSearchResultsLookup={},this.selectedFeature=a.observable(),this.featureLayers=a.observableArray(),this.isFeatureBeingEdited=a.observable(!1),this.sampleListShowing=a.observable(!1),this.physicalThingPartIdentifierAssignmentCard=a.observable(),this.physicalThingPartIdentifierAssignmentTile=a.observable(),this.partIdentifierAssignmentLabelWidget=a.observable(),this.partIdentifierAssignmentPolygonIdentifierWidget=a.observable(),this.partIdentifierAssignmentAnnotatorWidget=a.observable(),this.activeTab=a.observable(),this.hasExternalCardData=a.observable(!1),this.analysisAreaInstances=a.observableArray(),this.selectedAnalysisAreaInstance=a.observable(),this.switchCanvas=function(e){var t,n=a.unwrap(e.data[x].features),i=null==n||null===(t=n[0])||void 0===t?void 0:t.properties.canvas();if(m.canvas()!==i){var s=m.canvases().find((function(e){return e.images[0].resource.service["@id"]===i}));s&&m.canvasClick(s)}},this.selectedAnalysisAreaInstance.subscribe((function(e){var t;(m.highlightAnnotation(),e)?(m.tile=e,d.tile=e,m.physicalThingPartIdentifierAssignmentTile(e),null!==(t=a.unwrap(e.data[x]))&&void 0!==t&&t.features&&m.switchCanvas(e)):m.sampleListShowing(!!m.analysisAreaInstances().length)})),this.tileDirty=a.computed((function(){if(m.physicalThingPartIdentifierAssignmentTile())return m.physicalThingPartIdentifierAssignmentTile().dirty()})),this.selectedAnalysisAreaInstanceFeatures=a.computed((function(){var e="97c30c42-8594-11ea-97eb-acde48001122";if(m.selectedAnalysisAreaInstance()&&a.unwrap(m.selectedAnalysisAreaInstance().data[e])){var t=a.unwrap(m.selectedAnalysisAreaInstance().data[e]);return a.unwrap(t.features)}})),this.analysisAreaFilterTerm=a.observable(),this.filteredAnalysisAreaInstances=a.computed((function(){var e=m.analysisAreaInstances().filter((function(e){var t=m.sampleLocationResourceIds.map((function(e){return e.resourceid})),n=a.unwrap(e.data[g]()[0].resourceId);return!t.includes(n)}));return m.analysisAreasOnlySnapshot=e.map((function(e){return e.tileid})),m.analysisAreaFilterTerm()?e.filter((function(e){return e.data["3e541cc6-859b-11ea-97eb-acde48001122"]().includes(m.analysisAreaFilterTerm())})):e})),this.hasExternalCardData.subscribe((function(e){if(e){m.handleExternalCardData();var t=m.annotationNodes.subscribe((function(e){m.setPhysicalThingGeometriesToVisible(e),t.dispose()}));m.activeTab("dataset"),m.manifest(m.manifestUrl()),m.getManifestData()}})),this.physicalThingName=a.observable(),window.fetch(n.urls.api_resources(m.physicalThingResourceId)+"?format=json&compact=false&v=beta").then((function(e){if(e.ok)return e.json()})).then((function(e){m.physicalThingName(e.displayname)})),this.areaName=a.computed((function(){if(m.selectedAnalysisAreaInstance()){var e=m.selectedAnalysisAreaInstance().data["3e541cc6-859b-11ea-97eb-acde48001122"],t=m.getStrValue(e)||"";return"".concat(t," [Region of ").concat(m.physicalThingName(),"]")}})),this.initialize=function(){var e=m.analysisAreaInstances.subscribe((function(){m.analysisAreaInstances().length>0&&m.sampleListShowing(!0),e.dispose()}));t.getJSON(n.urls.api_card+m.physicalThingResourceId).then((function(e){m.loadExternalCardData(e)}))},m.analysisAreaInstances.subscribe((function(e){e.length>0?d.form.complete(!0):d.form.complete(!1)})),this.getAnalysisAreaTileFromFeatureId=function(e){return m.analysisAreaInstances().find((function(t){return t.data["97c30c42-8594-11ea-97eb-acde48001122"].features().find((function(t){return a.unwrap(t.id)===e}))}))},this.getAnnotationProperty=function(e,t){return e.data[m.annotationNodeId].features[0].properties[t]},this.highlightAnnotation=function(){m.map()&&m.map().eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){var t=e.feature.properties.color;if(m.selectedAnalysisAreaInstance()&&m.selectedAnalysisAreaInstance().tileid===e.feature.properties.tileId)if(e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}),"Point"===e.feature.geometry.type){var n=e.feature.geometry.coordinates;m.map().panTo([n[1],n[0]])}else{var a=s(e.feature);m.map().fitBounds([[a[1],a[0]],[a[3],a[2]]])}else e.setStyle({color:t,fillColor:t})}))}))}))},this.removeFeatureFromCanvas=function(e){var t=m.annotationNodes(),n="Analysis Areas",i=t.find((function(e){return e.name===n})),s=i.annotations().filter((function(t){return a.unwrap(e.id)!==t.id}));i.annotations(s);var l=t.findIndex((function(e){return e.name===n}));t[l]=i,m.annotationNodes(t),m.highlightAnnotation()},this.resetCanvasFeatures=function(){var e=m.annotationNodes();if(m.selectedAnalysisAreaInstanceFeatures()){var t="Analysis Areas",n=e.find((function(e){return e.name===t})),i=n.annotations().map((function(e){return a.unwrap(e.id)})),s=m.selectedAnalysisAreaInstanceFeatures().reduce((function(e,t){return i.includes(a.unwrap(t.id))||t.properties.canvas!==m.canvas||(t.properties.tileId=m.selectedAnalysisAreaInstance().tileid,e.push(a.toJS(t))),e}),[]);n.annotations([].concat(_toConsumableArray(n.annotations()),_toConsumableArray(s)));var l=e.findIndex((function(e){return e.name===t}));e[l]=n}m.annotationNodes(e)},this.updateAnalysisAreaInstances=function(){var e=m.canvases().map((function(e){return e.images[0].resource["@id"]})),t=m.card.tiles().map((function(e){return e.tileid}));m.selectedAnalysisAreaInstance()&&m.selectedAnalysisAreaInstance().tileid&&(t.includes(m.selectedAnalysisAreaInstance().tileid)?m.card.tiles().forEach((function(e){e.tileid===m.selectedAnalysisAreaInstance().tileid&&Object.keys(e.data).map((function(t){a.isObservable(e.data[t])?e.data[t](m.selectedAnalysisAreaInstance().data[t]()):"__ko_mapping__"!==t&&Object.keys(e.data[t]).map((function(n){a.isObservable(e.data[t][n])?e.data[t][n](m.selectedAnalysisAreaInstance().data[t][n]()):(e.data[t][n].value(m.selectedAnalysisAreaInstance().data[t][n].value()),e.data[t][n].direction(m.selectedAnalysisAreaInstance().data[t][n].direction()))}))}))})):m.card.tiles.push(m.selectedAnalysisAreaInstance()));var i=m.card.tiles().filter((function(t){return e.find((function(e){return e.startsWith(t.data[x].features()[0].properties.canvas())}))}));i.forEach((function(e){e.isLocked=a.observable();var t="b240c366-8594-11ea-97eb-acde48001122",i=null;e.data[t]()&&(i=e.data[t]()[0].resourceId()),window.fetch(n.urls.root+"analysisarealocked?resourceId="+i).then((function(e){if(e.ok)return e.json()})).then((function(t){e.isLocked(t.isRelatedToDigitalResource)}))})),m.analysisAreaInstances(i)},this.selectAnalysisAreaInstance=function(e){var t=m.selectedAnalysisAreaInstance();(void 0===e||t&&t.tileid!==e.tileid)&&(t.reset(),m.drawFeatures([]),m.resetCanvasFeatures()),m.physicalThingPartIdentifierAssignmentTile()&&m.physicalThingPartIdentifierAssignmentTile().reset(),m.selectedAnalysisAreaInstance(e)},this.viewAnalysisAreaInstance=function(e){m.selectAnalysisAreaInstance(e),m.sampleListShowing(!1)},this.showSampleList=function(){m.sampleListShowing(!m.sampleListShowing())},this.resetAnalysisAreasTile=function(){m.tile.reset(),m.resetCanvasFeatures(),m.drawFeatures([]),m.highlightAnnotation(),m.selectedFeature(null)},this.setPhysicalThingGeometriesToVisible=function(e){e.find((function(e){return"Analysis Areas"===e.name})).active(!0),m.updateAnalysisAreaInstances()},this.showingAnalysisAreaDeleteModal=a.observable(!1),this.sampleToDelete=a.observable(),this.showAnalysisAreaDeleteModal=function(e){m.showingAnalysisAreaDeleteModal(!!e),m.sampleToDelete(e)},this.deleteAnalysisAreaInstance=function(){var e=m.sampleToDelete();m.selectedAnalysisAreaInstance(e);var t={parentPhysicalThingResourceId:e.resourceinstance_id,collectionResourceid:d.projectSet,parentPhysicalThingTileData:i.toJSON(e.data),parentPhysicalThingTileId:e.tileid,transactionId:d.form.workflowId,analysisAreaName:m.areaName()};m.savingTile(!0),m.showingAnalysisAreaDeleteModal(!1),m.savingMessage("Deleting Analysis Area"),window.fetch(n.urls.root+"deleteanalysisarea",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){if(m.savingTile(!1),!e.ok)throw e})).then((function(t){e.data[x].features().forEach((function(e){m.deleteFeature(e)})),m.analysisAreaInstances.remove(e),m.card.tiles.remove(e),m.selectAnalysisAreaInstance(void 0),m.resetAnalysisAreasTile()})).catch((function(e){e.json().then((function(e){d.pageVm.alert(new d.form.AlertViewModel("ep-alert-red",e.title,e.message))}))}))},this.saveAnalysisAreaTile=function(){if(a.unwrap(m.selectedAnalysisAreaInstance().data["3e541cc6-859b-11ea-97eb-acde48001122"]))if(a.unwrap(m.selectedAnalysisAreaInstance().data["97c30c42-8594-11ea-97eb-acde48001122"])){m.savingTile(!0),d.form.lockExternalStep("image-step",!0),m.savingMessage("This step is saving ...");var e=["Analysis Area Name and Classification","Relationship between Analysis Area, Project and Parent Object (".concat(m.physicalThingName(),")"),"This may take a while, please do not move away from this step."],s=0,l=setInterval((function(){s<e.length?m.savingMessage(e[s++]):clearInterval(l)}),"2000"),c=setTimeout((function(){m.savingMessage("This is taking longer than usual. Thank you for your patience.")}),"10000"),p={parentPhysicalThingResourceid:m.physicalThingResourceId,collectionResourceid:d.projectSet,partIdentifierAssignmentTileData:i.toJSON(m.selectedAnalysisAreaInstance().data),partIdentifierAssignmentTileId:m.selectedAnalysisAreaInstance().tileid,partIdentifierAssignmentResourceId:m.selectedAnalysisAreaInstance().resourceinstance_id,transactionId:d.form.workflowId,analysisAreaName:m.areaName()};t.ajax({url:n.urls.root+"saveanalysisarea",type:"POST",data:p,dataType:"json"}).then((function(e){m.savingMessage("Saved."),clearInterval(l),clearTimeout(c);var t=e.result.physicalPartOfObjectTile;t.noDefaults=!0,m.builtTile=new v({tile:t,card:m.card,graphModel:m.card.params.graphModel,resourceId:t.resourceinstance_id,displayname:m.card.params.displayname,handlers:m.card.params.handlers,userisreviewer:m.card.params.userisreviewer,cards:m.card.params.cards,tiles:m.card.params.tiles,selection:m.card.params.selection,scrollTo:m.card.params.scrollTo,filter:m.card.params.filter,provisionalTileViewModel:m.card.params.provisionalTileViewModel,loading:m.card.params.loading,cardwidgets:m.card.params.cardwidgets}),m.selectedAnalysisAreaInstance(m.builtTile),new Promise((function(e,t){var n=m.annotationNodes().find((function(e){return"Analysis Areas"===e.name})),a=n.annotations();m.drawFeatures().forEach((function(e){var t=a.find((function(t){return t.id===e}));e.properties.nodegroupId=m.tile.nodegroup_id,e.properties.resourceId=m.tile.resourceinstance_id,e.properties.tileId=m.tile.tileid,t||a.push(e)})),n.annotations(a),e(n)})).then((function(e){m.updateAnalysisAreaInstances(),m.sampleListShowing(!0),m.savingTile(!1),d.pageVm.alert(""),m.savingMessage(""),m.drawFeatures([]);var t=m.analysisAreaInstances().map((function(e){return{data:e.data}}));d.form.savedData({data:i.toJS(t),currentAnalysisAreas:m.analysisAreasOnlySnapshot}),d.form.value(d.form.savedData())}))})).fail((function(e){console.log(e),m.savingTile(!1)}))}else d.pageVm.alert(new d.form.AlertViewModel("ep-alert-red","Geometry required","Providing a geometric annotation is required"));else d.pageVm.alert(new d.form.AlertViewModel("ep-alert-red","Name required","Providing a name is required"))};var getNewTile=function(t){return new v({tile:{tileid:"",noDefaults:!0,resourceinstance_id:a.observable(m.physicalThingResourceId),nodegroup_id:t.nodegroupid,data:e.reduce(t.widgets(),(function(e,t){return"string"===t.datatype.datatype?e[t.node_id()]=_defineProperty({},n.activeLanguage,{value:"",direction:n.activeLanguageDir}):e[t.node_id()]=null,e}),{})},card:t,graphModel:t.params.graphModel,resourceId:t.resourceinstance_id,displayname:t.params.displayname,handlers:t.params.handlers,userisreviewer:t.params.userisreviewer,cards:t.params.cards,tiles:t.params.tiles,selection:t.params.selection,scrollTo:t.params.scrollTo,filter:t.params.filter,provisionalTileViewModel:t.params.provisionalTileViewModel,loading:t.params.loading,cardwidgets:t.params.cardwidgets})};this.loadNewAnalysisAreaTile=function(){var e=getNewTile(m.card);m.viewAnalysisAreaInstance(e)},this.identifySampleLocations=function(e){var t="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",n="7375a6fb-0bfb-4bcf-81a3-6180cdd26123",i=e.tiles().map((function(e){return{resourceid:a.unwrap(e.data[g])[0].resourceId(),tileid:e.tileid}}));return Promise.all(i.map((function(e){return c.lookupResourceInstanceData(e.resourceid)}))).then((function(e){e.forEach((function(e){c.getNodeValues({nodeId:t,where:{nodeId:t,contains:n}},e._source.tiles).includes(n)&&m.sampleLocationResourceIds.push(i.find((function(t){return e._id===t.resourceid})))}))}))},this.loadExternalCardData=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(e){var t,n,i,s,l,c,v,h;return _regeneratorRuntime().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.cards.find((function(e){return"fec59582-8593-11ea-97eb-acde48001122"===e.nodegroup_id})),n={"after-update":[],"tile-reset":[]},i=new p({data:{nodes:e.nodes,nodegroups:e.nodegroups,edges:[]},datatypes:e.datatypes}),s=new f({card:t,graphModel:i,tile:null,resourceId:a.observable(m.physicalThingResourceId),displayname:a.observable(e.displayname),handlers:n,cards:e.cards,tiles:e.tiles,cardwidgets:e.cardwidgets,userisreviewer:e.userisreviewer}),l=s,c=getNewTile(s),m.card=l,m.tile=c,d.card=m.card,d.tile=m.tile,b.next=13,this.identifySampleLocations(d.card);case 13:this.sampleLocationTileIds=m.sampleLocationResourceIds.map((function(e){return e.tileid})),v="97c30c42-8594-11ea-97eb-acde48001122",d.widgets=m.card.widgets().filter((function(e){return e.node_id()===v})),m.physicalThingPartIdentifierAssignmentCard(l),m.physicalThingPartIdentifierAssignmentTile(c),h=c.data[v].subscribe((function(e){e&&(m.selectAnalysisAreaInstance(c),h.dispose())})),m.hasExternalCardData(!0);case 20:case"end":return b.stop()}}),_callee,this)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(e){return t.apply(this,arguments)}}(),this.handleExternalCardData=function(){m.partIdentifierAssignmentLabelWidget(m.card.widgets().find((function(e){return"3e541cc6-859b-11ea-97eb-acde48001122"===a.unwrap(e.node_id)})));var t="97c30c42-8594-11ea-97eb-acde48001122";m.partIdentifierAssignmentPolygonIdentifierWidget(m.card.widgets().find((function(e){return a.unwrap(e.node_id)===t})));m.partIdentifierAssignmentAnnotatorWidget(m.card.widgets().find((function(e){return"a623eaf4-8599-11ea-97eb-acde48001122"===a.unwrap(e.node_id)}))),h.apply(m,[_objectSpread(_objectSpread({},d),{},{hideEditorTab:a.observable(!0),onEachFeature:function(e,t){if(m.featureLayers().find((function(e){return e.feature.id===t.feature.id}))||m.featureLayers.push(t),m.sampleLocationTileIds.includes(e.properties.tileId)){var i=m.sampleLocationResourceIds.find((function(t){return t.tileid===e.properties.tileId})),s=l.popup({closeButton:!1,maxWidth:349}).setContent(b).on("add",(function(){var t={closePopup:function(){s.remove()},name:a.observable(""),description:a.observable(""),graphName:e.properties.graphName,resourceinstanceid:i.resourceid,reportURL:n.urls.resource_report,translations:n.translations};window.fetch(n.urls.resource_descriptors+t.resourceinstanceid).then((function(e){return e.json()})).then((function(e){t.name(e.displayname);var n="<strong>Sample Location</strong>\n                                            <br>Sample locations may not be modified in the analysis area workflow\n                                            <br>".concat("Undefined"!==e.map_popup?e.map_popup:"");t.description(n)}));var l=s.getElement().querySelector(".mapboxgl-popup-content");a.applyBindingsToDescendants(t,l)}));t.bindPopup(s)}t.on({click:function(t){var n=m.getAnalysisAreaTileFromFeatureId(e.id);if(n&&!m.sampleLocationTileIds.includes(n.tileid))if(m.featureClick=!0,m.drawFeatures([]),m.selectedAnalysisAreaInstance()&&m.selectedAnalysisAreaInstance().tileid===n.tileid){m.tile.reset(),m.resetCanvasFeatures();var i=a.toJS(m.selectedAnalysisAreaInstanceFeatures().find((function(t){return a.unwrap(t.id)===e.id})));m.selectedFeature(i),m.removeFeatureFromCanvas(m.selectedFeature()),m.drawFeatures([i])}else m.selectAnalysisAreaInstance(n)}})},buildAnnotationNodes:function(e){var i=a.observable(!0),s=a.observable(!0);i.subscribe((function(e){e||(m.resetAnalysisAreasTile(),updateAnnotations())}));var updateAnnotations=function(){var e=a.observableArray(),l=a.observableArray(),d=m.canvas();d&&window.fetch(n.urls.iiifannotations+"?canvas="+d+"&nodeid="+t).then((function(e){return e.json()})).then((function(t){t.features.forEach((function(t){t.properties.graphName="Physical Thing",m.sampleLocationTileIds.includes(t.properties.tileId)?(t.properties.type="sample_location",t.properties.color="#999999",t.properties.fillColor="#999999",e.push(t)):(t.properties.type="analysis_area",l.push(t))})),m.annotationNodes([{name:"Analysis Areas",icon:"fa fa-eye",active:i,opacity:a.observable(100),annotations:l},{name:"Sample Locations",icon:"fa fa-eyedropper",active:s,opacity:a.observable(100),annotations:e}]),m.highlightAnnotation()}))};m.canvas.subscribe(updateAnnotations),updateAnnotations()}})]),m.updateTiles=function(){e.each(m.featureLookup,(function(e){e.selectedTool(null)}));var t="97c30c42-8594-11ea-97eb-acde48001122",n=a.toJS(m.tile.data[t].features);if(n){var i=m.drawFeatures().filter((function(e){return!n.find((function(t){return t.id===e.id}))}));m.drawFeatures().forEach((function(e){var t=n.findIndex((function(t){return t.id===e.id}));t>-1&&(n[t]=e)})),m.tile.data[t].features([].concat(_toConsumableArray(n),_toConsumableArray(i)))}else m.widgets.forEach((function(e){var t=a.unwrap(e.node_id),n=[];m.drawFeatures().forEach((function(e){e.properties.nodeId===t&&n.push(e)})),a.isObservable(m.tile.data[t])?m.tile.data[t]({type:"FeatureCollection",features:n}):m.tile.data[t].features(n)}))},m.deleteFeature=function(e){var t="97c30c42-8594-11ea-97eb-acde48001122",n=m.selectedAnalysisAreaInstance(),i=a.unwrap(n.data[t]);if(i){var s=a.unwrap(i.features).filter((function(t){return a.unwrap(t.id)!==a.unwrap(e.id)}));a.isObservable(i.features)?i.features(s):i.features=a.observableArray(s),n.data[t]=i}m.selectedAnalysisAreaInstance(n),m.removeFeatureFromCanvas(e),m.drawFeatures().find((function(t){return a.unwrap(t.id)===a.unwrap(e.id)}))&&m.drawFeatures([])},m.editFeature=function(e){m.featureLayers().forEach((function(t){t.feature.id===a.unwrap(e.id)&&t.fireEvent("click")}))},m.drawLayer.subscribe((function(e){e.getLayers().forEach((function(e){e.editing.enable(),e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"})}))}))},this.clearEditedGeometries=function(){m.tile.tileid&&m.selectedFeature()&&m.resetAnalysisAreasTile()},this.fetchCardFromResourceId=function(e,t){return new Promise((function(n,a){m._fetchCard(e,null,t).then((function(e){n(e)}))}))},this.fetchCardFromGraphId=function(e,t){return new Promise((function(n,a){m._fetchCard(null,e,t).then((function(e){n(e)}))}))},this._fetchCard=function(e,i,s){return new Promise((function(l,d){t.getJSON(n.urls.api_card+(e||i)).then((function(t){var n=t.cards.find((function(e){return e.nodegroup_id===s})),i=new p({data:{nodes:t.nodes,nodegroups:t.nodegroups,edges:[]},datatypes:t.datatypes});l(new f({card:n,graphModel:i,tile:null,resourceId:a.observable(a.unwrap(e)),displayname:a.observable(t.displayname),handlers:{"after-update":[],"tile-reset":[]},cards:t.cards,tiles:t.tiles,cardwidgets:t.cardwidgets,userisreviewer:t.userisreviewer}))}))}))},a.bindingHandlers.scrollTo={update:function(e,t){var n=t();a.unwrap(n)&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},this.initialize()}return a.components.register("analysis-areas-annotation-step",{viewModel:viewModel,template:m}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},63754:function(e,t,n){var a,i;a=[n(54922),n(84490),n(59732),n(46186),n(79921),n(59579),n(15521)],void 0===(i=function(e,t,n,a,i,s){function viewModel(t){var n,s,l=this;t.form.resourceId(t.sampleObjectResourceId);var d=t.imageStepData["56f8e9bd-ca7c-11e9-b578-a4d18cec433a"][a.activeLanguage].value,c=t.digitalReferenceResourceId;this.regionInstances=null===(n=t.regionsStepData)||void 0===n?void 0:n.data.map((function(e){return{regionName:e.data["3e541cc6-859b-11ea-97eb-acde48001122"],regionResource:e.data["b240c366-8594-11ea-97eb-acde48001122"][0].resourceId}}));var p=null===(s=t.regionsStepData)||void 0===s?void 0:s.currentAnalysisAreas;i.apply(this,[t]),this.objectAnnotations=e.observableArray(),this.resourceData.subscribe((function(e){var n;this.displayName=e.displayname||"unnamed";var a=e.resource["Digital Reference"].find((function(e){return e["Digital Source"].resourceId===c}));this.reportVals={projectName:{name:"Project",value:t.relatedProjectData.projectName,resourceid:t.relatedProjectData.project},parentObject:{name:"Object",value:this.getResourceValue(e.resource,["part of","@display_value"])},digitalReference:{name:"Image Service",value:a["Digital Source"]["@display_value"]}};var i={};l.regionResourceIds=null===(n=l.regionInstances)||void 0===n?void 0:n.map((function(e){return e.regionResource})),e.resource["Part Identifier Assignment"].forEach((function(e){var t=l.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","resourceId"]),n=l.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","@display_value"]),a=l.getResourceValue(e,["Part Identifier Assignment_Label","@display_value"]),s=l.getResourceValue(e,["Part Identifier Assignment_Annotator","@display_value"]),c=l.getResourceValue(e,["Part Identifier Assignment_Polygon Identifier","@display_value"]),p=l.getResourceValue(e,["Part Identifier Assignment_Polygon Identifier","@tile_id"]);if(c){var f=JSON.parse(c.replaceAll("'",'"'));if(f.features.length>0)if(e["Part Identifier Assignment_Polygon Identifier"].geojson.features[0].properties.manifest===d){var v=f.features[0].properties.canvas;f.features.forEach((function(e){e.properties.tileId=p})),v in i?i[v].push({resourceId:t,tileId:p,annotationName:n,annotationLabel:a,annotator:s,annotationJson:f}):i[v]=[{resourceId:t,tileId:p,annotationName:n,annotationLabel:a,annotator:s,annotationJson:f}]}}}));var _loop=function(){var e,t,n=[];i[s].forEach((function(a){e=a.annotationName,t?t.features=t.features.concat(a.annotationJson.features):t=a.annotationJson,null!=p&&p.includes(a.tileId)?n.push({tileId:a.tileId,name:a.annotationName,annotator:a.annotator}):a.annotationJson.features.map((function(e){e.properties.color="#999999",e.properties.fillColor="#999999",e.properties.tileId=a.tileId,e.properties.name=a.annotationName,e.properties.active=!1}))}));var a=l.prepareAnnotation(t);n.length>0&&l.objectAnnotations.push({name:e,info:n,leafletConfig:a,featureCollection:t})};for(var s in i)_loop();this.loading(!1)}),this)}return e.components.register("analysis-areas-final-step",{viewModel:viewModel,template:s}),viewModel}.apply(t,a))||(e.exports=i)},62314:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(84490),n(20198),n(46186),n(54922),n(58420),n(12340),n(56321),n(84458),n(30395)],void 0===(i=function(e,t,n,a,i,s,l,d){function viewModel(e){var d=this;e.pageVm.loading(!0),this.isManifestManagerHidden=a.observable(!0),this.shouldShowEditService=a.observable(!0),this.selectedPhysicalThingImageServiceName=a.observable(),this.selectedPhysicalThingImageServiceName.subscribe((function(t){(e.dirty(!0),t)&&(d.getResourceDataAssociatedWithPreviouslyPersistedTile(t)&&e.dirty(!1))})),this.physicalThingResourceId=i.toJS(e.physicalThingResourceId),this.physicalThingDigitalReferenceCard=a.observable(),this.physicalThingDigitalReferenceCard.subscribe((function(e){d.getPhysicalThingRelatedDigitalReferenceData(e)})),this.physicalThingDigitalReferenceTile=a.observable(),this.physicalThingDigitalReferencePreferredManifestResourceData=a.observableArray(),this.physicalThingDigitalReferenceAlternateManifestResourceData=a.observableArray();var c=e.form.topCards.find((function(e){return"d2fdae3d-ca7a-11e9-ad84-a4d18cec433a"===e.nodegroupid}));this.digitalResourceNameTile=c.getNewTile(),this.locked=e.form.locked;var p=e.form.topCards.find((function(e){return"da1fac57-ca7a-11e9-86a3-a4d18cec433a"===e.nodegroupid}));this.digitalResourceStatementTile=p.getNewTile();var f=e.form.topCards.find((function(e){return"29c8c76e-ca7c-11e9-9e11-a4d18cec433a"===e.nodegroupid}));this.digitalResourceServiceTile=f.getNewTile();var v=e.form.topCards.find((function(e){return"09c1778a-ca7b-11e9-860b-a4d18cec433a"===e.nodegroupid}));this.digitalResourceTypeTile=v.getNewTile();var h="56f8e26e-ca7c-11e9-9aa3-a4d18cec433a",b=f.cards().find((function(e){return e.nodegroupid===h}));this.digitalResourceServiceIdentifierTile=b.getNewTile();var m="d2fdc2fa-ca7a-11e9-8ffb-a4d18cec433a",g="da1fbca1-ca7a-11e9-8256-a4d18cec433a",x="cec360bd-ca7f-11e9-9ab7-a4d18cec433a",y="56f8e9bd-ca7c-11e9-b578-a4d18cec433a",w="56f8e759-ca7c-11e9-bda1-a4d18cec433a";this.buildStrObject=function(e){return _defineProperty({},n.activeLanguage,{value:e,direction:n.languages.find((function(e){return e.code==n.activeLanguage})).default_direction})},this.manifestData=a.observable(),this.manifestData.subscribe((function(e){if(e){d.digitalResourceNameTile.data[m](d.buildStrObject(e.label));var t=Array.isArray(e.description)?e.description[0]:e.description;d.digitalResourceStatementTile.data[g](t),d.digitalResourceServiceIdentifierTile.data[y](d.buildStrObject(e["@id"])),d.digitalResourceServiceIdentifierTile.data[w](["f32d0944-4229-4792-a33c-aadc2b181dc7"]),d.digitalResourceServiceTile.data[x](d.buildStrObject(e["@context"]))}else d.digitalResourceNameTile.data[m](null),d.digitalResourceStatementTile.data[g](null),d.digitalResourceServiceIdentifierTile.data[y](null),d.digitalResourceServiceIdentifierTile.data[w](null),d.digitalResourceServiceTile.data[x](null)})),this.initialize=function(){e.form.save=d.save,e.form.reset=d.reset,d.physicalThingDigitalReferenceCard()&&d.physicalThingDigitalReferenceTile()||d.getPhysicalThingDigitalReferenceData()},this.getResourceDataAssociatedWithPreviouslyPersistedTile=function(t){var n=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===t})),a=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.displayname===t})),i=n||a;if(i&&i.tiles&&e.form.savedData()){var s=e.form.savedData().tileid;if(i.tiles.find((function(e){return e.tileid===s}))&&i.displayname===t)return i}},this.save=function(){if(e.form.complete(!1),e.form.saving(!0),e.form.lockExternalStep("select-project",!0),d.manifestData()&&d.manifestData().label===d.selectedPhysicalThingImageServiceName())d.digitalResourceNameTile.transactionId=e.form.workflowId,d.digitalResourceNameTile.save().then((function(t){d.digitalResourceTypeTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceTypeTile.data["09c1778a-ca7b-11e9-860b-a4d18cec433a"](["305c62f0-7e3d-4d52-a210-b451491e6100"]),d.digitalResourceTypeTile.transactionId=e.form.workflowId,d.digitalResourceTypeTile.save(),d.digitalResourceStatementTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceStatementTile.transactionId=e.form.workflowId,d.digitalResourceStatementTile.save().then((function(t){d.digitalResourceServiceTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceServiceTile.data["5ceedd21-ca7c-11e9-a60f-a4d18cec433a"](["e208df66-9e61-498b-8071-3024aa7bed30"]),d.digitalResourceServiceTile.transactionId=e.form.workflowId,d.digitalResourceServiceTile.save().then((function(t){d.digitalResourceServiceIdentifierTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceServiceIdentifierTile.parenttile_id=t.tileid,d.digitalResourceServiceIdentifierTile.transactionId=e.form.workflowId,d.digitalResourceServiceIdentifierTile.save().then((function(t){e.form.savedData(t);var n=d.physicalThingDigitalReferenceTile();n.data["a298ee52-8d59-11eb-a9c4-faffc265b501"]=[{resourceId:t.resourceinstance_id,ontologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67i_is_referred_to_by",inverseOntologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67_refers_to"}];n.data["f11e4d60-8d59-11eb-a9c4-faffc265b501"]="1497d15a-1c3b-4ee9-a259-846bbab012ed",n.transactionId=e.form.workflowId,n.save().then((function(t){e.form.complete(!0),e.form.saving(!1)}))}))}))}))}));else{var t=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===d.selectedPhysicalThingImageServiceName()})),n=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.displayname===d.selectedPhysicalThingImageServiceName()})),a=t||n;if(a&&a.tiles){var i=a.tiles.find((function(e){return"56f8e26e-ca7c-11e9-9aa3-a4d18cec433a"===e.nodegroup_id}));e.form.savedData(i)}e.form.complete(!0),e.form.saving(!1)}},this.reset=function(){if(e.form.savedData()){var t=e.form.savedData().resourceinstance_id,n=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.resourceid===t})),a=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.resourceid===t})),i=n||a;i&&d.selectedPhysicalThingImageServiceName(i.displayname)}},this.openManifestManager=function(){d.isManifestManagerHidden(!1)},this.handleExitFromManifestManager=function(){d.isManifestManagerHidden(!0),d.manifestData()&&d.manifestData().label&&!d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===d.manifestData().label}))&&(d.physicalThingDigitalReferencePreferredManifestResourceData.push({displayname:d.manifestData().label,thumbnail:d.manifestData().sequences[0].canvases[0].thumbnail}),d.selectedPhysicalThingImageServiceName(d.manifestData().label))},this.getPhysicalThingDigitalReferenceData=function(){t.getJSON(n.urls.api_card+d.physicalThingResourceId).then((function(e){var t=e.cards.find((function(e){return"8a4ad932-8d59-11eb-a9c4-faffc265b501"===e.nodegroup_id})),n=new s({data:{nodes:e.nodes,nodegroups:e.nodegroups,edges:[]},datatypes:e.datatypes}),i=new l({card:t,graphModel:n,tile:null,resourceId:a.observable(d.physicalThingResourceId),displayname:a.observable(e.displayname),handlers:{"after-update":[],"tile-reset":[]},cards:e.cards,tiles:e.tiles,cardwidgets:e.cardwidgets,userisreviewer:e.userisreviewer});d.physicalThingDigitalReferenceCard(i),d.physicalThingDigitalReferenceTile(i.getNewTile())}))},this.getThumnail=function(e){var t=e.tiles.find((function(e){return e.nodegroup_id===h}));return window.fetch(t.data[y][n.activeLanguage].value).then((function(e){if(e.ok)return e.json()}))},this.getPhysicalThingRelatedDigitalReferenceData=function(i){var s="f11e4d60-8d59-11eb-a9c4-faffc265b501",l="1497d15a-1c3b-4ee9-a259-846bbab012ed",c="00d5a7a6-ff2f-4c44-ac85-7a8ab1a6fb70",p=i.tiles()||[];p.some((function(e){return a.unwrap(e.data[s])===(l||c)}))||e.pageVm.loading(!1),p.forEach((function(i){var p=a.unwrap(i.data[s]);if(p===(l||c)){var f=i.data["a298ee52-8d59-11eb-a9c4-faffc265b501"]()[0].resourceId();t.getJSON(n.urls.api_card+f).then((function(e){d.getThumnail(e).then((function(t){e.thumbnail=t.sequences[0].canvases[0].thumbnail["@id"],p===l?d.physicalThingDigitalReferencePreferredManifestResourceData.push(e):p===c&&d.physicalThingDigitalReferenceAlternateManifestResourceData.push(e);var n=d.getResourceDataAssociatedWithPreviouslyPersistedTile(e.displayname);n?d.selectedPhysicalThingImageServiceName(n.displayname):d.selectedPhysicalThingImageServiceName()||d.selectedPhysicalThingImageServiceName(d.physicalThingDigitalReferencePreferredManifestResourceData()[0].displayname)}))})).always((function(){e.pageVm.loading(!1)}))}}))},this.initialize()}return a.components.register("analysis-areas-image-step",{viewModel:viewModel,template:d}),viewModel}.apply(t,a))||(e.exports=i)},85284:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,s,l,d=[],c=!0,p=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(d.push(a.value),d.length!==t);c=!0);}catch(e){p=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw i}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(20198),n(84490),n(54922),n(58420),n(59732),n(46186),n(28693),n(87720),n(24198)],i=function(e,t,n,a,i,s,l){function viewModel(a){var i=this;t.extend(this,a.form);if(this.projectResourceId=n.observable(),this.collectionResourceId=n.observable(),this.collectionTileId=n.observable(),this.usedSetTileId=n.observable(),this.reportDataLoading=n.observable(a.loading()),a.projectStepData){var l=a.projectStepData;l.name.value,this.projectResourceId(l.projectResourceId)}else a.resourceid&&this.projectResourceId(a.resourceid);this.selectedTab=n.observable(),this.searchResults={timestamp:n.observable()},this.targetResource=n.observable(),this.toggleRelationshipCandidacy=n.observable(),this.isResourceRelatable=n.observable(),this.filters={"paging-filter":n.observable(),"search-results":n.observable()},this.termFilter=n.observable(),this.totalResults=n.observable(),this.query=n.observable(t.chain(decodeURIComponent(location.search).slice(1).split("&")).map((function(e){if(e)return e.split("=")})).compact().object().value()),this.selectedTerm=n.observable(),this.targetResources=n.observableArray([]),this.targetResourceSearchValue=n.observable(),this.termOptions=[],this.value=n.observableArray([]).extend({rateLimit:100}),this.startValue=n.observableArray(),this.selectedResources=n.observableArray([]),this.addedValues=n.observableArray(),this.removedValues=n.observableArray(),this.dirty=n.pureComputed((function(){return!(!i.startValue()||!i.value())&&!(!i.startValue().find((function(e){return!i.value().includes(e)}))&&!i.value().find((function(e){return!i.startValue().includes(e)})))})),this.dirty.subscribe((function(e){a.dirty(e)})),this.value.subscribe((function(t){t.forEach((function(t){"added"===t.status?e.ajax({url:s.urls.api_resources(n.unwrap(t.value)),data:{format:"json",includetiles:"false"}}).done((function(e){i.selectedResources.push(e)})):"deleted"===t.status&&i.selectedResources().forEach((function(e){e.resourceinstanceid===n.unwrap(t.value)&&i.selectedResources.remove(e)}))}))}),null,"arrayChange");var d=function(){var e,t=(e=_regeneratorRuntime().mark((function _callee(){var e,t,n;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.fetch("".concat(s.urls.related_resources).concat(i.projectResourceId()));case 2:return a.next=4,a.sent.json();case 4:if(e=a.sent,!(t=e.related_resources.related_resources.find((function(e){return"1b210ef3-b25c-11e9-a037-a4d18cec433a"===e.graph_id})))){a.next=15;break}return i.collectionResourceId(t.resourceinstanceid),a.next=10,window.fetch("".concat(s.urls.related_resources).concat(i.collectionResourceId()));case 10:return a.next=12,a.sent.json();case 12:n=a.sent,i.startValue(n.related_resources.related_resources.filter((function(e){return"9519cb4f-b25b-11e9-8c7b-a4d18cec433a"===e.graph_id})).map((function(e){return e.resourceinstanceid}))),i.startValue().forEach((function(e){i.value.push(e)}));case 15:case"end":return a.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(){return t.apply(this,arguments)}}();this.initialize=function(){if(a.value()){var e=n.unwrap(a.value);e.collectionResourceId&&i.collectionResourceId(e.collectionResourceId),e.collectionTileId&&i.collectionTileId(e.collectionTileId),e.usedSetTileId&&i.usedSetTileId(e.usedSetTileId),e.value&&(i.startValue(n.unwrap(e.value)),i.startValue().forEach((function(e){i.value.push(e)})))}else"update"===a.action&&d()},this.resetTile=function(){i.startValue()&&(i.value.removeAll(),i.startValue().forEach((function(e){i.value.push(e)})))},a.form.reset=this.resetTile,this.updateTileData=function(e){var t=i.value().find((function(t){return n.unwrap(t)===e}));t?i.value.remove(t):i.value.push(e)};this.submit=function(){i.complete(!1),i.saving(!0);var t=function(){var e=[];return i.addedValues(i.value().filter((function(e){return!i.startValue().includes(e)}))),i.removedValues(i.startValue().filter((function(e){return!i.value().includes(e)}))),i.addedValues().map((function(t){e.push({resourceid:t,action:"add"})})),i.removedValues().map((function(t){e.push({resourceid:t,action:"remove"})})),e}();e.ajax({url:s.urls.root+"updateresourcelist",type:"POST",data:{projectresourceid:n.unwrap(i.projectResourceId),collectionresourceid:n.unwrap(i.collectionResourceId),transactionid:a.form.workflowId,data:JSON.stringify(t)}}).then((function(e){i.collectionResourceId(e.result.collectionResourceid||n.unwrap(i.collectionResourceId)),i.collectionTileId(e.result.collectionNameTileId||n.unwrap(i.collectionTileId)),i.usedSetTileId(e.result.projectUsedSetTileId||n.unwrap(i.usedSetTileId)),i.savedData({value:n.unwrap(i.value),projectResourceId:n.unwrap(i.projectResourceId),collectionResourceId:n.unwrap(i.collectionResourceId),collectionTileId:n.unwrap(i.collectionTileId),usedSetTileId:n.unwrap(i.usedSetTileId)}),"update"===a.action&&a.form.lockExternalStep("select-project",!0)})).fail((function(e){console.log(e);var t=n.unwrap(i.startValue);i.value(t)})).always((function(){i.saving(!1),i.complete(!0)}))},a.form.save=i.submit,a.form.onSaveSuccess=function(){},this.targetResourceSelectConfig={value:i.selectedTerm,minimumInputLength:2,placeholder:"find a physical thing: enter an artist, object name, artwork title or object number",clickBubble:!0,multiple:!1,closeOnSlect:!1,allowClear:!0,ajax:{url:s.urls.search_terms,dataType:"json",quietMillis:250,data:function(e,t){var n={start:7*(t-1),page_limit:7,q:e};return n},results:function(e,t){var n=window.document.getElementsByClassName("select2-input")[0].value,a=e.terms;return a.unshift({type:"string",context:"",context_label:"Search Term",id:n,text:n,value:n}),i.termOptions=a,{results:a.filter((function(e){return e.context_label.includes("Physical Thing")||e.context_label.includes("Search Term")})),more:e.count>=7*t}}},id:function(e){return e.id},formatResult:function(e){return"Search Term"===e.context_label?"<strong><u>".concat(e.text,"</u></strong>"):e.text},formatSelection:function(e){return e.text},clear:function(){i.selectedTerm()},isEmpty:n.computed((function(){return""===i.selectedTerm()||!i.selectedTerm()}),this),initSelection:function(){}};this.updateSearchResults=function(e,n){!function(e,n){var a,l={};t.each(i.filters,(function(e,t){"paging-filter"!==t&&"search-results"!==t&&delete i.filters[t]})),e&&(e.inverted=!1,l["term-filter"]=JSON.stringify([e])),n?(l["paging-filter"]=n,i.filters["paging-filter"](n)):l["paging-filter"]=1,i.reportDataLoading(!0),a=Object.entries(l).map((function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join("&"),fetch(s.urls.physical_thing_search_results+"?"+a).then((function(e){return e.json()})).then((function(e){t.each(i.searchResults,(function(e,t){"timestamp"!==t&&delete i.searchResults[t]})),t.each(e,(function(e,t){"timestamp"!==t&&(i.searchResults[t]=e)})),i.searchResults.timestamp(e.timestamp),i.totalResults(e.total_results);var n=e.results.hits.hits.map((function(e){return e._source.tiles.forEach((function(t){t.data["22c15cfa-b498-11e9-b5e3-a4d18cec433a"]&&t.data["22c15cfa-b498-11e9-b5e3-a4d18cec433a"].length&&"26094e9c-2702-4963-adee-19ad118f0f5a"===t.data["22c15cfa-b498-11e9-b5e3-a4d18cec433a"][0]&&(e.identifier=t.data["22c169b5-b498-11e9-bdad-a4d18cec433a"])})),e}));i.targetResources(n),i.reportDataLoading(!1)}))}(e,n)},this.selectedTerm.subscribe((function(e){i.termFilter(i.termOptions.find((function(t){return e==t.id}))),i.updateSearchResults(i.termFilter())})),this.query.subscribe((function(e){i.updateSearchResults(i.termFilter(),e["paging-filter"])})),this.initialize(),this.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},this.getStringValue=function(e){return e.find((function(e){return e.language==s.activeLanguage})).value}}return n.components.register("add-things-step",{viewModel:viewModel,template:l}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},93650:function(e,t,n){var a,i;a=[n(54922),n(79921),n(71984)],void 0===(i=function(e,t,n){function viewModel(n){var a=this;t.apply(this,[n]),this.resourceLoading=e.observable(!0),this.collectionLoading=e.observable(!0),this.collectionResourceId=n.collectionResourceId,this.collectionData=e.observableArray(),this.collectionOfPhysThings=e.observableArray(),this.getRelatedResources(this.collectionResourceId,this.collectionData),this.collectionData.subscribe((function(e){e.related_resources.forEach((function(e){"9519cb4f-b25b-11e9-8c7b-a4d18cec433a"===e.graph_id&&a.collectionOfPhysThings.push({resourceid:e.resourceinstanceid,name:e.displayname})})),this.collectionLoading(!1),this.resourceLoading()||this.loading(!1)}),this),this.resourceData.subscribe((function(e){this.displayName=e.displayname||"unnamed",this.displaydescription=e.displaydescription||"none",this.reportVals={projectName:{name:"Project Name",value:this.getResourceValue(e.resource.Name[0],["Name_content","@display_value"])},projectTimespan:{name:"Project Timespan",value:this.getResourceValue(e.resource,["TimeSpan","TimeSpan_begin of the begin","@display_value"])},projectTeam:{name:"Project Team",value:this.getResourceValue(e.resource,["carried out by","@display_value"])},collection:{name:"Related Collection",value:this.getResourceValue(e.resource["Used Set"],["@display_value"])}};this.reportVals.projectStatement=function(t){try{a.reportVals.statements=e.resource.Statement.map((function(e){return{content:{name:"Project Statement",value:a.getResourceValue(e,["Statement_content","@display_value"])},type:{name:"type",value:a.getResourceValue(e,["Statement_type","@display_value"])}}}))}catch(e){a.reportVals.statements=[]}var n=a.reportVals.statements.find((function(e){return e.type.value.split(",").indexOf(t)>-1}));return n?n.content:{name:"Project Statement",value:"None"}}("description"),this.resourceLoading(!1),this.collectionLoading()||this.loading(!1)}),this)}return e.components.register("create-project-final-step",{viewModel:viewModel,template:n}),viewModel}.apply(t,a))||(e.exports=i)},65438:function(e,t,n){var a,i;a=[n(46186),n(59732),n(54922),n(8036),n(56321)],i=function(e,t,n,a){function viewModel(a){var i=this,getProp=function(t,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n.unwrap(a.value)&&a.value()[t])return i?a.value()[t][i]:a.value()[t];if(s){var l={};return l[e.activeLanguage]={value:"",direction:e.languages.find((function(t){return t.code==e.activeLanguage})).default_direction},l}return null},s=n.observable(getProp("type","tileid")),l=n.observable(getProp("name","tileid"));this.projectResourceId=n.observable(getProp("projectResourceId")),this.typeValue=n.observable(getProp("type","value")),this.nameValue=n.observable(getProp("name","value",!0)),this.projectEventTypeRdmCollection=n.observable("26d7ce44-20e5-44fb-a3c1-dfbe6bdd521b");var d={typeValue:i.typeValue(),nameValue:i.nameValue()};this.updatedValue=n.pureComputed((function(){return{projectResourceId:i.projectResourceId(),name:{value:i.nameValue(),tileid:l()},type:{value:i.typeValue(),tileid:s()}}})),this.updatedValue.subscribe((function(e){a.value(e)})),this.buildTile=function(e,t,n,i){var s={tileid:i||"",nodegroup_id:t,parenttile_id:null,resourceinstance_id:n,sortorder:0,tiles:{},data:{},transaction_id:a.form.workflowId};return s.data=e,s},this.saveTile=function(n,a,s,l){var d=i.buildTile(n,a,s,l);return window.fetch(e.urls.api_tiles(l||t.generate()),{method:"POST",credentials:"include",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()}))},a.form.reset=function(){i.typeValue(d.typeValue),i.nameValue(d.nameValue)},a.form.save=function(){if(a.form.complete(!1),!i.nameValue())return a.form.error(new Error("Missing Required Value")),void a.pageVm.alert(new a.form.AlertViewModel("ep-alert-red","Missing Required Value","Name is required."));var e={"0b92cf5c-ca85-11e9-95b1-a4d18cec433a":i.nameValue(),"0b92d5a3-ca85-11e9-8ea8-a4d18cec433a":null,"0b92de3d-ca85-11e9-affe-a4d18cec433a":null,"0b92f8cc-ca85-11e9-8c26-a4d18cec433a":["bc35776b-996f-4fc1-bd25-9f6432c1f349"],"0b930757-ca85-11e9-a268-a4d18cec433a":["7d069762-bd96-44b8-afc8-4761389105c5"]},t={"0b924423-ca85-11e9-865a-a4d18cec433a":i.typeValue()};return i.saveTile(e,"0b926359-ca85-11e9-ac9c-a4d18cec433a",i.projectResourceId(),l()).then((function(e){return l(e.tileid),i.projectResourceId(e.resourceinstance_id),i.saveTile(t,"0b924423-ca85-11e9-865a-a4d18cec433a",e.resourceinstance_id,s())})).then((function(e){s(e.tileid),a.form.savedData(a.form.value()),a.form.complete(!0),a.form.dirty(!1),a.pageVm.alert("")}))}}return n.components.register("project-name-step",{viewModel:viewModel,template:a}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},84229:function(e,t,n){var a,i;a=[n(54922),n(79921),n(18489)],void 0===(i=function(e,t,n){function viewModel(n){var a=this;t.apply(this,[n]),this.projectResourceId=n.projectResourceId,this.collectionOfParentPhysThings=e.observableArray(),this.collectionOfChildPhysThings=e.observableArray(),this.relatedResources.subscribe((function(e){var t="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",n=["77d8cf19-ce9c-4e0a-bde1-9148d870e11c","7375a6fb-0bfb-4bcf-81a3-6180cdd26123","31d97bdd-f10f-4a26-958c-69cb5ab69af1"];a.collectionName=a.getResourceValue(e,["resource_instance","displayname"]),a.projectName=e.related_resources.find((function(e){return e.resourceinstanceid===a.projectResourceId})).displayname;var i=e.related_resources.filter((function(e){return"9519cb4f-b25b-11e9-8c7b-a4d18cec433a"===e.graph_id}));a.collectionOfParentPhysThings(i.filter((function(e){return!e.tiles.find((function(e){return e.nodegroup_id===t&&e.data[t].find((function(e){return n.includes(e)}))}))})).map((function(e){return{name:e.displayname,resourceid:e.resourceinstanceid}}))),a.collectionOfChildPhysThings(i.filter((function(e){return e.tiles.find((function(e){return e.nodegroup_id===t&&e.data[t].find((function(e){return n.includes(e)}))}))})).map((function(e){return{name:e.displayname,resourceid:e.resourceinstanceid}}))),this.loading(!1)}),this)}return e.components.register("project-collection-final-step",{viewModel:viewModel,template:n}),viewModel}.apply(t,a))||(e.exports=i)},90529:function(e,t,n){var a,i;a=[n(20198),n(84490),n(54922),n(79921),n(9951)],void 0===(i=function(e,t,n,a,i){function viewModel(e){var i=this;this.loading=n.observable(!0),this.digitalResourceLoading=n.observable(!0),this.resourceLoading=n.observable(!0),this.fileLists=n.observableArray(),this.tableConfig={info:!1,paging:!1,scrollCollapse:!0,searching:!1,ordering:!1,columns:[null,null,null]},e.form.resourceId(e.sampleObjectResourceInstanceId),a.apply(this,[e]),this.selectedDatasets=e.selectedDatasets.reduce((function(e,t){return t.selected&&e.push(t),e}),[]),this.resourceData.subscribe((function(e){var a,s;this.displayName=e.displayname,this.reportVals={sampledObjectName:{name:"Sampled Object",value:this.getResourceValue(e.resource.Name[0],["Name_content","@display_value"])}},(null===(a=e.resource["Part Identifier Assignment"])||void 0===a?void 0:a.length)>0&&(s=e.resource["Part Identifier Assignment"].map((function(e){return{name:i.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","@display_value"]),resourceid:i.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","resourceId"]),tileId:i.getResourceValue(e,["@tile_id"]),annotation:i.getResourceValue(e,["Part Identifier Assignment_Polygon Identifier","@display_value"])}}))),i.selectedDatasets.forEach((function(e){var a=n.observableArray(),l=n.observableArray();i.getResourceData(e.resourceid,a),a.subscribe((function(n){var a,d,findStatementType=function(e,n){var a=t.find(e,(function(e){return e.type.indexOf(n)>-1}));return a?a.statement:"None"},c=n.displayname;n.resource.File.map((function(e){var t=[],n=i.getResourceValue(e.file_details[0],["name"]);return Array.isArray(e.FIle_Statement)&&(t=e.FIle_Statement.map((function(e){return{statement:i.getResourceValue(e,["FIle_Statement_content","@display_value"]),type:i.getResourceValue(e,["FIle_Statement_type","@display_value"])}}))),{fileName:n,statements:t}})).forEach((function(e){var t=e.fileName,n=findStatementType(e.statements,"interpretation"),a=findStatementType(e.statements,"brief text");l.push({name:t,interpretation:n,parameter:a})})),null===(a=s)||void 0===a||a.forEach((function(t){if(e.partresourceid===t.resourceid){var n=t.annotation,a=JSON.parse(n.replaceAll("'",'"'));d=i.prepareAnnotation(a)}})),i.fileLists.push({digitalResourceName:c,fileList:l,leafletConfig:d}),i.loading(!1)}))}),this)}),this)}return n.components.register("review-dataset-final-step",{viewModel:viewModel,template:i}),viewModel}.apply(t,a))||(e.exports=i)},43178:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(20198),n(54922),n(46186),n(3896)],i=function(e,t,n,a){function viewModel(e){var a=this;this.digitalResourceGraphId="707cbd78-ca7a-11e9-990b-a4d18cec433a",this.physicalThingResourceId=t.observable(),this.relatedDigitalResources=t.observableArray(),this.dataLoaded=t.observable(!1);var i=function(){var i,s=(i=_regeneratorRuntime().mark((function _callee(i){var s,l,d,c,p;return _regeneratorRuntime().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(i){f.next=2;break}return f.abrupt("return");case 2:return s="".concat(n.urls.root,"digital-resources-by-object-parts/").concat(i),f.next=5,fetch(s,{method:"GET",credentials:"include"});case 5:if(!(l=f.sent).ok){f.next=15;break}return f.next=9,l.json();case 9:d=f.sent,(c=d.resources).forEach((function(n){n.selected=t.observable(!1),e.value()&&e.value().digitalResources.forEach((function(e){e.resourceid===n.resourceid&&n.selected(e.selected)}))})),p=c.filter((function(e){return!e.isdirect&&"sample"!==d.type||e.isdirect&&"sample"===d.type})),a.relatedDigitalResources(p),a.dataLoaded(!0);case 15:case"end":return f.stop()}}),_callee)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var s=i.apply(e,t);function _next(e){asyncGeneratorStep(s,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,a,_next,_throw,"throw",e)}_next(void 0)}))});return function(e){return s.apply(this,arguments)}}();this.selectedDigtalResources=t.pureComputed((function(){return a.relatedDigitalResources().map((function(e){return{resourceid:e.resourceid,partresourceid:e.partresourceid,selected:e.selected()}}))})),this.selectedDigtalResources.subscribe((function(t){if(t&&t.length>0){var n={digitalResources:t,resourceid:a.physicalThingResourceId()};e.value(n)}else e.value(void 0)})),this.physicalThingResourceId.subscribe(i),e.value()&&(a.physicalThingResourceId(e.value().resourceid),i(e.value().resourceid))}return t.components.register("select-dataset",{viewModel:viewModel,template:a}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},64067:function(e,t,n){var a,i;a=[n(28459),n(54922),n(35605),n(59732),n(46186),n(79921),n(94806),n(62591)],void 0===(i=function(e,t,n,a,i,s,l,d){function viewModel(a){var d=this;this.map=t.observable(),this.maps=t.observableArray(),this.selectedAnnotationTileId=t.observable(),a.form.resourceId(a.samplingActivityResourceId),s.apply(this,[a]),this.findStatementType=function(e,t){var n=e.find((function(e){return e.type.indexOf(t)>-1}));return n?n.statement:"None"},this.tableConfig={info:!1,paging:!1,scrollCollapse:!0,searching:!1,ordering:!1,type:"html",columns:[null,null,null]},this.prepareAnnotation=function(a){var s=a.features[0].properties.canvas;return{center:[0,0],crs:n.CRS.Simple,zoom:0,afterRender:function(c){n.tileLayer.iiif(s+"/info.json").addTo(c);var p=e(a);c.addLayer(n.geoJson(a,{pointToLayer:function(e,t){return n.circleMarker(t,e.properties)},style:function(e){return e.properties},onEachFeature:function(e,a){if(!e.properties.active){var s=n.popup({closeButton:!1,maxWidth:250}).setContent(l).on("add",(function(){var n=e.properties.locationName.split("["),a=n[0].trim(),l=n[1].startsWith("Region")?"Analysis Area":n[1].startsWith("Sample Area")?"Sample Area":"Part",d=n[1].startsWith("Region")?n[1].replace("Region of ","").replace("]",""):n[1].startsWith("Sample Area")?n[1].replace("Sample Area of ","").replace("]",""):n[1].replace("]",""),c="".concat(a," is a ").concat(l," of ").concat(d,",\n which is created before"),p={closePopup:function(){s.remove()},name:e.properties.locationName,description:c,graphName:"Physical Thing",resourceinstanceid:e.properties.sampleAreaResourceId,reportURL:i.urls.resource_report},f=s.getElement().querySelector(".mapboxgl-popup-content");t.applyBindingsToDescendants(p,f)}));a.bindPopup(s)}a.on("click",(function(){e.properties&&e.properties.tileId&&e.properties.active&&d.highlightAnnotation(e.properties.tileId)}))}})),n.control.fullscreen().addTo(c),setTimeout((function(){c.fitBounds([[p[1]-1,p[0]-1],[p[3]+1,p[2]+1]])}),250),d.maps.push(c)}}},this.highlightAnnotation=function(e){e!==d.selectedAnnotationTileId()?d.selectedAnnotationTileId(e):d.selectedAnnotationTileId(null),d.maps()&&d.maps().forEach((function(e){e.eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){var t=e.feature.properties.color;d.selectedAnnotationTileId()===e.feature.properties.tileId?e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}):e.setStyle({color:t,fillColor:t})}))}))}))},this.resourceData.subscribe((function(e){this.displayName=e.displayname,this.reportVals={projectName:{name:"Project",value:this.getResourceValue(e.resource,["part of","@display_value"])},sampledObjectName:{name:"Sampled Object",value:this.getResourceValue(e.resource["Sampling Unit"][0],["Sampling Area","Overall Object Sampled","@display_value"])},samplers:{name:"Samplers",value:this.getResourceValue(e.resource,["carried out by","@display_value"])},samplingDate:{name:"Sampling Date",value:this.getResourceValue(e.resource,["TimeSpan","TimeSpan_begin of the begin","@display_value"])},samplingActivityName:{name:"Sampling Activity Name",value:this.getResourceValue(e.resource.Name[0],["Name_content","@display_value"])}};var n=e.resource.Statement.map((function(e){return{statement:d.getResourceValue(e,["Statement_content","@display_value"]),type:d.getResourceValue(e,["Statement_type","@display_value"])}})),a=d.findStatementType(n,"description,brief text"),i=d.findStatementType(n,"sampling motivation");this.reportVals.technique={name:"Sampling Technique",value:a},this.reportVals.motivation={name:"Sampling Motivation",value:i};var s={},l={};d.getResourceValue(e.resource,["Sampling Unit"]).forEach((function(e){if(e["Sample Created"]["@display_value"]){var t=d.getResourceValue(e,["Sample Created","@display_value"]),n=d.getResourceValue(e,["Sample Created","resourceId"]),a=d.getResourceValue(e,["Sampling Area","resourceId"]),i=d.getResourceValue(e,["Sampling Area","Sampling Area Identification","Sampling Area Visualization","@display_value"]),l=d.getResourceValue(e,["Sampling Area","Sampling Area Identification","Sampling Area Visualization","@tile_id"]);if(i){var c=JSON.parse(i.replaceAll("'",'"')),p=c.features[0].properties.canvas;c.features.forEach((function(e){e.properties.active=!0,e.properties.tileId=l})),p in s?s[p].push({tileId:l,locationName:t,sampleResourceId:n,sampleAreaResourceId:a,locationAnnotation:c}):s[p]=[{tileId:l,locationName:t,sampleResourceId:n,sampleAreaResourceId:a,locationAnnotation:c}]}}}));var c=d.getResourceValue(e.resource["Sampling Unit"][0],["Sampling Area","Overall Object Sampled","resourceId"]),p=t.observable();d.getResourceData(c,p),p.subscribe((function(e){d.getResourceValue(e.resource,["Part Identifier Assignment"]).forEach((function(e){var t=d.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","@display_value"]),n=d.getResourceValue(e,["@tile_id"]),a=d.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","resourceId"]),i=d.getResourceValue(e,["Part Identifier Assignment_Polygon Identifier","@display_value"]);if(i){var s=JSON.parse(i.replaceAll("'",'"')),c=s.features[0].properties.canvas;s.features.forEach((function(e){e.properties.active=!1,e.properties.tileId=n,e.properties.locationName=t,e.properties.sampleAreaResourceId=a})),c in l?l[c].push({locationAnnotation:s,sampleAreaResourceId:a}):l[c]=[{locationAnnotation:s,sampleAreaResourceId:a}]}})),d.annotationStatus=t.observable(),d.sampleAnnotations=[];var n=Object.keys(s).length,a=0,_loop=function(e){var i,c=t.observableArray(),p=s[e].map((function(e){return e.sampleAreaResourceId}));l[e].forEach((function(e){p.includes(e.sampleAreaResourceId)||(i?i.features=i.features.concat(e.locationAnnotation.features):i=e.locationAnnotation,e.locationAnnotation.features.forEach((function(e){e.properties.color="#999999",e.properties.fillColor="#999999"})))}));var f=0;s[e].forEach((function(n){var a=n.sampleResourceId;i?i.features=i.features.concat(n.locationAnnotation.features):i=n.locationAnnotation,d.currentLocation=t.observable();var l=s[e].length;d.getResourceData(a,d.currentLocation),d.currentLocation.subscribe((function(e){var t=e.displayname;if(e.resource.Statement)var a=e.resource.Statement.map((function(e){return{statement:d.getResourceValue(e,["Statement_content","@display_value"]),type:d.getResourceValue(e,["Statement_type","@display_value"])}})),i=d.findStatementType(a,"sampling motivation").replace(/(<([^>]+)>)/gi,""),s=d.findStatementType(a,"sample description").replace(/(<([^>]+)>)/gi,"");c.push({tileId:n.tileId,sampleResourceId:n.sampleResourceId,sampleAreaResourceId:n.sampleAreaResourceId,samplingLocationName:t||"None",sampleDescription:s||"None",sampleMotivation:i||"None"}),(f+=1)===l&&d.annotationStatus.valueHasMutated()}))})),d.annotationStatus.subscribe((function(){var e=d.prepareAnnotation(i);d.sampleAnnotations.push({samplingLocations:c,leafletConfig:e,featureCollection:i}),(a+=1)===n&&d.loading(!1)}))};for(var i in s)_loop(i)}))}),this)}return t.components.register("sample-taking-final-step",{viewModel:viewModel,template:d}),viewModel}.apply(t,a))||(e.exports=i)},30808:function(e,t,n){var a,i;a=[n(84490),n(20198),n(46186),n(54922),n(58420),n(12340),n(56321),n(25894),n(30395)],void 0===(i=function(e,t,n,a,i,s,l,d){function viewModel(e){var d=this;e.pageVm.loading(!0),this.isManifestManagerHidden=a.observable(!0),this.shouldShowEditService=a.observable(!0),this.selectedPhysicalThingImageServiceName=a.observable(),this.selectedPhysicalThingImageServiceName.subscribe((function(t){(e.dirty(!0),t)&&(d.getResourceDataAssociatedWithPreviouslyPersistedTile(t)&&e.dirty(!1))})),this.physicalThingResourceId=i.toJS(e.physicalThingResourceId);var c=i.toJS(e.samplingInfoData);this.samplingActivityResourceId=c.samplingActivityResourceId,this.samplingActivityDigitalReferenceTileId=c.samplingActivityDigitalReferenceTile,this.physicalThingDigitalReferenceCard=a.observable(),this.physicalThingDigitalReferenceCard.subscribe((function(e){d.getPhysicalThingRelatedDigitalReferenceData(e)})),this.physicalThingDigitalReferenceTile=a.observable(),this.physicalThingDigitalReferencePreferredManifestResourceData=a.observableArray(),this.physicalThingDigitalReferenceAlternateManifestResourceData=a.observableArray();var p=e.form.topCards.find((function(e){return"d2fdae3d-ca7a-11e9-ad84-a4d18cec433a"===e.nodegroupid}));this.digitalResourceNameTile=p.getNewTile();var f=e.form.topCards.find((function(e){return"da1fac57-ca7a-11e9-86a3-a4d18cec433a"===e.nodegroupid}));this.digitalResourceStatementTile=f.getNewTile();var v=e.form.topCards.find((function(e){return"29c8c76e-ca7c-11e9-9e11-a4d18cec433a"===e.nodegroupid}));this.digitalResourceServiceTile=v.getNewTile();var h="56f8e26e-ca7c-11e9-9aa3-a4d18cec433a",b=v.cards().find((function(e){return e.nodegroupid===h}));this.digitalResourceServiceIdentifierTile=b.getNewTile();var m=e.form.topCards.find((function(e){return"09c1778a-ca7b-11e9-860b-a4d18cec433a"===e.nodegroupid}));this.digitalResourceTypeTile=m.getNewTile();var g="d2fdc2fa-ca7a-11e9-8ffb-a4d18cec433a",x="da1fbca1-ca7a-11e9-8256-a4d18cec433a",y="cec360bd-ca7f-11e9-9ab7-a4d18cec433a",w="56f8e9bd-ca7c-11e9-b578-a4d18cec433a",k="56f8e759-ca7c-11e9-bda1-a4d18cec433a";this.manifestData=a.observable(),this.manifestData.subscribe((function(e){if(e){var t={};t[n.activeLanguage]={value:e.label,direction:n.activeLanguageDir},d.digitalResourceNameTile.data[g](t);var a=Array.isArray(e.description)?e.description[0]:e.description,i={};i[n.activeLanguage]={value:a||"",direction:n.activeLanguageDir},d.digitalResourceStatementTile.data[x](i);var s={};s[n.activeLanguage]={value:e["@id"],direction:n.activeLanguageDir},d.digitalResourceServiceIdentifierTile.data[w](s),d.digitalResourceServiceIdentifierTile.data[k](["f32d0944-4229-4792-a33c-aadc2b181dc7"]);var l={};l[n.activeLanguage]={value:e["@context"],direction:n.activeLanguageDir},d.digitalResourceServiceTile.data[y](l)}else d.digitalResourceNameTile.data[g](null),d.digitalResourceStatementTile.data[x](null),d.digitalResourceServiceIdentifierTile.data[w](null),d.digitalResourceServiceIdentifierTile.data[k](null),d.digitalResourceServiceTile.data[y](null)})),this.initialize=function(){e.form.save=d.save,e.form.reset=d.reset,d.physicalThingDigitalReferenceCard()&&d.physicalThingDigitalReferenceTile()||d.getPhysicalThingDigitalReferenceData()},this.getResourceDataAssociatedWithPreviouslyPersistedTile=function(t){var n=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===t})),a=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.displayname===t})),i=n||a;if(i&&i.tiles&&e.form.savedData()){var s=e.form.savedData().tileid;if(i.tiles.find((function(e){return e.tileid===s}))&&i.displayname===t)return i}},this.saveSamplingActivityDigitalReference=function(t){var a={tileid:d.samplingActivityDigitalReferenceTileId,data:{"4099e818-8e31-11eb-a9c4-faffc265b501":"1497d15a-1c3b-4ee9-a259-846bbab012ed","4099e8e0-8e31-11eb-a9c4-faffc265b501":[{resourceId:t,ontologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67i_is_referred_to_by",resourceXresourceId:"",inverseOntologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67_refers_to"}]},nodegroup_id:"4099e584-8e31-11eb-a9c4-faffc265b501",parenttile_id:"",resourceinstance_id:d.samplingActivityResourceId,sortorder:0,tiles:{},transaction_id:e.form.workflowId};return window.fetch(n.urls.api_tiles(d.samplingActivityDigitalReferenceTileId),{method:"POST",credentials:"include",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})},this.save=function(){if(e.form.complete(!1),e.form.saving(!0),d.manifestData()&&d.manifestData().label===d.selectedPhysicalThingImageServiceName())d.digitalResourceNameTile.transactionId=e.form.workflowId,d.digitalResourceNameTile.save().then((function(t){d.digitalResourceTypeTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceTypeTile.data["09c1778a-ca7b-11e9-860b-a4d18cec433a"](["305c62f0-7e3d-4d52-a210-b451491e6100"]),d.digitalResourceTypeTile.transactionId=e.form.workflowId,d.digitalResourceTypeTile.save(),d.digitalResourceStatementTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceStatementTile.transactionId=e.form.workflowId,d.digitalResourceStatementTile.save().then((function(t){d.digitalResourceServiceTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceServiceTile.data["5ceedd21-ca7c-11e9-a60f-a4d18cec433a"](["e208df66-9e61-498b-8071-3024aa7bed30"]),d.digitalResourceServiceTile.transactionId=e.form.workflowId,d.digitalResourceServiceTile.save().then((function(t){d.digitalResourceServiceIdentifierTile.resourceinstance_id=t.resourceinstance_id,d.digitalResourceServiceIdentifierTile.parenttile_id=t.tileid,d.digitalResourceServiceIdentifierTile.transactionId=e.form.workflowId,d.digitalResourceServiceIdentifierTile.save().then((function(t){e.form.savedData(t),d.saveSamplingActivityDigitalReference(t.resourceinstance_id);var n=d.physicalThingDigitalReferenceTile();n.data["a298ee52-8d59-11eb-a9c4-faffc265b501"]=[{resourceId:t.resourceinstance_id,ontologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67i_is_referred_to_by",inverseOntologyProperty:"http://www.cidoc-crm.org/cidoc-crm/P67_refers_to"}];n.data["f11e4d60-8d59-11eb-a9c4-faffc265b501"]="1497d15a-1c3b-4ee9-a259-846bbab012ed",n.transactionId=e.form.workflowId,n.save().then((function(t){e.form.complete(!0),e.form.saving(!1)}))}))}))}))}));else{var t=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===d.selectedPhysicalThingImageServiceName()})),n=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.displayname===d.selectedPhysicalThingImageServiceName()})),a=t||n;if(a&&a.tiles){var i=a.tiles.find((function(e){return"56f8e26e-ca7c-11e9-9aa3-a4d18cec433a"===e.nodegroup_id}));e.form.savedData(i),d.saveSamplingActivityDigitalReference(i.resourceinstance_id)}e.form.complete(!0),e.form.saving(!1)}},this.reset=function(){if(e.form.savedData()){var t=e.form.savedData().resourceinstance_id,n=d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.resourceid===t})),a=d.physicalThingDigitalReferenceAlternateManifestResourceData().find((function(e){return e.resourceid===t})),i=n||a;i&&d.selectedPhysicalThingImageServiceName(i.displayname)}},this.openManifestManager=function(){d.isManifestManagerHidden(!1)},this.handleExitFromManifestManager=function(){d.isManifestManagerHidden(!0),d.manifestData()&&d.manifestData().label&&!d.physicalThingDigitalReferencePreferredManifestResourceData().find((function(e){return e.displayname===d.manifestData().label}))&&(d.physicalThingDigitalReferencePreferredManifestResourceData.push({displayname:d.manifestData().label,thumbnail:d.manifestData().sequences[0].canvases[0].thumbnail}),d.selectedPhysicalThingImageServiceName(d.manifestData().label))},this.getPhysicalThingDigitalReferenceData=function(){t.getJSON(n.urls.api_card+d.physicalThingResourceId).then((function(e){var t=e.cards.find((function(e){return"8a4ad932-8d59-11eb-a9c4-faffc265b501"===e.nodegroup_id})),n=new s({data:{nodes:e.nodes,nodegroups:e.nodegroups,edges:[]},datatypes:e.datatypes}),i=new l({card:t,graphModel:n,tile:null,resourceId:a.observable(d.physicalThingResourceId),displayname:a.observable(e.displayname),handlers:{"after-update":[],"tile-reset":[]},cards:e.cards,tiles:e.tiles,cardwidgets:e.cardwidgets,userisreviewer:e.userisreviewer});d.physicalThingDigitalReferenceCard(i),d.physicalThingDigitalReferenceTile(i.getNewTile())}))},this.getThumnail=function(e){var t=e.tiles.find((function(e){return e.nodegroup_id===h}));return fetch(t.data[w][n.activeLanguage].value).then((function(e){if(e.ok)return e.json()}))},this.getPhysicalThingRelatedDigitalReferenceData=function(i){var s="f11e4d60-8d59-11eb-a9c4-faffc265b501",l="1497d15a-1c3b-4ee9-a259-846bbab012ed",c="00d5a7a6-ff2f-4c44-ac85-7a8ab1a6fb70",p=i.tiles()||[];p.some((function(e){return a.unwrap(e.data[s])===(l||c)}))||e.pageVm.loading(!1),p.forEach((function(i){var p=a.unwrap(i.data[s]);if(p===(l||c)){var f=i.data["a298ee52-8d59-11eb-a9c4-faffc265b501"]()[0].resourceId();t.getJSON(n.urls.api_card+f).then((function(e){d.getThumnail(e).then((function(t){e.thumbnail=t.sequences[0].canvases[0].thumbnail["@id"],p===l?d.physicalThingDigitalReferencePreferredManifestResourceData.push(e):p===c&&d.physicalThingDigitalReferenceAlternateManifestResourceData.push(e);var n=d.getResourceDataAssociatedWithPreviouslyPersistedTile(e.displayname);n?d.selectedPhysicalThingImageServiceName(n.displayname):d.selectedPhysicalThingImageServiceName()||d.selectedPhysicalThingImageServiceName(d.physicalThingDigitalReferencePreferredManifestResourceData()[0].displayname)}))})).always((function(){e.pageVm.loading(!1)}))}}))},this.initialize()}return a.components.register("sample-taking-image-step",{viewModel:viewModel,template:d}),viewModel}.apply(t,a))||(e.exports=i)},91834:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(84490),n(20198),n(46186),n(48303),n(54922),n(58420),n(28459),n(32274),n(12340),n(56321),n(50021),n(22172),n(94806),n(2129)],i=function(e,t,n,a,i,s,l,d,c,p,f,v,h,b){function viewModel(a){var b=this;e.extend(this,a),this.physicalThingResourceId=s.toJS(a.physicalThingResourceId),this.samplingActivityResourceId=s.toJS(a.samplingActivityResourceId);var m="b240c366-8594-11ea-97eb-acde48001122",g="b3e171a7-1d9d-11eb-a29f-024e0d439fdb",x="03357848-1d9d-11eb-a29f-024e0d439fdb",y="97c30c42-8594-11ea-97eb-acde48001122";this.analysisAreaResourceIds=[],this.manifestUrl=i.observable(a.imageServiceInstanceData["56f8e9bd-ca7c-11e9-b578-a4d18cec433a"][n.activeLanguage].value),this.samplingActivitySamplingUnitCard=i.observable(),this.samplingActivityStatementCard=i.observable(),this.physThingSearchResultsLookup={},this.savingTile=i.observable(),this.savingMessage=i.observable(),this.activeLanguage=i.observable(n.activeLanguage),this.selectedFeature=i.observable(),this.featureLayers=i.observableArray(),this.isFeatureBeingEdited=i.observable(!1),this.sampleListShowing=i.observable(!1),this.physicalThingPartIdentifierAssignmentCard=i.observable(),this.physicalThingPartIdentifierAssignmentTile=i.observable(),this.partIdentifierAssignmentLabelWidget=i.observable(),this.partIdentifierAssignmentPolygonIdentifierWidget=i.observable(),this.previouslySavedSampleDescriptionWidgetValue=i.observable(),this.sampleDescriptionWidgetValue=i.observable(),this.previouslySavedMotivationForSamplingWidgetValue=i.observable(),this.motivationForSamplingWidgetValue=i.observable(),this.activeTab=i.observable(),this.hasExternalCardData=i.observable(!1),this.sampleLocationInstances=i.observableArray(),this.selectedSampleLocationInstance=i.observable(),this.selectedSampleRelatedSamplingActivity=i.observable(),this.sampleLocationDisabled=i.computed((function(){return b.samplingActivityResourceId!=b.selectedSampleRelatedSamplingActivity()})),this.switchCanvas=function(e){var t,n=i.unwrap(e.data[y].features),a=null==n||null===(t=n[0])||void 0===t?void 0:t.properties.canvas();if(b.canvas()!==a){var s=b.canvases().find((function(e){return e.images[0].resource.service["@id"]===a}));s&&b.canvasClick(s)}},this.selectedSampleLocationInstance.subscribe((function(e){var t;(b.highlightAnnotation(),e)?(b.tile=e,a.tile=e,b.physicalThingPartIdentifierAssignmentTile(e),i.unwrap(null===(t=i.unwrap(e.data[y]))||void 0===t?void 0:t.features)&&b.switchCanvas(e)):b.sampleListShowing(!!b.sampleLocationInstances().length)})),this.tileDirty=i.computed((function(){return!b.sampleLocationDisabled()&&(!(!b.sampleDescriptionWidgetValue()||b.sampleDescriptionWidgetValue()===b.previouslySavedSampleDescriptionWidgetValue())||(!(!b.motivationForSamplingWidgetValue()||b.motivationForSamplingWidgetValue()===b.previouslySavedMotivationForSamplingWidgetValue())||(b.physicalThingPartIdentifierAssignmentTile()?b.physicalThingPartIdentifierAssignmentTile().dirty():void 0)))})),this.selectedSampleLocationInstanceFeatures=i.computed((function(){var e="97c30c42-8594-11ea-97eb-acde48001122";if(b.selectedSampleLocationInstance()&&i.unwrap(b.selectedSampleLocationInstance().data[e])){var t=i.unwrap(b.selectedSampleLocationInstance().data[e]);return i.unwrap(t.features)}})),this.sampleLocationFilterTerm=i.observable(),this.filteredSampleLocationInstances=i.computed((function(){var e=b.sampleLocationInstances().filter((function(e){var t=b.analysisAreaResourceIds.map((function(e){return e.resourceid})),n=i.unwrap(e.data[m]()[0].resourceId);return!t.includes(n)}));return b.sampleLocationFilterTerm()?e.filter((function(e){return e.data["3e541cc6-859b-11ea-97eb-acde48001122"]().includes(b.sampleLocationFilterTerm())})):e})),this.hasExternalCardData.subscribe((function(e){if(e){b.handleExternalCardData();var t=b.annotationNodes.subscribe((function(e){b.setPhysicalThingGeometriesToVisible(e),t.dispose()}));b.activeTab("dataset"),b.manifest(b.manifestUrl()),b.getManifestData()}})),this.sampleName=i.computed((function(){if(b.selectedSampleLocationInstance()){var e,t,s=i.unwrap(null===(e=i.unwrap(b.selectedSampleLocationInstance().data["3e541cc6-859b-11ea-97eb-acde48001122"]))||void 0===e||null===(t=e[n.activeLanguage])||void 0===t?void 0:t.value)||"";return"".concat(s," [Sample of ").concat(a.physicalThingName,"]")}})),this.initialize=function(){a.form.save=b.saveWorkflowStep;var e=b.sampleLocationInstances.subscribe((function(){b.sampleLocationInstances().length>0&&b.sampleListShowing(!0),e.dispose()}));t.getJSON(n.urls.api_card+b.physicalThingResourceId).then((function(e){b.loadExternalCardData(e)})),b.fetchCardFromResourceId(b.samplingActivityResourceId,g).then((function(e){b.samplingActivitySamplingUnitCard(e)}))},this.getSampleLocationTileFromFeatureId=function(e){return b.sampleLocationInstances().find((function(t){return t.data["97c30c42-8594-11ea-97eb-acde48001122"].features().find((function(t){return i.unwrap(t.id)===e}))}))},this.getAnnotationProperty=function(e,t){return e.data[b.annotationNodeId].features[0].properties[t]},this.highlightAnnotation=function(){b.map()&&b.map().eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){var t=e.feature.properties.color;if(b.selectedSampleLocationInstance()&&b.selectedSampleLocationInstance().tileid===e.feature.properties.tileId)if(e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}),"Point"===e.feature.geometry.type){var n=e.feature.geometry.coordinates;b.map().panTo([n[1],n[0]])}else{var a=l(e.feature);b.map().fitBounds([[a[1],a[0]],[a[3],a[2]]])}else e.setStyle({color:t,fillColor:t})}))}))}))},this.removeFeatureFromCanvas=function(e){var t=b.annotationNodes(),n="Sample Locations",a=t.find((function(e){return e.name===n})),s=a.annotations().filter((function(t){return i.unwrap(e.id)!==t.id}));a.annotations(s);var l=t.findIndex((function(e){return e.name===n}));t[l]=a,b.annotationNodes(t),b.highlightAnnotation()},this.resetCanvasFeatures=function(){var e=b.annotationNodes();if(b.selectedSampleLocationInstanceFeatures()){var t="Sample Locations",n=e.find((function(e){return e.name===t})),a=n.annotations().map((function(e){return i.unwrap(e.id)})),s=b.selectedSampleLocationInstanceFeatures().reduce((function(e,t){return a.includes(i.unwrap(t.id))||t.properties.canvas!==b.canvas||(t.properties.tileId=b.selectedSampleLocationInstance().tileid,e.push(i.toJS(t))),e}),[]);n.annotations([].concat(_toConsumableArray(n.annotations()),_toConsumableArray(s)));var l=e.findIndex((function(e){return e.name===t}));e[l]=n}b.annotationNodes(e)},this.updateSampleLocationInstances=function(){canvasids=b.canvases().map((function(e){return e.images[0].resource["@id"]}));var e=b.card.tiles().map((function(e){return e.tileid}));b.selectedSampleLocationInstance()&&b.selectedSampleLocationInstance().tileid&&(e.includes(b.selectedSampleLocationInstance().tileid)?b.card.tiles().forEach((function(e){e.tileid===b.selectedSampleLocationInstance().tileid&&Object.keys(e.data).map((function(t){if(i.isObservable(e.data[t]))e.data[t](b.selectedSampleLocationInstance().data[t]());else if("__ko_mapping__"!==t){var a;null!==(a=e.data[t])&&void 0!==a&&a[n.activeLanguage]&&Object.keys(e.data[t][n.activeLanguage]).map((function(a){e.data[t][n.activeLanguage][a](b.selectedSampleLocationInstance().data[t][n.activeLanguage][a]())}))}}))})):b.card.tiles.push(b.selectedSampleLocationInstance()));var t=b.card.tiles().filter((function(e){return canvasids.find((function(t){return t.startsWith(e.data[y].features()[0].properties.canvas())}))}));t.forEach((function(e){return e.samplingActivityResourceId=e.samplingActivityResourceId?e.samplingActivityResourceId:i.observable()})),b.sampleLocationInstances(t)},this.sampleLocationInstances.subscribe(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var t,s,l,d,c,p,f,v,h,b,g;return _regeneratorRuntime().wrap((function(y){for(;;)switch(y.prev=y.next){case 0:t=_createForOfIteratorHelper(e),y.prev=1,t.s();case 3:if((s=t.n()).done){y.next=15;break}return v=s.value,h=i.unwrap(null===(l=i.unwrap(v.data[m]))||void 0===l||null===(d=l[0])||void 0===d?void 0:d.resourceId),y.next=8,window.fetch("".concat(n.urls.related_resources).concat(h));case 8:return y.next=10,y.sent.json();case 10:b=y.sent,g=null==b||null===(c=b.related_resources)||void 0===c||null===(p=c.related_resources)||void 0===p?void 0:p.filter((function(e){return(null==e?void 0:e.graph_id)==x})),v.samplingActivityResourceId(null==g||null===(f=g[0])||void 0===f?void 0:f.resourceinstanceid);case 13:y.next=3;break;case 15:y.next=20;break;case 17:y.prev=17,y.t0=y.catch(1),t.e(y.t0);case 20:return y.prev=20,t.f(),y.finish(20);case 23:e.length>0?a.form.complete(!0):a.form.complete(!1);case 24:case"end":return y.stop()}}),_callee,null,[[1,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()),this.selectSampleLocationInstance=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var t,a,s,l,d,c,p,f,v,h,y;return _regeneratorRuntime().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:if(b.sampleDescriptionWidgetValue(null),b.previouslySavedSampleDescriptionWidgetValue(null),b.motivationForSamplingWidgetValue(null),b.previouslySavedMotivationForSamplingWidgetValue(null),t=b.selectedSampleLocationInstance(),(void 0===e||t&&t.tileid!==e.tileid)&&(t.reset(),b.drawFeatures([]),b.resetCanvasFeatures()),b.physicalThingPartIdentifierAssignmentTile()&&b.physicalThingPartIdentifierAssignmentTile().reset(),b.selectedSampleLocationInstance(e),!b.selectedSampleLocationInstance()){w.next=36;break}if((s=i.unwrap(b.selectedSampleLocationInstance().data[m]))&&(l=i.unwrap(s[0].resourceId)),d=b.samplingActivitySamplingUnitCard(),null===(a=b.selectedSampleLocationInstance())||void 0===a||!a.samplingActivityResourceId){w.next=16;break}b.selectedSampleRelatedSamplingActivity(b.selectedSampleLocationInstance().samplingActivityResourceId()),w.next=27;break;case 16:if(!l){w.next=26;break}return w.next=19,window.fetch("".concat(n.urls.related_resources).concat(l));case 19:return w.next=21,w.sent.json();case 21:f=w.sent,v=null==f||null===(c=f.related_resources)||void 0===c||null===(p=c.related_resources)||void 0===p?void 0:p.filter((function(e){return(null==e?void 0:e.graph_id)==x})),b.selectedSampleRelatedSamplingActivity(null==v?void 0:v[0].resourceinstanceid),w.next=27;break;case 26:b.selectedSampleRelatedSamplingActivity(b.samplingActivityResourceId);case 27:if(!b.selectedSampleRelatedSamplingActivity()||b.selectedSampleRelatedSamplingActivity()==b.samplingActivityResourceId){w.next=31;break}return w.next=30,b.fetchCardFromResourceId(b.selectedSampleRelatedSamplingActivity(),g);case 30:d=w.sent;case 31:if(d){w.next=33;break}return w.abrupt("return");case 33:"b3e171ac-1d9d-11eb-a29f-024e0d439fdb",(h=d.tiles().find((function(e){var t=i.unwrap(e.data["b3e171ac-1d9d-11eb-a29f-024e0d439fdb"]);if(t)return i.unwrap(t[0].resourceId)===l})))&&("b3e171ab-1d9d-11eb-a29f-024e0d439fdb",y=i.unwrap(h.data["b3e171ab-1d9d-11eb-a29f-024e0d439fdb"])[0].resourceId(),"1952bb0a-b498-11e9-a679-a4d18cec433a",b.fetchCardFromResourceId(y,"1952bb0a-b498-11e9-a679-a4d18cec433a").then((function(e){var t="1952e470-b498-11e9-b261-a4d18cec433a",a="1953016e-b498-11e9-9445-a4d18cec433a",s=e.tiles().find((function(e){return i.unwrap(e.data[t]).includes("9886efe9-c323-49d5-8d32-5c2a214e5630")})),l=e.tiles().find((function(e){return i.unwrap(e.data[t]).includes("7060892c-4d91-4ab3-b3de-a95e19931a61")}));if(s){var d,c,p=i.unwrap(null===(d=s.data[a])||void 0===d||null===(c=d[n.activeLanguage])||void 0===c?void 0:c.value);b.sampleDescriptionWidgetValue(p),b.previouslySavedSampleDescriptionWidgetValue(p)}if(l){var f,v,h=i.unwrap(null===(f=l.data[a])||void 0===f||null===(v=f[n.activeLanguage])||void 0===v?void 0:v.value);b.motivationForSamplingWidgetValue(h),b.previouslySavedMotivationForSamplingWidgetValue(h)}})));case 36:case"end":return w.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}(),this.viewSampleLocationInstance=function(e){b.selectSampleLocationInstance(e),b.sampleListShowing(!1)},this.resetDescriptions=function(){var e=i.unwrap(b.previouslySavedSampleDescriptionWidgetValue),t=i.unwrap(b.previouslySavedMotivationForSamplingWidgetValue);b.sampleDescriptionWidgetValue(e),b.motivationForSamplingWidgetValue(t)},this.resetSampleLocationTile=function(){b.tile.reset(),b.resetCanvasFeatures(),b.resetDescriptions(),b.drawFeatures([]),b.highlightAnnotation(),b.selectedFeature(null)},this.setPhysicalThingGeometriesToVisible=function(e){e.find((function(e){return"Sample Locations"===e.name})).active(!0),b.updateSampleLocationInstances()},this.confirmSampleLocationDelete=function(e){b.deleteSampleLocation(e)},this.showingSampleLocationDeleteModal=i.observable(!1),this.sampleToDelete=i.observable(),this.showSampleLocationDeleteModal=function(e){b.showingSampleLocationDeleteModal(!!e),b.sampleToDelete(e)},this.deleteSampleLocation=function(){var e=b.sampleToDelete();b.selectedSampleLocationInstance(e);var t={parentPhysicalThingResourceid:b.physicalThingResourceId,samplingActivityResourceId:b.samplingActivityResourceId,partIdentifierAssignmentTileData:s.toJSON(e.data),transactionId:a.form.workflowId};b.savingTile(!0),b.showingSampleLocationDeleteModal(!1),b.savingMessage("Deleting Sample Areas, Samples & Descriptions"),window.fetch(n.urls.root+"deletesamplearea",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){if(b.savingTile(!1),!e.ok)throw e})).then((function(t){e.data[y].features().forEach((function(e){b.deleteFeature(e)})),b.sampleLocationInstances.remove(e),b.card.tiles.remove(e),b.selectSampleLocationInstance(void 0),b.resetSampleLocationTile()})).catch((function(e){e.json().then((function(e){a.pageVm.alert(new a.form.AlertViewModel("ep-alert-red",e.title,e.message))}))}))},this.saveSampleLocationTile=function(){var e,l,d,c,p,v,h;if(b.tileDirty()){var m="3e541cc6-859b-11ea-97eb-acde48001122",x=i.unwrap(b.selectedSampleLocationInstance().data["97c30c42-8594-11ea-97eb-acde48001122"]);if(null!==(e=i.unwrap(null==x?void 0:x.features))&&void 0!==e&&e.length&&(i.unwrap(null===(l=i.unwrap(b.selectedSampleLocationInstance().data[m]))||void 0===l||null===(d=l[n.activeLanguage])||void 0===d?void 0:d.value)||i.unwrap(b.selectedSampleLocationInstance().data[m]))){var y={parentPhysicalThingResourceid:b.physicalThingResourceId,parentPhysicalThingName:a.physicalThingName,samplingActivityResourceId:b.samplingActivityResourceId,collectionResourceid:a.projectSet,partIdentifierAssignmentTileData:s.toJSON(b.selectedSampleLocationInstance().data),partIdentifierAssignmentTileId:b.selectedSampleLocationInstance().tileid,partIdentifierAssignmentResourceId:b.selectedSampleLocationInstance().resourceinstance_id,sampleMotivation:i.unwrap(null===(c=b.motivationForSamplingWidgetValue())||void 0===c||null===(p=c[n.activeLanguage])||void 0===p?void 0:p.value)||i.unwrap(b.motivationForSamplingWidgetValue),sampleDescription:i.unwrap(null===(v=b.sampleDescriptionWidgetValue())||void 0===v||null===(h=v[n.activeLanguage])||void 0===h?void 0:h.value)||i.unwrap(b.sampleDescriptionWidgetValue),transactionId:a.form.workflowId};b.savingTile(!0),b.savingMessage("This step is saving ...");var w=["Sample Name, Classification and Statements","Sample Area Name and Classification","Relationship between Sample, Sample Area, and Parent Object (".concat(a.physicalThingName,")"),"This may take a while, please do not move away from this step."],k=0,S=setInterval((function(){k<w.length?b.savingMessage(w[k++]):clearInterval(S)}),"2000"),_=setTimeout((function(){b.savingMessage("This is taking longer than usual. Thank you for your patience.")}),"20000");t.ajax({url:n.urls.root+"savesamplearea",type:"POST",data:y,dataType:"json"}).then((function(e){b.savingMessage("Saved."),clearInterval(S),clearTimeout(_);var s=e.result.parentPhysicalThing.physicalPartOfObjectTile;b.builtTile=new f({tile:s,card:b.card,graphModel:b.card.params.graphModel,resourceId:s.resourceinstance_id,displayname:b.card.params.displayname,handlers:b.card.params.handlers,userisreviewer:b.card.params.userisreviewer,cards:b.card.params.cards,tiles:b.card.params.tiles,selection:b.card.params.selection,scrollTo:b.card.params.scrollTo,filter:b.card.params.filter,provisionalTileViewModel:b.card.params.provisionalTileViewModel,loading:b.card.params.loading,cardwidgets:b.card.params.cardwidgets}),b.selectedSampleLocationInstance(b.builtTile),b.selectedSampleLocationInstance().samplingActivityResourceId=i.observable(b.samplingActivityResourceId),new Promise((function(e,t){var n=b.annotationNodes().find((function(e){return"Sample Locations"===e.name})),a=n.annotations();b.drawFeatures().forEach((function(e){var t=a.find((function(t){return t.id===e}));e.properties.nodegroupId=b.tile.nodegroup_id,e.properties.resourceId=b.tile.resourceinstance_id,e.properties.tileId=b.tile.tileid,t||a.push(e)})),n.annotations(a),e(n)})).then(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(e){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.fetchCardFromResourceId(b.selectedSampleRelatedSamplingActivity(),g);case 2:t=e.sent,b.samplingActivitySamplingUnitCard(t),b.updateSampleLocationInstances(),b.sampleListShowing(!0),b.savingMessage(""),b.savingTile(!1),a.dirty(!1),n=b.sampleLocationInstances().map((function(e){return{data:e.data}})),a.form.savedData(n),a.form.value(a.form.savedData()),a.pageVm.alert(""),b.drawFeatures([]);case 14:case"end":return e.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}()),t.getJSON(n.urls.api_card+b.physicalThingResourceId).then((function(e){b.loadExternalCardData(e)}))})).fail((function(e){console.log(e),b.savingTile(!1)}))}else a.pageVm.alert(new a.form.AlertViewModel("ep-alert-red","Missing Values","Sample Location and Sample Name are Required"))}},this.showSampleList=function(){b.sampleListShowing(!b.sampleListShowing())};var getNewTile=function(t){return new f({tile:{tileid:"",noDefaults:!0,resourceinstance_id:i.observable(b.physicalThingResourceId),nodegroup_id:t.nodegroupid,data:e.reduce(t.widgets(),(function(e,t){return"string"===t.datatype.datatype?e[t.node_id()]=_defineProperty({},n.activeLanguage,{value:"",direction:n.activeLanguageDir}):e[t.node_id()]=null,e}),{})},card:t,graphModel:t.params.graphModel,resourceId:t.resourceinstance_id,displayname:t.params.displayname,handlers:t.params.handlers,userisreviewer:t.params.userisreviewer,cards:t.params.cards,tiles:t.params.tiles,selection:t.params.selection,scrollTo:t.params.scrollTo,filter:t.params.filter,provisionalTileViewModel:t.params.provisionalTileViewModel,loading:t.params.loading,cardwidgets:t.params.cardwidgets})};this.loadNewSampleLocationTile=function(){var e=getNewTile(b.card);b.viewSampleLocationInstance(e)},this.saveWorkflowStep=function(){a.form.complete(!1),a.form.saving(!0);var e=b.sampleLocationInstances().map((function(e){return{data:e.data}}));a.form.savedData(e),a.form.complete(!0),a.form.saving(!1)},this.identifyAnalysisAreas=function(e){var t="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",n="31d97bdd-f10f-4a26-958c-69cb5ab69af1",a=e.tiles().map((function(e){return{resourceid:i.unwrap(e.data[m])[0].resourceId(),tileid:e.tileid}}));return Promise.all(a.map((function(e){return d.lookupResourceInstanceData(e.resourceid)}))).then((function(s){s.forEach((function(e){b.physThingSearchResultsLookup[e._id]=e,d.getNodeValues({nodeId:t,where:{nodeId:t,contains:n}},e._source.tiles).includes(n)&&b.analysisAreaResourceIds.push(a.find((function(t){return e._id===t.resourceid})))})),e.tiles().forEach((function(e){return e.samplingActivityResourceId=e.samplingActivityResourceId?e.samplingActivityResourceId:i.observable()})),b.sampleLocationInstances(e.tiles()),b.analysisAreaTileIds=b.analysisAreaResourceIds.map((function(e){return e.tileid}))}))},this.loadExternalCardData=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(e){var t,n,s,l,d,f,v,h;return _regeneratorRuntime().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return"fec59582-8593-11ea-97eb-acde48001122",t=e.cards.find((function(e){return"fec59582-8593-11ea-97eb-acde48001122"===e.nodegroup_id})),n={"after-update":[],"tile-reset":[]},s=new c({data:{nodes:e.nodes,nodegroups:e.nodegroups,edges:[]},datatypes:e.datatypes}),l=new p({card:t,graphModel:s,tile:null,resourceId:i.observable(b.physicalThingResourceId),displayname:i.observable(e.displayname),handlers:n,cards:e.cards,tiles:e.tiles,cardwidgets:e.cardwidgets,userisreviewer:e.userisreviewer}),d=l,f=getNewTile(l),b.card=d,b.tile=f,a.card=b.card,a.tile=b.tile,v="97c30c42-8594-11ea-97eb-acde48001122",a.widgets=b.card.widgets().filter((function(e){return e.node_id()===v})),b.physicalThingPartIdentifierAssignmentCard(d),b.physicalThingPartIdentifierAssignmentTile(f),m.next=17,b.identifyAnalysisAreas(a.card);case 17:h=f.data[v].subscribe((function(e){e&&(b.selectSampleLocationInstance(f),h.dispose())})),b.hasExternalCardData(!0);case 19:case"end":return m.stop()}}),_callee4)})));return function(t){return e.apply(this,arguments)}}(),this.handleExternalCardData=function(){b.partIdentifierAssignmentLabelWidget(b.card.widgets().find((function(e){return"3e541cc6-859b-11ea-97eb-acde48001122"===i.unwrap(e.node_id)})));var t="97c30c42-8594-11ea-97eb-acde48001122";b.partIdentifierAssignmentPolygonIdentifierWidget(b.card.widgets().find((function(e){return i.unwrap(e.node_id)===t}))),v.apply(b,[_objectSpread(_objectSpread({},a),{},{hideEditorTab:i.observable(!0),onEachFeature:function(e,t){if(b.featureLayers().find((function(e){return e.feature.id===t.feature.id}))||b.featureLayers.push(t),b.analysisAreaTileIds.includes(e.properties.tileId)){var a=b.analysisAreaResourceIds.find((function(t){return t.tileid===e.properties.tileId})),s=L.popup({closeButton:!1,maxWidth:349}).setContent(h).on("add",(function(){var t={closePopup:function(){s.remove()},name:i.observable(""),description:i.observable(""),graphName:e.properties.graphName,resourceinstanceid:a.resourceid,reportURL:n.urls.resource_report,translations:n.translations};window.fetch(n.urls.resource_descriptors+t.resourceinstanceid).then((function(e){return e.json()})).then((function(e){t.name(e.displayname);var n="<strong>Analysis Area</strong>\n                                            <br>Analysis Areas may not be modified in the sample taking workflow\n                                            <br>".concat("Undefined"!==e.map_popup?e.map_popup:"");t.description(n)}));var l=s.getElement().querySelector(".mapboxgl-popup-content");i.applyBindingsToDescendants(t,l)}));t.bindPopup(s)}t.on({click:function(){var t=b.getSampleLocationTileFromFeatureId(e.id);if(t&&!b.analysisAreaTileIds.includes(t.tileid))if(b.drawFeatures([]),b.featureClick=!0,b.selectedSampleLocationInstance()&&b.selectedSampleLocationInstance().tileid===t.tileid){b.tile.reset(),b.resetCanvasFeatures();var n=i.toJS(b.selectedSampleLocationInstanceFeatures().find((function(t){return i.unwrap(t.id)===e.id})));b.selectedFeature(n),b.selectedSampleRelatedSamplingActivity()==b.samplingActivityResourceId?(b.removeFeatureFromCanvas(b.selectedFeature()),b.drawFeatures([n])):b.highlightAnnotation()}else b.selectSampleLocationInstance(t)}})},buildAnnotationNodes:function(e){editNodeActiveState=i.observable(!0),nonEditNodeActiveState=i.observable(!0),editNodeActiveState.subscribe((function(e){e||(b.resetSampleLocationTile(),updateAnnotations())}));var updateAnnotations=function(){var e=i.observableArray(),a=i.observableArray(),s=b.canvas();s&&window.fetch(n.urls.iiifannotations+"?canvas="+s+"&nodeid="+t).then((function(e){return e.json()})).then((function(t){t.features.forEach((function(t){t.properties.graphName="Physical Thing",b.analysisAreaTileIds.includes(t.properties.tileId)?(t.properties.type="analysis_area",t.properties.color="#999999",t.properties.fillColor="#999999",a.push(t)):(t.properties.type="sample_location",e.push(t))})),b.annotationNodes([{name:"Sample Locations",icon:"fa fa-eyedropper",active:editNodeActiveState,opacity:i.observable(100),annotations:e},{name:"Analysis Areas",icon:"fa fa-eye",active:nonEditNodeActiveState,opacity:i.observable(100),annotations:a}]),b.highlightAnnotation()}))};b.canvas.subscribe(updateAnnotations),updateAnnotations()}})]),b.updateTiles=function(){e.each(b.featureLookup,(function(e){e.selectedTool(null)}));var t="97c30c42-8594-11ea-97eb-acde48001122",n=i.toJS(b.tile.data[t].features);if(n){var a=b.drawFeatures().filter((function(e){return!n.find((function(t){return t.id===e.id}))}));b.drawFeatures().forEach((function(e){var t=n.findIndex((function(t){return t.id===e.id}));t>-1&&(n[t]=e)})),b.tile.data[t].features([].concat(_toConsumableArray(n),_toConsumableArray(a)))}else b.widgets.forEach((function(e){var t=i.unwrap(e.node_id),n=[];b.drawFeatures().forEach((function(e){e.properties.nodeId===t&&n.push(e)})),i.isObservable(b.tile.data[t])?b.tile.data[t]({type:"FeatureCollection",features:n}):b.tile.data[t].features(n)}))},b.deleteFeature=function(e){var t="97c30c42-8594-11ea-97eb-acde48001122",n=b.selectedSampleLocationInstance(),a=i.unwrap(n.data[t]);if(a){var s=i.unwrap(a.features).filter((function(t){return i.unwrap(t.id)!==i.unwrap(e.id)}));i.isObservable(a.features)?a.features(s):a.features=i.observableArray(s),n.data[t]=a}b.selectedSampleLocationInstance(n),b.removeFeatureFromCanvas(e),b.drawFeatures().find((function(t){return i.unwrap(t.id)===i.unwrap(e.id)}))&&b.drawFeatures([])},b.editFeature=function(e){b.featureLayers().forEach((function(t){t.feature.id===i.unwrap(e.id)&&t.fireEvent("click")}))},b.drawLayer.subscribe((function(e){e.getLayers().forEach((function(e){e.editing.enable(),e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"})}))}))},this.clearEditedGeometries=function(){b.tile.tileid&&b.selectedFeature()&&b.resetSampleLocationTile()},this.fetchCardFromResourceId=function(e,t){return new Promise((function(n,a){b._fetchCard(e,null,t).then((function(e){n(e)}))}))},this.fetchCardFromGraphId=function(e,t){return new Promise((function(n,a){b._fetchCard(null,e,t).then((function(e){n(e)}))}))},this._fetchCard=function(e,a,s){return new Promise((function(l,d){t.getJSON(n.urls.api_card+(e||a)).then((function(t){var n=t.cards.find((function(e){return e.nodegroup_id===s})),a=new c({data:{nodes:t.nodes,nodegroups:t.nodegroups,edges:[]},datatypes:t.datatypes});l(new p({card:n,graphModel:a,tile:null,resourceId:i.observable(i.unwrap(e)),displayname:i.observable(t.displayname),handlers:{"after-update":[],"tile-reset":[]},cards:t.cards,tiles:t.tiles,cardwidgets:t.cardwidgets,userisreviewer:t.userisreviewer}))}))}))},i.bindingHandlers.scrollTo={update:function(e,t){var n=t();i.unwrap(n)&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},this.initialize()}return i.components.register("sample-taking-sample-location-step",{viewModel:viewModel,template:b}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},24879:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}a=[n(84490),n(20198),n(46186),n(54922),n(59732),n(57254),n(82769)],void 0===(i=function(e,t,n,a,i,s){function viewModel(e){var s=this,getProp=function(t,n){return a.unwrap(e.value)&&e.value()[t]?e.value()[t][n]||e.value()[t]:void 0};this.samplingActivityResourceId=a.observable(getProp("samplingActivityResourceId")),this.samplers=a.observable(getProp("samplers")),this.samplingDate=a.observable(getProp("samplingDate")),this.samplingTechnique=a.observable(getProp("samplingTechnique")),this.samplingMotivation=a.observable(getProp("samplingMotivation")),this.samplingName=a.observable(getProp("samplingName")),this.samplingType=a.observable(getProp("samplingType")),this.projectTile=a.observable(getProp("projectTile")),this.samplersTile=a.observable(getProp("samplersTile")),this.samplingNameTile=a.observable(getProp("samplingNameTile")),this.samplingTypeTile=a.observable(getProp("samplingTypeTile")),this.samplingDateTile=a.observable(getProp("samplingDateTile")),this.samplingTechniqueTile=a.observable(getProp("samplingTechniqueTile")),this.samplingMotivationTile=a.observable(getProp("samplingMotivationTile")),this.samplingActivityDigitalReferenceTile=a.observable(getProp("samplingActivityDigitalReferenceTile")),this.showName=a.observable(!1);var l={samplingActivityResourceId:s.samplingActivityResourceId(),samplingDate:s.samplingDate(),samplers:s.samplers(),samplingTechnique:s.samplingTechnique(),samplingMotivation:s.samplingMotivation(),samplingName:s.samplingName(),samplingType:s.samplingType(),projectTile:s.projectTile(),samplersTile:s.samplersTile(),samplingNameTile:s.samplingNameTile(),samplingTypeTile:s.samplingTypeTile(),samplingDateTile:s.samplingDateTile(),samplingTechniqueTile:s.samplingTechniqueTile(),samplingMotivationTile:s.samplingMotivationTile(),samplingActivityDigitalReferenceTile:s.samplingActivityDigitalReferenceTile()},d="0335786d-1d9d-11eb-a29f-024e0d439fdb";this.updatedValue=a.pureComputed((function(){return{samplingActivityResourceId:s.samplingActivityResourceId(),samplingName:s.samplingName(),samplingType:s.samplingType(),samplers:s.samplers(),samplingDate:s.samplingDate(),samplingTechnique:s.samplingTechnique(),samplingMotivation:s.samplingMotivation(),projectTile:s.projectTile(),samplingNameTile:s.samplingNameTile(),samplingTypeTile:s.samplingTypeTile(),samplersTile:s.samplersTile(),samplingDateTile:s.samplingDateTile(),samplingTechniqueTile:s.samplingTechniqueTile(),samplingMotivationTile:s.samplingMotivationTile(),samplingActivityDigitalReferenceTile:s.samplingActivityDigitalReferenceTile()}})),this.updatedValue.subscribe((function(t){e.value(t)})),this.samplingDate.subscribe((function(e){s.samplingName(["Sampling Activity of",s.physicalThingNameValue,e].join(" "))}));var c=e.selectPhysThingData;this.projectValue=c.project,this.physicalThingNameValue=c.physThingName,this.physicalThingValue=c.physicalThing,e.form.save=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var n;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.form.complete(!1),a.next=3,s.saveSamplingName();case 3:n=a.sent,s.samplingActivityResourceId(n.resourceinstance_id),s.samplingNameTile(n.tileid),t.when(s.saveProject(),s.saveSamplers(),s.saveSamplingDate(),s.saveSamplingType(),s.saveSamplingTechnique(),s.saveSamplingMotivation(),s.saveDigitalReference()).done((function(t,n,a,i,l,d,c){s.projectTile(t[0].tileid),s.samplersTile(n[0].tileid),s.samplingDateTile(a[0].tileid),s.samplingTypeTile(i[0].tileid),s.samplingTechniqueTile(l[0].tileid),s.samplingMotivationTile(d[0].tileid),s.samplingActivityDigitalReferenceTile(c[0].tileid),e.form.savedData(e.form.value()),e.form.lockExternalStep("select-project",!0),e.form.complete(!0)}));case 7:case"end":return a.stop()}}),_callee)}))),this.saveNodeValue=function(a,i,s,l){return t.ajax({url:n.urls.api_node_value,type:"POST",data:{nodeid:a,data:i,resourceinstanceid:s,tileid:l,transaction_id:e.form.workflowId}})},this.saveTile=function(a,i){var s=new window.FormData;return s.append("data",JSON.stringify(i)),s.append("transaction_id",e.form.workflowId),t.ajax({url:n.urls.api_tiles(a),type:"POST",processData:!1,contentType:!1,data:s})},this.saveSamplingName=function(){var t={tileid:a.unwrap(s.samplingNameTile)||"",nodegroup_id:"03357873-1d9d-11eb-a29f-024e0d439fdb",parenttile_id:null,resourceinstance_id:a.unwrap(s.samplingActivityResourceId)||"",sortorder:0,tiles:{},data:{"03357890-1d9d-11eb-a29f-024e0d439fdb":null,"03357898-1d9d-11eb-a29f-024e0d439fdb":["bc35776b-996f-4fc1-bd25-9f6432c1f349"],"033578a4-1d9d-11eb-a29f-024e0d439fdb":null,"033578b5-1d9d-11eb-a29f-024e0d439fdb":["7d069762-bd96-44b8-afc8-4761389105c5","8f40c740-3c02-4839-b1a4-f1460823a9fe"],"033578c0-1d9d-11eb-a29f-024e0d439fdb":s.samplingName()},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingNameTile)||i.generate();return s.saveTile(n,t)},this.saveSamplingType=function(){var t={tileid:a.unwrap(s.samplingTypeTile)||"",nodegroup_id:"0434ccce-1d9f-11eb-a29f-024e0d439fdb",parenttile_id:null,resourceinstance_id:a.unwrap(s.samplingActivityResourceId)||"",sortorder:0,tiles:{},data:{"0434ccce-1d9f-11eb-a29f-024e0d439fdb":s.samplingType()},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingTypeTile)||i.generate();return s.saveTile(n,t)},this.saveProject=function(){var e=[{resourceId:s.projectValue,ontologyProperty:"",inverseOntologyProperty:"",resourceXresourceId:""}];return s.saveNodeValue("03357879-1d9d-11eb-a29f-024e0d439fdb",JSON.stringify(e),s.samplingActivityResourceId(),s.projectTile())},this.saveSamplers=function(){var e=[];return s.samplers()&&s.samplers().forEach((function(t){e.push({resourceId:t,ontologyProperty:"",inverseOntologyProperty:"",resourceXresourceId:""})})),s.saveNodeValue("03357870-1d9d-11eb-a29f-024e0d439fdb",JSON.stringify(e),s.samplingActivityResourceId(),s.samplersTile())},this.saveSamplingDate=function(){var t={tileid:a.unwrap(s.samplingDateTile)||"",nodegroup_id:"03357852-1d9d-11eb-a29f-024e0d439fdb",parenttile_id:null,resourceinstance_id:a.unwrap(s.samplingActivityResourceId)||"",sortorder:0,tiles:{},data:{"03357892-1d9d-11eb-a29f-024e0d439fdb":s.samplingDate(),"0335789d-1d9d-11eb-a29f-024e0d439fdb":null,"033578a1-1d9d-11eb-a29f-024e0d439fdb":null,"033578ae-1d9d-11eb-a29f-024e0d439fdb":null,"033578af-1d9d-11eb-a29f-024e0d439fdb":null,"033578c2-1d9d-11eb-a29f-024e0d439fdb":null},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingDateTile)||i.generate();return s.saveTile(n,t)},this.saveSamplingTechnique=function(){var t={tileid:a.unwrap(s.samplingTechniqueTile)||"",nodegroup_id:d,parenttile_id:null,resourceinstance_id:a.unwrap(s.samplingActivityResourceId)||"",sortorder:0,tiles:{},data:{"0335789a-1d9d-11eb-a29f-024e0d439fdb":["bc35776b-996f-4fc1-bd25-9f6432c1f349"],"033578b6-1d9d-11eb-a29f-024e0d439fdb":null,"033578b7-1d9d-11eb-a29f-024e0d439fdb":["df8e4cf6-9b0b-472f-8986-83d5b2ca28a0","72202a9f-1551-4cbc-9c7a-73c02321f3ea"],"033578c1-1d9d-11eb-a29f-024e0d439fdb":s.samplingTechnique()},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingTechniqueTile)||i.generate();return s.saveTile(n,t)},this.saveSamplingMotivation=function(){var t={tileid:a.unwrap(s.samplingMotivationTile)||"",nodegroup_id:d,parenttile_id:null,resourceinstance_id:a.unwrap(s.samplingActivityResourceId)||"",sortorder:0,tiles:{},data:{"0335789a-1d9d-11eb-a29f-024e0d439fdb":["bc35776b-996f-4fc1-bd25-9f6432c1f349"],"033578b6-1d9d-11eb-a29f-024e0d439fdb":null,"033578b7-1d9d-11eb-a29f-024e0d439fdb":["7060892c-4d91-4ab3-b3de-a95e19931a61"],"033578c1-1d9d-11eb-a29f-024e0d439fdb":s.samplingMotivation()},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingMotivationTile)||i.generate();return s.saveTile(n,t)},this.saveDigitalReference=function(){var t={tileid:"",data:{"4099e818-8e31-11eb-a9c4-faffc265b501":"1497d15a-1c3b-4ee9-a259-846bbab012ed","4099e8e0-8e31-11eb-a9c4-faffc265b501":null},nodegroup_id:"4099e584-8e31-11eb-a9c4-faffc265b501",parenttile_id:"",resourceinstance_id:a.unwrap(s.samplingActivityResourceId),sortorder:0,tiles:{},transaction_id:e.form.workflowId},n=a.unwrap(s.samplingActivityDigitalReferenceTile)||i.generate();return s.saveTile(n,t)},e.form.reset=function(){s.samplingActivityResourceId(l.samplingActivityResourceId),s.samplers(l.samplers),s.samplingDate(l.samplingDate),s.samplingTechnique(l.samplingTechnique),s.samplingMotivation(l.samplingMotivation),s.samplingName(l.samplingName),s.samplingType(l.samplingType),s.projectTile(l.projectTile),s.samplersTile(l.samplersTile),s.samplingNameTile(l.samplingNameTile),s.samplingTypeTile(l.samplingTypeTile),s.samplingDateTile(l.samplingDateTile),s.samplingTechniqueTile(l.samplingTechniqueTile),s.samplingMotivationTile(l.samplingMotivationTile),s.samplingActivityDigitalReferenceTile(l.samplingActivityDigitalReferenceTile)}}return a.components.register("sampling-info-step",{viewModel:viewModel,template:s}),viewModel}.apply(t,a))||(e.exports=i)},30184:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(54922),n(32274),n(25519),n(56321)],i=function(e,t,n){function viewModel(n){var a=this,i=n.form.componentData.parameters;this.physThingSetNodegroupId="cc5d6df3-d477-11e9-9f59-a4d18cec433a",this.physThingTypeNodeId="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",this.physicalThingPartOfSetNodeId="63e49254-c444-11e9-afbe-a4d18cec433a",this.partNodeGroupId="fec59582-8593-11ea-97eb-acde48001122",this.partManifestNodeId="97c30c42-8594-11ea-97eb-acde48001122",this.manifestConcepts=["1497d15a-1c3b-4ee9-a259-846bbab012ed","00d5a7a6-ff2f-4c44-ac85-7a8ab1a6fb70","305c62f0-7e3d-4d52-a210-b451491e6100"],this.digitalReferenceTypeNodeId="f11e4d60-8d59-11eb-a9c4-faffc265b501",this.digitalReferenceNodeGroupId="8a4ad932-8d59-11eb-a9c4-faffc265b501",this.save=n.form.save,this.physicalThingGraphId=i.graphids[0],this.projectGraphId=i.graphids[1],this.datasetRoute=n.datasetRoute,this.validateThing=i.validateThing,this.projectValue=e.observable(),this.projectNameValue=e.observable(),this.physicalThingValue=e.observable(),this.setsThatBelongToTheProject=e.observable(),this.hasSetWithPhysicalThing=e.observable(),this.isPhysicalThingValid=e.observable(),this.originalValue=n.form.value(),this.updateValues=function(e){null!==e&&(a.physicalThingValue(e.physicalThing),a.setsThatBelongToTheProject(e.physicalThingSet),a.projectValue(e.project))},n.value()&&this.updateValues(n.value()),this.locked=n.form.locked,this.projectValue.subscribe((function(e){(a.isPhysicalThingValid(null),a.physicalThingValue(null),e)&&t.lookupResourceInstanceData(e).then((function(e){var t;a.projectNameValue(e._source.displayname);var n=e._source.tiles.find((function(e){return e.nodegroup_id===a.physThingSetNodegroupId}));n&&Object.keys(n.data).includes(a.physThingSetNodegroupId)&&n.data[a.physThingSetNodegroupId].length?(a.setsThatBelongToTheProject(null),(t=n.data[a.physThingSetNodegroupId].map((function(e){return e.resourceId})))&&a.setsThatBelongToTheProject(t),a.physicalThingValue(null)):a.hasSetWithPhysicalThing(!1)}))})),this.termFilter=e.pureComputed((function(){if(e.unwrap(a.setsThatBelongToTheProject)){a.hasSetWithPhysicalThing(!0);var t={op:"and"};return t[a.physicalThingPartOfSetNodeId]={op:"or",val:e.unwrap(a.setsThatBelongToTheProject)},function(e,n){n.set("advanced-search",JSON.stringify([t])),e&&n.set("term-filter",JSON.stringify([{context:"",id:e,text:e,type:"term",value:e,inverted:!1}]))}}return null})),this.physicalThingValue.subscribe(function(){var e,i=(e=_regeneratorRuntime().mark((function _callee(e){var i,s,l,d,c,p,f,v,h,b;return _regeneratorRuntime().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(e){m.next=3;break}return n.value(a.originalValue),m.abrupt("return");case 3:return m.next=5,t.lookupResourceInstanceData(e);case 5:if(m.t1=i=m.sent,m.t0=null===m.t1,m.t0){m.next=9;break}m.t0=void 0===i;case 9:if(!m.t0){m.next=13;break}m.t2=void 0,m.next=14;break;case 13:m.t2=i._source;case 14:l=m.t2,d=l.tiles.filter((function(e){var t;return e.nodegroup_id==a.digitalReferenceNodeGroupId&&a.manifestConcepts.includes(null==e||null===(t=e.data)||void 0===t?void 0:t[a.digitalReferenceTypeNodeId])})),c=l.tiles.filter((function(e){var t,n,i,s,l;return e.nodegroup_id==a.partNodeGroupId&&(null===(t=e.data)||void 0===t||null===(n=t[a.partManifestNodeId])||void 0===n||null===(i=n.features)||void 0===i||null===(s=i[0])||void 0===s||null===(l=s.properties)||void 0===l?void 0:l.manifest)})),p=null===(s=l.tiles.find((function(e){return e.nodegroup_id===a.physicalThingPartOfSetNodeId})))||void 0===s?void 0:s.data[a.physicalThingPartOfSetNodeId].map((function(e){return e.resourceId})),f=p.find((function(e){return a.setsThatBelongToTheProject().includes(e)})),v=l.tiles.filter((function(e){var t,n;return e.nodegroup_id==a.physThingTypeNodeId&&((null===(t=e.data)||void 0===t?void 0:t[a.physThingTypeNodeId].includes("31d97bdd-f10f-4a26-958c-69cb5ab69af1"))||(null===(n=e.data)||void 0===n?void 0:n[a.physThingTypeNodeId].includes("7375a6fb-0bfb-4bcf-81a3-6180cdd26123")))})).length>0,h=!1,b=!1,n.datasetRoute&&(h="non-destructive"==n.datasetRoute&&d.length&&c.length,b="destructive"==n.datasetRoute&&!v),!a.validateThing||h||b?(n.value({physThingName:l.displayname,physicalThing:e,projectSet:f,physicalThingSet:a.setsThatBelongToTheProject(),project:a.projectValue(),projectName:a.projectNameValue()}),a.isPhysicalThingValid(!0)):a.isPhysicalThingValid(!1);case 26:case"end":return m.stop()}}),_callee)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))});return function(e){return i.apply(this,arguments)}}())}return e.components.register("select-phys-thing-step",{viewModel:viewModel,template:n}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},48303:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}a=[n(46186),n(59732),n(32274)],i=function(e,t,n){return{saveThingToProject:(a=_regeneratorRuntime().mark((function _callee(a,i,s,l){var d,c,p,f,v,h,b;return _regeneratorRuntime().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(c="",p=!1,(v={})[f="63e49254-c444-11e9-afbe-a4d18cec433a"]=[{resourceId:i,ontologyProperty:"",resourceXresourceId:"",inverseOntologyProperty:""}],!l[a]){m.next=9;break}d=l[a],m.next=12;break;case 9:return m.next=11,n.lookupResourceInstanceData(a,!1);case 11:d=m.sent;case 12:if((h=d._source.tiles.find((function(e){return e.nodegroup_id===f})))&&(h.data[f].find((function(e){return e.resourceId===i}))?p=!0:(c=h.tileid,Array.isArray(h.data[f])&&(v[f]=v[f].concat(h.data[f])))),b={tileid:c,data:v,nodegroup_id:f,parenttile_id:null,resourceinstance_id:a,sortorder:0,tiles:{},transaction_id:s},p){m.next=19;break}return m.abrupt("return",window.fetch(e.urls.api_tiles(c||t.generate()),{method:"POST",credentials:"include",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}));case 19:return m.abrupt("return",Promise.resolve());case 20:case"end":return m.stop()}}),_callee)})),i=function(){var e=this,t=arguments;return new Promise((function(n,i){var s=a.apply(e,t);function _next(e){asyncGeneratorStep(s,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,i,_next,_throw,"throw",e)}_next(void 0)}))},function(e,t,n,a){return i.apply(this,arguments)})};var a,i}.apply(t,a),void 0===i||(e.exports=i)},79921:function(e,t,n){var a,i;a=[n(54922),n(39397),n(28459),n(35605),n(35227),n(64058),n(62666),n(66504)],i=function(e,t,n,a,i,s,l){return function(l){t.apply(this,[l]),this.resourceData=e.observable(),this.relatedResources=e.observableArray(),this.getResourceData=function(e,t){window.fetch(this.urls.api_resources(e)+"?format=json&compact=false&v=beta").then((function(e){return e.json()})).then((function(e){return t(e)}))},this.getRelatedResources=function(e,t){window.fetch(this.urls.related_resources+e+"?paginate=false").then((function(e){return e.json()})).then((function(e){return t(e)}))},this.init=function(){this.getResourceData(this.resourceid,this.resourceData),this.getRelatedResources(this.resourceid,this.relatedResources)},this.getResourceValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";try{return t.reduce((function(e,t){return e[t]}),e)||n}catch(e){return n}},this.prepareMap=function(t,a){var l={};t.features.length>0&&(l.bounds=n(t),l.fitBoundsOptions={padding:20});var d={};d[a]={type:"geojson",data:t},l.sources=Object.assign(d,l.sources),l.layers=s("",a,void 0,[],!0,"#ff2222"),i.apply(this,[Object.assign({},l,{activeTab:e.observable(!1),zoom:null})]),this.layers=l.layers,this.sources=l.sources},this.prepareAnnotation=function(e){var t=e.features[0].properties.canvas;return{center:[0,0],crs:a.CRS.Simple,zoom:0,afterRender:function(i){a.tileLayer.iiif(t+"/info.json").addTo(i);var s=n(e);i.addLayer(a.geoJson(e,{pointToLayer:function(e,t){return a.circleMarker(t,e.properties)},style:function(e){return e.properties}})),a.control.fullscreen().addTo(i),setTimeout((function(){i.fitBounds([[s[1]-1,s[0]-1],[s[3]+1,s[2]+1]])}),250)}}},this.init()}}.apply(t,a),void 0===i||(e.exports=i)},77693:function(e,t,n){var a,i;a=[n(54922),n(45325)],void 0===(i=function(e,t){e.components.register("dataset-step",{viewModel:function(e){this.value=e.value,this.locked=e.form.locked},template:t})}.apply(t,a))||(e.exports=i)},74935:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}a=[n(20198),n(54922),n(70891),n(46186),n(59732),n(66186),n(73770),n(41762),n(24181),n(3942),n(28718),n(6797)],i=function(e,t,n,a,i,s,l,d,c,p,f,v){function viewModel(e){var n=this;e.configKeys=["acceptedFiles","maxFilesize"];var s=this,l=e.datasetInfo;if(s.currentRendererValid=t.observable(!0),s.loading=t.observable(!1),s.loadingMessage=t.observable(),s.showDatasetList=t.observable(!0),s.showFileList=t.observable(!1),s.showFileInfo=t.observable(!1),s.formats=t.observableArray(Object.values(v).map((function(e){return{text:e.name,id:e.id}}))),this.selectedFileFormat=t.observable().extend({deferred:!0,notify:"always"}),l["select-dataset-files-step"])var h,b=null===(h=l["select-dataset-files-step"].savedData())||void 0===h?void 0:h.parts.reduce((function(e,t){return t.datasetId&&e.push(t.datasetId),e}),[]);else if(l["select-dataset-instances"]){var m,g;b=null===(m=l["select-dataset-instances"].savedData())||void 0===m||null===(g=m.digitalResources)||void 0===g?void 0:g.reduce((function(e,t){return t.resourceid&&!0===t.selected&&e.push(t.resourceid),e}),[])}else if(e.datasetInfoFromUploadFilesStep)b=[e.datasetInfoFromUploadFilesStep["upload-files-step"].savedData().datasetId];this.fileFormatRenderers=Object.values(c),this.fileStatementParameter=t.observable(),this.fileStatementInterpretation=t.observable(),this.selected=t.observable(),e.value({}),this.dirty=t.computed((function(){for(var t=0,n=Object.values(e.value());t<n.length;t++){var a,i,l,d=n[t];if(d.fileStatementParameter.dirty()||d.fileStatementInterpretation.dirty()||(null===(a=s.selectedFile())||void 0===a||null===(i=a.file_details)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.format)!=s.selectedFileFormat()&&null!=s.selectedFileFormat)return!0}return!1})),this.save=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,a,i,l;return _regeneratorRuntime().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:s.loading(!0),s.loadingMessage("Saving interpretation data..."),d.t0=_regeneratorRuntime().keys(e.value());case 3:if((d.t1=d.t0()).done){d.next=14;break}if(t=d.t1.value,(a=e.value()[t]).fileStatementParameter.dirty()&&a.fileStatementParameter.save(),a.fileStatementInterpretation.dirty()&&a.fileStatementInterpretation.save(),!a.format){d.next=12;break}return d.next=11,n.updateRenderer(t,a.format);case 11:delete a.format;case 12:d.next=3;break;case 14:return i=s.selectedDigitalResource().resourceinstanceid,l=s.selectedFile()["@tile_id"],s.digitalResources([]),s.loading(!0),s.loadingMessage("Reloading datasets..."),d.next=21,x(!1);case 21:i&&s.selectedDigitalResource(s.digitalResources().find((function(e){return e.resourceinstanceid==i}))),l&&s.selectedFile(s.files().find((function(e){return e["@tile_id"]==l}))),e.form.complete(!0),s.loading(!1);case 25:case"end":return d.stop()}}),_callee)}))),e.form.reset=function(){for(var t,n,a=0,i=Object.values(e.value());a<i.length;a++){var l=i[a];l.fileStatementParameter.reset(),l.fileStatementInterpretation.reset(),l.format&&delete l.format}var d=null===(t=e.value())||void 0===t?void 0:t[null===(n=s.selectedFile())||void 0===n?void 0:n["@tile_id"]];d&&(s.fileStatementParameter(d.fileStatementParameter.fileStatement()),s.fileStatementInterpretation(d.fileStatementInterpretation.fileStatement()))},this.reset=e.form.reset,this.fileStatementParameter.subscribe((function(t){this.selectedFile()&&(e.value()[this.selectedFile()["@tile_id"]].fileStatementParameter.updateStatement(t),e.value.valueHasMutated())}),this),this.fileStatementInterpretation.subscribe((function(t){this.selectedFile()&&(e.value()[this.selectedFile()["@tile_id"]].fileStatementInterpretation.updateStatement(t),e.value.valueHasMutated())}),this),this.fileFormatRenderers.forEach((function(e){e.state={},e.disabled=!0}));var FileStatement=function(e,n,i,s,l){var d=this;e||(e="");var c={tileid:e,data:{"ca227726-78ed-11ea-a33b-acde48001122":s,"ca2272c6-78ed-11ea-a33b-acde48001122":[l],"ca227582-78ed-11ea-a33b-acde48001122":["bc35776b-996f-4fc1-bd25-9f6432c1f349"]},nodegroup_id:"ca226fe2-78ed-11ea-a33b-acde48001122",parenttile_id:n,resourceinstance_id:i,sortorder:0,tiles:{}};this.tile=new f(c),this.fileStatement=t.observable(s),this._fs=t.observable(s),this.updateStatement=function(e){var t;d.tile.get("data")["ca227726-78ed-11ea-a33b-acde48001122"]=(t=e,_defineProperty({},a.activeLanguage,{value:t,direction:a.languages.find((function(e){return e.code==a.activeLanguage})).default_direction})),d.fileStatement(e)},this.save=function(){d.tile.save((function(e,t,n){"success"===t&&(n.set("tileid",e.responseJSON.tileid),d._fs(d.fileStatement()))}))},this.dirty=t.computed((function(){return this._fs()!==this.fileStatement()}),this),this.reset=function(){d.updateStatement(d._fs())}};this.digitalResources=t.observableArray(),this.getDigitalResource=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t,n){var i,l,d,c,p;return _regeneratorRuntime().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,window.fetch(a.urls.api_resources(t)+"?format=json&compact=false&v=beta");case 2:if((d=f.sent).ok){f.next=5;break}return f.abrupt("return");case 5:return f.next=7,d.json();case 7:c=f.sent,s.digitalResources.push(c),p=e.value(),null===(i=c.resource)||void 0===i||null===(l=i.File)||void 0===l||l.forEach((function(a){var i=a["@tile_id"];i in p||(p[i]={fileStatementParameter:"",fileStatementInterpretation:""});var getStatement=function(e){var n;try{n=a.FIle_Statement.find((function(t){return t.FIle_Statement_type.concept_details[0].valueid===e}))}catch(e){}return n?new FileStatement(n["@tile_id"],i,t,n.FIle_Statement_content["@display_value"],e):new FileStatement("",i,t,"",e)};n&&(p[i].fileStatementParameter=getStatement("72202a9f-1551-4cbc-9c7a-73c02321f3ea"),p[i].fileStatementInterpretation=getStatement("2eef4771-830c-494d-9283-3348a383dfd6"),e.value(p))}));case 11:case"end":return f.stop()}}),_callee2)})));return function(e,n){return t.apply(this,arguments)}}();var x=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var e,t=arguments;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=!(t.length>0&&void 0!==t[0])||t[0],n.abrupt("return",Promise.all(b.map(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.getDigitalResource(t,e));case 1:case"end":return n.stop()}}),_callee3)})));return function(e){return t.apply(this,arguments)}}())));case 2:case"end":return n.stop()}}),_callee4)})));return function(){return e.apply(this,arguments)}}();function stageTile(e){s.card.staging.push(e.tileid)}_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.loading(!0),s.loadingMessage("Loading datasets..."),e.next=4,x();case 4:s.loading(!1);case 5:case"end":return e.stop()}}),_callee5)})))(),this.digitalResourceFilter=t.observable(""),this.selectedDigitalResource=t.observable(),this.selectedDigitalResource.subscribe((function(e){var t,n;this.files(null!==(t=null==e||null===(n=e.resource)||void 0===n?void 0:n.File)&&void 0!==t?t:[])}),this),this.filteredDigitalResources=t.pureComputed((function(){return this.digitalResources().filter((function(e){return e.resource.Name.Name_content["@display_value"].toLowerCase().includes(this.digitalResourceFilter().toLowerCase())}),this)}),this),this.displayContent=void 0,this.files=t.observableArray(),this.fileFilter=t.observable(""),this.selectedRenderer=t.observable(),this.selectedFile=t.observable(),s.selectedFileFormat.subscribe(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t){var a,i,l,d,c,p,f;return _regeneratorRuntime().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:n.selectedFile()&&(c=e.value(),p=n.selectedFile()["@tile_id"],c[p].format=t,e.value.valueHasMutated()),(f=s.getFileFormatRenderer(t?null===(a=Object.values(v).find((function(e){return e.id==t})))||void 0===a?void 0:a.renderer:null===(i=s.selectedFile())||void 0===i||null===(l=i.file_details)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.renderer))&&(s.selectedRenderer(f),s.selectedRenderer.valueHasMutated());case 3:case"end":return h.stop()}}),_callee6)})));return function(e){return t.apply(this,arguments)}}()),s.selectedFile.subscribe((function(t){if(t){s.selected(!0),s.displayContent=s.getDisplayContent(t.file_details[0]);var n=e.value()[t["@tile_id"]];s.selectedFileFormat(n.format||t.file_details[0].format),s.selectedFileFormat.valueHasMutated(),s.fileStatementParameter(n.fileStatementParameter.fileStatement()),s.fileStatementInterpretation(n.fileStatementInterpretation.fileStatement())}else s.fileStatementParameter(void 0),s.fileStatementInterpretation(void 0)})),this.updateRenderer=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(e,t){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(a.urls.upload_dataset_file_renderer(e),{method:"POST",credentials:"include",body:JSON.stringify({format:t}),headers:{"X-CSRFToken":p.get("csrftoken"),"Content-Type":"application/json"}});case 2:case"end":return n.stop()}}),_callee7)})));return function(t,n){return e.apply(this,arguments)}}(),this.filteredFiles=t.pureComputed((function(){return this.files().filter((function(e){return e.file_details[0].name.toLowerCase().includes(this.fileFilter().toLowerCase())}),this)}),this),this.fileInterpretationTiles=t.observableArray(),this.getDisplayContent=function(e){var n,a,i=t.unwrap(e.url)||t.unwrap(e.content),l=t.unwrap(e.type),d=t.unwrap(e.name),c=t.unwrap(e.renderer),p=s.fileFormatRenderers.find((function(e){return e.id===c}));p||(a=s.getDefaultRenderers(l,e),p||(a=s.getDefaultRenderers(l,t.unwrap(e.name)))),p&&(n=p.iconclass);var f={validRenderer:t.observable(!0),url:i,type:l,name:d,renderer:p,iconclass:n,renderers:a};return f.availableRenderers=s.getDefaultRenderers(l,f),f.validRenderer.subscribe((function(e){s.currentRendererValid(e)})),f},this.applyToAll=t.observable(!1),this.fileRenderer=t.observable(),this.managerRenderer=t.observable(),this.acceptedFiles=t.observable(null),d.apply(this,[e]),this.workbenchWrapperClass=t.observable("autoheight"),this.fileRenderer.subscribe((function(){["add","edit","manage"].indexOf(s.activeTab())<0&&s.activeTab(void 0)})),this.getFileFormatRenderer=function(e){return s.fileFormatRenderers.find((function(t){return t.id===e}))},this.getDefaultRenderers=function(e,n){var a=[];return this.fileFormatRenderers.forEach((function(i){var s=i.exclude?i.exclude.split(","):[],l=e,d=n.name?t.unwrap(n.name).split(".").pop():t.unwrap(n).split(".").pop();i.type===l&&i.ext===d&&a.push(i);var c=t.unwrap(e).split("/")[0],p=i.type.split("/"),f=p[0];"*"===p[1]&&c===f&&s.indexOf(d)<0&&a.push(i)})),a},this.getUrl=function(e){var n,a,i,l,d,c="",p="",f=t.unwrap(e.data[this.fileListNodeId]);return f&&1==f.length&&(c=t.unwrap(tiledata.url)||t.unwrap(tiledata.content),p=t.unwrap(tiledata.type),n=t.unwrap(tiledata.name),l=t.unwrap(tiledata.renderer),(a=s.fileFormatRenderers.find((function(e){return e.id===l})))||(d=s.getDefaultRenderers(p,tiledata),a||(d=s.getDefaultRenderers(p,t.unwrap(tiledata.name)))),a&&(i=a.iconclass)),file.availableRenderers=s.getDefaultRenderers(p,this),file.validRenderer=t.observable(!0),{url:c,type:p,name:n,renderer:a,iconclass:i,tile:e,renderers:d}},this.isFiltered=function(e){return s.getUrl(e).name.toLowerCase().includes(s.filter().toLowerCase())},this.filteredTiles=t.pureComputed((function(){return s.card.tiles().filter((function(e){return s.getUrl(e).name.toLowerCase().includes(s.filter().toLowerCase())}),this)}),this),this.uniqueId=i.generate(),this.selectDefault=function(){var e=this;return function(){var t,n="manage"===e.activeTab()?"manage":"edit";e.toggleTab(n);var a=e.card.tiles.indexOf(e.selected());e.card.tiles().length>0&&-1===a&&(a=0),(t=e.card.tiles()[a])&&(t.selected(!0),e.selectItem(t)),e.activeTab(n)}},this.defaultSelector=this.selectDefault(),this.checkIfRendererIsValid=function(e,n){return s.getDefaultRenderers(t.unwrap(e.type),t.unwrap(e.name)).indexOf(n)>-1},this.applyRendererToStaged=function(e){this.card.staging().forEach((function(n){var a=s.card.tiles().find((function(e){return e.tileid==n}));if(a){var i=t.unwrap(a.data[s.fileListNodeId])[0];s.checkIfRendererIsValid(i,e)&&(i.renderer=e?e.id:"",a.save())}}))},this.applyRendererToSelected=function(e){if(s.displayContent()){var n=s.displayContent().tile,a=t.unwrap(n.data[s.fileListNodeId]);if(a.length>0)s.checkIfRendererIsValid(a[0],e)&&(a[0].renderer=e?e.id:"",n.save())}t.unwrap(s.applyToAll)&&s.applyRendererToStaged(e)},this.selectItem=function(e){e&&e.selected&&!0!==t.unwrap(e)&&!0!==t.unwrap(e.selected)&&e.selected(!0)},this.removeTile=function(e){e.deleteTile(null,s.defaultSelector)},this.removeTiles=function(){this.card.staging().forEach((function(e){var t=s.card.tiles().find((function(t){return t.tileid==e}));t&&t.deleteTile(null,s.defaultSelector)}),this),s.card.staging([])},this.stageAll=function(){this.card.tiles().forEach((function(e){s.card.staging().indexOf(e.tileid)<0&&s.card.staging.push(e.tileid)}))},this.clearStaging=function(){s.card.staging([])},this.downloadSelection=function(){var e=a.urls.download_files+"?tiles="+JSON.stringify(s.card.staging())+"&node="+s.fileListNodeId;window.open(e)},this.addTile=function(e){var t;t=s.card.getNewTile();var n=s.getDefaultRenderers(e.type,e.name),a={name:e.name,accepted:!0,height:e.height,lastModified:e.lastModified,size:e.size,status:e.status,type:e.type,width:e.width,url:null,file_id:null,index:0,content:window.URL.createObjectURL(e),error:e.error,renderer:1===n.length?n[0].id:void 0};t.data[s.fileListNodeId]([a]),t.formData.append("file-list_"+s.fileListNodeId,e,e.name),t.resourceinstance_id=s.card.resourceinstanceid,0===s.card.tiles().length&&function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}(100),t.save(null,stageTile),s.card.newTile=void 0}}return t.components.register("file-interpretation-step",{viewModel:viewModel,template:n}),viewModel}.apply(t,a),void 0===i||(e.exports=i)},78266:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(46186),n(59732),n(54922),n(32274),n(77004),n(56321)],void 0===(i=function(e,t,n,a,i){function viewModel(i){var s=this,l="1acc9d59-c458-11e9-99e4-a4d18cec433a",d="51416e9c-c458-11e9-b70e-a4d18cec433a",c=i.projectInfoData,p=c.physThingName,f="cd412ac5-c457-11e9-9644-a4d18cec433a",v=c.physicalThing,h=c.project,b="736f06a4-c54d-11ea-9f58-024e0d439fdb",m=["ec635afd-beb1-426e-a21c-09866ea94d25"],g=["bc35776b-996f-4fc1-bd25-9f6432c1f349"],x=["72202a9f-1551-4cbc-9c7a-73c02321f3ea","df8e4cf6-9b0b-472f-8986-83d5b2ca28a0"],y=["b6c819b8-99f6-11ea-a9b7-3af9d3b32b71"],getProp=function(e,t){return n.unwrap(i.value)&&i.value()[e]?t?i.value()[e][t]:i.value()[e]:null},w=getProp("parameter","tileid"),k=getProp("instrument","tileid"),S=getProp("procedure","tileid"),_=getProp("project","tileid"),T=getProp("observedThing","tileid"),C=getProp("date","tileid"),I=getProp("name","tileid");this.instrumentValue=n.observable(getProp("instrument","value")),this.procedureValue=n.observable(getProp("procedure","value")),this.parameterValue=n.observable(getProp("parameter","value")),this.observationInstanceId=n.observable(getProp("observationInstanceId")),this.dateValue=n.observable(getProp("date","value")),this.showName=n.observable(!1),this.locked=i.form.locked,this.procedureSearchString=location.origin+"/search?advanced-search=%5B%7B%22op%22%3A%22and%22%2C%22dc946b1e-c070-11e9-a005-a4d18cec433a%22%3A%7B%22op%22%3A%22%22%2C%22val%22%3A%2260d1e09c-0f14-4348-ae14-57fdb9ef87c4%22%7D%7D%5D",this.instrumentName=n.observable(),this.nameValue=n.observable(getProp("name","value"));var $={dateValue:s.dateValue(),instrumentValue:s.instrumentValue(),procedureValue:s.procedureValue(),parameterValue:s.parameterValue()};this.createRelatedInstance=function(e){return[{resourceId:e,ontologyProperty:"",inverseOntologyProperty:""}]},this.instrumentInstance=n.observable(this.instrumentValue()?this.createRelatedInstance(this.instrumentValue()):null),this.procedureInstance=n.observable(this.procedureValue()?this.createRelatedInstance(this.procedureValue()):null);this.instrumentValue.subscribe((function(e){if(i.form.dirty(Boolean(e)&&!s.locked()),e&&!y.includes(e)){var t=a.lookupResourceInstanceData(e);s.instrumentInstance(s.createRelatedInstance(e)),t.then((function(e){s.instrumentName(e._source.displayname),s.nameValue("Observation of ".concat(p," with ").concat(e._source.displayname," ").concat(s.dateValue()))}))}})),this.dateValue.subscribe((function(e){s.instrumentName()&&s.nameValue("Observation of ".concat(p," with ").concat(s.instrumentName()," ").concat(e))})),this.procedureValue.subscribe((function(e){s.procedureInstance(s.createRelatedInstance(e))})),this.updatedValue=n.pureComputed((function(){return{instrument:{value:s.instrumentValue(),tileid:k},procedure:{value:s.procedureValue(),tileid:S},parameter:{value:s.parameterValue(),tileid:w},name:{value:s.nameValue(),tileid:I},date:{value:s.dateValue(),tileid:C},observedThing:{tileid:T},project:{tileid:_},observationInstanceId:s.observationInstanceId()}})),this.updatedValue.subscribe((function(e){i.value(e)})),this.buildTile=function(e,t,n,a){var s={tileid:a||"",nodegroup_id:t,parenttile_id:null,resourceinstance_id:n,sortorder:0,tiles:{},data:{},transaction_id:i.form.workflowId};return s.data=e,s},this.saveTile=function(n,a,i,l){var d=s.buildTile(n,a,i,l);return window.fetch(e.urls.api_tiles(l||t.generate()),{method:"POST",credentials:"include",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()}))},i.form.reset=function(){s.instrumentValue($.instrumentValue),s.procedureValue($.procedureValue),s.parameterValue($.parameterValue),i.form.hasUnsavedData(!1)},this.saveTextualWorkType=function(){var t="dc946b1e-c070-11e9-a005-a4d18cec433a",n="60d1e09c-0f14-4348-ae14-57fdb9ef87c4";window.fetch(e.urls.api_resources(s.procedureValue())+"?format=json&compact=false").then((function(e){return e.json()})).then((function(a){var i,l=null===(i=a.resource.type)||void 0===i?void 0:i["@tile_id"];if(!l){var d={};return d[t]=[n],s.saveTile(d,t,s.procedureValue())}window.fetch(e.urls.api_tiles(l),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){a.data[t].includes(n)||(a.data[t].push(n),window.fetch(e.urls.api_tiles(l),{method:"POST",credentials:"include",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}))}))}))},i.form.save=function(){if(i.form.complete(!1),!s.instrumentValue())return i.form.error(new Error("Selecting an instrument is required.")),void i.pageVm.alert(new i.form.AlertViewModel("ep-alert-red","Instrument Required","Selecting an instrument is required."));s.procedureValue()&&s.saveTextualWorkType(),i.form.lockExternalStep("project-info",!0);var t={transaction_id:i.form.workflowId},n={};n[f]=s.createRelatedInstance(v),t.observedThingTile=s.buildTile(n,f,s.observationInstanceId(),T);var a={};a[b]=s.createRelatedInstance(h),t.partOfProjectTile=s.buildTile(a,b,s.observationInstanceId(),_);var c,p={};p["87e40cc5-c457-11e9-8933-a4d18cec433a"]=(c=s.nameValue(),_defineProperty({},e.activeLanguage,{value:c,direction:e.languages.find((function(t){return t.code==e.activeLanguage})).default_direction})),p["87e4092e-c457-11e9-8036-a4d18cec433a"]=m,p["87e3ec82-c457-11e9-89d8-a4d18cec433a"]=g,t.nameTile=s.buildTile(p,"87e3d6a1-c457-11e9-9ec9-a4d18cec433a",s.observationInstanceId(),I);var y={};y["89f08768-c457-11e9-94db-a4d18cec433a"]=s.dateValue(),t.dateTile=s.buildTile(y,"89f06cba-c457-11e9-916e-a4d18cec433a",s.observationInstanceId(),C);var $={};$[l]=s.instrumentInstance(),t.instrumentTile=s.buildTile($,l,s.observationInstanceId(),k);var j={};j[d]=s.procedureInstance(),t.procedureTile=s.buildTile(j,d,s.observationInstanceId(),S);var P={};return P["8ec331a1-c457-11e9-8d7a-a4d18cec433a"]=s.parameterValue(),P["8ec31b7d-c457-11e9-8550-a4d18cec433a"]=x,P["8ec31780-c457-11e9-9543-a4d18cec433a"]=g,t.parameterTile=s.buildTile(P,"8ec30d3a-c457-11e9-81dc-a4d18cec433a",s.observationInstanceId(),w),window.fetch(e.urls.root+"instrument-info-form-save",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){T=e.observedThingTile.tileid,_=e.partOfProjectTile.tileid,I=e.nameTile.tileid,C=e.dateTile.tileid,k=e.instrumentTile.tileid,S=e.procedureTile.tileid,w=e.parameterTile.tileid,s.observationInstanceId(e.observedThingTile.resourceinstance_id),i.form.savedData(i.form.value()),i.form.complete(!0),i.form.dirty(!1),i.pageVm.alert("")})).catch((function(e){i.pageVm.alert(new i.form.AlertViewModel("ep-alert-red","Error","There was an issue saving the workflow step.")),i.form.complete(!1),i.form.dirty(!0),i.form.loading(!1)}))}}return n.components.register("instrument-info-step",{viewModel:viewModel,template:i}),viewModel}.apply(t,a))||(e.exports=i)},65330:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,F=function(){};return{s:F,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(54922),n(58420),n(59732),n(46186),n(32274),n(31599),n(12598),n(20346),n(91762),n(3942),n(6797),n(59806),n(58943)],i=function(e,t,n,a,i,s,l,d,c,p,f,v){return e.components.register("select-dataset-files-step",{viewModel:function(t){var s,l=this;this.buildStrObject=function(e){return _defineProperty({},a.activeLanguage,{value:e,direction:a.languages.find((function(e){return e.code==a.activeLanguage})).default_direction})},c.apply(this,[t]);var d=this,v="d2fdae3d-ca7a-11e9-ad84-a4d18cec433a",h="7c486328-d380-11e9-b88e-a4d18cec433a",b={"77d8cf19-ce9c-4e0a-bde1-9148d870e11c":"Sample","7375a6fb-0bfb-4bcf-81a3-6180cdd26123":"Sample Location","31d97bdd-f10f-4a26-958c-69cb5ab69af1":"Analysis Area"};this.showDatasetDetails=e.observable(!1);var m=t.projectInfo,g=t.observationInfo,x=t.observationInfo.observationInstanceId;this.annotationNodeId="b3e171ae-1d9d-11eb-a29f-024e0d439fdb",this.samplingActivityGraphId="03357848-1d9d-11eb-a29f-024e0d439fdb",this.selectedAnnotationTile=e.observable(),this.selectedPart=e.observable(),this.partFilter=e.observable(""),this.annotations=e.observableArray([]),this.selectedPartObservationId=e.observable(),this.selectedPartDefaultFormat=e.observable(),this.parts=e.observableArray([]),this.uniqueId=n.generate(),this.observationReferenceTileId=e.observable(),this.physicalThing=m.physicalThing,this.uniqueidClass=e.computed((function(){return"unique_id_"+d.uniqueId})),this.firstLoad=!0,this.mainMenu=e.observable(!1),this.files=e.observableArray([]),d.formats=e.observableArray(Object.values(f).map((function(e){return{text:e.name,id:e.id}}))),this.initialValue=t.form.savedData()||void 0,this.snapshot=void 0,this.loadingMessage=e.observable(),this.loading=e.observable(!1),this.selectedPartHasCurrentObservation=e.computed((function(){var e;return null===(e=d.selectedPart())||void 0===e||!e.observationResourceId||d.selectedPart().observationResourceId==x})),this.switchCanvas=function(e){var t=d.canvases().find((function(t){return t.images[0].resource.service["@id"]===e}));t&&d.canvasClick(t)},this.highlightAnnotation=function(){d.map()&&d.map().eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){e.eachLayer&&e.eachLayer((function(e){s||(s=e.feature.properties.color),d.selectedAnnotationTile().tileid===e.feature.properties.tileId?e.setStyle({color:"#BCFE2B",fillColor:"#BCFE2B"}):e.setStyle({color:s,fillColor:s})}))}))}))},this.getAnnotationProperty=function(e,t){return e.data["97c30c42-8594-11ea-97eb-acde48001122"].features[0].properties[t]},d.selectedPartDefaultFormat.subscribe((function(e){d.selectedPart().defaultFormat(e)})),this.selectedPart.subscribe(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(n){var a,i,s,l;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:d.selectedPartObservationId(d.selectedPart().observationResourceId),l=e.unwrap(null===(a=t.form.savedData())||void 0===a||null===(i=a.parts.find((function(e){return e.partResourceId==n.resourceid})))||void 0===i?void 0:i.defaultFormat),d.selectedPartDefaultFormat(e.unwrap(null===(s=d.selectedPart())||void 0===s?void 0:s.defaultFormat)||l),d.annotations([n]),d.annotations().length&&(d.selectedAnnotationTile(d.annotations()[0]),d.manifest()!==d.getAnnotationProperty(d.selectedAnnotationTile(),"manifest")&&(d.manifest(d.getAnnotationProperty(d.selectedAnnotationTile(),"manifest")),d.getManifestData()),d.switchCanvas(d.getAnnotationProperty(d.selectedAnnotationTile(),"canvas")));case 5:case"end":return c.stop()}}),_callee)})));return function(e){return n.apply(this,arguments)}}()),this.canvas.subscribe((function(e){if("string"==typeof e){var t=d.getAnnotationProperty(d.selectedAnnotationTile(),"canvas");t!==e&&!0!==d.firstLoad||(d.switchCanvas(t),d.firstLoad=!1)}})),this.addFileToPart=function(t){d.selectedPart()&&d.selectedPartHasCurrentObservation()&&(file=t[0],file.tileId=e.observable(),d.selectedPart().stagedFiles.push(file),d.parts.valueHasMutated(),d.files.remove(file))},this.removeFileFromPart=function(e){d.selectedPart()&&d.selectedPartHasCurrentObservation()&&(d.selectedPart().datasetFiles.remove(e),d.files.push(e))};var y=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var t,n,i,s,l,c;return _regeneratorRuntime().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(!e.datasetId()){p.next=9;break}return p.next=3,window.fetch("".concat(a.urls.related_resources).concat(e.datasetId()));case 3:return p.next=5,p.sent.json();case 5:l=p.sent,c=null==l||null===(t=l.related_resources)||void 0===t||null===(n=t.related_resources)||void 0===n?void 0:n.filter((function(e){return"615b11ee-c457-11e9-910c-a4d18cec433a"==(null==e?void 0:e.graph_id)})),e.observationResourceId=null==c||null===(i=c[0])||void 0===i?void 0:i.resourceinstanceid,e.datasetId()==(null===(s=d.selectedPart())||void 0===s?void 0:s.datasetId())&&d.selectedPart.valueHasMutated();case 9:case"end":return p.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}();this.saveDatasetFile=function(t,n){var a;(d.loading(!0),n)&&(d.loadingMessage("Uploading files (may take a few minutes)..."),e.unwrap(n.tileId)||(a={name:n.name,accepted:n.accepted,height:n.height,lastModified:n.lastModified,size:n.size,status:n.status,type:n.type,width:n.width,url:null,file_id:null,index:0,content:window.URL.createObjectURL(n),error:n.error},t.append("file-list_".concat(h,"_data"),JSON.stringify(a)),t.append("file-list_".concat(h),n,n.name)))};var saveWorkflowState=function(){t.form.savedData({observationReferenceTileId:d.observationReferenceTileId(),parts:d.parts().map((function(t){return fileObjects=t.datasetFiles().map((function(e){return delete e.dataURL,e})),{datasetFiles:fileObjects.map((function(t){return _objectSpread(_objectSpread({},t),{},{tileId:e.unwrap(t.tileId)})})),datasetId:t.datasetId(),nameTileId:t.nameTileId(),datasetName:t.datasetName()||"",resourceReferenceId:t.resourceReferenceId(),defaultFormat:t.defaultFormat(),tileid:t.tileid,partResourceId:t.resourceid}}))})};this.deleteFile=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var n,i,s,c,f,v;return _regeneratorRuntime().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(!(n=e.unwrap(t.tileId))){h.next=17;break}return d.loading(!0),h.prev=3,d.loadingMessage("Deleting ".concat(e.unwrap(t.name),"...")),(s=new window.FormData).append("tileid",n),h.next=9,window.fetch(a.urls.tile,{method:"DELETE",credentials:"include",body:JSON.stringify(Object.fromEntries(s.entries())),headers:{"X-CSRFToken":p.get("csrftoken")}});case 9:return c=h.sent,h.next=12,c.json();case 12:f=h.sent,(200==c.status||500==c.status&&null!=f&&null!==(i=f.message)&&void 0!==i&&i.includes("likely already deleted"))&&(v=l.selectedPart().datasetFiles(),l.selectedPart().datasetFiles(v.filter((function(t){return e.unwrap(t.tileId)!=n}))),saveWorkflowState());case 14:return h.prev=14,d.loading(!1),h.finish(14);case 17:case"end":return h.stop()}}),_callee3,null,[[3,,14,17]])})));return function(e){return t.apply(this,arguments)}}(),this.saveFiles=function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(n){var i,s,l,c,f;return _regeneratorRuntime().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return file=null==n?void 0:n[0],t.form.lockExternalStep("select-instrument-and-files",!0),i=d.selectedPart(),v.prev=3,(s=new window.FormData).append("transaction_id",t.form.workflowId),s.append("instrument_id",g.instrument.value),s.append("observation_id",x),d.observationReferenceTileId()&&s.append("observation_ref_tile",d.observationReferenceTileId()),s.append("dataset",JSON.stringify({name:d.buildStrObject(i.calcDatasetName()),tileId:i.nameTileId(),resourceInstanceId:e.unwrap(i.datasetId),partResourceId:e.unwrap(i.resourceid),defaultFormat:e.unwrap(i.defaultFormat)})),d.loading(!0),d.loadingMessage("Saving dataset ".concat(i.calcDatasetName())),n&&Array.from(n).forEach((function(e){d.saveDatasetFile(s,e)})),v.next=15,window.fetch(a.urls.upload_dataset_select_dataset_files_step,{method:"POST",credentials:"include",body:s,headers:{"X-CSRFToken":p.get("csrftoken")}});case 15:return l=v.sent,d.loading(!1),v.next=19,l.json();case 19:c=v.sent,d.observationReferenceTileId(c.observationReferenceTileId),i.datasetId(c.datasetResourceId),f=i.datasetFiles().filter((function(t){return null==c.removedFiles.find((function(n){return e.unwrap(t.tileId)==e.unwrap(n.tileid)}))})),i.datasetFiles([].concat(_toConsumableArray(f),_toConsumableArray(c.files))),i.nameTileId(c.datasetNameTileId),v.next=31;break;case 27:v.prev=27,v.t0=v.catch(3),console.log("Tile update failed",v.t0),t.form.loading(!1);case 31:saveWorkflowState(),d.snapshot=t.form.savedData(),t.form.complete(!0);case 34:case"end":return v.stop()}}),_callee4,null,[[3,27]])})));return function(e){return n.apply(this,arguments)}}(),this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,uploadMultiple:!0,autoQueue:!1,clickable:".upload-dataset-files."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){d.dropzone=this,this.on("addedfiles",d.saveFiles),this.on("error",(function(e,t){e.error=t}))}},this.canBeSaved=e.pureComputed((function(){return d.parts().filter((function(e){return e.datasetName&&!e.datasetId()})).some((function(e){return e.datasetFiles().length}))||d.parts().filter((function(t){return e.unwrap(t.datasetId)})).some((function(e){return e.datasetFiles().some((function(e){return!e.tileId()}))}))||d.parts().some((function(e){return e.nameDirty()}))})),this.init=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var n,s,c,p,f,m;return _regeneratorRuntime().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return d.loading(!0),d.loadingMessage("Loading samples and analysis areas..."),d.activeTab("dataset"),d.snapshot=t.form.savedData(),l.selectedAnnotationTile.subscribe(l.highlightAnnotation),d.annotationNodes.subscribe((function(t){var n=t.find((function(e){return e.name.includes("Physical Thing")}));n&&(n.active(!0),e.unwrap(n.annotations)&&n.annotations().length>0&&d.highlightAnnotation(),n.annotations.subscribe((function(){d.highlightAnnotation()})))})),g.next=8,i.lookupResourceInstanceData(l.physicalThing);case 8:s=g.sent,c=null==s?void 0:s._source.tiles.filter((function(e){return"fec59582-8593-11ea-97eb-acde48001122"===e.nodegroup_id})),d.observationReferenceTileId(null===(n=t.form.savedData())||void 0===n?void 0:n.observationReferenceTileId),p=_createForOfIteratorHelper(c),g.prev=12,m=_regeneratorRuntime().mark((function _loop(){var n,s,l,c,p,m,g,w,k,S,_,T,C,I,$,j,P,O,A,D,N;return _regeneratorRuntime().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return(k=f.value).resourceid=k.data["b240c366-8594-11ea-97eb-acde48001122"][0].resourceId,E.next=4,i.lookupResourceInstanceData(k.resourceid);case 4:if(S=E.sent,"8a4ad932-8d59-11eb-a9c4-faffc265b501","a298ee52-8d59-11eb-a9c4-faffc265b501","f11e4d60-8d59-11eb-a9c4-faffc265b501",_="8ddfe3ab-b31d-11e9-aff0-a4d18cec433a",T=null==S?void 0:S._source.tiles.find((function(e){return"8a4ad932-8d59-11eb-a9c4-faffc265b501"===e.nodegroup_id})),C=null==S||null===(n=S._source.tiles.filter((function(e){return e.nodegroup_id===_})))||void 0===n||null===(s=n[0])||void 0===s||null===(l=s.data[_])||void 0===l?void 0:l[0],k.type=b[C],I=["1497d15a-1c3b-4ee9-a259-846bbab012ed","305c62f0-7e3d-4d52-a210-b451491e6100","00d5a7a6-ff2f-4c44-ac85-7a8ab1a6fb70"],k.datasetFiles=k.datasetFiles||e.observableArray([]),k.stagedFiles=k.stagedFiles||e.observableArray([]),k.datasetName=k.datasetName||e.observable(),k.defaultFormat=e.observable(null===(c=t.form.savedData())||void 0===c||null===(p=c.parts.find((function(e){return k.resourceid==(null==e?void 0:e.partResourceId)})))||void 0===p?void 0:p.defaultFormat),$=S._source.displayname,0,k.calcDatasetName=e.computed((function(){var e=k.datasetName()||"Dataset";return"".concat(e," (").concat($,")")})),k.datasetId=k.datasetId||e.observable(),k.nameTileId=k.nameTileId||e.observable(),k.resourceReferenceId=k.resourceReferenceId||e.observable(),k.nameDirty=k.nameDirty||e.observable(!1),k.displayname=k.data["3e541cc6-859b-11ea-97eb-acde48001122"][a.activeLanguage].value,!T||I.includes(T.data["f11e4d60-8d59-11eb-a9c4-faffc265b501"])){E.next=39;break}return E.next=28,i.lookupResourceInstanceData(T.data["a298ee52-8d59-11eb-a9c4-faffc265b501"][0].resourceId);case 28:return j=E.sent,P=j._source.tiles.find((function(e){return e.nodegroup_id===v})).data["d2fdc2fa-ca7a-11e9-8ffb-a4d18cec433a"],O=j._source.tiles.find((function(e){return e.nodegroup_id===v})).tileid,A=j._source.tiles.filter((function(e){return"7c486328-d380-11e9-b88e-a4d18cec433a"===e.nodegroup_id})),D=A.map((function(t){var n=t.data[h][0];return n.tileId=e.observable(t.tileid),n})),k.datasetId(j._id),E.next=36,y(k);case 36:k.datasetName(P),k.datasetFiles(D),k.nameTileId(O);case 39:k.datasetId.getSubscriptionsCount()||k.datasetId.subscribe((function(e){e&&t.form.complete(!0)})),(N=null===(m=t.form.savedData())||void 0===m||null===(g=m.parts)||void 0===g||null===(w=g.filter((function(e){return e.tileid==k.tileid})))||void 0===w?void 0:w[0])&&(k.datasetFiles(N.datasetFiles.map((function(t){return _objectSpread(_objectSpread({},t),{},{tileId:e.observable(t.tileId)})}))),k.datasetName(N.datasetName),k.datasetId(N.datasetId),k.nameTileId(N.nameTileId),k.resourceReferenceId(N.resourceReferenceId),"dataset"!=d.activeTab()&&(d.mainMenu(!1),d.activeTab("dataset"),d.annotationNodes.valueHasMutated())),k.datasetName.getSubscriptionsCount()&&k.datasetName.subscribe((function(e){var t,n,a;e!=((null===(t=d.snapshot)||void 0===t||null===(n=t.parts)||void 0===n||null===(a=n.find((function(e){return e.datasetId==k.datasetId()})))||void 0===a?void 0:a.datasetName)||"")?k.nameDirty(!0):k.nameDirty(!1)})),k.hasCurrentObservation=e.computed((function(){return null==k||!k.observationResourceId||k.observationResourceId==x}));case 44:case"end":return E.stop()}}),_loop)})),p.s();case 15:if((f=p.n()).done){g.next=19;break}return g.delegateYield(m(),"t0",17);case 17:g.next=15;break;case 19:g.next=24;break;case 21:g.prev=21,g.t1=g.catch(12),p.e(g.t1);case 24:return g.prev=24,p.f(),g.finish(24);case 27:d.parts(c),d.selectedPart(d.parts()[0]),d.loading(!1);case 30:case"end":return g.stop()}}),_callee5,null,[[12,21,24,27]])}))),this.init()},template:v})}.apply(t,a),void 0===i||(e.exports=i)},91627:function(e,t,n){var a,i;a=[n(54922),n(84490),n(59732),n(46186),n(79921),n(78960)],void 0===(i=function(e,t,n,a,i,s){function viewModel(n){var a=this;n.form.resourceId(n.observationInstanceResourceId),i.apply(this,[n]),this.resourceLoading=e.observable(!0),this.digitalResourceLoading=e.observable(!0),this.fileLists=e.observableArray(),this.tableConfig={info:!1,paging:!1,scrollCollapse:!0,searching:!1,ordering:!1,columns:[null,null,null]},this.hasAnnotatedParts=Array.isArray(n.uploadedDatasets),this.uploadedDatasets=this.hasAnnotatedParts?n.uploadedDatasets:[n.uploadedDataset],this.parentPhysThingData=e.observableArray(),this.parentPhysThingRelatedData=e.observableArray(),this.parentPhysThingAnnotations=e.observableArray(),this.getResourceData(n.parentPhysThingResourceId,this.parentPhysThingData),this.parentPhysThingData.subscribe((function(n){n.resource["Part Identifier Assignment"]&&n.resource["Part Identifier Assignment"].forEach((function(e){var t=a.getResourceValue(e,["Part Identifier Assignment_Physical Part of Object","@display_value"]),n=a.getResourceValue(e,["Part Identifier Assignment_Label","@display_value"]),i=a.getResourceValue(e,["Part Identifier Assignment_Annotator","@display_value"]),s=a.getResourceValue(e,["@tile_id"]),l=a.getResourceValue(e,["Part Identifier Assignment_Polygon Identifier","@display_value"]);if(l)var d=JSON.parse(l.replaceAll("'",'"')),c=a.prepareAnnotation(d);a.parentPhysThingAnnotations.push({tileId:s,name:t,label:n,annotator:i,leafletConfig:c})})),this.uploadedDatasets.forEach((function(n){var i=e.observableArray(),s=e.observableArray(),l=e.observableArray();a.parentPhysThingAnnotations().forEach((function(e){n.tileid===e.tileId&&(l=e.leafletConfig)})),a.getResourceData(n.datasetId,i),i.subscribe((function(e){var n,findStatementType=function(e,n){var a=t.find(e,(function(e){return e.type.indexOf(n)>-1}));return a?a.statement:"None"},i=e.displayname;((null===(n=e.resource)||void 0===n?void 0:n.File.map((function(e){var t=[],n=a.getResourceValue(e.file_details[0],["name"]);return Array.isArray(e.FIle_Statement)&&(t=e.FIle_Statement.map((function(e){return{statement:a.getResourceValue(e,["FIle_Statement_content","@display_value"]),type:a.getResourceValue(e,["FIle_Statement_type","@display_value"])}}))),{fileName:n,statements:t}})))||[]).forEach((function(e){var t=e.fileName,n=findStatementType(e.statements,"interpretation"),a=findStatementType(e.statements,"brief text");s.push({name:t,interpretation:n,parameter:a})})),a.fileLists.push({digitalResourceName:i,leafletConfig:l,fileList:s})}))})),a.digitalResourceLoading(!1),a.resourceLoading()||a.loading(!1)}),this),this.resourceData.subscribe((function(e){this.displayName=e.displayname||"unnamed",this.reportVals={observationName:{name:"Experiment/Observation Name",value:this.getResourceValue(e.resource.Name[0],["Name_content","@display_value"])},project:{name:"Project",value:this.getResourceValue(e.resource,["part of","@display_value"])},usedObject:{name:"Used Object",value:this.getResourceValue(e.resource,["observed","@display_value"])},usedInstrument:{name:"Instrument",value:this.getResourceValue(e.resource,["used instrument","@display_value"])},usedProcess:{name:"Technique",value:this.getResourceValue(e.resource,["used process","@display_value"])}},a.reportVals.statement=function(e,n){try{a.reportVals.statements=e.resource.Statement.map((function(e){return{content:{name:"Instrument Parameters",value:a.getResourceValue(e,["Statement_content","@display_value"])},type:{name:"type",value:a.getResourceValue(e,["Statement_type","@display_value"])}}}))}catch(e){console.log(e),a.reportVals.statements=[]}var i=t.find(a.reportVals.statements,(function(e){return e.type.value.split(",").indexOf(n)>-1}));return i?i.content:{name:"Instrument Parameters",value:"None"}}(e,"description"),this.resourceLoading(!1),this.digitalResourceLoading()||this.loading(!1)}),this)}return e.components.register("upload-dataset-final-step",{viewModel:viewModel,template:s}),viewModel}.apply(t,a))||(e.exports=i)},14098:function(e,t,n){var a,i;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,i){var s=t&&t.prototype instanceof Generator?t:Generator,l=Object.create(s.prototype),d=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(e,n,d)}),l}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,s,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(values([])));v&&v!==t&&n.call(v,s)&&(p=v);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(a,i,s,l){var d=tryCatch(e[a],e,i);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){invoke("next",e,s,l)}),(function(e){invoke("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return invoke("throw",e,s,l)}))}l(d.arg)}var i;a(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,a){invoke(e,n,t,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var a="suspendedStart";return function(i,s){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw s;return doneResult()}for(n.method=i,n.arg=s;;){var l=n.delegate;if(l){var d=maybeInvokeDelegate(l,n);if(d){if(d===c)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var p=tryCatch(e,t,n);if("normal"===p.type){if(a=n.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(a="completed",n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=tryCatch(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function next(){for(;++a<e.length;)if(n.call(e,a))return next.value=e[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,a,i,s){void 0===s&&(s=Promise);var l=new AsyncIterator(wrap(t,n,a,i),s);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},defineIteratorMethods(h),define(h,d,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=e,l.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,a,i,s,l){try{var d=e[s](l),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,a,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,a,i,_next,_throw,"throw",e)}_next(void 0)}))}}a=[n(84490),n(54922),n(59732),n(46186),n(28718),n(6797),n(3942),n(13329),n(58943)],i=function(e,t,n,a,i,s,l,d){return t.components.register("upload-files-step",{viewModel:function(e){var i=this,d=this,c=e.projectinfo["select-phys-thing-step"].savedData().physicalThing,p=e.observationinfo["instrument-info"].savedData(),f="7c486328-d380-11e9-b88e-a4d18cec433a",v=e.projectinfo["select-phys-thing-step"].savedData().physThingName;this.datasetId=void 0,this.defaultFormat=t.observable(),this.datasetName=t.observable(),this.calcDatasetName=t.computed((function(){var e=d.datasetName()||"Dataset";return"".concat(e," (").concat(v,")")})),this.datasetNameTileId="",this.files=t.observableArray(),this.observationReferenceTileId="",this.physicalthingReferenceTileId="",this.uniqueId=n.generate(),this.loadingMessage=t.observable(),this.loading=t.observable(!1),this.formats=t.observableArray(Object.values(s).map((function(e){return{text:e.name,id:e.id}}))),this.deleteFile=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n,s,c,p,f,v;return _regeneratorRuntime().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(!(n=t.unwrap(e.tileId))){b.next=17;break}return d.loading(!0),b.prev=3,d.loadingMessage("Deleting ".concat(t.unwrap(e.name),"...")),(c=new window.FormData).append("tileid",n),b.next=9,window.fetch(a.urls.tile,{method:"DELETE",credentials:"include",body:JSON.stringify(Object.fromEntries(c.entries())),headers:{"X-CSRFToken":l.get("csrftoken")}});case 9:return p=b.sent,b.next=12,p.json();case 12:f=b.sent,(200==p.status||500==p.status&&null!=f&&null!==(s=f.message)&&void 0!==s&&s.includes("likely already deleted"))&&(v=i.files(),i.files(v.filter((function(e){return t.unwrap(e.tileId)!=n}))),h());case 14:return b.prev=14,d.loading(!1),b.finish(14);case 17:case"end":return b.stop()}}),_callee,null,[[3,,14,17]])})));return function(t){return e.apply(this,arguments)}}(),this.init=function(){var t,n,a,i,s,l,c,p,f,v,h,b,m;this.physicalthingReferenceTileId=null!==(t=null===(n=e.form.value())||void 0===n?void 0:n.physicalthingReferenceTileId)&&void 0!==t?t:"",this.observationReferenceTileId=null!==(a=null===(i=e.form.value())||void 0===i?void 0:i.observationReferenceTileId)&&void 0!==a?a:"",this.datasetId=null!==(s=null===(l=e.form.value())||void 0===l?void 0:l.datasetId)&&void 0!==s?s:"",this.datasetName(null!==(c=null===(p=e.form.value())||void 0===p?void 0:p.datasetName)&&void 0!==c?c:""),this.defaultFormat(null===(f=e.form.value())||void 0===f?void 0:f.defaultFormat),this.datasetNameTileId=null!==(v=null===(h=e.form.value())||void 0===h?void 0:h.datasetNameTileId)&&void 0!==v?v:"",(null!==(b=null===(m=e.form.value())||void 0===m?void 0:m.files)&&void 0!==b?b:[]).forEach((function(e){d.files.push(e)}))},this.init(),this.uniqueidClass=t.pureComputed((function(){return"unique_id_"+d.uniqueId})),e.form.reset=this.reset=function(){var t;d.datasetName(null===(t=e.form.value())||void 0===t?void 0:t.datasetName)},this.dirty=e.form.dirty,this.datasetName.subscribe((function(t){var n;e.form.dirty(t!==(null===(n=e.form.value())||void 0===n?void 0:n.datasetName)&&d.files().length>0)})),this.files.subscribe((function(t){e.form.dirty(!1)})),this.saveDatasetFile=function(e,n){var a;(d.loading(!0),n)&&(d.loadingMessage("Uploading files (may take a few minutes)..."),t.unwrap(n.tileId)||(a={name:n.name,accepted:n.accepted,height:n.height,lastModified:n.lastModified,size:n.size,status:n.status,type:n.type,width:n.width,url:null,uploaded:t.observable(!1),file_id:null,index:0,content:window.URL.createObjectURL(n),error:n.error},e.append("file-list_".concat(f,"_data"),JSON.stringify(a)),e.append("file-list_".concat(f),n,n.name)))},this.saveFiles=function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(n){var s,f,v,b;return _regeneratorRuntime().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return file=null==n?void 0:n[0],m.prev=1,(s=new window.FormData).append("transaction_id",e.form.workflowId),s.append("instrument_id",p.instrument.value),s.append("observation_id",p.observationInstanceId),d.observationReferenceTileId&&s.append("observation_ref_tile",d.observationReferenceTileId),s.append("dataset",JSON.stringify({name:d.calcDatasetName(),tileId:d.datasetNameTileId,resourceInstanceId:d.datasetId,partResourceId:c,defaultFormat:t.unwrap(d.defaultFormat)})),d.loading(!0),d.loadingMessage("Saving dataset ".concat(d.calcDatasetName())),Array.from(n).forEach((function(e){d.saveDatasetFile(s,e)})),m.next=13,window.fetch(a.urls.upload_dataset_select_dataset_files_step,{method:"POST",credentials:"include",body:s,headers:{"X-CSRFToken":l.get("csrftoken")}});case 13:return f=m.sent,d.loading(!1),m.next=17,f.json();case 17:v=m.sent,d.observationReferenceTileId=v.observationReferenceTileId,i.datasetId=v.datasetResourceId,b=d.files().filter((function(e){return null==v.removedFiles.find((function(n){return t.unwrap(e.tileId)==t.unwrap(n.tileid)}))})),d.files([].concat(_toConsumableArray(b),_toConsumableArray(v.files))),d.datasetNameTileId=v.datasetNameTileId,m.next=29;break;case 25:m.prev=25,m.t0=m.catch(1),console.log("Tile update failed",m.t0),e.form.loading(!1);case 29:h(),d.snapshot=e.form.savedData(),e.form.complete(!0);case 32:case"end":return m.stop()}}),_callee2,null,[[1,25]])})));return function(e){return n.apply(this,arguments)}}(),this.dropzoneOptions={url:"arches.urls.root",dictDefaultMessage:"",autoProcessQueue:!1,addRemoveLinks:!0,uploadMultiple:!0,autoQueue:!1,clickable:".upload-dataset-files."+this.uniqueidClass(),previewsContainer:"#hidden-dz-previews",init:function(){d.dropzone=this,this.on("addedfiles",d.saveFiles),this.on("error",(function(e,t){e.error=t}))}};var h=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,t={physicalthingReferenceTileId:d.physicalthingReferenceTileId,observationReferenceTileId:d.observationReferenceTileId,datasetName:d.datasetName(),datasetNameTileId:d.datasetNameTileId,datasetId:d.datasetId,defaultFormat:d.defaultFormat(),files:d.files()},e.form.savedData(t),e.form.complete(!0),e.form.dirty(!1),n.next=13;break;case 7:return n.prev=7,n.t0=n.catch(0),console.log("Tile update failed",n.t0),e.pageVm.alert(new e.form.AlertViewModel("ep-alert-red","Error saving the Dataset")),e.form.loading(!1),n.abrupt("return");case 13:case"end":return n.stop()}}),_callee3,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()},template:d})}.apply(t,a),void 0===i||(e.exports=i)},89743:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            self.card.canAdd() ? self.card.selected(true) : self.card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !self.card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: self.card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n        \x3c!-- ko if: self.card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': self.card.selected}, click: function(){self.card.showForm(true);}, clickBubble: false" data-toggle="tooltip" data-original-title="$root.translations.addGnu"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: self.card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: self.card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !self.showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: self.card.widgets().length > 0 && self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.widgets()[0].label || self.card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[self.card.widgets()[0].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                inResourceEditor: self.inResourceEditor,\n                                value: $data.data[card.widgets()[0].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: self.card.widgets().length === 0 || !self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 && self.card.expanded() --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[self.card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n<div class="card-component" data-bind="css: card.model.cssclass">\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n    <div class="edit-message-container provisional-editor">\n        <span data-bind="text: $root.translations.showingEditsBy"></span>\n        <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n            <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n        </a>\n        \x3c!-- /ko--\x3e\n        \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n        \x3c!-- /ko--\x3e\n    </div>\n    \x3c!-- /ko--\x3e\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n    <div class="edit-message-container approved">\n        <div>\n            <span data-bind="text: $root.translations.showingRecentApprovedEdits"></span>\n        </div>\n    </div>\n    \x3c!-- /ko--\x3e\n\n\n\n    <div class="new-provisional-edit-card-container">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <div class="new-provisional-edits-list">\n            <div class="new-provisional-edits-header">\n                <div class="new-provisional-edits-title">\n                    <span data-bind="text: $root.translations.provisionalEdits"></span>\n                </div>\n                <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){provisionalTileViewModel.deleteAllProvisionalEdits()}">\n                    <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                </div>\n            </div>\n            \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n            <div class="new-provisional-edit-entry" data-bind="css: {\'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()}, click: function(){$parent.provisionalTileViewModel.selectProvisionalEdit(pe)}">\n                <div class="title">\n                    <div class="field">\n                        <span data-bind="text : pe.username"></span>\n                    </div>\n                    <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){$parent.provisionalTileViewModel.rejectProvisionalEdit(pe)}"></a>\n                </div>\n                <div class="field timestamp">\n                    <span data-bind="text : pe.displaydate">@</span>\n                    <span data-bind="text : pe.displaytimestamp"></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n        \x3c!-- /ko--\x3e\n\n\n        <div class="card">\n            \n            <div style="display: flex;">\n                <h4 class="card-title" data-bind="text: card.model.name()"></h4>\n\n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a data-bind="click: function () {card.model.get(\'helpactive\')(true) }" style="cursor:pointer;"> \n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n            </div>\n            <h5 class="card-instructions" data-bind="text: card.model.instructions"></h5>\n\n            \x3c!-- ko if: card.isFuncNode && card.isFuncNode()  --\x3e\n            <h4 class="is-function-node" data-bind="text: card.isFuncNode()"></h4>\n            \x3c!-- /ko --\x3e\n\n            \n            \x3c!-- ko if: card.showSummary() === false --\x3e\n            \x3c!-- ko if: card.widgets().length > 0 --\x3e\n            \n            <form class="widgets" style="margin-bottom: 20px;">\n                <div data-bind="foreach: {\n                        data:card.widgets, as: \'widget\'\n                    }">\n                    <div data-bind=\'component: {\n                        name: self.form.widgetLookup[widget.widget_id()].name,\n                        params: {\n                            widget: widget,\n                            formData: self.tile.formData,\n                            tile: self.tile,\n                            form: self.form,\n                            config: widget.configJSON,\n                            label: widget.label(),\n                            inResourceEditor: self.inResourceEditor,\n                            value: self.tile.data[widget.node_id()],\n                            node: self.form.nodeLookup[widget.node_id()],\n                            expanded: self.expanded,\n                            graph: self.form.graph,\n                            type: "resource-editor",\n                            disabled: !self.card.isWritable && !self.preview\n                        }\n                    }, css:{ "active": widget.selected, "hover": widget.hovered, "widget-preview": self.preview\n                }, click: function(data, e) { if (!widget.selected() && self.preview) {widget.selected(true);}\n            }, event: { mouseover: function(){ if (self.preview){widget.hovered(true) } }, mouseout: function(){ if (self.preview){widget.hovered(null)} } }, visible: widget.visible\'></div>\n                </div>\n            </form>\n            \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: showChildCards --\x3e\n            \n            <ul class="card-summary-section" data-bind="css: {disabled: !tile.tileid}">\n                \x3c!-- ko foreach: { data: tile.cards, as: \'card\' } --\x3e\n                <li class="card-summary" data-bind="visible: card.model.visible()">\n                    <a href="javascript:void(0)" data-bind="click: function () {\n                        if (card.parent.tileid) {\n                            card.canAdd() ? card.selected(true) : card.tiles()[0].selected(true);\n                        }\n                    }">\n                        <h4 class="card-summary-name" style="color: #2f527a">\n                            <span data-bind="text: card.model.name"></span>\n                            <i class="fa fa-plus-circle card-summary-add" data-bind="click: function(){$parent.createParentAndChild($parent.tile, card)}"></i>\n                        </h4>\n                    </a>\n                    <ul class="tile-summary-item" data-bind="foreach: {\n                            data: card.tiles,\n                            as: \'tile\'\n                        }">\n                        <li class="tile-summary">\n                            <a href="#" data-bind="click: function () { tile.selected(true) }">\n                                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                                <span data-bind="text: card.widgets()[0].label || card.model.name" class="tile-summary-label"></span>:\n                                <div style="display: inline;" data-bind="component: {\n                                    name: self.form.widgetLookup[card.widgets()[0].widget_id()].name,\n                                    params: {\n                                        tile: tile,\n                                        node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                        config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                        inResourceEditor: self.inResourceEditor,\n                                        label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                        value: tile.data[card.widgets()[0].node_id()],\n                                        type: \'resource-editor\',\n                                        state: \'display_value\'\n                                    }\n                                }"></div>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: card.widgets().length === 0 --\x3e\n                                <span data-bind="text: card.model.name"></span>\n                                \x3c!-- /ko --\x3e\n                            </a>\n                        </li>\n                    </ul>\n                </li>\n                \x3c!-- /ko --\x3e\n            </ul>\n            \n            \x3c!-- /ko --\x3e\n            \n            <div class="install-buttons">\n                \x3c!-- ko if: tile.tileid && self.deleteTile --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: self.deleteTile, css: {disabled: (!card.isWritable && !self.preview), \'btn-warning\': card.isWritable }">\n                    <span data-bind="text: $root.translations.deleteThisRecord"></span>\n                </button>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: tile.dirty() --\x3e\n                    \x3c!-- ko if: provisionalTileViewModel && !provisionalTileViewModel.tileIsFullyProvisional() && card.isWritable --\x3e\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: tile.reset">\n                        <span data-bind="text: $root.translations.cancelEdit"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {disabled: (!card.isWritable && !self.preview), \'btn-mint\': card.isWritable }">\n                        <span data-bind="text: $root.translations.saveEdit"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \n                \x3c!-- ko if: !tile.tileid && !showChildCards() --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {disabled: (!card.isWritable && !self.preview), \'btn-mint\': card.isWritable }">\n                    <span data-bind="text: $root.translations.add"></span>\n                </button>\n                \x3c!-- /ko --\x3e\n            </div>\n            \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.showSummary() === true --\x3e\n            \n            \n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n            <button class="btn btn-shim btn-labeled btn-lg fa fa-plus btn-primary" data-bind="click: function(){card.showForm(true)}">\n                <span data-bind="text: $root.translations.new"></span>\n            </button>\n            \n            \x3c!-- /ko --\x3e\n\n            <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                <div class="relative">\n                    <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () { card.model.get(\'helpactive\')(false) }"></a>\n                </div>\n                <div id="add-basemap-wizard-help-content">\n                    <div>\n                        <div class="panel-heading">\n                            <h3 class="panel-title help-panel-title" style="">\n                                <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                            </h3>\n                        </div>\n                        <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                        </div>\n                    </div>\n                </div>\n            </aside>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},76784:function(e){e.exports='\n\n\n\x3c!--ko if: params.context === \'render\' --\x3e\n<div class="">\n    \x3c!--ko if: params.selected() --\x3e\n    <div class="preview" style="width: 100%; height: 100%">\n        <img style="width: 100%" data-bind="attr: {src: ko.unwrap(displayContent.url)}">\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab\' --\x3e\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab-contents\' --\x3e\n\x3c!--/ko--\x3e\n\n'},53231:function(e){e.exports='\n\n\x3c!--ko if: params.context === \'render\' --\x3e\n<div style="height: 100%">\n    \x3c!--ko if: params.selected() --\x3e\n    <div class="preview" style="width: 100%; height: 100%">\n        <embed class="dz-img" style="height: calc(100vh - 100px); width: 100%; overflow:hidden" data-bind="attr: {src: ko.unwrap(displayContent.url)}">\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab\' --\x3e\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab-contents\' --\x3e\n\x3c!--/ko--\x3e\n\n'},91415:function(e,t,n){var a='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            card.canAdd() ? card.selected(true) : card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': card.highlight(), \'has-provisional-edits fa-file\': card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': card.highlight(), \'has-provisional-edits fa-file\': card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': card.selected}" data-toggle="tooltip" data-original-title="$root.translations.addNew"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" style="user-select: none;" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}, event: { auxclick: $parent.card.stageTile, contextmenu: function(a, e){e.preventDefault}}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'staged\': $parent.staging.indexOf($data.tileid) > -1, \'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: card.widgets().length > 0 && card.widgets()[$parent.displayWidgetIndex].visible --\x3e\n                        <span data-bind="text: card.widgets()[$parent.displayWidgetIndex].label || card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[card.widgets()[$parent.displayWidgetIndex].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[$parent.displayWidgetIndex].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[$parent.displayWidgetIndex].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[$parent.displayWidgetIndex].widget_id()].label,\n                                value: $data.data[card.widgets()[$parent.displayWidgetIndex].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: card.widgets().length === 0 || !card.widgets()[$parent.displayWidgetIndex].visible --\x3e\n                        <span data-bind="text: card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function(){ if (self.card.tiles().length) {\n        toggleTab(\'manage\');\n    }\n}, css: {\'disabled\': self.card.tiles().length === 0, \n    \'active\': activeTab() === \'manage\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.manage"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function(){ if (self.card.tiles().length) {\n    toggleTab(\'edit\');\n}\n}, css: {\'disabled\': self.card.tiles().length === 0, \n    \'active\': activeTab() === \'edit\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\x3c!--ko foreach: fileFormatRenderers--\x3e\n        \x3c!--ko if: ko.unwrap($parent.displayContent) && $parent.displayContent().renderer && ($parent.displayContent().renderer.id === $data.id) && $parent.rendererComponentName --\x3e\n            \x3c!-- ko component: {\n                name: $parent.rendererComponentName,\n                params: {\n                    fileViewer: $parent,\n                    card: $parent.card,\n                    selected: $parent.selected,\n                    state: $data.state,\n                    displayContent: ko.unwrap($parent.displayContent),\n                    context: \'tab\'\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n    \x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n\n        \n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko if: activeTab() === \'manage\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: \'Manage Files/Loaders\'"></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n\n<div class="file-workbench-filter">\n    <h2 class="file-workbench-filter-header">\n        <span data-bind="text: $root.translations.fileFilter"></span>\n    </h2>\n    <input type="text" class="form-control" style="width: 100%; height:initial" data-bind="\n            attr: { placeholder: $root.translations.egText }, \n            textInput: filter\n        ">\n    <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n</div>\n<div class="file-workbench-files">\n\x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n    \x3c!--ko if: $parent.getUrl(tile) && ($parent.filter().length === 0 || $parent.isFiltered(tile)) --\x3e\n    <div class="file-workbench-file" style="display: inline-flex;" data-bind="css: {\'staged\': $parent.card.staging.indexOf(tile.tileid) > -1}, click: $parent.card.stageTile">\n    <i role="presentation" data-bind="class: $parent.getUrl(tile).iconclass || \'fa fa-file\'"></i>\n    <div class="file-name" data-bind="text: $parent.getUrl(tile).name"></div>\n    </div>\n    \x3c!--/ko--\x3e\n\x3c!-- /ko --\x3e\n</div>\n<div class="file-workbench-filecount" style="display:inline-flex; justify-content: space-between; width: 100%">\n    <div style="display: inline-flex; justify-content: space-between;">\n    <div data-bind=\'text: card.tiles().length + " " + $root.translations.filesUploaded\'></div>\n    <div style="padding-left: 15px;" data-bind=\'text: card.staging().length + " " + $root.translations.filesSelected\'></div>\n    </div>\n    <div data-bind="dropzone: dropzoneOptions">\n        <button type="button" class="btn-file-select fileinput-button dz-clickable" style="width: 65px; margin: 0;" data-bind="css: uniqueidClass">\n            <div data-bind="text: $root.translations.addFiles"></div>\n        </button>\n    </div>\n</div>\n<div class="file-workbench-button-container">\n    <div class="file-workbench-buttons">\n        <button style="width: 50%; margin-right: 2px;" class="btn btn-md btn-primary" data-bind="click: function(){stageFiltered()}"><i class="fa fa-check-square"></i>\n            <span data-bind="text: $root.translations.selectAll"></span>\n        </button>\n        <button style="width: 50%; margin-left: 2px;" class="btn btn-md btn-primary" data-bind="click: function(){clearStaging()}, css: {\n            disabled: card.staging().length === 0\n        }"><i class="fa fa-eraser"></i>\n            <span data-bind="text: $root.translations.clearAll"></span>\n        </button>\n    </div>\n</div>\n\n<div class="file-workbench-selected-buttons" data-bind="visible: card.staging().length > 0">\n    <button class="btn btn-lg btn-workbench btn-warning" data-bind="click: function(){removeTiles()}"><i class="fa fa-trash"></i>\n        <span data-bind="text: $root.translations.deleteSelected"></span>\n    </button>\n    <button class="btn btn-lg btn-workbench btn-primary" data-bind="click: function(){downloadSelection()}"><i class="fa fa-download"></i>\n        <span data-bind="text: $root.translations.downloadSelected"></span>\n    </button>\n</div>\n\n<div class="col-xs-12 pad-no crud-widget-container">\n    <h2 class="file-workbench-filter-header">\n        <span data-bind="text: $root.translations.loader"></span>\n    </h2>\n    <input style="display:inline-block;" data-bind="select2Query: {\n        select2Config: {\n            clickBubble: true,\n            disabled: false,\n            data: fileFormatRenderers,\n            value: managerRenderer,\n            allowClear: false,\n            multiple: false,\n            placeholder: $root.translations.fileRenderer}}">\n    <div style="padding-top: 10px">\n        <button style="margin-right: 3px;" class="btn btn-lg btn-workbench btn-primary" data-bind="click: function(){$parent.applyRendererToStaged($parent.getFileFormatRenderer(managerRenderer()))}"><i class="fa fa-gears"></i>\n            <span data-bind="text: $root.translations.applyToSelectedFiles"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko--\x3e\n\n\x3c!--ko if: activeTab() === \'edit\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n\n<div class="workbench-card-sidepanel-body">\n<div class="file-workbench-filter">\n    <h2 class="file-workbench-filter-header">\n        <span data-bind="text: $root.translations.fileFilter"></span>\n    </h2>\n    <input type="text" class="form-control" style="width: 100%; height:initial" data-bind="\n            attr: { placeholder: $root.translations.egText }, \n            textInput: filter\n        ">\n    <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n</div>\n<div class="file-workbench-files">\n\x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n    \x3c!--ko if: $parent.getUrl(tile) && ($parent.filter().length === 0 || $parent.isFiltered(tile)) --\x3e\n    <div class="file-workbench-file" style="display: inline-flex;" data-bind="css: {\'selected-photo\': ko.unwrap(selected)}, click: $parent.selectItem, scrollToFile: $parent.displayContent() && $parent.displayContent().tile === tile ? $parent.displayContent().tile : undefined, container: \'.file-workbench-files\'">\n    <i role="presentation" data-bind="class: $parent.getUrl(tile).iconclass || \'fa fa-file\'"></i>\n    <div class="file-name" data-bind="text: $parent.getUrl(tile).name"></div>\n    </div>\n    \x3c!--/ko--\x3e\n\x3c!-- /ko --\x3e\n</div>\n<div class="file-workbench-filecount" data-bind=\'text: card.tiles().length + " " + $root.translations.filesUploaded\'></div>\n\n<div data-bind="css: card.model.cssclass">\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n    <div class="edit-message-container">\n        <span data-bind="text: $root.translations.showingEditsBy"></span>\n        <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n            <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n        </a>\n        \x3c!-- /ko--\x3e\n        \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n        <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n        \x3c!-- /ko--\x3e\n    </div>\n    \x3c!-- /ko--\x3e\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n    <div class="edit-message-container approved">\n        <span data-bind="text: $root.translations.showingMostRecentApprovedEdits"></span>\n    </div>\n    \x3c!-- /ko--\x3e\n\n    <div class="new-provisional-edit-card-container">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <div class="new-provisional-edits-list">\n            <div class="new-provisional-edits-header">\n                <div class="new-provisional-edits-title">\n                    <span data-bind="text: $root.translations.provisionalEdits"></span>\n                </div>\n                <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                        provisionalTileViewModel.deleteAllProvisionalEdits();\n                    }"><span data-bind="text: $root.translations.deleteAllEdits"></span></div>\n            </div>\n            \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n            <div class="new-provisional-edit-entry" data-bind="css: {\n                    \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                }, click: function(){\n                    $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                }">\n                <div class="title">\n                    <div class="field">\n                        <span data-bind="text : pe.username"></span>\n                    </div>\n                    <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                        $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                    }"></a>\n                </div>\n                <div class="field timestamp">\n                    <span data-bind="text : pe.displaydate">@</span>\n                    <span data-bind="text : pe.displaytimestamp"></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n        \x3c!-- /ko--\x3e\n\n        <div class="card">\n            \n            \x3c!-- ko if: card.model.helpenabled --\x3e\n            <span>\n                <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                    card.model.get(\'helpactive\')(true)\n                }" style="cursor:pointer;">\n                    <span data-bind="text: $root.translations.help"></span>\n                    <i class="fa fa-question-circle"></i>\n                </a>\n            </span>\n            \x3c!-- /ko --\x3e\n            <h5 data-bind="text: card.model.instructions"></h5>\n            \n            \x3c!-- ko if: card.widgets().length > 0 --\x3e\n            \n            \x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n                \x3c!--ko if: $parent.getUrl(tile) && tile.selected() --\x3e\n            <form class="widgets" style="margin-bottom: 20px;">\n                <div data-bind="foreach: {\n                        data: $parent.card.widgets, as: \'widget\'\n                    }">\n                    \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) !== \'file-list\' --\x3e\n                    <div data-bind=\'component: {\n                        name: self.form.widgetLookup[widget.widget_id()].name,\n                        params: {\n                            formData: tile.formData,\n                            tile: tile,\n                            form: self.form,\n                            config: widget.configJSON,\n                            label: widget.label(),\n                            value: tile.data[widget.node_id()],\n                            node: self.form.nodeLookup[widget.node_id()],\n                            expanded: self.expanded,\n                            graph: self.form.graph,\n                            type: "resource-editor",\n                            disabled: !self.card.isWritable && !self.preview\n                        }\n                    }, css:{\n                        "active": widget.selected,\n                        "hover": widget.hovered,\n                        "widget-preview": self.preview\n                    }, click: function(data, e) {\n                        if (!widget.selected() && self.preview) widget.selected(true);\n                    }, event: {\n                        mouseover: function(){\n                            if (self.preview) widget.hovered(true);\n                        },\n                        mouseout: function(){\n                            if (self.preview) widget.hovered(null);\n                        }\n                    }, visible: widget.visible\'>\n                </div>\n                \x3c!--/ko--\x3e\n                </div>\n            </form>\n            \x3c!--/ko--\x3e\n        \x3c!-- /ko --\x3e\n\n            \n            \x3c!-- /ko --\x3e\n            \n            \x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n                \x3c!--ko if: $parent.getUrl(tile) && tile.selected()--\x3e\n            <div class="install-buttons">\n                \x3c!-- ko if: tile && self.deleteTile --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: $parent.removeTile, css: {\n                    disabled: (!$parent.card.isWritable && !self.preview),\n                    \'btn-warning\': $parent.card.isWritable\n                }"><span data-bind="text: $root.translations.delete"></span></button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: tile.dirty() --\x3e\n                    \x3c!-- ko if: $parent.provisionalTileViewModel && !$parent.provisionalTileViewModel.tileIsFullyProvisional() && $parent.card.isWritable --\x3e\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: function(){tile.reset()}">\n                        <span data-bind="text: $root.translations.cancel"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: tile.save, css: {\n                        disabled: (!$parent.card.isWritable && !self.preview),\n                        \'btn-mint\': $parent.card.isWritable\n                    }"><span data-bind="text: $root.translations.save"></span></button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: !tile.tileid --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                    disabled: (!$parent.card.isWritable && !self.preview),\n                    \'btn-mint\': $parent.card.isWritable\n                }"><span data-bind="text: $root.translations.add"></span></button>\n                \x3c!-- /ko --\x3e\n            </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n\n            \n\n            <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                <div class="relative">\n                    <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(false);\n                    }"></a>\n                </div>\n                <div id="add-basemap-wizard-help-content">\n                    <div>\n                        <div class="panel-heading">\n                            <h3 class="panel-title help-panel-title">\n                                <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                            </h3>\n                        </div>\n                        <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                        </div>\n                    </div>\n                </div>\n            </aside>\n        </div>\n    </div>\n</div>\n</div>\n\n\x3c!--/ko--\x3e\n\n\x3c!--ko foreach: fileFormatRenderers--\x3e\n        \x3c!--ko if: ko.unwrap($parent.displayContent) && $parent.displayContent().renderer && ($parent.displayContent().renderer.id === $data.id) && $parent.rendererComponentName --\x3e\n    \x3c!-- ko component: {\n        name: $parent.rendererComponentName,\n        params: {\n            fileViewer: $parent,\n            card: $parent.card,\n            selected: $parent.selected,\n            state: $data.state,\n            displayContent: $parent.displayContent,\n            context: \'tab-contents\'\n        }\n    } --\x3e \x3c!-- /ko --\x3e\n    \x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n\n\n        \n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko if: card.widgets().length > 0 --\x3e\n<div>\n    <div class="card-display-panel">\n        <div>\n            <div id="hidden-dz-previews" style="display:none"></div>\n            \x3c!--ko if: displayContent() --\x3e\n                        \x3c!--ko foreach: fileFormatRenderers--\x3e\n                            \x3c!--ko if: $data.id && $parent.displayContent().renderer && $parent.displayContent().renderer.id === $data.id && $parent.rendererComponentName --\x3e\n                                \x3c!-- ko component: {\n                                    name: $parent.rendererComponentName,\n                                    params: {\n                                        fileViewer: $parent,\n                                        card: $parent.card,\n                                        selected: $parent.selected,\n                                        state: $data.state,\n                                        displayContent: $parent.displayContent,\n                                        context: \'render\',\n                                        loading: $parent.loading\n                                        }\n                                    } --\x3e \n                                \x3c!-- /ko --\x3e\n                            \x3c!--/ko--\x3e\n                        \x3c!--/ko--\x3e\n                    \x3c!--ko if: !$parent.displayContent().renderer || $parent.displayContent().validRenderer() === false --\x3e\n                    <div class="file-chart-upload-panel">\n                        <div class="gallery-controls new-tile">\n                            <div class="dropzone-photo-upload">\n                                <div class="file-select-window">\n                                    \x3c!--ko if: $parent.displayContent().availableRenderers.length === 0 --\x3e\n                                    <div class="bord-top file-select" style="padding-bottom: 90px;">\n\n                                        \x3c!-- Image --\x3e\n                                        <div class="img-lg img-circle rr-splash-img-container">\n                                            <img class="rr-splash-img" src="'+n(5797)(n(87870))+'" alt="Resource Editor">\n                                        </div>\n\n                                        \x3c!-- Splash Title --\x3e\n                                        <h2 class="rr-splash-title">\n                                            <span data-bind="text: $root.translations.unableToDisplaySelectedFile"></span>\n                                        </h2>\n\n                                        \x3c!-- Splash Instructions --\x3e\n                                        <h3 class="rr-splash-description">\n                                            <span data-bind="text: $root.translations.fileDisplayErrorMessage1"></span>\n                                        </h3>\n\n                                        \x3c!-- Splash Instructions --\x3e\n                                        <h3 class="rr-splash-description">\n                                            <span data-bind="text: $root.translations.fileDisplayErrorMessage2"></span>\n                                        </h3>\n\n                                        \x3c!-- Splash Instructions --\x3e\n                                        <h3 class="rr-splash-description">\n                                            <span data-bind="text: $root.translations.fileDisplayErrorMessage3"></span>\n                                        </h3>\n                                    </div>\n                                    \x3c!--/ko--\x3e\n                                    \n                                    \x3c!--ko if: $parent.displayContent().availableRenderers.length > 0 --\x3e\n                                    <div class="bord-top file-select loader-select">\n                                        <div class="">\n                                            \x3c!--ko if: $parent.displayContent().validRenderer() === false --\x3e\n                                            <h4 class="loader-error-message">\n                                                <span data-bind="text: $root.translations.fileLoaderParseErrorMessage + \' \'"></span>\n                                                <span data-bind="text:$parent.displayContent().renderer.title"></span>\n                                                <span data-bind="text: \' \' + $root.translations.loaderLowercase"></span>\n                                            </h4>\n                                            \x3c!--/ko--\x3e\n                                            \n                                            <h2>\n                                                <span data-bind="text: $root.translations.selectFileLoader"></span>\n                                            </h2>\n                                            <h4>\n                                                <span data-bind="text: $root.translations.selectLoaderMessage"></span>\n                                            </h4>\n                                            <div style="display: flex; flex-flow: wrap; padding: 15px 25px;">\n\n                                            \x3c!--ko foreach: $parent.displayContent().availableRenderers --\x3e\n                                            <div>\n                                                <div class="r-grid-item relative" style="border: 1px solid #c4c4c4">\n                                                    <div class="" style="display:flex; flex-direction: column; background-color: #fdfdfd">\n                                                        <h4 class="r-select-title" data-bind="text: $data.title"></h4>\n                                                    </div>\n                                                    <div>\n                                                        <div class="r-select-card" style="color: #30517a; background-color: #fdfdfd">\n                                                            <div class="r-select-circle loader-button" style="top: 55px">\n                                                                <span><i data-bind="attr:{class: ($data.iconclass +\' r-select-icon\')}" class="fa fa fa-user r-select-icon"></i></span>\n                                                            </div>\n                                                            <div class="r-desc-container">\n                                                                <p data-bind="text: $data.description" style="color: #30517a; background-color: #fdfdfd" class="r-select-desc"></p> \n                                                            </div>  \n                                                        </div>\n                                                    </div>\n                                    \n                                                    \x3c!-- card Tools --\x3e\n                                                    <div class="r-select-card-footer">\n                                                        <div class="">\n                                                            <div data-bind="click: function(){$parent.applyRendererToSelected($data)}" style="border-top: 1px solid #c4c4c4;" class="btn btn-primary btn-resource-select" role="button">\n                                                                <span data-bind="text: $root.translations.select"></span>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            \x3c!--/ko--\x3e\n                                        </div>\n                                    </div>\n                                    <br>  \n                                </div>\n                                <div class="file-upload-footer">\n                                    <span class="loader-selector" data-bind="component: { name: \'views/components/simple-switch\', params: {value: applyToAll, config:{label: $root.translations.applySameLoaderToAll}}}"></span>\n                                </div>\n                                \x3c!--/ko--\x3e\n                               </div>\n                    \n                            </div>\n                        </div>\n                    \n                    </div>\n\n                        \x3c!--/ko--\x3e\n                    \x3c!--/ko--\x3e\n\n        </div>\n    </div>\n\n    \x3c!--ko if: self.displayContent() === undefined --\x3e\n    <div class="file-chart-upload-panel">\n        <div class="gallery-controls new-tile">\n            <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n                <div class="file-select-window">\n                   <div class="bord-top pad-ver file-select">\n                       <div class="" style="padding: 5px">\n                            <h2>\n                                <span data-bind="text: $root.translations.uploadFiles"></span>\n                            </h2>\n                            <h4>\n                                <span data-bind="text: $root.translations.dropzoneFileUploadCaption"></span>\n                            </h4>\n                        </div>\n                        <button type="button" class="btn btn-lg btn-file-select fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                            <i class="fa fa-file"></i>\n                            <span data-bind="text: $root.translations.selectFiles"></span>\n                        </button>\n                        <br>\n                        <div style="padding: 10px">\n                            <span data-bind="text: $root.translations.fileUploadOptional + \' \'"></span>\n                            <span data-bind="text: $root.translations.optional + \'.\'"><strong></strong></span>\n                            <br>\n                            <span data-bind="text: $root.translations.fileUploadNumberSizeDesc"></span>\n                        </div>\n\n                   </div>\n                   <div class="file-upload-footer">\n                       \x3c!-- ko if: acceptedFiles() !== null --\x3e\n                       <span data-bind="text: (\'The following file formats may be uploaded: \' + acceptedFiles())"></span>\n                       \x3c!-- /ko --\x3e\n                       \x3c!-- ko if: !acceptedFiles() --\x3e\n                       <span data-bind="text: $root.translations.imageUploadFormatDesc"></span>\n                       \x3c!-- /ko --\x3e\n                   </div>\n               </div>\n\n            </div>\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n\n</div>\n\x3c!-- /ko --\x3e\n\n</div>\n</div>\n\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n';e.exports=a},2147:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            selectGroupCard();\n        }\n    }">\n        \x3c!-- ko if: !card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': card.highlight(), \'has-provisional-edits fa-file\': card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': card.highlight(), \'has-provisional-edits fa-file\': card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': card.selected}" data-toggle="tooltip" data-original-title="$root.translations.addNew"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        \x3c!-- ko foreach: {data: sortedWidgetIds, as: \'nodeId\'} --\x3e\n        \x3c!-- ko let: $parent.getDataForDisplay(nodeId) --\x3e \n        \x3c!-- ko if: widget.visible --\x3e\n        \x3c!-- the let statement above returns an object of the form {widget: null, tile: null: tileData: null, card: null} --\x3e\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.cards.length > 0 && expanded), \'jstree-closed\' : (card.cards.length > 0 && !expanded()), \'jstree-leaf\': card.cards.length === 0, \'hide-background\': !self.showGrid()}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { $parent.selectGroupCard()}, css:{\'jstree-clicked\': card.selected, \'child-selected\': card.selected(), \'filtered-leaf\': card.highlight()}">\n                    <i class="fa fa-file" role="presentation" data-bind="css:{\'has-provisional-edits\': tile.hasprovisionaledits()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: card.widgets().length > 0 && card.widgets()[0].visible --\x3e\n                        <span data-bind="text: card.widgets()[0].label || card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[widget.widget_id()].name,\n                            params: {\n                                tile: tile,\n                                node: self.form.nodeLookup[widget.node_id()],\n                                config: widget.configJSON,\n                                label: widget.label(),\n                                value: tile.data[widget.node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: card.widgets().length === 0 || !card.widgets()[0].visible --\x3e\n                        <span data-bind="text: card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: card.cards.length > 0 --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: card.cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n    </a>\n\n    \x3c!-- ko if: self.card.cards().length > 0 || self.card.widgets().length > 0 --\x3e\n    <ul data-bind="sortable: {\n                data: sortedWidgetIds,\n                as: \'nodeId\',\n                beforeMove: self.beforeMove,\n                afterMove: self.afterMove\n            }" class="jstree-children card-designer-tree" aria-expanded="true">\n        <div>\n            \x3c!-- ko let: {widget:$parent.widgetInstanceDataLookup[nodeId]} --\x3e\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function(d, e) {widget.selected(true); e.stopPropagation(); }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n            \x3c!-- /ko --\x3e\n        </div>\n       \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n<div class="card-component" data-bind="css: card.model.cssclass">\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n    <div class="edit-message-container">\n        <span data-bind="text: $root.translations.showingEditsBy"></span>\n        <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n            <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n        </a>\n        \x3c!-- /ko--\x3e\n        \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n        \x3c!-- /ko--\x3e\n    </div>\n    \x3c!-- /ko--\x3e\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n    <div class="edit-message-container approved">\n        <span data-bind="text: $root.translations.showingMostRecentApprovedEdits"></span>\n    </div>\n    \x3c!-- /ko--\x3e\n\n\n\n    <div class="new-provisional-edit-card-container">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <div class="new-provisional-edits-list">\n            <div class="new-provisional-edits-header">\n                <div class="new-provisional-edits-title">\n                    <span data-bind="text: $root.translations.provisionalEdits"></span>\n                </div>\n                <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){provisionalTileViewModel.deleteAllProvisionalEdits()}">\n                    <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                </div>\n            </div>\n            \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n            <div class="new-provisional-edit-entry" data-bind="css: {\'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()}, click: function(){$parent.provisionalTileViewModel.selectProvisionalEdit(pe)}">\n                <div class="title">\n                    <div class="field">\n                        <span data-bind="text : pe.username"></span>\n                    </div>\n                    <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){$parent.provisionalTileViewModel.rejectProvisionalEdit(pe)}"></a>\n                </div>\n                <div class="field timestamp">\n                    <span data-bind="text : pe.displaydate">@</span>\n                    <span data-bind="text : pe.displaytimestamp"></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n        \x3c!-- /ko--\x3e\n\n\n        <div class="card">\n            \n            <div style="display: flex;">\n                <h4 class="card-title" data-bind="text: card.model.name"></h4>\n                \x3c!-- ko if: card.isFuncNode && card.isFuncNode()  --\x3e\n                <h4 data-bind="text: card.isFuncNode()"></h4>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a data-bind="click: function () {card.model.get(\'helpactive\')(true) }" style="cursor:pointer;"> \n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n            </div>\n            <h5 data-bind="text: card.model.instructions"></h5>\n            \n            \x3c!-- ko if: card.widgets().length > 0 && !saving() --\x3e\n            \n            <div data-bind="foreach: {data: sortedWidgetIds, as: \'nodeId\'}">\n                <form class="widgets" style="margin-bottom: 20px;">\n                    <div data-bind="foreach: {\n                            data:$parent.widgetInstanceDataLookup[nodeId], as: \'widget\'\n                        }">\n                        <div data-bind=\'component: {\n                            name: self.form.widgetLookup[widget.widget_id()].name,\n                            params: {\n                                formData: self.getTile(widget.card.id).formData,\n                                tile: self.getTile(widget.card.id),\n                                form: self.form,\n                                config: widget.configJSON,\n                                label: widget.label(),\n                                value: self.getTile(widget.card.id).data[widget.node_id()],\n                                node: self.form.nodeLookup[widget.node_id()],\n                                expanded: self.expanded,\n                                graph: self.form.graph,\n                                type: "resource-editor",\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }, css:{ "active": widget.selected, "hover": widget.hovered, "widget-preview": self.preview\n                    }, click: function(data, e) { if (!widget.selected() && self.preview) {widget.selected(true);}\n                }, event: { mouseover: function(){ if (self.preview){widget.hovered(true) } }, mouseout: function(){ if (self.preview){widget.hovered(null)} } }, visible: widget.visible\'></div>\n                    </div>\n                </form>\n            </div>\n            \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: showChildCards --\x3e\n            \n            <ul class="card-summary-section" data-bind="css: {disabled: !tile.tileid}">\n                \x3c!-- ko foreach: { data: tile.cards, as: \'card\' } --\x3e\n                <li class="card-summary">\n                    <a href="javascript:void(0)" data-bind="click: function () {\n                        if (card.parent.tileid) {\n                            card.canAdd() ? card.selected(true) : card.tiles()[0].selected(true);\n                        }\n                    }">\n                        <h4 class="card-summary-name">\n                            <span data-bind="text: card.model.name"></span>\n                            \x3c!-- ko if: card.canAdd() && card.parent.tileid --\x3e\n                            <i class="fa fa-plus-circle card-summary-add"></i>\n                            \x3c!-- /ko --\x3e\n                        </h4>\n                    </a>\n                    <ul class="tile-summary-item" data-bind="foreach: {\n                            data: card.tiles,\n                            as: \'tile\'\n                        }">\n                        <li class="tile-summary">\n                            <a href="#" data-bind="click: function () { tile.selected(true) }">\n                                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                                <span data-bind="text: card.widgets()[0].label || card.model.name" class="tile-summary-label"></span>:\n                                <div style="display: inline;" data-bind="component: {\n                                    name: self.form.widgetLookup[card.widgets()[0].widget_id()].name,\n                                    params: {\n                                        tile: tile,\n                                        node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                        config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                        label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                        value: tile.data[card.widgets()[0].node_id()],\n                                        type: \'resource-editor\',\n                                        state: \'display_value\'\n                                    }\n                                }"></div>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: card.widgets().length === 0 --\x3e\n                                <span data-bind="text: card.model.name"></span>\n                                \x3c!-- /ko --\x3e\n                            </a>\n                        </li>\n                    </ul>\n                </li>\n                \x3c!-- /ko --\x3e\n            </ul>\n            \n            \x3c!-- /ko --\x3e\n            \n            <div class="install-buttons">\n                \x3c!-- ko if: previouslySaved() && self.deleteTiles --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: deleteTiles, css: {disabled: (!card.isWritable && !self.preview), \'btn-warning\': card.isWritable }">\n                        <span data-bind="text: $root.translations.deleteThisRecord"></span>\n                    </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: dirty() --\x3e\n                    \x3c!-- ko if: provisionalTileViewModel && !provisionalTileViewModel.tileIsFullyProvisional() && card.isWritable --\x3e\n                        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: resetTiles">\n                            <span data-bind="text: $root.translations.cancelEdit"></span>\n                        </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: previouslySaved --\x3e\n                        <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: saveTiles, css: {disabled: (!card.isWritable && !self.preview), \'btn-mint\': card.isWritable }">\n                            <span data-bind="text: $root.translations.saveEdit"></span>\n                        </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: !previouslySaved()--\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: saveTiles, css: {disabled: (!card.isWritable && !self.preview), \'btn-mint\': card.isWritable }">\n                        <span data-bind="text: $root.translations.add"></span>\n                    </button>\n                \x3c!-- /ko --\x3e\n            </div>\n            \n\n            <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                <div class="relative">\n                    <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () { card.model.get(\'helpactive\')(false) }"></a>\n                </div>\n                <div id="add-basemap-wizard-help-content">\n                    <div>\n                        <div class="panel-heading">\n                            <h3 class="panel-title help-panel-title" style="">\n                                <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                            </h3>\n                        </div>\n                        <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                        </div>\n                    </div>\n                </div>\n            </aside>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n            <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n            \x3c!-- ko if: hasTiles --\x3e\n            <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n            \x3c!-- ko if: reportExpanded() --\x3e\n            \x3c!-- ko foreach: { data: sortedWidgetIds, as: \'nodeId\' } --\x3e\n            \x3c!-- ko let: $parent.getDataForDisplay(nodeId) --\x3e \n            \x3c!-- the let statement above returns an object of the form {widget: null, tile: null: tileData: null, card: null} --\x3e\n                <div class="rp-card-section" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}">\n\n                    \n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko if: widget.visible --\x3e\n                                \x3c!-- ko component: {\n                                    name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                    params: {\n                                        config: widget.configJSON,\n                                        label: widget.get("label")(),\n                                        node: widget.node,\n                                        value: tile.data[widget.node.nodeid],\n                                        state: "report"\n                                    }\n                                } --\x3e\x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \n\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: card.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? card.cards : tile.cards, as: \'card\' } --\x3e\n                                \x3c!-- ko component: {\n                                    name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: !hasTiles && !self.preview --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <span data-bind="text: $root.translations.noDataAddedYet"></span>\n            <span data-bind="text: card.model.get(\'name\')"></span>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n<div>\n    <select class="resources" multiple="multiple" data-bind="\n            placeholder: $root.translations.chooseASiblingCard + \'...\',\n            selectedOptions: groupedCardIds, \n            options: siblingCards, \n            optionsText: \'name\', \n            optionsValue: \'id\', \n            chosen: {multiple: true, disable_search_threshold: 10, width: \'100%\'}\n        "></select>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},32441:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            self.card.canAdd() ? self.card.selected(true) : self.card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !self.card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: self.card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n        \x3c!-- ko if: self.card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': self.card.selected}, click: function(){self.card.showForm(true);}, clickBubble: false" data-toggle="tooltip" data-original-title="$root.translations.addGnu"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: self.card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: self.card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !self.showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: self.card.widgets().length > 0 && self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.widgets()[0].label || self.card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[self.card.widgets()[0].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                inResourceEditor: self.inResourceEditor,\n                                value: $data.data[card.widgets()[0].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: self.card.widgets().length === 0 || !self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 && self.card.expanded() --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[self.card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n\x3c!-- ko if: !$data.hideEditorTab() --\x3e\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\', \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\x3c!-- /ko --\x3e\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div data-bind="css: card.model.cssclass">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n        <div class="edit-message-container">\n            <span data-bind="text: $root.translations.showingEditsBy"></span>\n            <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n                <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n            </a>\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n            \x3c!-- /ko--\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n        <div class="edit-message-container approved">\n            <div>\n                <span data-bind="text: $root.translations.showingRecentApprovedEdits"></span>\n            </div>\n        </div>\n        \x3c!-- /ko--\x3e\n\n\n\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <div class="new-provisional-edits-list">\n                <div class="new-provisional-edits-header">\n                    <div class="new-provisional-edits-title">\n                        <span data-bind="text: $root.translations.provisionalEdits"></span>\n                    </div>\n                    <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                            provisionalTileViewModel.deleteAllProvisionalEdits();\n                        }">\n                        <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                    </div>\n                </div>\n                \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n                <div class="new-provisional-edit-entry" data-bind="css: {\n                        \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                    }, click: function(){\n                        $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                    }">\n                    <div class="title">\n                        <div class="field">\n                            <span data-bind="text : pe.username"></span>\n                        </div>\n                        <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                            $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                        }"></a>\n                    </div>\n                    <div class="field timestamp">\n                        <span data-bind="text : pe.displaydate">@</span>\n                        <span data-bind="text : pe.displaytimestamp"></span>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n            \x3c!-- /ko--\x3e\n\n            <div class="card">\n                \n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(true)\n                    }" style="cursor:pointer;">\n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n                <h5 data-bind="text: card.model.instructions"></h5>\n                \n                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                \n                <form class="widgets" style="margin-bottom: 20px;">\n                    <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'annotation\' --\x3e\n                        <div class="row widget-wrapper">\n                            <div class="form-group">\n                                <label class="control-label widget-input-label" for="" data-bind="text:widget.label"></label>\n                                <i data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[widget.node_id()].isrequired}"></i>\n\n                                <div class="col-xs-12">\n                                    <div class="style-tools-collapser" data-bind=" click: function() {\n                                        self.showStylingTools(!self.showStylingTools());\n                                    }">\n                                        <span data-bind="text: self.showStylingTools() ? $root.translations.hideStyleTools : $root.translations.showStyleTools"></span>\n                                        <i class="fa" data-bind="{\n                                            css: {\n                                                \'fa-caret-down\' : !self.showStylingTools(),\n                                                \'fa-caret-up\' : self.showStylingTools(),\n                                            }\n                                        }"></i>\n                                    </div>\n                                    <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                        <div class="style-tools-panel">\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.lineColor"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input class="form-control input-md widget-input" data-bind="\n                                                                attr: {placeholder: $root.translations.lineColor},\n                                                                colorPicker: {color: self.lineColor, format:\'hex\'}\n                                                            ">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.fillColor"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input class="form-control input-md widget-input" data-bind="\n                                                                attr: {placeholder: $root.translations.fillColor},\n                                                                colorPicker: {color: self.fillColor, format:\'hex\'}\n                                                            ">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.lineWidth"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.lineOpacity"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.pointRadius"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">\n                                                    <span data-bind="text: $root.translations.fillOpacity"></span>\n                                                </label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="map-card-feature-list">\n                                        <div class="add-new-feature" data-bind="visible: !self.disableDrawing()">\n                                            <select data-bind="\n                                                    placeholder: $root.translations.addANewFeature + \'...\',\n                                                    value: self.featureLookup[widget.node_id()].selectedTool,\n                                                    valueAllowUnset: true,\n                                                    options: [\n                                                        {\n                                                            value: \'\',\n                                                            text: \'\'\n                                                        },\n                                                        {\n                                                            value: \'draw_point\',\n                                                            text: $root.translations.mapAddPoint\n                                                        },\n                                                        {\n                                                            value: \'draw_line_string\',\n                                                            text: $root.translations.mapAddLine\n                                                        },\n                                                        {\n                                                            value: \'draw_polygon\',\n                                                            text: $root.translations.mapAddPolygon\n                                                        }\n                                                    ],\n                                                    optionsText: \'text\',\n                                                    optionsValue: \'value\',\n                                                    chosen: {\n                                                        \'width\': \'100%\',\n                                                        \'disable_search_threshold\': 10,\n                                                        \'allow_single_deselect\': true\n                                                    }\n                                                "></select>\n                                        </div>\n                                        <div class="add-new-feature" data-bind="visible: self.disableDrawing">\n                                            <select data-bind="\n                                                    placeholder: $root.translations.addANewFeature + \'...\',\n                                                    value: self.featureLookup[widget.node_id()].selectedTool,\n                                                    valueAllowUnset: true,\n                                                    options: [\n                                                        {\n                                                            value: \'\',\n                                                            text: \'\'\n                                                        },\n                                                        {\n                                                            value: \'draw_point\',\n                                                            text: $root.translations.mapAddPoint\n                                                        },\n                                                        {\n                                                            value: \'draw_line_string\',\n                                                            text: $root.translations.mapAddLine\n                                                        },\n                                                        {\n                                                            value: \'draw_polygon\',\n                                                            text: $root.translations.mapAddPolygon\n                                                        }\n                                                    ],\n                                                    optionsText: \'text\',\n                                                    optionsValue: \'value\',\n                                                    chosen: {\n                                                        disabled: true,\n                                                        \'width\': \'100%\',\n                                                        \'disable_search_threshold\': 10,\n                                                        \'allow_single_deselect\': true\n                                                    }\n                                                "></select>\n                                        </div>\n                                    </div>\n                                    <table class="table">\n                                        <tbody>\n                                            \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                                            <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(feature); }">\n                                                <td>\n                                                    <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                                </td>\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                        <span data-bind="text: $root.translations.edit"></span>\n                                                    </a>\n                                                </td>\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-trash map-card-feature-delete"></i>\n                                                        <span data-bind="text: $root.translations.delete"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            \x3c!-- /ko --\x3e\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) !== \'annotation\' --\x3e\n                        <div data-bind=\'component: {\n                            name: self.form.widgetLookup[widget.widget_id()].name,\n                            params: {\n                                formData: self.tile.formData,\n                                tile: self.tile,\n                                form: self.form,\n                                config: widget.configJSON,\n                                label: widget.label(),\n                                value: self.tile.data[widget.node_id()],\n                                node: self.form.nodeLookup[widget.node_id()],\n                                expanded: self.expanded,\n                                graph: self.form.graph,\n                                type: "resource-editor",\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }, css:{\n                            "active": widget.selected,\n                            "hover": widget.hovered,\n                            "widget-preview": self.preview\n                        }, click: function(data, e) {\n                            if (!widget.selected() && self.preview) widget.selected(true);\n                        }, event: {\n                            mouseover: function(){\n                                if (self.preview) widget.hovered(true);\n                            },\n                            mouseout: function(){\n                                if (self.preview) widget.hovered(null);\n                            }\n                        }, visible: widget.visible\'></div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </form>\n                \n                \x3c!-- /ko --\x3e\n                \n                <div class="install-buttons">\n                    \x3c!-- ko if: tile.tileid && self.deleteTile --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: self.deleteTile, css: {\n                        disabled: !card.isWritable && !self.preview,\n                        \'btn-warning\': card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.delete"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: tile.dirty() --\x3e\n                        \x3c!-- ko if: provisionalTileViewModel && !provisionalTileViewModel.tileIsFullyProvisional() && card.isWritable --\x3e\n                        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: tile.reset">\n                            <span data-bind="text: $root.translations.cancel"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: tile.tileid --\x3e\n                        <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                            disabled: !card.isWritable && !self.preview,\n                            \'btn-mint\': card.isWritable\n                        }">\n                            <span data-bind="text: $root.translations.save"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                        disabled: !card.isWritable && !self.preview,\n                        \'btn-mint\': card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.add"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n                \n\n                <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                    <div class="relative">\n                        <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                            card.model.get(\'helpactive\')(false);\n                        }"></a>\n                    </div>\n                    <div id="add-basemap-wizard-help-content">\n                        <div>\n                            <div class="panel-heading">\n                                <h3 class="panel-title help-panel-title" style="">\n                                    <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                </h3>\n                            </div>\n                            <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n            </div>\n        </div>\n    </div>\n\n\x3c!--/ko --\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultImageServiceUrl"></span>\n</div>\n<div class="col-xs-12 crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="attr:{placeholder: $root.translations.enterManifestUrl }, textInput: defaultManifest">\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},73616:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            self.card.canAdd() ? self.card.selected(true) : self.card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !self.card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: self.card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n        \x3c!-- ko if: self.card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': self.card.selected}, click: function(){self.card.showForm(true);}, clickBubble: false" data-toggle="tooltip" data-original-title="$root.translations.addGnu"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: self.card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: self.card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !self.showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: self.card.widgets().length > 0 && self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.widgets()[0].label || self.card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[self.card.widgets()[0].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                inResourceEditor: self.inResourceEditor,\n                                value: $data.data[card.widgets()[0].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: self.card.widgets().length === 0 || !self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 && self.card.expanded() --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[self.card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n\n\n<div class="workbench-card-wrapper">\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'basemap\');\n        }, css: {\n            \'active\': activeTab() === \'basemap\'\n        }">\n            <i class="fa fa-globe"></i>\n            <span data-bind="text: $root.translations.basemap" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'overlays\');\n        }, css: {\n            \'active\': activeTab() === \'overlays\'\n        }">\n            <i class="fa fa-list"></i>\n            <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'legend\');\n        }, css: {\n            \'active\': activeTab() === \'legend\'\n        }">\n            <i class="fa fa-list-alt"></i>\n            <span data-bind="text: $root.translations.legend" class="map-sidebar-text"></span>\n        </div>\n        \n\n    </div>\n    \x3c!--ko if: activeTab() --\x3e\n        <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n            \n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n    <div class="workbench-card-sidepanel-body">\n    <div data-bind="css: card.model.cssclass">\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n        <div class="edit-message-container" style="margin-left: -16px;">\n            <span data-bind="text: $root.translations.showingEditsBy"></span>\n            <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n                <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n            </a>\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n            \x3c!-- /ko--\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n        <div class="edit-message-container approved" style="margin-left: -16px;">\n            <div>\n                <span data-bind="text: $root.translations.showingMostRecentApprovedEdits"></span>\n            </div>\n        </div>\n        \x3c!-- /ko--\x3e\n\n\n\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <div class="new-provisional-edits-list" style="margin-right: -20px">\n                <div class="new-provisional-edits-header">\n                    <div class="new-provisional-edits-title">\n                        <span data-bind="text: $root.translations.provisionalEdits"></span>\n                    </div>\n                    <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                            provisionalTileViewModel.deleteAllProvisionalEdits();\n                        }">\n                        <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                    </div>\n                </div>\n                \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n                <div class="new-provisional-edit-entry" data-bind="css: {\n                        \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                    }, click: function(){\n                        $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                    }">\n                    <div class="title">\n                        <div class="field">\n                            <span data-bind="text : pe.username"></span>\n                        </div>\n                        <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                            $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                        }"></a>\n                    </div>\n                    <div class="field timestamp">\n                        <span data-bind="text : pe.displaydate">@</span>\n                        <span data-bind="text : pe.displaytimestamp"></span>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n            \x3c!-- /ko--\x3e\n\n            \x3c!-- ko if: geoJSONString() !== undefined --\x3e\n            <div class="card">\n                <div class="geojson-editor" data-bind="codemirror: {\n                    value: geoJSONString,\n                    mode: { name: \'javascript\', json: true },\n                    lineNumbers: true\n                }"></div>\n                <div class="display-in-workflow-step install-buttons">\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: function () {\n                        geoJSONString(undefined);\n                    }">\n                        <span data-bind="text: $root.translations.cancel"></span>\n                    </button>\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus btn-mint" data-bind="css: {\n                        disabled: geoJSONErrors().length !== 0\n                    }, click: updateGeoJSON">\n                        <span data-bind="text: $root.translations.update"></span>\n                    </button>\n                </div>\n                \x3c!-- ko if: geoJSONErrors().length !== 0 --\x3e\n                <div class="geojson-error-list">\n                    <span data-bind="text: $root.translations.geojsonErrors"></span>\n                    <ul>\n                        \x3c!-- ko foreach: geoJSONErrors() --\x3e\n                        <li data-bind="text: message"></li>\n                        \x3c!-- /ko--\x3e\n                    </ul>\n                </div>\n                \x3c!-- /ko--\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n\n            \n\n\x3c!-- ko if: coordinateEditing() --\x3e\n<div class="card map-coordinate-editor .fixed">\n    <div class="map-coordinate-editor-header">\n        <span data-bind="text: $root.translations.editCoordinates"></span>\n    </div>\n    <div class="map-coordinate-editor-crs-selector">\n        <dt>\n            <span data-bind="text: $root.translations.coordinateReference"></span>\n        </dt>\n        <select data-bind="\n            options: coordinateReferences,\n            optionsText: \'name\',\n            optionsValue: \'proj4\',\n            value: selectedCoordinateReference,\n            valueAllowUnset: false,\n            chosen: {\n                \'width\': \'210px\',\n                \'disable_search_threshold\': 10,\n                \'allow_single_deselect\': false\n            }\n        "></select>\n    </div>\n    <hr>\n    <div class="map-coordinate-editor-list" data-bind="sortable: {\n        data: coordinates\n    }">\n        <div class="map-coordinate-editor-pair">\n            \x3c!-- ko if: !$parent.hideNewCoordinates() --\x3e\n            <i class="fa fa-unsorted map-coordinate-editor-drag-handler"></i>\n            \x3c!-- /ko--\x3e\n            <span class="coordinate-entry-label">X:</span>\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[0]">\n            <span class="coordinate-entry-label">Y:</span>\n            \x3c!-- ko if: $parent.coordinates().length-1 === $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: $parent.focusLatestY, valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.coordinates().length-1 !== $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.allowDeleteCoordinates() --\x3e\n            <a href="javascript:void(0);" class="map-coordinate-editor-delete-button" data-bind="click: function() {\n                $parent.coordinates.remove($data);\n            }"><i class="fa fa-trash"></i></a>\n            \x3c!-- /ko--\x3e\n            <hr>\n        </div>\n    </div>\n    \x3c!-- ko if: !hideNewCoordinates() --\x3e\n    <div class="map-coordinate-editor-pair map-coordinate-editor-new-coordinates">\n        <i class="fa fa-plus"></i>\n        <span class="coordinate-entry-label">X:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: true, valueUpdate: \'keyup\', value: newX">\n        <span class="coordinate-entry-label">Y:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: newY">\n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-coordinate-editor-button-container">\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-search btn-mint" data-bind="click: showCoordinateFeature">\n            <span data-bind="text: $root.translations.showFeature"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: function() {\n            self.coordinateEditing(false);\n        }">\n            <span data-bind="text: $root.translations.done"></span>\n        </button>\n    </div>\n</div>\n\x3c!-- /ko--\x3e\n\n\n            \n\n\n\x3c!-- ko if: bufferNodeId() --\x3e\n<div class="card">\n    <div class="add-buffer-feature-header">\n        <span data-bind="text: $root.translations.addBufferFeature"></span>\n    </div>\n    <div class="add-buffer-feature-input">\n        <div>\n            <span data-bind="text: $root.translations.distance"></span>\n        </div>\n        <input type="number" step="any" class="form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: bufferDistance">\n    </div>\n    <div class="add-buffer-feature-input">\n        <div>\n            <span data-bind="text: $root.translations.units"></span>\n        </div>\n        <select data-bind="\n            options: [{\n                text: $root.translations.meters,\n                value: \'m\'\n            }, {\n                text: $root.translations.feet,\n                value: \'ft\'\n            }],\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            value: bufferUnits,\n            valueAllowUnset: false,\n            chosen: {\n                \'width\': \'100%\',\n                \'disable_search_threshold\': 10,\n                \'allow_single_deselect\': false\n            }\n        "></select>\n    </div>\n    \x3c!-- ko if: allowAddNew --\x3e\n    <div class="add-buffer-feature-input">\n        <input type="checkbox" data-bind="checked: bufferAddNew">\n        <span class="add-buffer-as-new-label">\n            <span data-bind="text: $root.translations.addAsNew"></span>\n            <span data-bind="text: card.model.get(\'name\')"></span>\n            <span>?</span>\n        </span>\n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-coordinate-editor-button-container">\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-search btn-mint" data-bind="click: function() {\n            bufferNodeId(null);\n        }">\n            <span data-bind="text: $root.translations.cancel"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: addBufferResult">\n            <span data-bind="text: $root.translations.addFeature"></span>\n        </button>\n    </div>\n</div>\n\x3c!-- /ko--\x3e\n\n\n\n            <div class="card" data-bind="visible: geoJSONString() === undefined && !coordinateEditing() && !bufferNodeId()">\n                \n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(true)\n                    }" style="cursor:pointer;">\n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n                <h5 data-bind="text: card.model.instructions"></h5>\n                \n                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                \n                <form class="widgets" style="margin-bottom: 20px;">\n                    <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'geojson-feature-collection\' --\x3e\n                        <div class="row widget-wrapper">\n                            <div class="form-group">\n                                <label class="control-label widget-input-label" for="" data-bind="text:widget.label"></label>\n                                <i data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[widget.node_id()].isrequired}"></i>\n\n                                <div class="col-xs-12">\n                                    <div class="map-card-feature-list">\n                                        <div class="add-new-feature">\n                                            <select data-bind="\n                                                    placeholder: $root.translations.addANewFeature + \'...\',\n                                                    value: self.featureLookup[widget.node_id()].selectedTool,\n                                                    valueAllowUnset: true,\n                                                    options: widget.drawTools,\n                                                    optionsText: \'text\',\n                                                    optionsValue: \'value\',\n                                                    chosen: {\n                                                        \'width\': \'100%\',\n                                                        \'disable_search_threshold\': 10,\n                                                        \'allow_single_deselect\': true\n                                                    }\n                                                "></select>\n                                        </div>\n                                        <div class="map-data-drop-area" data-bind="event: {\n                                            dragover: self.dropZoneOverHandler,\n                                            drop: self.dropZoneHandler,\n                                            click: self.dropZoneClickHandler,\n                                            dragenter: self.dropZoneEnterHandler,\n                                            dragleave: self.dropZoneLeaveHandler,\n                                            dragend: self.dropZoneLeaveHandler\n                                        }">\n                                            <span data-bind="text: $root.translations.dragGeoJsonKml + \'...\'"></span>\n                                        </div>\n                                        <div class="hidden-file-input">\n                                            <input type="file" accept=".json,.geojson,.kml" data-bind="event: {\n                                                change: self.dropZoneFileSelected\n                                            }">\n                                        </div>\n                                        \x3c!-- ko if: self.featureLookup[widget.node_id()].dropErrors().length !== 0 --\x3e\n                                        <div class="geojson-error-list">\n                                            <a href="javascript: void(0);" data-bind="click:function () {\n                                                self.featureLookup[widget.node_id()].dropErrors([]);\n                                            }">\n                                                <i class="fa fa-close"></i>\n                                            </a>\n                                            <span data-bind="text: $root.translations.followingErrorsOccurred"></span>\n                                            <ul>\n                                                \x3c!-- ko foreach: self.featureLookup[widget.node_id()].dropErrors() --\x3e\n                                                <li data-bind="text: message"></li>\n                                                \x3c!-- /ko--\x3e\n                                            </ul>\n                                        </div>\n                                        \x3c!-- /ko--\x3e\n                                        <table class="table">\n                                            <tbody>\n                                                \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                                                <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.fitFeatures([feature]) }">\n                                                    <td>\n                                                        <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                                    </td>\n                                                    <td class="map-card-feature-tool">\n                                                        <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature) }, clickBubble: false">\n                                                            <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                            <span data-bind="text: $root.translations.edit"></span>\n                                                        </a>\n                                                    </td>\n                                                    <td class="map-card-feature-tool">\n                                                        <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature) }, clickBubble: false">\n                                                            <i class="fa fa-trash map-card-feature-delete"></i>\n                                                            <span data-bind="text: $root.translations.delete"></span>\n                                                        </a>\n                                                    </td>\n                                                </tr>\n                                                \x3c!-- /ko --\x3e\n                                            </tbody>\n                                        </table>\n                                        <div class="map-card-zoom-tool">\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.editGeoJSON(self.featureLookup[widget.node_id()].features(), widget.node_id());\n                                            }">\n                                                <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.editGeoJson"></span>\n                                            </a>\n                                            |\n                                            \x3c!-- ko if: self.canEditCoordinates() --\x3e\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.coordinateEditing(true);\n                                            }">\n                                                <i class="fa fa-list map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.editCoordinates"></span>\n                                            </a>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: !self.canEditCoordinates() --\x3e\n                                            <span>\n                                                <i class="fa fa-list map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.editCoordinates"></span>\n                                            </span>\n                                            \x3c!-- /ko --\x3e\n                                            |\n                                            \x3c!-- ko if: self.bufferFeature() --\x3e\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.bufferNodeId(widget.node_id());\n                                            }">\n                                                <i class="fa fa-list map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.addBuffer"></span>\n                                            </a>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: !self.bufferFeature() --\x3e\n                                            <span>\n                                                <i class="fa fa-list map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.addBuffer"></span>\n                                            </span>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: self.featureLookup[widget.node_id()].features().length > 0 --\x3e\n                                            |\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.fitFeatures(self.featureLookup[widget.node_id()].features());\n                                            }">\n                                                <i class="fa fa-search map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.zoomToAll"></span>\n                                            </a>\n                                            \x3c!-- /ko --\x3e\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) !== \'geojson-feature-collection\' --\x3e\n                        <div data-bind=\'component: {\n                            name: self.form.widgetLookup[widget.widget_id()].name,\n                            params: {\n                                formData: self.tile.formData,\n                                tile: self.tile,\n                                form: self.form,\n                                config: widget.configJSON,\n                                label: widget.label(),\n                                value: self.tile.data[widget.node_id()],\n                                node: self.form.nodeLookup[widget.node_id()],\n                                expanded: self.expanded,\n                                graph: self.form.graph,\n                                type: "resource-editor",\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }, css:{\n                            "active": widget.selected,\n                            "hover": widget.hovered,\n                            "widget-preview": self.preview\n                        }, click: function(data, e) {\n                            if (!widget.selected() && self.preview) widget.selected(true);\n                        }, event: {\n                            mouseover: function(){\n                                if (self.preview) widget.hovered(true);\n                            },\n                            mouseout: function(){\n                                if (self.preview) widget.hovered(null);\n                            }\n                        }, visible: widget.visible\'></div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </form>\n                \n                \x3c!-- /ko --\x3e\n                \n                <div class="install-buttons">\n                    \x3c!-- ko if: tile.tileid && self.deleteTile --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: self.deleteTile, css: {\n                        disabled: (!card.isWritable && !self.preview),\n                        \'btn-warning\': card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.delete"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: tile.dirty() --\x3e\n                        \x3c!-- ko if: provisionalTileViewModel && !provisionalTileViewModel.tileIsFullyProvisional() && card.isWritable --\x3e\n                        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: tile.reset">\n                            <span data-bind="text: $root.translations.cancel"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: tile.tileid --\x3e\n                        <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                            disabled: (!card.isWritable && !self.preview),\n                            \'btn-mint\': card.isWritable\n                        }">\n                            <span data-bind="text: $root.translations.save"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: function() { if (card.isWritable && !self.preview) {\n                            self.updateTiles();\n                            self.saveTile();\n                        }},\n                        css: { disabled: (!card.isWritable || self.preview), \'btn-mint\': card.isWritable }">\n                        <span data-bind="text: $root.translations.add"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n                \n\n                <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                    <div class="relative">\n                        <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                            card.model.get(\'helpactive\')(false);\n                        }"></a>\n                    </div>\n                    <div id="add-basemap-wizard-help-content">\n                        <div>\n                            <div class="panel-heading">\n                                <h3 class="panel-title help-panel-title" style="">\n                                    <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                </h3>\n                            </div>\n                            <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n            </div>\n        </div>\n    </div>\n    </div>\n\x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'basemap\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.basemaps"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n\n                <div class="workbench-card-sidepanel-body">\n                <div class="basemap-listing-container">\n                \x3c!--ko foreach: basemaps --\x3e\n                    <div class="basemap-listing" data-bind="\n                        click: $parent.activeBasemap,\n                        css: {\'active-basemap\': $data === $parent.activeBasemap()}\n                        ">\n                        <i data-bind="css: icon" class="layer-listing-icon"></i>\n                        <span data-bind="text: name"></span>\n                    </div>\n                \x3c!--/ko --\x3e\n                </div>\n                </div>\n\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'overlays\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.overlays"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="overlays-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="overlay-listing" data-bind="css: {\'active-overlay\': onMap}">\n                        <div class="overlay-name" data-bind="\n                            click: function() {\n                                onMap(!onMap());\n                                updateParent($parent);\n                            }\n                        ">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        <div class="relative">\n                            <div class="overlay-opacity-control">\n                                <i class="fa fa-adjust"></i>\n                                <div class="overlay-opacity-slider">\n                                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'legend\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.legend"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="legend-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="legend-listing" data-bind="css: {\'hidden\': !onMap()}">\n                        <div class="legend-name">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        \x3c!--ko if: legend --\x3e\n                        <div class="legend-content" data-bind="html: legend"></div>\n                        \x3c!--/ko --\x3e\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n            \n\n        </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container" data-bind="mapboxgl: {\n            mapOptions: mapOptions,\n            afterRender: setupMap\n        }">\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n<div>\n    <div class="node-config-item">\n        <label class="control-label" for="">\n            <span data-bind="text: $root.translations.selectDrawingsMapSource"></span>\n        </label>\n        <input type="text" data-bind="textInput: selectSource" class="form-control input-md widget-input">\n    </div>\n    <div class="node-config-item">\n        <label class="control-label" for="">\n            <span data-bind="text: $root.translations.selectDrawingsMapSourceLayer"></span>\n        </label>\n        <input type="text" data-bind="textInput: selectSourceLayer" class="form-control input-md widget-input">\n    </div>\n    <div class="node-config-item">\n        <label class="control-label" for="">\n            <span data-bind="text: $root.translations.selectDrawingsText"></span>\n        </label>\n        <input type="text" data-bind="textInput: selectText" class="form-control input-md widget-input">\n    </div>\n    <div class="node-config-item">\n        <div class="control-label">\n            <span data-bind="text: $root.translations.mapCenterLongitude"></span>\n        </div>\n        <div class="col-xs-12 pad-no crud-widget-container">\n            <input type="number" id="" class="form-control input-md widget-input" data-bind="\n                    attr: {placeholder: $root.translations.longitudeXCoordinate},\n                    value: centerX, \n                    valueUpdate: \'keyup\'\n                ">\n        </div>\n    </div>\n    <div class="node-config-item">\n        <div class="control-label">\n            <span data-bind="text: $root.translations.mapCenterLatitude"></span>\n        </div>\n        <div class="col-xs-12 pad-no crud-widget-container">\n            <input type="number" id="" class="form-control input-md widget-input" data-bind="\n                    attr: {placeholder: $root.translations.latitudeYCoordinate},\n                    value: centerY, \n                    valueUpdate: \'keyup\'\n                ">\n        </div>\n    </div>\n    <div class="node-config-item">\n        <div class="control-label">\n            <span data-bind="text: $root.translations.defaultZoom"></span>\n        </div>\n        <div class="col-xs-12 pad-no crud-widget-container">\n            <input type="number" min="1" max="20" id="" class="form-control input-md widget-input" data-bind="\n                    attr: {placeholder: $root.translations.zoomLevel},\n                    value: zoom, \n                    valueUpdate: \'keyup\'\n                ">\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},97975:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            self.card.canAdd() ? self.card.selected(true) : self.card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !self.card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: self.card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n        \x3c!-- ko if: self.card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': self.card.selected}, click: function(){self.card.showForm(true);}, clickBubble: false" data-toggle="tooltip" data-original-title="$root.translations.addGnu"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: self.card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: self.card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !self.showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: self.card.widgets().length > 0 && self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.widgets()[0].label || self.card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[self.card.widgets()[0].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                inResourceEditor: self.inResourceEditor,\n                                value: $data.data[card.widgets()[0].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: self.card.widgets().length === 0 || !self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 && self.card.expanded() --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[self.card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'edit\');\n}, css: {\n    \'active\': activeTab() === \'edit\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'add\');\n}, css: {\n    \'active\': activeTab() === \'add\'\n}">\n    <i class="fa fa-plus"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.add"></span>\n</div>\n\n        \n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\n\x3c!--ko if: activeTab() === \'add\' --\x3e\n<div class="file-chart-upload-panel">\n    <div class="gallery-controls new-tile">\n        <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n            <div class="file-select-window">\n               <div class="bord-top pad-ver file-select">\n                   <div class="" style="padding: 5px">\n                        <h2>\n                            <span data-bind="text: $root.translations.uploadPhotographs"></span>\n                        </h2>\n                        <h4>\n                            <span data-bind="text: $root.translations.dragAndDropPhotosOnPanel"></span>\n                        </h4>\n                   </div>\n                   <button type="button" class="btn btn-lg btn-file-select fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                       <i class="fa fa-file"></i>\n                       <span data-bind="text: $root.translations.selectPhotographs"></span>\n                   </button>\n                   <br>\n                   <div style="padding: 10px">\n                        <p>\n                            <span data-bind="text: $root.translations.addingPhotosOptional"></span>\n                        </p>\n                        <p>\n                            <span data-bind="text: $root.translations.maxPhotoSizeWarning"></span>\n                        </p>\n                    </div>\n\n               </div>\n               <div class="file-upload-footer">\n                    <span data-bind="text: $root.translations.acceptedImageFormats"></span>\n               </div>\n           </div>\n\n        </div>\n    </div>\n</div>\n\x3c!--/ko--\x3e\n\n\n\x3c!--ko if: activeTab() === \'edit\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n\n<div class="workbench-card-sidepanel-body">\n<h5 class="workbench-tile-picker-label">\n    <span data-bind="text: $root.translations.imageList"></span>\n</h5>\n<div class="photo-workbench-photos">\n\x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n    \x3c!--ko if: $parent.getUrl(tile) --\x3e\n    <div class="photo-workbench-photo" data-bind="text: $index() + 1 + \' | \' + ($parent.getUrl(tile).name), click: $parent.photoGallery.selectItem, css: {\'selected-photo\': ko.unwrap(selected)}"></div>\n    \x3c!--/ko--\x3e\n\x3c!-- /ko --\x3e\n</div>\n\n<div data-bind="css: card.model.cssclass">\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n    <div class="edit-message-container">\n        <span data-bind="text: $root.translations.showingEditsBy"></span>\n        <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n            <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n        </a>\n        \x3c!-- /ko--\x3e\n        \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n        <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n        \x3c!-- /ko--\x3e\n    </div>\n    \x3c!-- /ko--\x3e\n\n    \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n    <div class="edit-message-container approved">\n        <div>\n            <span data-bind="text: $root.translations.showingMostRecentApprovedEdits"></span>\n        </div>\n    </div>\n    \x3c!-- /ko--\x3e\n\n    <div class="new-provisional-edit-card-container">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n        \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n        <div class="new-provisional-edits-list">\n            <div class="new-provisional-edits-header">\n                <div class="new-provisional-edits-title">\n                    <span data-bind="text: $root.translations.provisionalEdits"></span>\n                </div>\n                <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                        provisionalTileViewModel.deleteAllProvisionalEdits();\n                    }">\n                    <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                </div>\n            </div>\n            \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n            <div class="new-provisional-edit-entry" data-bind="css: {\n                    \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                }, click: function(){\n                    $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                }">\n                <div class="title">\n                    <div class="field">\n                        <span data-bind="text : pe.username"></span>\n                    </div>\n                    <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                        $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                    }"></a>\n                </div>\n                <div class="field timestamp">\n                    <span data-bind="text : pe.displaydate">@</span>\n                    <span data-bind="text : pe.displaytimestamp"></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n        \x3c!-- /ko--\x3e\n\n        <div class="card">\n            \n            \x3c!-- ko if: card.model.helpenabled --\x3e\n            <span>\n                <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                    card.model.get(\'helpactive\')(true)\n                }" style="cursor:pointer;">\n                    <span data-bind="text: $root.translations.help"></span>\n                    <i class="fa fa-question-circle"></i>\n                </a>\n            </span>\n            \x3c!-- /ko --\x3e\n            <h5 data-bind="text: card.model.instructions"></h5>\n            \n            \x3c!-- ko if: card.widgets().length > 0 --\x3e\n            \n            \x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n                \x3c!--ko if: $parent.getUrl(tile) && tile.selected()--\x3e\n            <form class="widgets" style="margin-bottom: 20px;">\n                <div data-bind="foreach: {\n                        data: $parent.card.widgets, as: \'widget\'\n                    }">\n                    \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) !== \'file-list\' --\x3e\n                    <div data-bind=\'component: {\n                        name: self.form.widgetLookup[widget.widget_id()].name,\n                        params: {\n                            formData: tile.formData,\n                            tile: tile,\n                            form: self.form,\n                            config: widget.configJSON,\n                            label: widget.label(),\n                            value: tile.data[widget.node_id()],\n                            node: self.form.nodeLookup[widget.node_id()],\n                            expanded: self.expanded,\n                            graph: self.form.graph,\n                            type: "resource-editor",\n                            disabled: !self.card.isWritable && !self.preview\n                        }\n                    }, css:{\n                        "active": widget.selected,\n                        "hover": widget.hovered,\n                        "widget-preview": self.preview\n                    }, click: function(data, e) {\n                        if (!widget.selected() && self.preview) widget.selected(true);\n                    }, event: {\n                        mouseover: function(){\n                            if (self.preview) widget.hovered(true);\n                        },\n                        mouseout: function(){\n                            if (self.preview) widget.hovered(null);\n                        }\n                    }, visible: widget.visible() && self.form.widgetLookup[widget.widget_id()].name !== "newfile-widget" && self.form.widgetLookup[widget.widget_id()].name !== "file-widget"\'>\n                    </div>\n                \x3c!--/ko--\x3e\n                </div>\n            </form>\n            \x3c!--/ko--\x3e\n        \x3c!-- /ko --\x3e\n\n            \n            \x3c!-- /ko --\x3e\n\n                    <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                        <div class="relative">\n                            <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                                card.model.get(\'helpactive\')(false);\n                            }"></a>\n                        </div>\n                        <div id="add-basemap-wizard-help-content">\n                            <div>\n                                <div class="panel-heading">\n                                    <h3 class="panel-title help-panel-title" style="">\n                                        <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                    </h3>\n                                </div>\n                                <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                                </div>\n                            </div>\n                        </div>\n                    </aside>\n                </div>\n            </div>\n        </div>\n    </div>\n            \n            \x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n                \x3c!--ko if: $parent.getUrl(tile) && tile.selected()--\x3e\n            <div class="display-in-workflow-step">\n                \x3c!-- ko if: tile && self.deleteTile --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: $parent.removeTile, css: {\n                    disabled: (!$parent.card.isWritable && !self.preview),\n                    \'btn-warning\': $parent.card.isWritable\n                }">\n                    <span data-bind="text: $root.translations.delete"></span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: tile.dirty() --\x3e\n                    \x3c!-- ko if: $parent.provisionalTileViewModel && !$parent.provisionalTileViewModel.tileIsFullyProvisional() && $parent.card.isWritable --\x3e\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: selected().reset">\n                        <span data-bind="text: $root.translations.cancel"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: tile.save, css: {\n                        disabled: (!$parent.card.isWritable && !self.preview),\n                        \'btn-mint\': $parent.card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.save"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: !tile.tileid --\x3e\n                <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                    disabled: (!$parent.card.isWritable && !self.preview),\n                    \'btn-mint\': $parent.card.isWritable\n                }">\n                    <span data-bind="text: $root.translations.add"></span>\n                </button>\n                \x3c!-- /ko --\x3e\n            </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n            \n\x3c!--/ko--\x3e\n\n\n        \n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko if: card.widgets().length > 0 --\x3e\n<div style="height: inherit; overflow: auto;">\n\n    <div style="height: 100%;" data-bind="style: {display: !!self.displayContent() ? \'inherit\' : \'none\'}">\n        <div id="hidden-dz-previews" style="display:none"></div>\n        <img class="dz-img dz-img-main" data-bind="attr: {src: ko.unwrap(displayContent)}">\n    </div>\n\n    <div style="position: absolute; bottom: 0px; width: 100%;" data-bind="style: {display: !!self.displayContent() ? \'inherit\' : \'none\'}">\n        <div class="thumbnail-gallery-container" data-bind="slide: showThumbnails, duration: 100, direction: {direction: \'down\'}, easing: \'slide\'">\n            <div class="show-thumbnails-btn open" data-bind="click: function(){showThumbnails(!showThumbnails())}, text: $root.translations.close"></div>\n            <div class="thumbnail-container" data-bind="gallery: photoGallery.pan, duration: 400, scrolldistance: 100, thumbnailclass: \'gallery-thumbnails\'">\n                <div class="thumbnail-gallery-controls right" data-bind="click: function(){photoGallery.updatePan(\'left\')}"><i class="fa fa-angle-left"></i></div>\n                <div class="gallery-thumbnails">\n                    \x3c!-- ko foreach: { data: card.tiles(), as: \'tile\'} --\x3e\n                    <div style="position: relative">\n                        \x3c!--ko if: $parent.getUrl(tile) --\x3e\n                        <div data-bind="click: $parent.removeTile, visible: ko.unwrap(selected)">\n                            <button class="btn btn-xs dz-cancel"><i class="ion ion-close"></i></button>\n                        </div>\n                        <img class="dz-img" data-bind="attr: {src: $parent.getUrl(tile).url !== undefined ? $parent.getUrl(tile).url : \'\' }, click: $parent.photoGallery.selectItem">\n                        \x3c!--/ko--\x3e\n                        \x3c!--ko if: $parent.getUrl(tile) === undefined --\x3e\n                        <div data-bind="click: $parent.removeTile, visible: ko.unwrap(selected)">\n                            <button class="btn btn-xs dz-cancel"><i class="ion ion-close"></i></button>\n                        </div>\n                        <img class="dz-img" data-bind="attr: {src: \'\' }, click: $parent.photoGallery.selectItem">\n                        \x3c!--/ko--\x3e\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n                <div class="thumbnail-gallery-controls left" data-bind="click: function(){photoGallery.updatePan(\'right\')}"><i class="fa fa-angle-right"></i></div>\n            </div>\n        </div>\n\n        <div class="show-thumbnails-btn closed" data-bind="click: function(){showThumbnails(!showThumbnails())}, text: $root.translations.viewGallery, fadeVisible: showThumbnails, delay:400, fade: 200"></div>\n    </div>\n\n    \x3c!--ko if: self.displayContent() === undefined --\x3e\n    <div class="file-chart-upload-panel">\n        <div class="gallery-controls new-tile">\n            <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n                <div class="file-select-window">\n                   <div class="bord-top pad-ver file-select">\n                       <div class="" style="padding: 5px">\n                            <h2>\n                                <span data-bind="text: $root.translations.uploadPhotographs"></span>\n                            </h2>\n                            <h4>\n                                <span data-bind="text: $root.translations.dragAndDropPhotosOnPanel"></span>\n                            </h4>\n                       </div>\n                       <button type="button" class="btn btn-lg btn-file-select fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                           <i class="fa fa-file"></i>\n                           <span data-bind="text: $root.translations.selectPhotographs"></span>\n                       </button>\n                       <br>\n                       <div style="padding: 10px">\n                            <p>\n                                <span data-bind="text: $root.translations.addingPhotosOptional"></span>\n                            </p>\n                            <p>\n                                <span data-bind="text: $root.translations.maxPhotoSizeWarning"></span>\n                            </p>\n                        </div>\n\n                   </div>\n                   <div class="file-upload-footer">\n                        <span data-bind="text: $root.translations.validImageFormats"></span>\n                   </div>\n               </div>\n\n            </div>\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n\n</div>\n\x3c!-- /ko --\x3e\n\n</div>\n</div>\n\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},37228:function(e){e.exports='\n\n\n\x3c!-- ko if: loading() --\x3e\n<div class="hover-feature-body hover-feature-loading">\n    <i class="fa fa-spin fa-spinner"></i>\n    <span data-bind="text: $root.translations.loading + \'...\'"></span>\n</div>\n\x3c!--/ko--\x3e\n\n\x3c!-- ko if: !loading() --\x3e\n\x3c!-- ko foreach: popupFeatures --\x3e\n    \x3c!-- ko if: active --\x3e\n    \x3c!-- ko if: displayname --\x3e\n    <div class="hover-feature-title-bar">\n        \n        <div style="display: flex;">\n            <div data-bind="visible: $parent.popupFeatures.length > 1, click: function(){$parent.advanceFeature(\'left\')}" class="hover-feature-nav-left"><i class="fa fa-angle-left"></i></div>\n            <div data-bind="visible: $parent.popupFeatures.length > 1, click: function(){$parent.advanceFeature(\'right\')}" class="hover-feature-nav-right"><i class="fa fa-angle-right"></i></div>\n            <div class="hover-feature-title" data-bind="text: displayname"></div>\n        </div>\n        \n    </div>\n    \x3c!--/ko--\x3e\n    <div class="hover-feature-body">\n        \n        <div class="hover-feature" data-bind="html: map_popup"></div>\n        \x3c!-- ko if: resourceinstanceid --\x3e\n        <div class="hover-feature-metadata-block">\n            <div class="hover-feature-metadata">\n                <span data-bind="text: $root.translations.resourceModel"></span>\n                <span data-bind="text: graph_name"></span>\n            </div>\n            <div class="hover-feature-metadata">\n                <span data-bind="text: $root.translations.idString"></span>\n                <span data-bind="text: resourceinstanceid"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n        \n    </div>\n    <div class="hover-feature-footer">\n        <div>\n        \n\x3c!-- ko foreach: {data: mapCard.widgets, as: \'widget\'} --\x3e\n    \x3c!-- ko if: widget.datatype.datatype === \'resource-instance-list\' || widget.datatype.datatype === \'resource-instance\' --\x3e\n    <a href="javascript:void(0)" data-bind="if: $parent.mapCard.isSelectable($parent.feature), click: function() {\n        if (!!$parent.mapCard.tile.data[widget.node_id()]() && $parent.mapCard.tile.data[widget.node_id()]().filter(function(val){return ko.unwrap(val.resourceId) === ko.unwrap($parent.resourceinstanceid)}).length > 0) {\n            $parent.mapCard.unrelateResource($parent, widget);\n        } else {\n            $parent.mapCard.relateResource($parent, widget);\n        }\n    }">\n        <i class="ion-ios-refresh-empty"></i>\n        \x3c!-- ko if: !!$parent.mapCard.tile.data[widget.node_id()]() && $parent.mapCard.tile.data[widget.node_id()]().filter(function(val){return ko.unwrap(val.resourceId) === ko.unwrap($parent.resourceinstanceid)}).length > 0 --\x3e\n        <span data-bind="text: \'Unrelate \' + widget.label()"></span>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: !$parent.mapCard.tile.data[widget.node_id()]() || $parent.mapCard.tile.data[widget.node_id()]().filter(function(val){return ko.unwrap(val.resourceId) === ko.unwrap($parent.resourceinstanceid)}).length === 0 --\x3e\n        <span data-bind="text: \'Relate \' + widget.label()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: resourceinstanceid --\x3e\n        <a data-bind="click: function () {\n            window.open(reportURL + ko.unwrap(resourceinstanceid));\n        }" href="javascript:void(0)">\n            <i class="ion-document-text"></i>\n            <span data-bind="text: $root.translations.report"></span>\n        </a>\n        \x3c!--/ko--\x3e\n        \x3c!-- ko if: showEditButton --\x3e\n        <a data-bind="click: function () {\n            window.open(editURL + ko.unwrap(resourceinstanceid));\n        }" href="javascript:void(0)">\n            <i class="ion-ios-refresh-empty"></i>\n            <span data-bind="text: $root.translations.edit"></span>\n        </a>\n        \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- ko if: $parent.popupFeatures.length > 1 --\x3e\n        <div style="display: flex; flex-direction: row; width: 60px; justify-content: space-evenly; font-weight: 500;">\n            <div class="hover-feature-instance-counter" data-bind="text: 1 + $parent.popupFeatures.findIndex(feature => feature.active());"></div>\n            <span data-bind="text: $root.translations.of"></span>\n            <div style="padding-left: 3px;" data-bind="text: $parent.popupFeatures.length"></div>\n        </div>\n        \x3c!--/ko--\x3e\n        \n\n    </div>\n    \x3c!--/ko--\x3e\n    \x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n'},58747:function(e){e.exports='\n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\n\x3c!-- ko if: state === \'editor-tree\' && self.card.model.visible() --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (card.tiles().length > 0 && card.expanded()), \'jstree-closed\' : (card.tiles().length > 0 && !card.expanded()), \'jstree-leaf\': card.tiles().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.resource-editor-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode(),\'unsaved-edit\': card.isDirty() === true}, event: {\n        mousedown: function(d, e) {\n            e.stopPropagation();\n            self.card.canAdd() ? self.card.selected(true) : self.card.tiles()[0].selected(true);\n        }\n    }">\n        \x3c!-- ko if: !self.card.isFuncNode() --\x3e\n        <i class="fa fa-file-o" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: self.card.isFuncNode() --\x3e\n        <i class="fa fa-code" role="presentation" data-bind="css:{\'filtered\': self.card.highlight(), \'has-provisional-edits fa-file\': self.card.doesChildHaveProvisionalEdits()}"></i>\n        \x3c!-- /ko --\x3e\n        <span style="padding-right: 5px;" data-bind="text: self.card.model.name"></span>\n        \x3c!-- ko if: self.card.canAdd() --\x3e\n        <i class="fa fa-plus-circle add-new-tile" role="presentation" data-bind="css:{\'jstree-clicked\': self.card.selected}, click: function(){self.card.showForm(true);}, clickBubble: false" data-toggle="tooltip" data-original-title="$root.translations.addGnu"></i>\n        \x3c!-- /ko --\x3e\n    </a>\n    <ul class="jstree-children" aria-expanded="true">\n        <div data-bind="sortable: {\n            data: self.card.tiles,\n            options: {\n                start: self.startDrag\n            },\n            beforeMove: self.beforeMove,\n            afterMove: self.card.reorderTiles\n        }">\n            <li role="treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': (cards.length > 0 && expanded), \'jstree-closed\' : (cards.length > 0 && !expanded()), \'jstree-leaf\': cards.length === 0, \'hide-background\': !self.showGrid()}, event: {\'dragstart\': function () { console.log(\'dragging...\') }}">\n                <i class="jstree-icon" role="presentation" data-bind="click: function(){expanded(!expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function () { self.form.selection($data);}, css:{\'jstree-clicked\': selected, \'child-selected\': isChildSelected(), \'filtered-leaf\': card.highlight(), \'unsaved-edit\': !!$data.dirty()}">\n                    <i class="fa" role="presentation" data-bind="css:{\'has-provisional-edits\': doesChildHaveProvisionalEdits() || $data.hasprovisionaledits(),\'fa-pencil\':$data.dirty()===true,\'fa-file\':!$data.dirty()}"></i>\n                    <strong style="margin-right: 10px;">\n                        \n                        \x3c!-- ko if: self.card.widgets().length > 0 && self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.widgets()[0].label || self.card.model.name"></span>:\n                        <div style="display: inline;" data-bind="component: {\n                            name: self.form.widgetLookup[self.card.widgets()[0].widget_id()].name,\n                            params: {\n                                tile: $data,\n                                node: self.form.nodeLookup[card.widgets()[0].node_id()],\n                                config: self.form.widgetLookup[card.widgets()[0].widget_id()].config,\n                                label: self.form.widgetLookup[card.widgets()[0].widget_id()].label,\n                                inResourceEditor: self.inResourceEditor,\n                                value: $data.data[card.widgets()[0].node_id()],\n                                type: \'resource-editor\',\n                                state: \'display_value\',\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }"></div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: self.card.widgets().length === 0 || !self.card.widgets()[0].visible --\x3e\n                        <span data-bind="text: self.card.model.name"></span>\n                        \x3c!-- /ko --\x3e\n                        \n                    </strong>\n                </a>\n                \x3c!-- ko if: cards.length > 0 && self.card.expanded() --\x3e\n                <ul class="jstree-children" aria-expanded="true" data-bind="foreach: {\n                        data: cards,\n                        as: \'card\'\n                    }">\n                    \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[self.card.model.component_id()].componentname,\n                        params: {\n                            state: \'editor-tree\',\n                            card: card,\n                            tile: null,\n                            loading: self.loading,\n                            form: self.form,\n                            pageVm: $root\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </ul>\n                \x3c!-- /ko --\x3e\n            </li>\n        </div>\n    </ul>\n</li>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'designer-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}, scrollTo: card.scrollTo, container: \'.designer-card-tree\'">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor" href="#" tabindex="-1" data-bind="css:{\'filtered\': card.highlight(), \'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'func-node\': card.isFuncNode()}, click: function () { card.selected(true) },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span data-bind="text: card.model.name"></span>\n        \x3c!-- ko if: card.showIds --\x3e\n        <span style="font-weight:bold" data-bind="text: \': \' + card.model.nodegroup_id()"></span>\n        \x3c!-- /ko --\x3e\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded()  --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0, \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor" href="#" tabindex="-1" data-bind="click: function() { widget.selected(true) }, css:{\'jstree-clicked\': widget.selected, \'hover\': widget.hovered}, event: { mouseover: function(){ widget.hovered(true) }, mouseout: function(){ widget.hovered(null) } }">\n                    <i data-bind="css: widget.datatype.iconclass" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                        \x3c!-- ko if: $parent.showIds --\x3e\n                        <span style="font-weight:bold" data-bind="text: \': \' + (!!(widget.label()) ? widget.node.nodeid : \'\')"></span>\n                        \x3c!-- /ko --\x3e\n                    </strong>\n                </a>\n            </li>\n        </div>\n        <div data-bind="sortable: {\n                data: card.cards,\n                as: \'childCard\',\n                beforeMove: self.beforeMove,\n                afterMove: function() {\n                    card.reorderCards();\n                }\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                        name: self.form.cardComponentLookup[childCard.model.component_id()].componentname,\n                        params: {\n                        state: \'designer-tree\',\n                        card: childCard,\n                        tile: null,\n                        loading: self.loading,\n                        form: self.form,\n                        pageVm: $root,\n                        showIds: childCard.showIds\n                    }\n                } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'permissions-tree\' --\x3e\n\n<li role="treeitem card-treeitem" class="jstree-node" data-bind="css: {\'jstree-open\': ((card.cards().length > 0 || card.widgets().length > 0) && card.expanded()), \'jstree-closed\' : ((card.cards().length > 0 || card.widgets().length > 0) && !card.expanded()), \'jstree-leaf\': card.cards().length === 0 && card.widgets().length === 0, \'hide-background\': !self.showGrid()}">\n    <i class="jstree-icon" role="presentation" data-bind="click: function(){card.expanded(!card.expanded())}, css: {\'jstree-ocl\': self.showGrid}"></i>\n    <a class="jstree-anchor permissions-card" href="#" tabindex="-1" data-bind="css:{\'jstree-clicked\': card.selected, \'child-selected\': card.isChildSelected(), \'filtered\': card.highlight()}, click: function () { card.selectChildCards() },">\n        <i class="fa fa-file-o" role="presentation"></i>\n        <span style="padding-right: 5px;" data-bind="text: card.model.name">\n        </span>\n        <span class="node-permissions">\n            \x3c!-- ko if: card.perms --\x3e\n            \x3c!-- ko foreach: card.perms() --\x3e\n            <i class="node-permission-icon" data-bind="css: $data.icon"></i>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </a>\n    \x3c!-- ko if: (card.cards().length > 0 || card.widgets().length > 0) && card.expanded() --\x3e\n    <ul class="jstree-children card-designer-tree" aria-expanded="true">\n        \n        <div data-bind="sortable: {\n                data: card.widgets,\n                as: \'widget\',\n                beforeMove: self.beforeMove,\n                afterMove: function() { card.model.save() }\n            }">\n            <li role="treeitem" class="jstree-node jstree-leaf" data-bind="css: {\n                    \'jstree-last\': $index() === (card.widgets().length - 1) && $parent.card.cards().length === 0,\n                    \'hide-background\': !self.showGrid()\n                }">\n                <i class="jstree-icon" role="presentation" data-bind="css: {\'jstree-ocl\': self.showGrid}"></i>\n                <a class="jstree-anchor permissions-widget" href="#" tabindex="-1">\n                    <i class="fa fa-file" role="presentation"></i>\n                    <strong style="margin-right: 10px;">\n                        <span data-bind="text: !!(widget.label()) ? widget.label() : widget.node.name"></span>\n                    </strong>\n                </a>\n            </li>\n        </div>\n        \n        \n        <div data-bind="foreach: {\n                data: card.cards,\n                as: \'card\'\n            }">\n            <div data-bind="css: {\n                    \'jstree-last\': ($index() === ($parent.card.cards().length - 1))\n                }">\n                \x3c!-- ko component: {\n                    name: self.form.cardComponentLookup[card.model.component_id()].componentname,\n                    params: {\n                    state: \'permissions-tree\',\n                    card: card,\n                    tile: null,\n                    loading: self.loading,\n                    form: self.form,\n                    multiselect: true,\n                    pageVm: $root\n                }\n            } --\x3e \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \n    </ul>\n    \x3c!-- /ko --\x3e\n</li>\n\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: state === \'form\' --\x3e\n\n\n\n<div class="workbench-card-wrapper">\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'basemap\');\n        }, css: {\n            \'active\': activeTab() === \'basemap\'\n        }">\n            <i class="fa fa-globe"></i>\n            <span data-bind="text: $root.translations.basemap" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'overlays\');\n        }, css: {\n            \'active\': activeTab() === \'overlays\'\n        }">\n            <i class="fa fa-list"></i>\n            <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'legend\');\n        }, css: {\n            \'active\': activeTab() === \'legend\'\n        }">\n            <i class="fa fa-list-alt"></i>\n            <span data-bind="text: $root.translations.legend" class="map-sidebar-text"></span>\n        </div>\n        \n\n    </div>\n    \x3c!--ko if: activeTab() --\x3e\n        <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n            \n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div class="workbench-card-sidepanel-body">\n    \x3c!-- ko if: !self.coordinateEditing() --\x3e\n    <div style="margin: 10px 10px 0px;">\n        <div class="control-label widget-input-label">\n            <span data-bind="text: $root.translations.participatingLayers"></span>\n        </div>\n        \x3c!-- ko foreach: {data: self.nodeDetails, as: \'nodeInfo\'} --\x3e\n        <div data-bind="css: {\'active-overlay\': self.filterNodeIds.indexOf(nodeInfo.nodeid) > -1}">\n        <div class="overlay-listing rr-map-card" style="padding: 5px; min-height: 0px" data-bind="click: function(){self.filterNodeIds.indexOf(nodeInfo.nodeid) > -1 ? self.filterNodeIds.remove(nodeInfo.nodeid) : self.filterNodeIds.push(nodeInfo.nodeid)}">\n            <div class="overlay-name" data-bind="text: nodeInfo.resourcemodelname"></div>\n        </div>\n        <div class="rr-map-card related-instances">\n        \x3c!-- ko foreach: self.relatedResources --\x3e\n            \x3c!-- ko if: nodeInfo.graph_id === $data.graphid --\x3e\n                <div class="related-instance" data-bind="text: $data.displayname, event: { mouseover: self.updateHoverId, mouseout: self.updateHoverId }, css: {hovered: self.hoverId() === $data.resourceinstanceid}"></div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- /ko --\x3e\n\n    <div data-bind="css: card.model.cssclass">\n        \n        \n        \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n        <div class="edit-message-container">\n            <span data-bind="text: $root.translations.showingEditsBy"></span>\n            <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n                <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n            </a>\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n            \x3c!-- /ko--\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n        <div class="edit-message-container approved">\n            <div>\n                <span data-bind="text: $root.translations.showingMostRecentApprovedEdits"></span>\n            </div>\n        </div>\n        \x3c!-- /ko--\x3e\n\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <div class="new-provisional-edits-list">\n                <div class="new-provisional-edits-header">\n                    <div class="new-provisional-edits-title">\n                        <span data-bind="text: $root.translations.provisionalEdits"></span>\n                    </div>\n                    <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                            provisionalTileViewModel.deleteAllProvisionalEdits();\n                        }">\n                        <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                    </div>\n                </div>\n                \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n                <div class="new-provisional-edit-entry" data-bind="css: {\n                        \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                    }, click: function(){\n                        $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                    }">\n                    <div class="title">\n                        <div class="field">\n                            <span data-bind="text : pe.username"></span>\n                        </div>\n                        <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                            $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                        }"></a>\n                    </div>\n                    <div class="field timestamp">\n                        <span data-bind="text : pe.displaydate">@</span>\n                        <span data-bind="text : pe.displaytimestamp"></span>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n            \x3c!-- /ko--\x3e\n\n            \x3c!-- ko if: geoJSONString() !== undefined --\x3e\n            <div class="card" style="padding-top: 45px;">\n                <div class="geojson-editor" data-bind="codemirror: {\n                    value: geoJSONString,\n                    mode: { name: \'javascript\', json: true },\n                    lineNumbers: true\n                }"></div>\n                <div class="display-in-workflow-step install-buttons">\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: function () {\n                        geoJSONString(undefined);\n                    }">\n                        <span data-bind="text: $root.translations.cancel"></span>\n                    </button>\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus btn-mint" data-bind="css: {\n                        disabled: geoJSONErrors().length !== 0\n                    }, click: updateGeoJSON">\n                        <span data-bind="text: $root.translations.updateFeatures"></span>\n                    </button>\n                </div>\n                \x3c!-- ko if: geoJSONErrors().length !== 0 --\x3e\n                <div class="geojson-error-list">\n                    <span data-bind="text: $root.translations.geojsonErrors"></span>\n                    <ul>\n                        \x3c!-- ko foreach: geoJSONErrors() --\x3e\n                        <li data-bind="text: message"></li>\n                        \x3c!-- /ko--\x3e\n                    </ul>\n                </div>\n                \x3c!-- /ko--\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n\n            \x3c!-- ko if: showRelatedQuery() --\x3e\n            <div class="card" style="padding-top: 25px; padding-bottom: 30px">\n\n                <div data-bind="foreach: {\n                    data:card.widgets, as: \'widget\'\n                }">\n                \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'geojson-feature-collection\' --\x3e\n                    <div class="rr-map-card-intersect-panel">\n                        <div class="control-label widget-input-label">\n                            <span data-bind="text: $root.translations.bufferIntersectingFeature"></span>\n                        </div>\n                        <div class="buffer-control" style="padding-left: 0px">\n                            <div style="display: inline-flex; justify-content: space-between; width: 100%">\n                                <div class="form-inline">\n                                <input type="number" min="0.0" id="buffer-input" class="form-control" style="height: 34px; width: 95px" data-bind="\n                                        attr: {placeholder: $root.translations.buffer},\n                                        textInput: self.mapFilter.buffer\n                                    ">\n                                <select class="form-control" style="vertical-align: top; height: auto" data-bind="options: self.mapFilter.bufferUnits, optionsText:\'name\', optionsValue:\'val\', value: self.mapFilter.bufferUnit"></select>\n                                </div>\n                                <div style="display: flex;">\n                                    <button class="btn btn-sm btn-primary" data-bind="\n                                        click: function(){self.appendBufferToTileFeatures(widget.node_id());}, \n                                        disable: !ko.unwrap(self.mapFilter.buffer) || !ko.unwrap(self.mapFilter.searchGeometries).length\n                                        ">\n                                        <span data-bind="text: $root.translations.addBufferToFeatures"></span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!--ko if: self.featureLookup[widget.node_id()].features --\x3e\n                    <div class="rr-map-card-intersect-panel">\n                        <div class="control-label widget-input-label">\n                            <span data-bind="text: $root.translations.selectAFeatureToPerformIntersection"></span>\n                        </div>\n                        <table class="table">\n                            <tbody>\n                            \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                            <tr class="map-card-feature-item" data-bind="css: {\'active\': self.mapFilter.searchGeometries().length && self.mapFilter.searchGeometries().find(function(x){return x.id === feature.id})};">\n                                <td>\n                                    <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                </td>\n                                <td class="map-card-feature-tool intersect">\n                                    <a href="javascript:void(0);" data-bind="\n                                    click: function(){self.mapFilter.makeSearchFeature(feature)}">\n                                        <i class="fa fa-pencil map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.intersect"></span>\n                                    </a>\n                                </td>\n                            </tr>\n                            \x3c!-- /ko --\x3e\n                            </tbody>\n                        </table>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- /ko--\x3e\n            \n            \n\n\x3c!-- ko if: coordinateEditing() --\x3e\n<div class="card map-coordinate-editor .fixed">\n    <div class="map-coordinate-editor-header">\n        <span data-bind="text: $root.translations.editCoordinates"></span>\n    </div>\n    <div class="map-coordinate-editor-crs-selector">\n        <dt>\n            <span data-bind="text: $root.translations.coordinateReference"></span>\n        </dt>\n        <select data-bind="\n            options: coordinateReferences,\n            optionsText: \'name\',\n            optionsValue: \'proj4\',\n            value: selectedCoordinateReference,\n            valueAllowUnset: false,\n            chosen: {\n                \'width\': \'210px\',\n                \'disable_search_threshold\': 10,\n                \'allow_single_deselect\': false\n            }\n        "></select>\n    </div>\n    <hr>\n    <div class="map-coordinate-editor-list" data-bind="sortable: {\n        data: coordinates\n    }">\n        <div class="map-coordinate-editor-pair">\n            \x3c!-- ko if: !$parent.hideNewCoordinates() --\x3e\n            <i class="fa fa-unsorted map-coordinate-editor-drag-handler"></i>\n            \x3c!-- /ko--\x3e\n            <span class="coordinate-entry-label">X:</span>\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[0]">\n            <span class="coordinate-entry-label">Y:</span>\n            \x3c!-- ko if: $parent.coordinates().length-1 === $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: $parent.focusLatestY, valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.coordinates().length-1 !== $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.allowDeleteCoordinates() --\x3e\n            <a href="javascript:void(0);" class="map-coordinate-editor-delete-button" data-bind="click: function() {\n                $parent.coordinates.remove($data);\n            }"><i class="fa fa-trash"></i></a>\n            \x3c!-- /ko--\x3e\n            <hr>\n        </div>\n    </div>\n    \x3c!-- ko if: !hideNewCoordinates() --\x3e\n    <div class="map-coordinate-editor-pair map-coordinate-editor-new-coordinates">\n        <i class="fa fa-plus"></i>\n        <span class="coordinate-entry-label">X:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: true, valueUpdate: \'keyup\', value: newX">\n        <span class="coordinate-entry-label">Y:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: newY">\n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-coordinate-editor-button-container">\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-search btn-mint" data-bind="click: showCoordinateFeature">\n            <span data-bind="text: $root.translations.showFeature"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: function() {\n            self.coordinateEditing(false);\n        }">\n            <span data-bind="text: $root.translations.done"></span>\n        </button>\n    </div>\n</div>\n\x3c!-- /ko--\x3e\n\n\n            <div class="card" style="padding-top: 45px;" data-bind="visible: geoJSONString() === undefined && showRelatedQuery() === false">\n                \n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(true)\n                    }" style="cursor:pointer;">\n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n                <h5 data-bind="text: card.model.instructions"></h5>\n                \n                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                \n                <form class="widgets" style="margin-bottom: 20px;">\n                    <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                        \x3c!-- ko ifnot: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'geojson-feature-collection\' --\x3e\n                        <div data-bind=\'component: {\n                            name: self.form.widgetLookup[widget.widget_id()].name,\n                            params: {\n                                formData: self.tile.formData,\n                                tile: self.tile,\n                                form: self.form,\n                                config: widget.configJSON,\n                                label: widget.label(),\n                                value: self.tile.data[widget.node_id()],\n                                node: self.form.nodeLookup[widget.node_id()],\n                                expanded: self.expanded,\n                                graph: self.form.graph,\n                                type: "resource-editor",\n                                disabled: !self.card.isWritable && !self.preview\n                            }\n                        }, css:{\n                            "active": widget.selected,\n                            "hover": widget.hovered,\n                            "widget-preview": self.preview\n                        }, click: function(data, e) {\n                            if (!widget.selected() && self.preview) widget.selected(true);\n                        }, event: {\n                            mouseover: function(){\n                                if (self.preview) widget.hovered(true);\n                            },\n                            mouseout: function(){\n                                if (self.preview) widget.hovered(null);\n                            }\n                        }, visible: widget.visible\'></div>\n                        \x3c!--/ko--\x3e\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'geojson-feature-collection\' --\x3e\n                        <div class="row widget-wrapper">\n                            <div class="form-group">\n                                <label class="control-label widget-input-label" for="" data-bind="text:widget.label"></label>\n                                <i data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[widget.node_id()].isrequired}"></i>\n\n                                <div class="col-xs-12">\n                                    <div class="map-card-feature-list">\n                                        <div class="add-new-feature">\n                                            <select data-bind="\n                                                    placeholder: $root.translations.addANewFeature + \'...\',\n                                                    value: self.featureLookup[widget.node_id()].selectedTool,\n                                                    valueAllowUnset: true,\n                                                    options: widget.drawTools,\n                                                    optionsText: \'text\',\n                                                    optionsValue: \'value\',\n                                                    chosen: {\n                                                        \'width\': \'100%\',\n                                                        \'disable_search_threshold\': 10,\n                                                        \'allow_single_deselect\': true\n                                                    }\n                                                "></select>\n                                        </div>\n                                        <table class="table">\n                                            <tbody>\n                                                \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                                                <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.fitFeatures([feature]) }">\n                                                    <td>\n                                                        <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                                    </td>\n                                                    <td class="map-card-feature-tool">\n                                                        <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature) }, clickBubble: false">\n                                                            <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                            <span data-bind="text: $root.translations.edit"></span>\n                                                        </a>\n                                                    </td>\n                                                    <td class="map-card-feature-tool">\n                                                        <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature) }, clickBubble: false">\n                                                            <i class="fa fa-trash map-card-feature-delete"></i>\n                                                            <span data-bind="text: $root.translations.delete"></span>\n                                                        </a>\n                                                    </td>\n                                                </tr>\n                                                \x3c!-- /ko --\x3e\n                                            </tbody>\n                                        </table>\n                                        <div class="map-card-zoom-tool">\n                                            \x3c!-- ko if: ko.unwrap(self.featureLookup[widget.node_id()].features) && self.featureLookup[widget.node_id()].features().length > 0 --\x3e\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.showRelatedQuery(true);\n                                            }">\n                                                <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.find"></span>\n                                            </a>\n                                            |\n                                            \x3c!-- ko if: self.canEditCoordinates() --\x3e\n                                                <a href="javascript:void(0);" data-bind="click: function() {\n                                                    self.coordinateEditing(true);\n                                                }">\n                                                    <i class="fa fa-list map-card-feature-edit"></i>\n                                                    <span data-bind="text: $root.translations.editCoordinates"></span>\n                                                </a>\n                                                \x3c!-- /ko --\x3e\n                                                \x3c!-- ko if: !self.canEditCoordinates() --\x3e\n                                                    <span>\n                                                        <i class="fa fa-list map-card-feature-edit"></i>\n                                                        <span data-bind="text: $root.translations.editCoordinates"></span>\n                                                    </span>\n                                                \x3c!-- /ko --\x3e\n                                            \x3c!--/ko--\x3e\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.editGeoJSON(self.featureLookup[widget.node_id()].features(), widget.node_id());\n                                            }">\n                                                <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.editGeoJson"></span>\n                                            </a>\n                                            \x3c!-- ko if: ko.unwrap(self.featureLookup[widget.node_id()].features) && self.featureLookup[widget.node_id()].features().length > 0 --\x3e\n                                            |\n                                            <a href="javascript:void(0);" data-bind="click: function() {\n                                                self.fitFeatures(self.featureLookup[widget.node_id()].features());\n                                            }">\n                                                <i class="fa fa-search map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.zoomToAll"></span>\n                                            </a>\n                                            \x3c!-- /ko --\x3e\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!--/ko--\x3e\n                    </div>\n                </form>\n                \n                \x3c!-- /ko --\x3e\n                \n                <div class="install-buttons">\n                    \x3c!-- ko if: tile.tileid && self.deleteTile --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-trash" data-bind="click: self.deleteTile, css: {\n                        disabled: (!card.isWritable && !self.preview),\n                        \'btn-warning\': card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.delete"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: tile.dirty() --\x3e\n                        \x3c!-- ko if: provisionalTileViewModel && !provisionalTileViewModel.tileIsFullyProvisional() && card.isWritable --\x3e\n                        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: tile.reset">\n                            <span data-bind="text: $root.translations.cancel"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: tile.tileid --\x3e\n                        <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                            disabled: (!card.isWritable && !self.preview),\n                            \'btn-mint\': card.isWritable\n                        }">\n                            <span data-bind="text: $root.translations.save"></span>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !tile.tileid --\x3e\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus" data-bind="click: self.saveTile, css: {\n                        disabled: (!card.isWritable && !self.preview),\n                        \'btn-mint\': card.isWritable\n                    }">\n                        <span data-bind="text: $root.translations.add"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n                \n\n                <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                    <div class="relative">\n                        <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" data-bind="click: function () {\n                            card.model.get(\'helpactive\')(false);\n                        }"></a>\n                    </div>\n                    <div id="add-basemap-wizard-help-content">\n                        <div>\n                            <div class="panel-heading">\n                                <h3 class="panel-title help-panel-title" style="">\n                                    <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                </h3>\n                            </div>\n                            <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!-- ko if: showRelatedQuery() --\x3e\n<div class="display-in-workflow-step">\n    <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: function () {\n        showRelatedQuery(false);\n    }">\n        <span data-bind="text: $root.translations.done"></span>\n    </button>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'basemap\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.basemaps"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n\n                <div class="workbench-card-sidepanel-body">\n                <div class="basemap-listing-container">\n                \x3c!--ko foreach: basemaps --\x3e\n                    <div class="basemap-listing" data-bind="\n                        click: $parent.activeBasemap,\n                        css: {\'active-basemap\': $data === $parent.activeBasemap()}\n                        ">\n                        <i data-bind="css: icon" class="layer-listing-icon"></i>\n                        <span data-bind="text: name"></span>\n                    </div>\n                \x3c!--/ko --\x3e\n                </div>\n                </div>\n\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'overlays\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.overlays"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="overlays-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="overlay-listing" data-bind="css: {\'active-overlay\': onMap}">\n                        <div class="overlay-name" data-bind="\n                            click: function() {\n                                onMap(!onMap());\n                                updateParent($parent);\n                            }\n                        ">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        <div class="relative">\n                            <div class="overlay-opacity-control">\n                                <i class="fa fa-adjust"></i>\n                                <div class="overlay-opacity-slider">\n                                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'legend\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.legend"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="legend-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="legend-listing" data-bind="css: {\'hidden\': !onMap()}">\n                        <div class="legend-name">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        \x3c!--ko if: legend --\x3e\n                        <div class="legend-content" data-bind="html: legend"></div>\n                        \x3c!--/ko --\x3e\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n            \n\n        </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container" data-bind="mapboxgl: {\n            mapOptions: mapOptions,\n            afterRender: setupMap\n        }">\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'report\' && card.model.visible() --\x3e\n\n\n\n\n<div data-bind="css: {\'print-hide\': !reportExpanded()}">\n    \x3c!-- ko if: showHeaderLine--\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n    <div class="rp-card-section" data-bind="css: card.model.cssclass, visible: card.fullyProvisional() !== \'fullyprovisional\'">\n        <span class="rp-tile-title" data-bind="text: card.model.get(\'name\')"></span>\n        \x3c!-- ko if: card.tiles().length > 0 --\x3e\n        <i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': reportExpanded(), \'fa-angle-right\': !reportExpanded()}, click: function () { reportExpanded(!reportExpanded()) }"></i>\n        \x3c!-- ko if: reportExpanded() --\x3e\n        \x3c!-- ko foreach: { data: self.preview ? [card.newTile] : card.tiles, as: \'tile\' } --\x3e\n\n        <div class="rp-card-section" data-bind="event : { dblclick: function(){tile.selected(true) }}, css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false, \'fullyprovisional\': tile.isfullyprovisional()}, attr: {id: tile.tileid}">\n            \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                <span data-bind="visible: tile.parent.model.get(\'widgets\')().length === 0"></span>\n                    \n                    \x3c!-- ko if: tile.parent.model.get(\'widgets\')().length > 0 --\x3e\n                        <div class="rp-report-tile" data-bind="attr: { id: tile.tileid }">\n                            \x3c!-- ko if: ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false --\x3e\n                            <div class="report-card-provisional-flag">\n                                <span data-bind="text: $root.translations.pendingProvisionalData"></span>\n                            </div>\n                            \x3c!-- /ko--\x3e\n                            <dl class="dl-horizontal" data-bind="css: {\'provisional\': ko.unwrap(tile.provisionaledits) !== null && tile.userisreviewer === false}">\n                                \x3c!-- ko foreach: { data: tile.parent.model.get(\'widgets\'), as: \'widget\' } --\x3e\n                                    \x3c!-- ko if: widget.visible --\x3e\n                                    \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: configJSON,\n                                            label: widget.get("label")(),\n                                            node: widget.node,\n                                            value: tile.data[widget.node.nodeid],\n                                            state: "report",\n                                            hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                \x3c!-- /ko --\x3e\n                            </dl>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: $parent.inResourceEditor --\x3e\n                    <div class="rp-edit-buttons">\n                        \x3c!-- ko if: tile.parent.selected() && tile.parent.cardinality == \'n\' --\x3e\n                        <i class="fa fa-copy" data-bind="click: function(){tile.parent.copyTile(tile)}"></i>\n                        \x3c!-- /ko --\x3e\n                        <i class="fa fa-pencil" data-bind="\n                                click: function(){if ($parent?.form?.workflowId) { $parent.selectWorkflowTile(tile); } else { tile.selected(true); } }\n                            "></i>\n                        <i class="fa fa-trash" data-bind="click: function(){tile.deleteTile()}"></i>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    </div>\n                    \n                    <div class="rp-report-container-tile" data-bind="visible: tile.parent.cards().length > 0">\n                        \x3c!-- ko foreach: { data: self.preview ? tile.parent.cards : tile.cards, as: \'card\' } --\x3e\n                            \x3c!-- ko if: card.tiles().length > 0 || ko.unwrap(tile.parent.hideEmptyNodes) === false --\x3e\n                                \x3c!-- ko component: {\n                                    name: tile.parent.model.cardComponentLookup[tile.parent.model.component_id()].componentname,\n                                    params: {\n                                        state: \'report\',\n                                        preview: self.preview,\n                                        card: card,\n                                        showHeaderLine: self.card.model.get("widgets")().length > 0 || $index !== 0,\n                                        pageVm: $root,\n                                        hideEmptyNodes: tile.parent.hideEmptyNodes || false\n                                    }\n                                } --\x3e \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: card.tiles().length === 0 && !self.preview && !card.hideEmptyNodes --\x3e\n        <div class="row rp-report-tile rp-no-data">\n            \x3c!-- ko ifnot: card.model.get(\'cardid\') --\x3e\n                <span data-bind="text: $root.translations.noAccessInformation"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: card.model.get(\'cardid\') --\x3e\n            <div style="display: inline-flex; width: 100%; justify-content: space-between;" data-bind="event : { dblclick: function(){$parent.revealForm(card)}}">\n            <div>\n                <span data-bind="text: $root.translations.noDataAddedYet"></span>\n                <span data-bind="text: card.model.get(\'name\')"></span>\n            </div>\n            \x3c!-- ko if: $parent.inResourceEditor --\x3e\n            <div class="rp-edit-buttons" style="justify-content: flex-end;">\n            <i class="fa fa-plus-circle" data-bind="click: function(){$parent.revealForm(card)}"></i>\n\n            </div>\n            \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'config\' --\x3e\n\n<div>\n    <div class="node-config-item">\n        <label class="control-label" for="">\n            <span data-bind="text: $root.translations.relatedInstanceMapSources"></span>\n        </label>\n        <input type="text" data-bind="textInput: selectRelatedSource" class="form-control input-md widget-input">\n    </div>\n    <div class="node-config-item">\n        <label class="control-label" for="">\n            <span data-bind="text: $root.translations.relatedInstanceMapSourceLayers"></span>\n        </label>\n        <input type="text" data-bind="textInput: selectRelatedSourceLayer" class="form-control input-md widget-input">\n    </div>\n    <div>\n        <span data-bind="text: $root.translations.intersectionLayerConfiguration"></span>\n    </div>\n    <div style="padding: 5px 10px 5px; background-color: #eaeaea;">\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.defaultColor"></span>\n            </label>\n            <input type="text" data-bind="textInput: defaultcolor" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.selectedFeatureColor"></span>\n            </label>\n            <input type="text" data-bind="textInput: selectioncolor" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.hoveredFeatureColor"></span>\n            </label>\n            <input type="text" data-bind="textInput: hovercolor" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.layerColorPalette"></span>\n            </label>\n            <textarea type="text" data-bind="textInput: colorpalette" class="form-control input-md widget-input"></textarea>\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.fillOpacity"></span>\n            </label>\n            <input type="text" data-bind="textInput: fillopacity" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.overviewZoom"></span>\n            </label>\n            <input type="text" data-bind="textInput: overviewzoom" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.minZoom"></span>\n            </label>\n            <input type="text" data-bind="textInput: minzoom" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.pointRadius"></span>\n            </label>\n            <input type="text" data-bind="textInput: pointradius" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.lineWidth"></span>\n            </label>\n            <input type="text" data-bind="textInput: linewidth" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.strokeColor"></span>\n            </label>\n            <input type="text" data-bind="textInput: strokecolor" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.strokeWidth"></span>\n            </label>\n            <input type="text" data-bind="textInput: strokelinewidth" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.pointStrokeWidth"></span>\n            </label>\n            <input type="text" data-bind="textInput: strokepointradius" class="form-control input-md widget-input">\n        </div>\n        <div class="node-config-item">\n            <label class="control-label" for="">\n                <span data-bind="text: $root.translations.pointStrokeOpacity"></span>\n            </label>\n            <input type="text" data-bind="textInput: strokepointopacity" class="form-control input-md widget-input">\n        </div>\n    </div>\n\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},84479:function(e){e.exports='\n\n\n\x3c!-- ko if: $data.search --\x3e\n\n<div class="col-sm-12">\n    <select class="resources" data-bind="value: searchValue, chosen: {\n        width: \'100%\',\n        disable_search_threshold: 15\n    }, options: [\n        {id: \'\', name: $root.translations.selectAnOption},\n        {id: \'t\', name: trueLabel},\n        {id: \'f\', name: falseLabel},\n        {id: \'null\', name: $root.translations.hasNoValue},\n        {id: \'not_null\', name: $root.translations.hasAnyValue}\n    ], optionsText: \'name\', optionsValue: \'id\'"></select>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.graph --\x3e\n<div class="control-label">\n    <span data-bind="text: $root.translations.labelTrue"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input class="form-control input-md widget-input" data-bind="textInput: trueLabel">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.labelFalse"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input class="form-control input-md widget-input" data-bind="textInput: falseLabel">\n</div>\n\x3c!-- /ko --\x3e\n'},76316:function(e){e.exports='\n\n\n\x3c!-- ko ifnot: $data.search --\x3e\n<div class="node-config-item">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.conceptCollection"></span>\n    </div>\n    <div data-bind="if: conceptCollections().length > 0">\n        <select data-bind="\n                disable: isEditable === false, \n                placeholder: $root.translations.selectAConceptCollection, \n                value: topConcept, \n                options: conceptCollections, \n                optionsText: \'label\', \n                optionsValue: \'id\', \n                chosen: {width: \'100%\', allow_single_deselect: true}\n            "></select>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n    <select class="resources" data-bind="\n            value: op, \n            chosen: {width: \'100%\', disable_search_threshold: 15},\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            options: [\n                { text: $root.translations.equals, value: \'\' },\n                { text: $root.translations.not, value: \'!\' },\n                { text: $root.translations.hasNoValue, value: \'null\' },\n                { text: $root.translations.hasAnyValue, value: \'not_null\' },\n            ],\n        "></select>\n</div>\n\n<div class="col-md-8 col-lg-9" data-bind="visible: op() !== \'null\' && op() !== \'not_null\'">\n    <input style="display:inline-block;" data-bind="\n            value: searchValue,\n            select2Query: {\n                select2Config: select2Config\n            }\n        ">\n    <span style="z-index: 100; position:absolute; right: 24px; top: 8px;" data-bind="visible: select2Config.isEmpty() === false, click: function(){select2Config.clear();}"><i class="fa fa-times-circle fa-lg"></i></span>\n</div>\n\x3c!-- /ko --\x3e\n'},19027:function(e){e.exports="\n\x3c!-- ko if: $data.search --\x3e\n<div class=\"col-md-4 col-lg-3\">\n    <select class=\"resources\" tabindex=\"-1\" style=\"display: none;\" data-bind=\"\n            value: op, \n            chosen: {width: '100%', disable_search_threshold: 15},\n            optionsText: 'text',\n            optionsValue: 'value',\n            options: [\n                { text: '=', value: 'eq' },\n                { text: '&gt;', value: 'gt' },\n                { text: '&lt;', value: 'lt' },\n                { text: '&ge;', value: 'gte' },\n                { text: '&le;', value: 'lte' },\n                { text: $root.translations.hasNoValue, value: 'null' },\n                { text: $root.translations.hasAnyValue, value: 'not_null' },\n            ],\n        \"></select>\n</div>\n\n<div class=\"col-md-8 col-lg-9\" data-bind=\"visible: op() !== 'null' && op() !== 'not_null'\">\n    <input type=\"\" class=\"form-control input-md widget-input\" data-bind=\"\n            attr: {placeholder: $root.translations.date},\n            value: searchValue, \n            datepicker: {format: dateFormat, viewMode: 'days', minDate: false, maxDate: false}\n        \">\n</div>\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko ifnot: $data.search --\x3e\n<div class=\"control-label\">\n    <span data-bind=\"text: $root.translations.dateFormat\"></span>\n</div>\n<div class=\"col-xs-12 pad-no crud-widget-container\">\n    <select type=\"\" id=\"\" data-bind=\"\n            attr: {placeholder: $root.translations.dateFormat},\n            options:dateFormatOptions, \n            optionsText:'name', \n            optionsValue:'id', \n            event: {change: onDateFormatSelection},\n            value: dateFormat, \n            chosen: {width: '100%', disable_search: true}\n        \"></select>\n</div>\n\x3c!-- /ko --\x3e"},99378:function(e){e.exports='\n\x3c!-- ko ifnot: $data.search --\x3e\n<div class="node-widget-label new-option-field">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.domainOptions"></span>\n    </div>\n    <div class="domain-container">\n        <div data-bind="text: $data.search"></div>\n        <input class="domain-input" type="text" class="form-control library-search" data-bind="\n                attr: {placeholder: $root.translations.addNewOption + \'...\'},\n                disable: !isEditable, \n                value: newOptionLabel, valueUpdate: \'keyup\'\n            ">\n        <a href="#" data-bind="disable: !$parent.isEditable, click: function(){if(isEditable){addNewOption()}}">\n             <i class="fa fa-plus-circle pull-right"></i>\n        </a>\n        <div data-bind="sortable: {data: options}">\n            <div class="added-domain-option">\n                <span class="domain-drag-handle">\n                    <i class="fa fa-ellipsis-v option-drag-handle" aria-hidden="true">  </i>\n                </span>\n                <input class="domain-input-item" type="text" class="form-control library-search" data-bind="disable: !$parent.isEditable, value: text, valueUpdate: \'keyup\'">\n                <a href="#" data-bind="disable: !$parent.isEditable, click: function(){if($parent.isEditable){remove()}}">\n                     <i class="fa fa-minus-circle pull-right"></i>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n    <select class="resources" data-bind="\n            value: op, \n            chosen: {width: \'100%\', disable_search_threshold: 15},\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            options: [\n                { text: $root.translations.equals, value: \'\' },\n                { text: $root.translations.not, value: \'!\' },\n                { text: $root.translations.hasNoValue, value: \'null\' },\n                { text: $root.translations.hasAnyValue, value: \'not_null\' },\n            ],\n        "></select>\n</div>\n<div class="col-md-8 col-lg-9" data-bind="visible: op() !== \'null\' && op() !== \'not_null\'">\n    <select type="" class="form-control library-search" data-bind="\n            attr: {placeholder: $root.translations.value},\n            options: options, \n            optionsText: \'text\', \n            optionsValue: \'id\', \n            value: searchValue, \n            chosen: {width: \'100%\', disable_search: true}\n        "></select>\n</div>\n\x3c!-- /ko --\x3e\n\n'},28418:function(e){e.exports='\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n    <select class="resources" tabindex="-1" style="display: none;" data-bind="\n            value: op, \n            chosen: {width: \'100%\', disable_search_threshold: 15},\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            options: [\n                { text: $root.translations.overlaps, value: \'overlaps\' },\n                { text: \'=\', value: \'eq\' },\n                { text: \'&gt;\', value: \'gt\' },\n                { text: \'&lt;\', value: \'lt\' },\n                { text: \'&ge;\', value: \'gte\' },\n                { text: \'&le;\', value: \'lte\' },\n                { text: $root.translations.hasNoValue, value: \'null\' },\n                { text: $root.translations.hasAnyValue, value: \'not_null\' },\n            ],\n        "></select>\n</div>\n<div class="col-md-8 col-lg-9" data-bind="visible: op() !== \'null\' && op() !== \'not_null\'">\n    <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="\n            attr: {placeholder: $root.translations.name},\n            textInput: searchValue\n        ">\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko ifnot: $data.search --\x3e\n<div class="node-widget-label concept-label">\n\n    <div class="control-label">\n        <span data-bind="text: $root.translations.fuzzyYearPadding"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.fuzzyYearPadding},\n                textInput: config.fuzzy_year_padding\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.fuzzyMonthPadding"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.fuzzyMonthPadding},\n                textInput: config.fuzzy_month_padding\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.fuzzyDayPadding"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.fuzzyDayPadding},\n                textInput: config.fuzzy_day_padding\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.fuzzySeasonPadding"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.fuzzySeasonPadding},\n                textInput: config.fuzzy_season_padding\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.multiplierIfDateIsUncertain"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.multiplierIfDateIsUncertain},\n                textInput: config.multiplier_if_uncertain\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.multiplierIfDateIsApproximate"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.multiplierIfDateIsApproximate},\n                textInput: config.multiplier_if_approximate\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.multiplierIfBoth"></span>\n    </div>\n    <div class="edtf-input">\n        <input type="number" class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.multiplierIfBoth},\n                textInput: config.multiplier_if_both\n            ">\n    </div>\n</div>\n\x3c!-- /ko --\x3e'},32258:function(e){e.exports='\n\x3c!-- ko ifnot: $data.search --\x3e\n<div class="row">\n    <div class="form-group">\n        <div class="relative">\n            <label class="col-xs-12 control-label widget-input-label">\n                <p class="control-label node-widget-label">\n                    <span data-bind="text: $root.translations.maximumNumberOfFiles"></span>\n                </p>\n                <input class="form-control input-md widget-input widget-file" placeholder="1" type="number" data-bind="textInput: maxFiles">\n            </label>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},16683:function(e){e.exports='\n\n\n\x3c!-- ko if: $data.layer --\x3e\n<div class="map-service-container">\n\n\n    <div class="flex">\n        <h3 class="config-title"><i class="fa fa-binoculars"></i>\n            <span data-bind="text: $root.translations.layerPreview"></span> \n            <span class="service-url text-semibold" data-bind="text: serviceURL"></span>\n        </h3>\n        \n        \x3c!-- Save/discard edits buttons (for convenience) --\x3e\n        \x3c!-- ko if: node.dirty() --\x3e\n        <div class="resource-service-buttons-heading">\n            <button class="btn btn-primary btn-labeled btn-active-dark fa fa-check pull-right mar-top" data-bind="click: function () { saveNode() }">\n                <span data-bind="text: $root.translations.saveEdits"></span> \n            </button>\n            <button class="btn btn-mint btn-labeled btn-active-dark fa fa-undo pull-right mar-top" data-bind="click: function () { node.reset() }">\n                <span data-bind="text: $root.translations.discardEdits"></span> \n            </button>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        <div class="map-service-manage-buttons">\n            <div class="form-group">\n                <label class="control-label text-semibold">\n                    <span data-bind="text: $root.translations.activated + \':\'"></span> \n                </label>\n                <span class="switch switch-small" data-bind="css: {\n                        \'on\': config.layerActivated()\n                    }, click: function () {\n                        config.layerActivated(!config.layerActivated());\n                    }">\n                    <small></small>\n                </span>\n            </div>\n        </div>\n        <div class="btn-group map-server-basemap-button">\n            <button class="dropdown-toggle btn" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-globe"></i></button>\n            <ul class="dropdown-menu dropdown-menu-right">\n                \x3c!-- ko foreach: basemaps --\x3e\n                <li><a href="#" data-bind="text: name, click: function () { select(); }"></a></li>\n                \x3c!-- /ko --\x3e\n            </ul>\n        </div>\n    </div>\n    \n    \x3c!-- ko if: !loading() --\x3e\n    <div class="map-service-preview" style="padding:0;" data-bind="mapboxgl: {\n            mapOptions: {\n                style: mapStyle,\n                zoom: zoom,\n                minZoom: minZoom,\n                maxZoom: maxZoom,\n                centerX: centerX,\n                centerY: centerY,\n                pitch: pitch,\n                bearing: bearing\n            },\n            afterRender: function(map){\n                setupMap(map);\n            }\n        }">\n    </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: loading() --\x3e\n    <div class="map-service-preview"></div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- Service Styling --\x3e\n    <div class="map-service-container">\n        <div class="flex" style="width:100%">\n            <div class="tab-base map-service-tabs">\n\n                \x3c!-- Resource Styling Tabs --\x3e\n                <ul class="nav nav-tabs map-service-nav-tabs">\n                    <li class="active">\n                        <a class="config-title-tab mar-no" data-toggle="tab" href="#settings-panel" aria-expanded="false">\n                            <i class="ion-ios-settings-strong"></i>\n                            <span data-bind="text: $root.translations.settings"></span> \n                        </a>\n                    </li>\n                    <li class="">\n                        <a class="config-title-tab mar-no" data-toggle="tab" href="#styling-panel" aria-expanded="false">\n                            <i class="ion-image"></i>\n                            <span data-bind="text: $root.translations.serviceStyling"></span> \n                        </a>\n                    </li>\n                    <li class="">\n                        <a class="config-title-tab mar-no" data-toggle="tab" href="#clustering-panel" aria-expanded="false">\n                            <i class="ion-ios-pie"></i>\n                            <span data-bind="text: $root.translations.clustering"></span> \n                        </a>\n                    </li>\n                    <li class="">\n                        <a class="config-title-tab mar-no" data-toggle="tab" href="#permissions-panel" aria-expanded="true">\n                            <i class="ion-ios-color-wand"></i>\n                            <span data-bind="text: $root.translations.permissions"></span> \n                        </a>\n                    </li>\n                </ul>\n\n                <div class="tab-content map-service-tab-content">\n\n                    <div id="settings-panel" class="tab-pane fade active in">\n                        <div class="row service-widget-container">\n                            <div class="form-horizontal">\n                                <div class="panel-body">\n                                    <div class="form-group map-service-manage-layer-name">\n                                        <label class="col-sm-3 map-service-manage-control-label">\n                                            <span data-bind="text: $root.translations.layerName + \':\'"></span> \n                                        </label>\n                                        <div class="col-sm-9">\n                                            <input type="text" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.layerName, attr: { placeholder: layer.name }">\n                                        </div>\n                                    </div>\n                                    <div class="form-group map-service-manage-layer-name">\n                                        <label class="col-sm-3 map-service-manage-control-label">\n                                            <span data-bind="text: $root.translations.addSearchMapDefault"></span> \n                                        </label>\n                                        <div class="col-sm-9">\n                                            <span class="switch switch-small" data-bind="css: {\n                                                    \'on\': config.addToMap()\n                                                }, click: function () {\n                                                    config.addToMap(!config.addToMap());\n                                                }">\n                                                <small></small>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <div data-bind="component: {\n                                            name: \'views/components/icon-selector\',\n                                            params: {\n                                                selectedIconObservable: config.layerIcon,\n                                                iconFilter: iconFilter,\n                                                iconList: icons,\n                                                label: $root.translations.layerIcon\n                                            }\n                                        }">\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <div style="padding:15px;">\n                                            <div class="row" style="padding-bottom: 10px;">\n                                                <span data-bind="text: $root.translations.legendContent + \':\'"></span> \n                                            </div>\n                                            <div class="row">\n                                                <textarea rows="10" cols="80" data-bind="ckeditor: config.layerLegend, ckeditorOptions: {},  valueUpdate: \'afterkeydown\'"></textarea>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div id="styling-panel" class="tab-pane fade">\n                        <div class="row service-widget-container">\n                            <div class="advanced-map-style-switch">\n                                <label class="control-label text-semibold">\n                                    <span data-bind="text: $root.translations.advanced + \':\'"></span> \n                                </label>\n                                <span class="switch switch-small" data-bind="css: {\n                                        \'on\': config.advancedStyling()\n                                    }, click: function () {\n                                        config.advancedStyling(!config.advancedStyling());\n                                    }">\n                                    <small></small>\n                                </span>\n                            </div>\n\n                            <div class="col-xs-12 advanced-style-panel" data-bind="if: config.advancedStyling()">\n                                <div id="style-panel" class="tab-pane fade active in">\n                                    <div class="panel-body" style="padding: 0px;">\n                                        <div class="row">\n                                            <div data-bind="codemirror: { value: config.advancedStyle, mode: { name: \'javascript\', json: true }, theme: \'monokai\' }"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="col-xs-12 simple-style-panel" data-bind="if: !config.advancedStyling()">\n                                <div id="style-panel" class="tab-pane fade active in">\n                                    <div class="panel-body" style="padding-top: 0px; padding-bottom: 5px;">\n                                        \x3c!-- ko if: count === 0 --\x3e\n                                        <div class="map-server-instructions">\n                                            <i class="fa fa-warning"></i>\n                                            <span data-bind="text: $root.translations.previewMapWarning"></span> \n                                        </div>\n                                        \x3c!-- /ko --\x3e\n                                        <div class="flex">\n                                            \x3c!-- Points --\x3e\n                                            <div class="col-sm-6 col-md-4 col-divider">\n                                                <span class="style-title" data-bind="text: $root.translations.pointStyle"></span> \n\n                                                <div class="form-horizontal">\n                                                    <div class="panel-body map-style-panel-body">\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.color"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.color + \' \'}, colorPicker: {color: config.pointColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.pointColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.haloColor"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.haloColor + \' \'}, colorPicker: {color: config.pointHaloColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.pointHaloColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.radius"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.radius">\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.haloRadius"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.haloRadius">\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            \x3c!-- Lines --\x3e\n                                            <div class="col-sm-6 col-md-4 col-divider">\n                                                <span class="style-title" data-bind="text: $root.translations.lineStyle"></span>\n\n                                                <div class="form-horizontal">\n                                                    <div class="panel-body map-style-panel-body">\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.color"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.color + \' \'}, colorPicker: {color: config.lineColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.lineColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.haloColor"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.haloColor + \' \'}, colorPicker: {color: config.lineHaloColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.lineHaloColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.weight"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.weight">\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.haloWeight"></span> \n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.haloWeight">\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n\n                                            \x3c!-- Polygons --\x3e\n                                            <div class="col-sm-6 col-md-4">\n                                                <span class="style-title" data-bind="text: $root.translations.polygonStyle"></span>\n\n                                                <div class="form-horizontal">\n                                                    <div class="panel-body map-style-panel-body">\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.fillColor + \':\'"></span>\n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.fillColor + \' \'}, colorPicker: {color: config.fillColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.fillColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.outlineColor + \':\'"></span>\n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <div class="colorpicker-component input-group">\n                                                                    <input class="form-control input-lg widget-input" data-bind="attr: {placeholder: $root.translations.outlineColor + \' \'}, colorPicker: {color: config.outlineColor, format:\'rgba\'}">\n                                                                    <span class="input-group-addon"><i class="ion-stop resource-color-swatch" data-bind="style: {color: config.outlineColor}"></i></span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group map-style-panel-body-form-group">\n                                                            <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                                                <span data-bind="text: $root.translations.outlineWeight + \':\'"></span>\n                                                            </label>\n                                                            <div class="col-sm-9">\n                                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.outlineWeight">\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div id="clustering-panel" class="tab-pane fade">\n                        <div class="row service-widget-container">\n                            <div class="form-horizontal">\n                                <div class="panel-body">\n                                    <div class="form-group clustering-pane-form-group">\n                                        <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                            <span data-bind="text: $root.translations.clusterDistance + \':\'"></span>\n                                        </label>\n                                        <div class="col-sm-9">\n                                            <input type="number" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.clusterDistance">\n                                        </div>\n                                    </div>\n                                    <div class="form-group clustering-pane-form-group">\n                                        <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                            <span data-bind="text: $root.translations.clusterMaxZoom + \':\'"></span>\n                                        </label>\n                                        <div class="col-sm-9">\n                                            <input type="number" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.clusterMaxZoom">\n                                        </div>\n                                    </div>\n                                    <div class="form-group clustering-pane-form-group">\n                                        <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                            <span data-bind="text: $root.translations.clusterMinPoints + \':\'"></span>\n                                        </label>\n                                        <div class="col-sm-9">\n                                            <input type="number" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.clusterMinPoints">\n                                        </div>\n                                    </div>\n                                    <div class="form-group clustering-pane-form-group">\n                                        <label class="col-sm-3 control-label map-style-panel-body-control-label">\n                                            <span data-bind="text: $root.translations.vectorSimplification + \':\'"></span>\n                                        </label>\n                                        <div class="col-sm-9">\n                                            <input type="number" class="form-control" data-bind="valueUpdate: \'keyup\', value: config.simplification">\n                                        </div>\n                                    </div>\n                                    <div class="map-server-instructions">\n                                        <span data-bind="text: $root.translations.clusterSettingChangeInfo"></span>\n                                        \x3c!-- ko if: count === 0 --\x3e\n                                        <br><br>\n                                        <i class="fa fa-warning"></i>\n                                        <span data-bind="text: $root.translations.previewMapClusteringWarning"></span>\n                                        \x3c!-- /ko --\x3e\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div id="permissions-panel" class="tab-pane fade">\n                        <div class="row service-widget-container">\n                            <div class="panel-body">\n\n\n                                <div class="map-server-instructions">\n                                    <i class="ion-ios-information"></i>\n                                    <span data-bind="text: $root.translations.layerNodePermissionInfo"></span>\n                                </div>\n                                <dl class="dl-horizontal permission-user-group-container">\n                                    <dt data-bind="text: $root.translations.users"></dt>\n                                    <dd>\n                                        \x3c!-- ko foreach: permissions.users --\x3e\n                                        <div data-bind="text: $data"></div>\n                                        \x3c!-- /ko --\x3e\n                                    </dd>\n                                    <dt data-bind="text: $root.translations.groups"></dt>\n                                    <dd>\n                                        \x3c!-- ko foreach: permissions.groups --\x3e\n                                        <div data-bind="text: $data"></div>\n                                        \x3c!-- /ko --\x3e\n                                    </dd>\n                                </dl>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},15763:function(e){e.exports='\n\n\n\x3c!-- ko if: !$data.search && $data.graph --\x3e\n<div class="node-widget-label pad-btm">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.relatedNode"></span>\n    </div>\n    <div>\n        <select data-bind="\n            disable: isEditable === false,\n            placeholder: $root.translations.selectANode,\n            value: config.nodeid,\n            options: nodes,\n            optionsText: \'name\',\n            optionsValue: \'id\',\n            chosen: {\n                width: \'100%\'\n            }\n        "></select>\n    </div>\n</div>\n<div class="node-widget-label pad-btm">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.relationshipToNode"></span>\n    </div>\n    <div data-bind="if: properties().length > 0">\n        <select data-bind="\n            disable: isEditable === false,\n            placeholder: $root.translations.selectAProperty,\n            value: config.property,\n            options: properties,\n            optionsText: \'name\',\n            optionsValue: \'id\',\n            chosen: {\n                width: \'100%\'\n            }\n        "></select>\n    </div>\n</div>\n<div class="node-value-widget-ontology" style="margin-bottom:10px;" data-bind="if: properties().length > 0 && config.property()">\n    <div>\n        (<strong data-bind="text: node.name"></strong>\n        <em data-bind="text: propertyName"></em>\n        <strong data-bind="text: relatedNodeName"></strong>)\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n\n</div>\n<div class="col-md-8 col-lg-9 resource-instance-search">\n\n</div>\n\x3c!-- /ko --\x3e\n'},70813:function(e){e.exports="\n\x3c!-- ko if: $data.search --\x3e\n<div class=\"col-md-4 col-lg-3\">\n    <select class=\"resources\" tabindex=\"-1\" style=\"display: none;\" data-bind=\"\n            value: op, \n            chosen: {width: '100%', disable_search_threshold: 15},\n            optionsText: 'text',\n            optionsValue: 'value',\n            options: [\n                { text: '=', value: 'eq' },\n                { text: '&gt;', value: 'gt' },\n                { text: '&lt;', value: 'lt' },\n                { text: '&ge;', value: 'gte' },\n                { text: '&le;', value: 'lte' },\n                { text: $root.translations.hasNoValue, value: 'null' },\n                { text: $root.translations.hasAnyValue, value: 'not_null' },\n            ],\n        \"></select>\n</div>\n\n<div class=\"col-md-8 col-lg-9\" data-bind=\"visible: op() !== 'null' && op() !== 'not_null'\">\n    <input type=\"number\" placeholder=\"Value\" class=\"form-control input-lg\" style=\"height: 36px;\" data-bind=\"value: searchValue, valueUpdate: 'keyup'\">\n</div>\n\x3c!-- /ko --\x3e\n"},68544:function(e){e.exports='\n\n\n\x3c!-- ko ifnot: $data.search --\x3e\n\x3c!--ko let: {self: $data} --\x3e\n<div class="node-widget-label concept-label" style="width:540px;">\n\n    <div class="control-label">\n        <span data-bind="text: $root.translations.resourceModel"></span>\n    </div>\n    <div style="padding-bottom: 10px;">\n        <select multiple="multiple" data-bind="\n            placeholder: $root.translations.selectAResourceModel,\n            selectedOptions: selectedResourceModel,\n            options: resourceModels,\n            optionsText: \'name\',\n            chosen: {\n                width: \'100%\',\n                disabled: isEditable === false\n            }\n        "></select>\n    </div>\n    <div class="rr-table">\n        <div data-bind="foreach: config.graphs" style="display: flex; flex-direction: column;">\n            <div class="rr-table-row">\n                <div class="rr-table-row-initial" data-bind="style:{color: $parent.isEditable === true || \'#aaa\'}">\n                    <div class="rr-table-column icon-column">\n                        <button data-bind="click: function(){if ($parent.isEditable !== false) {$data.removeRelationship($data)}}, clickBubble: false, attr:{\'disabled\': $parent.isEditable === false}, style:{color: $parent.isEditable === true || \'#aaa\'}">\n                            <i class="fa fa-trash"></i>\n                        </button>\n                    </div>\n                    <div class="rr-table-column" style="flex-grow: 1; padding-left: 10px;" data-bind="click: function() { if($parent.isEditable !== false){self.toggleSelectedResource($data)}; }, clickBubble: false" style="cursor: pointer;">\n                        <div class="rr-table-instance-label" data-bind="text: $data.name"></div>\n                    </div>\n                </div>\n                <div class="rr-table-row-panel" data-bind="if: self.selectedResourceType() === $data, visible: self.selectedResourceType() === $data, css: { \'rr-table-border\': self.selectedResourceType() === $data} ">\n                    <div data-bind="if: self.graphIsSemantic">\n                        <div class="rr-table-ontology-selector">\n                            <span data-bind="component: {\n                                name: \'views/components/simple-switch\',\n                                params: {\n                                    value: $data.useOntologyRelationship,\n                                    config: {label: $root.translations.useOntology}\n                                }\n                            }"></span>\n                        </div>\n                    </div>\n                    <div class="row" data-bind="if: $data.useOntologyRelationship">\n                        <div class="row" style="margin-bottom: 10px;">\n                            <label class="col-xs-12" style="font-weight: bold;">\n                                <span data-bind="text: $root.translations.defaultRelationshipTo"></span>\n                                <span data-bind="text: $data.name"></span>\n                            </label>\n\n                            <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                <span class="col-xs-12" style="font-weight: bold;" data-bind="text: self.graphName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'">\n                                </span>\n\n                                <span class="col-xs-12">\n                                    <input style="width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                            select2Query: {\n                                                select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                    $data.ontologyProperty, \n                                                    self.rootOntologyClass, \n                                                    $data.ontologyClass, \n                                                    $root.translations.selectAnOntologyProperty, \n                                                    true\n                                                )\n                                            }\n                                        ">\n                                </span>\n\n                                <span class="col-xs-12" data-bind="text: $data.name + \' (\' + self.makeFriendly($data.ontologyClass) + \')\'">\n                                </span>\n                            </div>\n                        </div>\n\n\n                        <div class="row">\n                            <label class="col-xs-12" style="font-weight: bold;">\n                                <span data-bind="text: $root.translations.defaultInverseRelationshipTo"></span>\n                                <span data-bind="text: $data.name"></span>\n                            </label>\n\n                            <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                <span class="col-xs-12" style="" data-bind="text: $data.name + \' (\' + self.makeFriendly($data.ontologyClass) + \')\'">\n                                </span>\n\n                                <span class="col-xs-12">\n                                    <input style="width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                        select2Query: {\n                                            select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                $data.inverseOntologyProperty, \n                                                $data.ontologyClass, \n                                                self.rootOntologyClass, \n                                                $root.translations.selectAnOntologyProperty, \n                                                true\n                                            )\n                                        }\n                                    ">\n                                </span>\n\n                                <span class="col-xs-12" data-bind="text: self.graphName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'"></span>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="row" data-bind="ifnot: $data.useOntologyRelationship">\n                        <div class="row">\n                            <label class="col-xs-12" style="font-weight: bold;">\n                                <span data-bind="text: $root.translations.relationshipConcept"></span>\n                            </label>\n                            <div class="row">\n                                <div data-bind="component: {\n                                    name: \'concept-select-widget\',\n                                    params: {\n                                        node: {\'config\': {\'rdmCollection\': \'00000000-0000-0000-0000-000000000005\'}},\n                                        value: $data.relationshipConcept,\n                                    }\n                                }"></div>\n                            </div>\n                        </div>\n\n                        <div class="row">\n                            <label class="col-xs-12" style="font-weight: bold;">\n                                <span data-bind="text: $root.translations.inverseRelationshipConcept"></span>\n                            </label>\n                            <div class="row">\n                                <div data-bind="component: {\n                                    name: \'concept-select-widget\',\n                                    params: {\n                                        node: {\'config\': {\'rdmCollection\': \'00000000-0000-0000-0000-000000000005\'}},\n                                        value: $data.inverseRelationshipConcept,\n                                    }\n                                }"></div>\n                            </div>\n                        </div>\n                    </div> \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="relative">\n        <label class="col-xs-12 control-label widget-input-label">\n            <span data-bind="text: $root.translations.searchStringText"></span>\n            \n            <i class="fa fa-eye" style="cursor: pointer;" data-bind="\n                    attr: {title: $root.translations.viewSearchString},\n                    click: openSearch\n                "></i>\n        </label>\n    </div>\n    \n    <div class="col-xs-12" style="padding-bottom: 10px;">\n        <input type="text" class="form-control" style="" data-bind="\n                attr: {placeholder: $root.translations.enterSearchStringHere + \'...\'},\n                textInput: config.searchString\n            ">\n    </div>\n\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n    <select class="resources" data-bind="\n            value: op, \n            chosen: {width: \'100%\', disable_search_threshold: 15},\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            options: [\n                { text: $root.translations.references, value: \'\' },\n                { text: $root.translations.doesNotReference, value: \'!\' },\n                { text: $root.translations.hasNoValue, value: \'null\' },\n                { text: $root.translations.hasAnyValue, value: \'not_null\' },\n            ],\n        "></select>\n</div>\n<div class="col-md-8 col-lg-9 resource-instance-search" data-bind="visible: op() !== \'null\' && op() !== \'not_null\'">\n    \x3c!-- ko component: {\n        name:  datatype.datatype.includes(\'list\') ? \'resource-instance-multiselect-widget\' : \'resource-instance-select-widget\',\n        params: {\n            config: {\n                placeholder: $root.translations.selectAResource,\n            },\n            label: \'\',\n            value: searchValue,\n            node: node,\n            disabled: false,\n            renderContext: \'search\',\n            multiple: !!datatype.datatype.includes(\'list\'),\n        }\n    } --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\x3c!-- /ko --\x3e\n'},33758:function(e){e.exports="\n\x3c!-- ko if: $data.search --\x3e\n<div class=\"col-md-4 col-lg-3\">\n    <select class=\"resources\" data-bind=\"\n            value: op, \n            chosen: {width: '100%', disable_search_threshold: 15},\n            optionsText: 'text',\n            optionsValue: 'value',\n            options: [\n                { text: $root.translations.like, value: '~' },\n                { text: $root.translations.notLike, value: '!~' },\n                { text: $root.translations.equals, value: '' },\n                { text: $root.translations.not, value: '!=' },\n                { text: $root.translations.hasNoValue, value: 'null' },\n                { text: $root.translations.hasAnyValue, value: 'not_null' },\n            ],\n        \"></select>\n</div>\n<div class=\"col-md-3 col-lg-2\">\n    <select data-bind=\"options: languages, optionsText: function(item){return item.name + ' (' + item.code + ')'}, value: language, chosen:{width:'100%'}\"></select>\n</div>\n<div class=\"col-md-5 col-lg-7\" data-bind=\"visible: op() !== 'null' && op() !== 'not_null'\">\n    <input type=\"text\" class=\"form-control input-lg\" style=\"height: 36px;\" data-bind=\"\n            attr: {placeholder: $root.translations.name},\n            value: searchValue, \n            valueUpdate: 'keyup'\n        \">\n</div>\n\x3c!-- /ko --\x3e\n"},22628:function(e){e.exports='\n\n\x3c!-- ko if: $data.search --\x3e\n<div class="col-md-4 col-lg-3">\n    <select class="resources" data-bind="\n            value: op, \n            chosen: {width: \'100%\', disable_search_threshold: 15},\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            options: [\n                { text: $root.translations.like, value: \'~\' },\n                { text: $root.translations.notLike, value: \'!~\' },\n                { text: $root.translations.equals, value: \'\' },\n                { text: $root.translations.not, value: \'!=\' },\n            ],\n        "></select>\n</div>\n\n<div class="col-md-8 col-lg-9">\n    <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="\n            attr: {placeholder: $root.translations.name},\n            textInput: searchValue\n        ">\n</div>\n\x3c!-- /ko --\x3e'},47339:function(e){e.exports='\n\n\x3c!-- ko if: state === \'details\' --\x3e\n\n\x3c!-- ko ifnot: loading() --\x3e\n    <div class="branch-csv-etl">\n        \x3c!-- ko ifnot: response() --\x3e\n        <div class="file-select loader-select">\n            <div data-bind="visible: downloadMode()">\n                <div class="manifest-manager-main-menu-circle loader-button">\n                    <span><i style="color: #000" class="fa fa-file-text-o r-select-icon"></i></span>\n                </div> \n                <h2>\n                    <span data-bind="text: $root.translations.downloadTemplates"></span>\n                </h2>\n                <h4>\n                    <span data-bind="text: $root.translations.selectAResourceModel"></span>\n                </h4>\n                <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">\n                    <div style="width: 250px; display:flex; flex-direction: column;">\n                        <div>\n                            \x3c!-- ko if: templates().length --\x3e\n                            <input style="display:inline-block;" data-bind="select2Query: {\n                                select2Config: {\n                                    clickBubble: true,\n                                    disabled: false,\n                                    data: {results: templates()},\n                                    value: selectedTemplate,\n                                    allowClear: true,\n                                    multiple: false,\n                                    placeholder: $root.translations.selectTemplate\n                                }}">\n                            \x3c!--/ko--\x3e\n                        </div>\n                    </div>\n                    \x3c!-- ko if: selectedTemplate() --\x3e\n                    <button style="border-top: 1px solid #c4c4c4; margin: 15px;" class="btn btn-primary btn-labeled btn-lg fa fa-download" data-bind="click: downloadTemplate">\n                        <span data-bind="text: $root.translations.download"></span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n                <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-primary btn-labeled btn-lg fa fa-cloud-upload" data-bind="click: toggleDownloadMode" role="button">\n                    <span data-bind="text: $root.translations.uploadZipFile"></span>\n                </div>\n            </div>\n            <div data-bind="dropzone: dropzoneOptions, visible: !downloadMode()">\n                <div class="manifest-manager-main-menu-circle loader-button">\n                    <span><i style="color: #000" class="fa fa-cloud-upload r-select-icon"></i></span>\n                </div> \n                <h2>\n                    <span data-bind="text: $root.translations.uploadYourZipFile"></span>\n                </h2>\n                <h4>\n                    <span data-bind="text: $root.translations.dragAndDropFilesOnPanel"></span>\n                </h4>\n                <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">\n                    <div style="display:flex; flex-direction: column;">\n                        <div>\n                            <div class="dropzone-photo-upload" style="display:flex; margin-top: 0px;">\n                                <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-primary btn-labeled btn-lg fa fa-file fileinput-button dz-clickable" data-bind="css: uniqueidClass" role="button">\n                                    <span data-bind="text: $root.translations.selectFile"></span>\n                                </div>\n                                <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-danger btn-labeled btn-lg fa fa-times-circle" data-bind="click: function() { $parent.cancel() }" role="button">\n                                    <span data-bind="text: $root.translations.cancelFileImport"></span>\n                                </div>\n                                <div style="min-height: 100%;">\n                                    <div id="hidden-dz-previews" style="display:none"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <h5>\n                        <span data-bind="text: $root.translations.etlFileUploadMessage"></span>\n                    </h5>\n                </div>\n                <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-primary btn-labeled btn-lg fa fa-download" data-bind="click: toggleDownloadMode" role="button">\n                    <span data-bind="text: $root.translations.downloadTemplates"></span>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: response() --\x3e\n        <div class="branch-xl-metadata-container">\n            <div style="display: grid; row-gap: 2px; height:fit-content; padding:15px 20px;">\n                <h3 class="branch-xl-title" style="">\n                    <span data-bind="text: $root.translations.format + \': \' + $root.translations.branchExcel"></span>\n                </h3>\n                <div class="etl-module-component" style="margin-top: 0px;">\n                    <h4 class="branch-xl-title">\n                        <span data-bind="text: $root.translations.fileUploadSummary"></span>\n                    </h4>\n                    <div style="display: inline-grid; grid-template-columns: auto auto; column-gap: 10px;">\n                        <div class="etl-loading-metadata-key">\n                            <span data-bind="text: $root.translations.file + \':\'"></span>\n                        </div>\n                        <div class="etl-loading-metadata-value" data-bind="text: response().result.summary.name"></div>\n                        <div class="etl-loading-metadata-key">\n                            <span data-bind="text: $root.translations.size + \':\'"></span>\n                        </div>            \n                        <div class="etl-loading-metadata-value" data-bind="text: response().result.summary.size"></div>\n                    </div>\n                </div>\n\n                <div class="branch-xl-file-contents-container">\n                    <h4 class="branch-xl-title">\n                        <span data-bind="text: $root.translations.fileContents"></span>\n                    </h4> \n                    <div style="display: inline-grid; grid-template-columns: auto auto; column-gap: 10px;">\n                    \x3c!--ko foreach: {data: Object.keys(response().result.summary.files), as: \'file\'}--\x3e\n                        <div class="etl-loading-metadata-value" data-bind="text: file"></div>\n                        \x3c!-- ko foreach: {data: $parent.response().result.summary.files[file], as: \'details\'} --\x3e\n                        <div class="etl-loading-metadata-key" data-bind="text: details.size"></div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="tabbed-workflow-footer, etl-module-footer">\n            <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" style="margin-right: 8px;" data-bind="click: function(){ start(); }">\n                <span data-bind="text: $root.translations.submit"></span>\n            </button>\n            <button class="btn btn-shim btn-labeled btn-lg fa fa-times btn-danger" data-bind="click: function(){ response(null); }">\n                <span data-bind="text: $root.translations.cancel"></span>\n            </button>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!--/ko--\x3e\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'status\' --\x3e\n\n<div class="branch-csv-etl" style="display: grid; row-gap: 2px; height:fit-content; margin-top: -5px;">\n    <h4 class="summary-title">\n        <span data-bind="text: $root.translations.importBranchExcelSummary"></span>\n    </h4>\n    \x3c!-- ko if: ko.unwrap(loadDetails) --\x3e\n    <div class="branch-csv-etl-load-summmary">\n        <div style="display: inline-grid; grid-template-columns: auto auto; column-gap: 10px;">\n            <div class="summary-header">\n                <span data-bind="text: $root.translations.excelFile"></span>\n            </div>\n            <div class="summary-header">\n                <span data-bind="text: $root.translations.size"></span>\n            </div>   \n\n            \x3c!--ko foreach: {data: Object.keys(loadDetails.files).filter(n => n.endsWith(\'.xlsx\')), as: \'file\'}--\x3e\n            <div class="etl-loading-metadata-value" data-bind="text: file"></div>\n                \x3c!-- ko foreach: {data: $parent.loadDetails.files[file], as: \'details\'} --\x3e\n                <div class="etl-loading-metadata-key" data-bind="text: details.size"></div>\n                <div class="summary-header" style="margin-top: 10px;">\n                    <span data-bind="text: $root.translations.worksheets"></span>\n                </div>\n                <div class="summary-header" style="margin-top: 10px;">\n                    <span data-bind="text: $root.translations.tiles"></span>\n                </div>\n                \x3c!--ko foreach: $data.worksheets--\x3e\n                <div class="etl-loading-metadata-value" style="font-size: 14px; line-height: 1.25;" data-bind="text: $data.name"></div>\n                <div class="etl-loading-metadata-key" style="font-size: 14px; line-height: 1.25;" data-bind="text: $data.rows"></div>\n                \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                    \n            \x3c!-- /ko --\x3e\n\n            <div class="branch-csv-etl-load-files" style="margin-top: 25px; display: inline-grid; grid-template-columns: auto auto; column-gap: 10px;">\n                <div class="etl-loading-metadata-value" data-bind="text: loadDetails.name"></div>\n                <div class="etl-loading-metadata-key" data-bind="text: loadDetails.size"></div>\n                \x3c!--ko foreach: {data: Object.keys(loadDetails.files).filter(n => !n.endsWith(\'.xlsx\')), as: \'file\'}--\x3e\n                    <div class="etl-loading-metadata-value" data-bind="text: file"></div>\n                    \x3c!-- ko foreach: {data: $parent.loadDetails.files[file], as: \'details\'} --\x3e\n                    <div class="etl-loading-metadata-key" data-bind="text: details.size"></div>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n            \n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\n\x3c!-- /ko --\x3e\n'},75524:function(e){e.exports='\n\n\x3c!-- ko if: state === \'details\' --\x3e\n\n\x3c!-- ko ifnot: loading() --\x3e\n<div class="etl-module-component-container">\n<div class="etl-module-body">\n    <h3 style="margin-top: 15px; margin-bottom: 5px; font-size: 19px;">\n        <span data-bind="text: $root.translations.etlSingleCSVTitle"></span>\n    </h3>\n    <div class="etl-module-component etl-module-mapping">\n        <h4>\n            <span data-bind="text: $root.translations.targetModel"></span>\n        </h4>\n        <select data-bind="\n            value: selectedGraph,\n            options: graphs,\n            optionsText: \'name\',\n            optionsValue: \'graphid\',\n            optionsCaption: $root.translations.selectAResourceModel + \'...\',\n            valueAllowUnset: true,\n            chosen: {width: \'500px\'}"></select>\n    </div>\n    <div class="etl-module-component etl-module-mapping">\n        <h4>\n            <span data-bind="text: $root.translations.importDetails"></span>\n        </h4>\n        \x3c!-- ko if: nodes() --\x3e\n        <span data-bind="text: console.log(nodes())"></span>\n        <select data-bind="\n            value: selectedNode,\n            options: nodes,\n            optionsText: \'label\',\n            optionsCaption: $root.translations.select + \'...\',\n            optionsValue: \'nodeid\',\n            valueAllowUnset: true,\n            chosen: {width: \'100%\'}"></select>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div>\n        <label>Laguages</label>\n        <select data-bind="\n                options: languages,\n                optionsCaption: $root.translations.select + \'...\',\n                optionsText: function(item){return item.name + \' (\' + item.code + \')\'},\n                value: selectedLanguage,\n                chosen: {width:\'100%\'}\n            "></select>\n    </div>\n    <div>\n        <label>Operation</label>\n        <select data-bind="\n                value: operation, \n                chosen: {width: \'100%\', disable_search_threshold: 15},\n                optionsText: \'text\',\n                optionsValue: \'value\',\n                options: [\n                    { text: \'trim\', value: \'trim\' },\n                    { text: \'replace\', value: \'replace\' },\n                    { text: \'capitalize\', value: \'capitalize\' },\n                    { text: \'upper\', value: \'upper\' },\n                    { text: \'lower\', value: \'lower\' },\n                ],\n            "></select>\n    </div>\n    <div data-bind="if: operation() === \'replace\'">\n        <label>Old Text:</label>\n        <input type="text" class="form-control" placeholder="Old Text" data-bind="value: oldText">\n        <label>New Text:</label>\n        <input type="text" class="form-control" placeholder="New Text" data-bind="value: newText">\n    </div>\n</div>\n<div class="tabbed-workflow-footer, etl-module-footer">\n    <button style="margin-right: 8px;" data-bind="click: write" class="btn btn-success">\n        <span data-bind="text: $root.translations.importData"></span>\n    </button>\n    <button data-bind="click: function () { fileAdded(null); }" class="btn btn-danger">\n        <span data-bind="text: $root.translations.cancelFileImport"></span>\n    </button>\n</div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'status\' --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},98501:function(e){e.exports='\n\n\x3c!-- ko if: state === \'details\' --\x3e\n\n\x3c!-- ko ifnot: loading() --\x3e\n\x3c!-- ko ifnot: fileAdded() --\x3e\n<div data-bind="dropzone: dropzoneOptions" class="file-select loader-select" style="height: 100%; width: 100%; margin-top: 65px; background: white">\n    <div>\n        <div class="manifest-manager-main-menu-circle loader-button">\n            <span><i style="color: #000" class="fa fa-cloud-upload r-select-icon"></i></span>\n        </div> \n        <h2>\n            <span data-bind="text: $root.translations.UploadCsvZipFile"></span>\n        </h2>\n        <h4>\n            <span data-bind="text: $root.translations.dropzoneFileUploadCaption"></span>\n        </h4>\n        <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">\n            <div style="display:flex; flex-direction: column;">\n                <div>\n                    <div class="dropzone-photo-upload" style="display:flex; margin-top: 0px;">\n                        <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-primary btn-labeled btn-lg fa fa-file fileinput-button dz-clickable" data-bind="css: uniqueidClass" role="button">\n                            <span data-bind="text: $root.translations.selectFile"></span>\n                        </div>\n                        <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-danger btn-labeled btn-lg fa fa-times-circle" data-bind="click: function() { $parent.cancel() }" role="button">\n                            <span data-bind="text: $root.translations.cancelFileImport"></span>\n                        </div>\n                        <div style="min-height: 100%;">\n                            <div id="hidden-dz-previews" style="display:none"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <h5 class="rr-splash-description">\n                <span data-bind="text: $root.translations.etlFileUploadMessage"></span>\n            </h5>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: fileAdded() --\x3e\n<div class="etl-module-component-container">\n<div class="etl-module-body">\n    <h3 style="margin-top: 15px; margin-bottom: 5px; font-size: 19px;">\n        <span data-bind="text: $root.translations.etlSingleCSVTitle"></span>\n    </h3>\n    <div class="etl-module-component" style="margin-top: 0px;">\n        <h4 style="margin-top: 5px; margin-bottom: 0px;">\n            <span data-bind="text: $root.translations.fileSummary"></span>\n        </h4>\n        <div>\n            <span class="etl-loading-metadata-key" data-bind="text: $root.translations.fileName + \':\'"></span>\n            <span class="etl-loading-metadata-value" data-bind="text: fileInfo().name"></span>\n        </div>\n        <div>\n            <span class="etl-loading-metadata-key" data-bind="text: $root.translations.fileSize + \':\'"></span>\n            <span class="etl-loading-metadata-value" data-bind="html: formatSize(fileInfo().size)"></span>\n        </div>\n        <div>\n            <span class="etl-loading-metadata-key" data-bind="text: $root.translations.numberOfRows + \':\'"></span>\n            <span class="etl-loading-metadata-value" data-bind="text: numberOfRow()"></span>\n        </div>\n    </div>\n    <div class="etl-module-component etl-module-mapping">\n        <h4>\n            <span data-bind="text: $root.translations.targetModel"></span>\n        </h4>\n        <select data-bind="\n            value: selectedGraph,\n            options: graphs,\n            optionsText: \'name\',\n            optionsValue: \'graphid\',\n            optionsCaption: $root.translations.selectAResourceModel + \'...\',\n            valueAllowUnset: true,\n            chosen: {width: \'500px\'}"></select>\n    </div>\n    <div class="etl-module-component">\n        <h4>\n            <span data-bind="text: $root.translations.importDetails"></span>\n        </h4>\n        <div data-bind="component: { name: \'views/components/simple-switch\', params: {value: hasHeaders, config:{ label: $root.translations.columnNameFirstRow, subtitle: \'\'}}}"></div>\n        <div class="csv-mapping-table-container">\n        <table class="table table-striped csv-mapping-table">\n            <thead>\n                <tr>\n                \x3c!-- ko foreach: { data: fieldMapping, as: \'mapping\', noChildContext: true } --\x3e\n                    \x3c!-- ko if: nodes() --\x3e\n                    <th style="border-bottom: 1px solid #ddd; vertical-align: top;">\n                        <select data-bind="\n                            value: mapping.node,\n                            options: nodes,\n                            optionsText: \'label\',\n                            optionsCaption: $root.translations.select + \'...\',\n                            optionsValue: \'alias\',\n                            valueAllowUnset: true,\n                            chosen: {width: \'100%\'}"></select>\n                        \x3c!-- ko if: stringNodes.includes(mapping.node()) --\x3e\n                        <select id="lang_dd" style="flex:1" name="language" data-bind="\n                            value: mapping.language,\n                            options: languages,\n                            optionsText: function(item){return item.name + \' (\' + item.code + \')\'},\n                            chosen: {width: \'100%\'}"></select>\n                        \x3c!-- /ko --\x3e\n                    </th>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                </tr>\n            </thead>\n            <thead>\n                <tr class="column-names">\n                    \x3c!-- ko foreach: headers --\x3e\n                    <th style="border-bottom: 1px solid #ddd;" data-bind="text: $data"></th>\n                    \x3c!-- /ko --\x3e\n                </tr>\n            </thead>\n            <tbody>\n                \x3c!-- ko foreach: { data: csvExample, as: "row", noChildContext: true }--\x3e\n                <tr>\n                    \x3c!-- ko foreach: { data: row, as: "cell" }  --\x3e\n                    <td style="vertical-align: text-top;" data-bind="text: cell"></td>\n                    \x3c!-- /ko --\x3e\n                </tr>\n                \x3c!-- /ko --\x3e\n            </tbody>\n        </table>\n        </div>\n        \x3c!-- ko if: csvExample().length >= 5--\x3e\n        <div data-bind="text: $root.translations.showingFirst + \' \' + csvExample().length + $root.translations.rows"></div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: csvExample().length >= 5 --\x3e\n        <div data-bind="text: $root.translations.showingAll + \' \' + csvExample().length + $root.translations.rows"></div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n<div class="tabbed-workflow-footer, etl-module-footer">\n    <button style="margin-right: 8px;" data-bind="click: write" class="btn btn-success">\n        <span data-bind="text: $root.translations.importData"></span>\n    </button>\n    <button data-bind="click: function () { fileAdded(null); }" class="btn btn-danger">\n        <span data-bind="text: $root.translations.cancelFileImport"></span>\n    </button>\n</div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: state === \'status\' --\x3e\n\n<div>\n    <h4>\n        <span data-bind="text: $root.translations.importSingleCsv"></span>\n    </h4>\n    \x3c!-- ko if: load_details --\x3e\n    \x3c!-- ko ifnot: loading() --\x3e\n    <div>\n        <span class="etl-loading-metadata-key" data-bind="text: $root.translations.targetResource + \':\'"></span>\n        <span class="etl-loading-metadata-value" data-bind="text: getGraphName(load_details.graph)"></span>\n    </div>\n    <div>\n        <span class="etl-loading-metadata-key" data-bind="text: $root.translations.targetFields + \':\'"></span>\n        \x3c!-- ko foreach: load_details.mapping --\x3e\n        \x3c!-- ko if:  $data.node --\x3e\n        <span class="etl-loading-metadata-value" data-bind="text: $data.node"></span><span>;</span>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- /ko --\x3e\n'},7703:function(e){e.exports="\n<div>\n    <div data-bind=\"component: {\n        name: 'views/components/nodegroup-selector',\n        params: $data.config\n    }\"></div>\n</div>"},2704:function(e){e.exports='\n\n<div class="primary-descriptors-container">\n\x3c!-- Nav tabs --\x3e\n<ul class="nav nav-tabs card-nav-container flex pad-no" role="tablist">\n    <li role="presentation" class="active">\n        <a href="#primary-descriptors-name" aria-controls="primary-descriptors-name" role="tab" data-toggle="tab">\n            <span data-bind="text: $root.translations.displayName"></span>\n        </a>\n    </li>\n    <li role="presentation">\n        <a href="#primary-descriptors-description" aria-controls="primary-descriptors-description" role="tab" data-toggle="tab">\n            <span data-bind="text: $root.translations.displayDescription"></span>\n        </a>\n    </li>\n    <li role="presentation">\n        <a href="#primary-descriptors-map-popup" aria-controls="primary-descriptors-description" role="tab" data-toggle="tab">\n            <span data-bind="text: $root.translations.mapPopup"></span>\n        </a>\n    </li>\n    <li style="flex-grow: 1;"></li>\n    <li role="presentation">\n        <a href="#reindex" aria-controls="reindex" role="tab" data-toggle="tab">\n            <span data-bind="text: $root.translations.reindex"></span>\n        </a>\n    </li>\n</ul>\n\n<div class="tab-content">\n    <div class="tab-pane primary-descriptors-panel active" role="tabpanel" id="primary-descriptors-name">\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.cardName"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <select data-bind="\n                            placeholder: $root.translations.selectPrimaryDescriptionIdentifierCard,\n                            value: name.nodegroup_id, \n                            options: cards, \n                            optionsText: \'name\', \n                            optionsValue: \'nodegroup_id\', \n                            chosen: {width: \'100%\', allow_single_deselect: true, disable_search_threshold: 15}\n                        "></select>\n                </div>\n            </div>\n        </div>\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.primaryNameTemplate"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <input class="form-control input-lg widget-input" data-bind="\n                            attr: {placeholder: $root.translations.useBracketedNodeNames},\n                            textInput: name.string_template\n                        ">\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="tab-pane" role="tabpanel" id="primary-descriptors-description">\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.cardName"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <select data-bind="\n                            placeholder: $root.translations.selectPrimaryDescriptionIdentifierCard,\n                            value: description.nodegroup_id, \n                            options: cards, \n                            optionsText: \'name\', \n                            optionsValue: \'nodegroup_id\', \n                            valueAllowUnset: true, \n                            chosen: {width: \'100%\', allow_single_deselect: true, disable_search_threshold: 15}\n                        "></select>\n                </div>\n            </div>\n        </div>\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.primaryDescriptionTemplate"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <input class="form-control input-lg widget-input" data-bind="\n                            attr: {placeholder: $root.translations.useBracketedNodeNames},\n                            textInput: description.string_template\n                        ">\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="tab-pane" role="tabpanel" id="primary-descriptors-map-popup">\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.cardName"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <select data-bind="\n                            placeholder: $root.translations.selectPrimaryDescriptionIdentifierCard,\n                            value: map_popup.nodegroup_id, \n                            options: cards, \n                            optionsText: \'name\', \n                            optionsValue: \'nodegroup_id\', \n                            valueAllowUnset: true, \n                            chosen: {width: \'100%\', allow_single_deselect: true, disable_search_threshold: 15}\n                        "></select>\n                </div>\n            </div>\n        </div>\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <label class="col-xs-12 control-label widget-input-label">\n                        <span data-bind="text: $root.translations.mapPopupTemplate"></span>\n                    </label>\n                </div>\n\n                <div class="col-xs-12">\n                    <input class="form-control input-lg widget-input" data-bind="\n                            attr: {placeholder: $root.translations.useBracketedNodeNames},\n                            textInput: map_popup.string_template\n                        ">\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="tab-pane" role="tabpanel" id="reindex">\n        <div class="row widget-container">\n            <div class="form-group">\n                <div class="relative">\n                    <i class="fa fa-exclamation-triangle" style="color: #f75d3f;"></i>\n                    <span class="control-label" data-bind="text: $root.translations.functionReindexMessage"></span>\n                </div>\n\n                <div class="flex" style="flex-direction: row-reverse;">\n                    <a class="btn btn-sm btn-primary btn-labeled fa fa-refresh" style="float: right;margin-top: 6px;margin-right: 6px;" data-bind="visible: !loading(), click: reindexdb;">\n                        <span data-bind="text: $root.translations.reindexResourcesNow"></span>\n                    </a>\n                    <a class="btn btn-primary" href="#" style="float: right;margin-top: 6px;margin-right: 6px; padding:0px 5px 0px 0px;" data-bind="visible: loading">\n                        <i class="fa fa-spin fa-refresh" style="padding: 8px;"></i>\n                        <span data-bind="text: $root.translations.reindexing"></span>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>'},42835:function(e){e.exports='\n\x3c!-- Geocode Panel --\x3e\n    \x3c!-- ko if: options().length > 0 --\x3e\n    <a href="#" data-bind="click: function () {\n        query(\'\');\n    }">\n        <i class="fa fa-close geocode-clear"></i>\n    </a>\n    \x3c!--/ko--\x3e\n\n    <input type="text" class="form-control input-md widget-input" data-bind="\n        attr: {\n            placeholder: placeholder\n        },\n        value: query,\n        valueUpdate: \'keyup\',\n        hasFocus: isFocused,\n        event: {\n            \'keydown\': handleKeys\n        }\n    ">\n\n    \x3c!-- ko if: isFocused --\x3e\n        \x3c!-- ko if: loading --\x3e\n        <div class="geocoder-results panel">\n            <div class="geocoder-result-item">\n                <i class="fa fa-spinner fa-spin"></i>\n                <span data-bind="text: $root.translations.searching + \'...\'"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n\n        \x3c!-- ko if: options().length > 0 --\x3e\n        <div class="geocoder-results panel" data-bind="foreach: options">\n            <div class="geocoder-result-item" data-bind="\n                click:$parent.selection,\n                event: {\n                    \'mouseover\': $parent.focusItem\n                },\n                css: {\n                    \'selected-geocoder-result\': $data === $parent.selection(),\n                    \'focused-geocoder-result\': $data === $parent.focusItem()\n                }\n            ">\n                <span data-bind="text: text"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n    \x3c!--/ko--\x3e\n'},44155:function(e){e.exports='\n\n\x3c!-- Icon search component--\x3e\n<div class="icon-selector">\n    \x3c!-- Icon Filter --\x3e\n    <div style="padding: 10px;">\n        <div class="flex" style="gap: 5px;">\n            <div>\n                <span data-bind="text: label"></span>\n                <button class="btn btn-default btn-icon icon-lg" data-bind="css: selectedIcon(), click: function() {}" style="height: 35px; width: 35px;"></button>\n            </div>\n    \n            <div>\n                <input type="text" class="form-control" style="width: 366px; height: 36px;" data-bind="\n                        attr: {placeholder: $root.translations.findAnIcon},\n                        textInput:iconFilter\n                    ">\n            </div>\n    \n            \x3c!-- ko if: iconFilter() !== \'\' --\x3e\n            <span class="clear-search" data-bind="click: function () { iconFilter(\'\'); }">\n                <i class="fa fa-times-circle"></i>\n            </span>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \n    \x3c!-- Icon List --\x3e\n    <div class="icon-list" style="height: 300px;overflow-y: scroll;padding: 15px;border: 1px solid #e9e9e9;">\n        <div>\n    \n            \x3c!-- ko foreach: iconList --\x3e\n            <div class="col-xs-6 col-md-3 col-sm-4 demo-icon-font" data-bind="css: {\'selected\': (cssclass === $parent.selectedIcon())}, click: function() { $parent.selectedIcon(cssclass) }">\n                <i data-bind="css: cssclass"></i> <span data-bind="text: name"></span>\n            </div>\n            \x3c!-- /ko --\x3e\n    \n        </div>\n    </div>\n\n</div>'},94806:function(e){e.exports='\n\n<div class="mapboxgl-popup-content">\n    <button class="mapboxgl-popup-close-button" type="button" aria-label="Close popup" data-bind="click: closePopup">×</button>\n    <div class="hover-feature-title-bar">\n        <div class="hover-feature-title">\n            <span class="" data-bind="text: name"></span>\n        </div>\n    </div>\n    <div class="hover-feature-body">\n        <div class="hover-feature" data-bind="html: description"></div>\n        <div class="hover-feature-metadata">\n            <span data-bind="text: $root.translations.resourceModel + \':\'"></span>\n            <span data-bind="text: graphName"></span>\n        </div>\n        <div class="hover-feature-metadata">\n            <span data-bind="text: $root.translations.idString"></span>\n            <span data-bind="text: resourceinstanceid"></span>\n        </div>\n    </div>\n    <div class="hover-feature-footer">\n        <a data-bind="click: function () {\n            window.open(reportURL + resourceinstanceid);\n        }" href="javascript:void(0)">\n            <i class="ion-document-text"></i>\n            <span data-bind="text: $root.translations.report"></span>\n        </a>\n    </div>\n</div>\n'},57602:function(e){e.exports='\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n'},465:function(e){e.exports='\n\n\n\x3c!-- ko if: loading() --\x3e\n<div class="hover-feature-body hover-feature-loading">\n    <i class="fa fa-spin fa-spinner"></i>\n    <span data-bind="text: $root.translations.loading + \'...\'"></span>\n</div>\n\x3c!--/ko--\x3e\n\n\x3c!-- ko if: !loading() --\x3e\n\x3c!-- ko foreach: popupFeatures --\x3e\n    \x3c!-- ko if: active --\x3e\n    \x3c!-- ko if: displayname --\x3e\n    <div class="hover-feature-title-bar">\n        \n        <div style="display: flex;">\n            <div data-bind="visible: $parent.popupFeatures.length > 1, click: function(){$parent.advanceFeature(\'left\')}" class="hover-feature-nav-left"><i class="fa fa-angle-left"></i></div>\n            <div data-bind="visible: $parent.popupFeatures.length > 1, click: function(){$parent.advanceFeature(\'right\')}" class="hover-feature-nav-right"><i class="fa fa-angle-right"></i></div>\n            <div class="hover-feature-title" data-bind="text: displayname"></div>\n        </div>\n        \n    </div>\n    \x3c!--/ko--\x3e\n    <div class="hover-feature-body">\n        \n        <div class="hover-feature" data-bind="html: map_popup"></div>\n        \x3c!-- ko if: resourceinstanceid --\x3e\n        <div class="hover-feature-metadata-block">\n            <div class="hover-feature-metadata">\n                <span data-bind="text: $root.translations.resourceModel"></span>\n                <span data-bind="text: graph_name"></span>\n            </div>\n            <div class="hover-feature-metadata">\n                <span data-bind="text: $root.translations.idString"></span>\n                <span data-bind="text: resourceinstanceid"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n        \n    </div>\n    <div class="hover-feature-footer">\n        <div>\n        \n        \x3c!-- ko if: resourceinstanceid --\x3e\n        <a data-bind="click: function () {\n            window.open(reportURL + ko.unwrap(resourceinstanceid));\n        }" href="javascript:void(0)">\n            <i class="ion-document-text"></i>\n            <span data-bind="text: $root.translations.report"></span>\n        </a>\n        \x3c!--/ko--\x3e\n        \x3c!-- ko if: showEditButton --\x3e\n        <a data-bind="click: function () {\n            window.open(editURL + ko.unwrap(resourceinstanceid));\n        }" href="javascript:void(0)">\n            <i class="ion-ios-refresh-empty"></i>\n            <span data-bind="text: $root.translations.edit"></span>\n        </a>\n        \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- ko if: $parent.popupFeatures.length > 1 --\x3e\n        <div style="display: flex; flex-direction: row; width: 60px; justify-content: space-evenly; font-weight: 500;">\n            <div class="hover-feature-instance-counter" data-bind="text: 1 + $parent.popupFeatures.findIndex(feature => feature.active());"></div>\n            <span data-bind="text: $root.translations.of"></span>\n            <div style="padding-left: 3px;" data-bind="text: $parent.popupFeatures.length"></div>\n        </div>\n        \x3c!--/ko--\x3e\n        \n    </div>\n    \x3c!--/ko--\x3e\n    \x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n'},88347:function(e){e.exports='\n\n<div class="workbench-card-wrapper">\n    <div class="workbench-card-sidebar">\n        \n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'basemap\');\n        }, css: {\n            \'active\': activeTab() === \'basemap\'\n        }">\n            <i class="fa fa-globe"></i>\n            <span data-bind="text: $root.translations.basemap" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'overlays\');\n        }, css: {\n            \'active\': activeTab() === \'overlays\'\n        }">\n            <i class="fa fa-list"></i>\n            <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'legend\');\n        }, css: {\n            \'active\': activeTab() === \'legend\'\n        }">\n            <i class="fa fa-list-alt"></i>\n            <span data-bind="text: $root.translations.legend" class="map-sidebar-text"></span>\n        </div>\n        \n    </div>\n    \x3c!--ko if: activeTab() --\x3e\n        <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n            \n            \x3c!--ko if: activeTab() === \'basemap\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.basemaps"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n\n                <div class="workbench-card-sidepanel-body">\n                <div class="basemap-listing-container">\n                \x3c!--ko foreach: basemaps --\x3e\n                    <div class="basemap-listing" data-bind="\n                        click: $parent.activeBasemap,\n                        css: {\'active-basemap\': $data === $parent.activeBasemap()}\n                        ">\n                        <i data-bind="css: icon" class="layer-listing-icon"></i>\n                        <span data-bind="text: name"></span>\n                    </div>\n                \x3c!--/ko --\x3e\n                </div>\n                </div>\n\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'overlays\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.overlays"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="overlays-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="overlay-listing" data-bind="css: {\'active-overlay\': onMap}">\n                        <div class="overlay-name" data-bind="\n                            click: function() {\n                                onMap(!onMap());\n                                updateParent($parent);\n                            }\n                        ">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        <div class="relative">\n                            <div class="overlay-opacity-control">\n                                <i class="fa fa-adjust"></i>\n                                <div class="overlay-opacity-slider">\n                                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'legend\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.legend"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="legend-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="legend-listing" data-bind="css: {\'hidden\': !onMap()}">\n                        <div class="legend-name">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        \x3c!--ko if: legend --\x3e\n                        <div class="legend-content" data-bind="html: legend"></div>\n                        \x3c!--/ko --\x3e\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n            \n        </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container" data-bind="mapboxgl: {\n            mapOptions: mapOptions,\n            afterRender: setupMap\n        }">\n    </div>\n</div>\n'},96389:function(e){e.exports='\n<div class="row widget-container">\n    <div class="form-group">\n        <div class="relative">\n            <label class="col-xs-12 control-label widget-input-label">\n                <span data-bind="text: $root.translations.triggeringNodegroups"></span>\n            </label>\n        </div>\n\n        <div class="col-xs-12">\n            <select multiple="multiple" data-bind="\n                    placeholder: $root.translations.selectANodegroup,\n                    chosen: {width: \'100%\'}, \n                    selectedOptions: triggering_nodegroups, \n                    options: cards, \n                    optionsText: \'name\', \n                    optionsValue: \'nodegroup_id\'\n                "></select>\n        </div>\n    </div>\n</div>\n'},28507:function(e){e.exports='\n\n\x3c!-- ko if: !loading() --\x3e\n<div class="etl-manager-container">\n    <div class="etl-manager-tab-container">\n        <div class="etl-manager-tabs" style="height: 50px;">\n            <div class="etl-manager-tab" data-bind="click: function(){activeTab(\'start\')}, css: {active: activeTab() === \'start\', \'disabled\': false}, text: \'Start\'"></div>\n            <div class="etl-manager-tab" data-bind="click: function(){activeTab(\'details\')}, css: {active: activeTab() === \'details\', \'disabled\': !selectedModule()}, text: \'Task Details\'"></div>\n            <div class="etl-manager-tab" data-bind="click: function(){activeTab(\'import\');}, css: {active: activeTab() === \'import\', \'disabled\': false}, text: \'Task Status\'"></div>\n            <div class="etl-manager-tab" data-bind="click: function(){activeTab(\'export\')}, css: {active: activeTab() === \'export\', \'disabled\': true}, text: \'Templates\'"></div>\n        </div>\n    </div>\n    <div data-bind="if: activeTab() === \'start\'">\n        <div class="etl-manager-filter-container">\n            <div class="etl-manager-filter-button" data-bind="click: function() { activeModules(\'import\'); }, css: {active: activeModules() === \'import\' }">\n                <span data-bind="text: $root.translations.import"></span>\n            </div>\n            <div class="etl-manager-filter-button" data-bind="click: function() { activeModules(\'edit\'); }, css: {active: activeModules() === \'edit\' }">\n                <span data-bind="text: $root.translations.edit"></span>\n            </div>\n            <div class="etl-manager-filter-button" data-bind="click: function() { activeModules(\'export\'); }, css: {active: activeModules() === \'export\' }">\n                <span data-bind="text: $root.translations.export"></span>\n            </div>\n            <input class="etl-manager-filter-input etl-model-filter" type="text" data-bind="attr: {placeholder: $root.translations.filterModules + \'...\'}, textInput: moduleSearchString">\n        </div>\n        \x3c!-- ko ifnot: loading() --\x3e\n        <div class="workflow-select-plugin">\n            <div class="workflow-select-card-container">\n                \x3c!-- ko foreach: {data: etlModules, as: \'etlmodule\', noChildContext: true} --\x3e\n                    \x3c!-- ko if: activeModules() == \'import\' && (!moduleSearchString() || !!moduleSearchString() && etlmodule.name.toLowerCase().includes(moduleSearchString().toLowerCase()) ) --\x3e\n                    <a href="#" data-bind="if: etlmodule.etl_type === \'import\', click: function() { selectModule(etlmodule) }">\n                        <div data-bind="style: {\'background-color\': etlmodule.config.bgColor}" class="workflow-select-card">\n                            <h4 class="workflow-select-title" data-bind="text: etlmodule.name"></h4>\n                            <div data-bind="style: {\'background-color\': etlmodule.config.circleColor}" class="workflow-select-wf-circle">\n                                <span><i data-bind="attr:{class: (\'fa \'+etlmodule.icon +\' workflow-select-wf-icon\')}"></i></span>\n                            </div>\n                            <p data-bind="text: etlmodule.description" class="workflow-select-desc"></p>\n                        </div>\n                    </a>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: activeModules() == \'edit\' && (!moduleSearchString() || !!moduleSearchString() && etlmodule.name.toLowerCase().includes(moduleSearchString().toLowerCase()) ) --\x3e\n                    <a href="#" data-bind="if: etlmodule.etl_type === \'edit\', click: function() { selectModule(etlmodule) }">\n                        <div data-bind="style: {\'background-color\': etlmodule.config.bgColor}" class="workflow-select-card">\n                            <h4 class="workflow-select-title" data-bind="text: etlmodule.name"></h4>\n                            <div data-bind="style: {\'background-color\': etlmodule.config.circleColor}" class="workflow-select-wf-circle">\n                                <span><i data-bind="attr:{class: (\'fa \'+etlmodule.icon +\' workflow-select-wf-icon\')}"></i></span>\n                            </div>\n                            <p data-bind="text: etlmodule.description" class="workflow-select-desc"></p>\n                        </div>\n                    </a>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: activeModules() == \'export\' && (!moduleSearchString() || !!moduleSearchString() && etlmodule.name.toLowerCase().includes(moduleSearchString().toLowerCase()) )--\x3e\n                    <a href="#" data-bind="if: etlmodule.etl_type === \'export\', click: function() { selectModule(etlmodule) }">\n                        <div data-bind="style: {\'background-color\': etlmodule.config.bgColor}" class="workflow-select-card">\n                            <h4 class="workflow-select-title" data-bind="text: etlmodule.name"></h4>\n                            <div data-bind="style: {\'background-color\': etlmodule.config.circleColor}" class="workflow-select-wf-circle">\n                                <span><i data-bind="attr:{class: (\'fa \'+etlmodule.icon +\' workflow-select-wf-icon\')}"></i></span>\n                            </div>\n                            <p data-bind="text: etlmodule.description" class="workflow-select-desc"></p>\n                        </div>\n                    </a>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div style="height:100%" data-bind="if: activeTab() === \'details\'">\n        \x3c!-- ko if: selectedModule() --\x3e\n        <div style="width: 100%; height: inherit">\n            <div style="height: inherit;">\n                <div style="height: inherit;" data-bind="component: {\n                    name: selectedModule().componentname,\n                    params: {\n                                alert: alert,\n                                state: \'details\',\n                                activeTab: activeTab,\n                                ...selectedModule()\n                            }\n                }"></div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div data-bind="if: activeTab() === \'import\'">\n        <div class="etl-module-status-container">\n            <div class="etl-module-preview-container" style="display: inline-flex; flex-direction: row;">\n                <div class="etl-module-status">\n                    <div class="etl-manager-status-filter-container">\n                        <input class="etl-manager-filter-input" type="text" data-bind="attr:{placeholder: $root.translations.filterTasks}, textInput: taskSearchString">\n                    </div>\n\n                    <div class="etl-jobs-container" data-bind="foreach: {data: loadEvents, as: \'event\'}">\n                        \x3c!-- ko if: !$parent.taskSearchString() || event.etl_module.name.toLowerCase().includes($parent.taskSearchString().toLowerCase()) || $parent.formatUserName(event.user).toLowerCase().includes($parent.taskSearchString().toLowerCase()) --\x3e\n                       \n                        <div class="etl-job" data-bind="css: {\'selected\': event.loadid == $parent.selectedLoadEvent()?.loadid}">\n                            <div class="etl-job-metadata" data-bind="click: function(){$parent.selectedLoadEvent(event)}" style="padding: 10px 15px; flex-direction: column; justify-content: space-between; cursor: pointer; height: 85px;">\n                                <div>\n                                    <div data-bind="text: event.etl_module.name" style="font-size: 15px; color: rgb(4, 4, 45)"></div>\n                                </div>\n                                <div style="display: flex; flex-direction: row; justify-content: space-between;">\n                                    <div>\n                                        <div data-bind="text: $parent.formatUserName(event.user)"></div>\n                                        <div>\n                                            <span data-bind="text: $root.translations.start + \': \'"></span>\n                                            <span data-bind="text: $parent.formatTime(event.load_start_time)"></span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="etl-job-task-bar">\n                                <div class="task">\n                                    \x3c!-- ko if: event.status == "completed" --\x3e\n                                    <a data-bind="click: function() { $parent.reverseTransactions(event, $root.translations.warning, $root.translations.etlReverseWarningMessage)}">\n                                        <span data-bind="text: $root.translations.undoImport"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "indexed" --\x3e\n                                    <a data-bind="click: function() { $parent.reverseTransactions(event, $root.translations.warning, $root.translations.etlReverseWarningMessage)}">\n                                        <span data-bind="text: $root.translations.undoImport"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "unloaded" --\x3e\n                                    <a data-bind="click: function() { $parent.cleanLoadEvent(event.loadid) }">\n                                        <span data-bind="text: $root.translations.removeFromHistory"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "failed" --\x3e\n                                    <a data-bind="click: function() { $parent.cleanLoadEvent(event.loadid) }">\n                                        <span data-bind="text: $root.translations.removeFromHistory"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                                <div class="status">\n                                    \x3c!-- ko if: event.status == "completed" --\x3e\n                                    <button class="btn btn-warning" style="width:150px;">\n                                        <span data-bind="text: $root.translations.indexing"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "indexed" --\x3e\n                                    <button class="btn btn-success" style="width:150px;">\n                                        <span data-bind="text: $root.translations.completed"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "failed" --\x3e\n                                    <button class="btn btn-danger" style="width:150px;">\n                                        <span data-bind="text: $root.translations.failed"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "running" --\x3e\n                                    <button class="btn btn-warning" style="width:150px;">\n                                        <span data-bind="text: $root.translations.running"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "reversing" --\x3e\n                                    <button class="btn btn-warning" style="width:150px;">\n                                        <span data-bind="text: $root.translations.unloading"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: event.status == "unloaded" --\x3e\n                                    <button class="btn btn-success" style="width:150px;">\n                                        <span data-bind="text: $root.translations.unloaded"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                        </div>\n                        \n                        \x3c!-- /ko --\x3e\n                    </div>\n\n                    <div style="height:50px; background: #f4f4f4; border-top: 1px solid #ddd;">\n                        <div id="paginator" data-bind="with: paginator">\n                            <div class="text-center">\n                                <ul class="pagination" style="margin-top: 8px;">\n                                    <li><a data-bind="css: {\'disabled\': !has_previous}, click: $parent.newPage.bind($parent, previous_page_number)" href="#">«</a></li>\n                                    \x3c!-- ko foreach: { data: pages, as: \'page\' } --\x3e\n                                        \x3c!-- ko if: page --\x3e\n                                        <li class="page" data-bind="click: $parents[1].newPage.bind($parents[1]), css: {\'current active\': (page == $parent.current_page)}">\n                                            <a href="#" data-bind="text: page, attr:{\'data-page\':page}"></a>\n                                        </li>\n                                        \x3c!-- /ko --\x3e\n                                        \x3c!-- ko ifnot: page --\x3e\n                                        <li class="disabled"><a href="#">...</a></li>\n                                        \x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                    <li><a data-bind="css: {\'disabled\': !has_next}, click: $parent.newPage.bind($parent, next_page_number)" href="#">»</a></li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="etl-module-preview">\n                    <div class="etl-module-info" data-bind="if: selectedLoadEvent()">\n                        <div class="" data-bind="component: {\n                            name: selectedLoadEvent().etl_module.componentname,\n                            params: {\n                                        state: \'status\',\n                                        load_details: selectedLoadEvent().load_details,\n                                        ...selectedModule(),\n                                    },\n                            }">    \n                        </div>\n                        <div class="etl-module-component">\n                            \x3c!-- ko if: validated --\x3e\n                            <h4>\n                                <span data-bind="text: $root.translations.validationErrors"></span>\n                            </h4>\n                            <table class="table table-striped" style="margin-top: 5px; border: 1px solid rgba(0,0,0,0.14)" width="100%">\n                                <thead>\n                                    <tr>\n                                        <th data-bind="text: \'Error\'"></th>\n                                        <th data-bind="text: \'Source\'"></th>\n                                    </tr>\n                                </thead>\n                                \x3c!-- ko if: selectedLoadEvent().error_message --\x3e\n                                <tbody>\n                                    <tr>\n                                        <td colspan="3" data-bind="text: selectedLoadEvent().error_message"></td>\n                                    </tr>\n                                </tbody>\n                                \x3c!-- /ko --\x3e \n                                \x3c!-- ko if: validationError().length --\x3e\n                                <tbody>\n                                    \x3c!-- ko foreach: validationError --\x3e\n                                    <tr>\n                                        <td data-bind="text: $data[1]"></td>\n                                        <td data-bind="text: $data[0]"></td>\n                                    </tr>\n                                    \x3c!-- /ko --\x3e\n                                </tbody>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko ifnot: validationError().length || selectedLoadEvent().error_message --\x3e\n                                <tbody>\n                                    <tr>\n                                        <span></span>\n                                        <td colspan="3">\n                                            <span data-bind="text: $root.translations.noErrorFound"></span>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                                \x3c!-- /ko --\x3e            \n                            </table>\n                            \x3c!-- /ko --\x3e\n                        </div>\n                        <div data-bind="if: selectedLoadEvent()">\n                            <h4>\n                                <span data-bind="text: $root.translations.loadingData"></span>\n                            </h4>\n                            <div>\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.loadingStatus + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="\n                                    text:\n                                        selectedLoadEvent().status == \'indexed\' ? $root.translations.completed\n                                        : selectedLoadEvent().status == \'completed\' ? $root.translations.indexing\n                                        : selectedLoadEvent().status == \'failed\' ? $root.translations.failed \n                                        : $root.translations.running\n                                "></span>  \n                            </div>\n                            <div>\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.loadingStarted + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="text: formatTime(selectedLoadEvent().load_start_time)"></span>    \n                            </div>\n                            <div data-bind="if: selectedLoadEvent().load_end_time">\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.loadingEnded + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="text: formatTime(selectedLoadEvent().load_end_time)"></span>    \n                            </div>\n                            <div data-bind="if: selectedLoadEvent().load_end_time">\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.loadDuration + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="text: timeDifference(selectedLoadEvent().load_end_time, selectedLoadEvent().load_start_time)"></span>    \n                            </div>\n                            <div data-bind="if: selectedLoadEvent().indexed_time">\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.indexingEnded + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="text: formatTime(selectedLoadEvent().indexed_time)"></span>    \n                            </div>\n                            <div data-bind="if: selectedLoadEvent().indexed_time">\n                                <span class="etl-loading-metadata-key" data-bind="text: $root.translations.indexingDuration + \':\'"></span>\n                                <span class="etl-loading-metadata-value" data-bind="text: timeDifference(selectedLoadEvent().indexed_time, selectedLoadEvent().load_end_time)"></span>    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div data-bind="if: activeTab() === \'export\'">\n         <h1>\n            <span data-bind="text: $root.translations.export"></span>\n        </h1>\n    </div>\n</div>\n\x3c!-- /ko --\x3e'},27171:function(e){e.exports='\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'manifest\');\n}, css: {\n    \'active\': activeTab() === \'manifest\',\n    \'disabled\': mainMenu() || remoteManifest()\n}">\n    <i class="fa fa-tags"></i>\n    <span></span>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.service"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'canvas\');\n}, css: {\'active\': activeTab() === \'canvas\', \'disabled\': !canvas() || remoteManifest()\n}">\n    <i class="fa fa-cloud-upload"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.canvas"></span>\n</div>\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko foreach: { data: [$data], as: \'self\' }--\x3e\n\x3c!--ko if: activeTab() === \'manifest\'--\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.manageImageService"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div class="form-group">\n        <div class="row widget-wrapper">\n        <label class="control-label">\n            <span data-bind="text: $root.translations.title"></span>\n        </label>\n        <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.serviceTitle}, textInput: self.manifestName, valueUpdate: \'keyup\'">\n        </div>  \n        <div class="row widget-wrapper">  \n        <label class="control-label">\n            <span data-bind="text: $root.translations.description"></span>\n        </label>\n        <textarea rows="10" type="text" class="form-control input-lg" data-bind="attr:{placeholder: $root.translations.serviceDescription}, textInput: self.manifestDescription, valueUpdate: \'keyup\'"></textarea>\n        </div>\n        <div class="row widget-wrapper">\n            <label class="control-label">\n                <span data-bind="text: $root.translations.attribution"></span>\n            </label>\n            <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.attribution}, textInput: self.manifestAttribution, valueUpdate: \'keyup\'">\n            </div>  \n        <div class="row widget-wrapper">\n            <label class="control-label">\n                <span data-bind="text: $root.translations.attributionLogo"></span>\n            </label>\n            <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.attributionLogo}, textInput: self.manifestLogo, valueUpdate: \'keyup\'">\n            </div>  \n        <div class="row widget-wrapper">\n        <label class="control-label">\n            <span data-bind="text: $root.translations.metadata"></span>\n        </label>\n        <div class="manifest-metadata" style="display: flex;">\n            <div style="display: flex; flex-direction: column; width: 100%;">\n            <div style="padding: 3px">\n                <input type="text" class="form-control input-md iiif-input" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.metadataLabel}, textInput: metadataLabel, valueUpdate: \'keyup\'">\n            </div>\n            <div style="padding: 3px">\n                 <textarea class="form-control input-md iiif-input" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.metadataValue}, textInput: metadataValues, valueUpdate: \'keyup\'"></textarea>\n            </div>\n            </div>\n            <div style="height: fit-content; padding-top: 15px; cursor: pointer;" data-bind="click: function(){updateMetadata()}">\n                <i class="fa fa-plus-circle pull-right"></i>\n            </div>\n        </div>\n        <hr>\n        <div data-bind="sortable: {\n                data: manifestMetadata,\n                options: {\n                    start: self.startDrag\n                },\n                beforeMove: self.beforeMove,\n                afterMove: function(){console.log(\'hi\')}\n            }">  \n            <div class="iiif-manifest-metadata-panel" style="">\n                <div class="manifest-metadata-panel-drag"><i class="fa fa-ellipsis-v"></i></div>\n                <div style="display: flex; flex-direction: column; width: 100%;">\n                <div style="padding: 3px;">\n                    <input type="text" class="form-control input-md iiif-input" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.metadataLabel}, textInput: $data.label, valueUpdate: \'keyup\'">\n                </div>\n                <div style="padding: 3px">\n                    <textarea type="text" class="form-control input-md iiif-input" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.metadataValue}, textInput: $data.value, valueUpdate: \'keyup\'"></textarea>\n                </div>\n                </div>\n                <div style="height: fit-content; padding-top: 15px; cursor: pointer;" data-bind="click: function(){self.removeMetadata($data)}">\n                    <i class="fa fa-minus-circle pull-right"></i>\n                </div>\n            </div>\n        </div>\n        </div>\n    </div>\n\n    \n    <div class="install-buttons" style="display: inline-flex; justify-content: space-between;">\n        <div style="display: flex;">\n        <button class="btn btn-mint btn-md btn-labeled fa fa-pencil" style="width: auto; margin-right: 10px;" data-bind="click: updateManifest, clickBubble: false, disable: !isManifestDirty()">\n            <span data-bind="text: $root.translations.save"></span>\n        </button>\n        <button class="btn btn-warning btn-md btn-labeled fa fa-refresh" style="width: auto; margin-right: 10px;" data-bind="click: reset, clickBubble: false, disable: !isManifestDirty()">\n            <span data-bind="text: $root.translations.cancel"></span>\n        </button>\n        </div>\n        \x3c!--ko if: manifest--\x3e\n        <button class="btn btn-danger btn-md btn-block btn-labeled btn-workbench fa fa-trash" style="width: auto" data-bind="click: deleteManifest">\n            <span data-bind="text: $root.translations.delete"></span>\n        </button>\n        \x3c!--/ko--\x3e\n    </div>\n</div>\n</div>\n\x3c!--/ko--\x3e\n\n\x3c!--ko if: activeTab() === \'canvas\'--\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.manageImageCanvases"></span>\n    </h4>\n</div>\n\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    \x3c!--ko if: canvases().length > 0--\x3e\n    <label class="control-label">\n        <span data-bind="text: $root.translations.images"></span>\n    </label>\n    <span></span>\n    <div>\n        <span data-bind="text: $root.translations.imageServiceInstruction"></span>\n    </div>\n    <div class="file-workbench-files" data-bind="foreach: canvases">\n        <div class="file-workbench-file" style="display: inline-flex;" data-bind="css: {staged: (($parent.selectPrimaryPanel() && ko.unwrap($parent.canvas) === $data.images[0].resource.service[\'@id\']) || !$parent.selectPrimaryPanel() && ko.unwrap($parent.secondaryCanvas) === $data.images[0].resource.service[\'@id\'])}">\n            <input type="checkbox" style="width:15px; height:15px;" data-bind="value: $data, checked: $parent.canvasesForDeletion">\n            <span data-bind="text: console.log($parent.canvasLabel(), $parent.canvas(), $data.images[0])"></span>\n            <span class="file-name manifest-manager-canvas-name" data-bind="text: label, click: $parent.canvasClick, clickBubble: false"></span>\n        </div>\n    </div>\n\n    <div class="iiif-canvas-links-panel">\n        <a class="" data-bind="click: addAllCanvases">\n            <span data-bind="text: $root.translations.selectAll"></span>\n        </a>\n        <a class="" data-bind="click: clearCanvasSelection, css: {disabled: canvasesForDeletion().length === 0}">\n            <span data-bind="text: $root.translations.clearAll"></span>\n        </a>\n\n        <div class="file-workbench-selected-buttons" data-bind="visible: canvasesForDeletion().length > 0">\n            <button class="btn btn-lg btn-workbench btn-danger" data-bind="click: deleteCanvases">\n                <i class="fa fa-trash"></i>\n                <span data-bind="text: $root.translations.deleteSelected"></span>\n            </button>\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n    <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n        <div class="file-workbench-links">\n            <a class="fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                <span data-bind="text: $root.translations.dropzoneDragDrop1"></span>\n                <span class="text-bold" data-bind="text: $root.translations.dropzoneDragDrop2"></span>\n                <span data-bind="text: $root.translations.dropzoneDragDrop3"></span>\n            </a>\n        </div>\n        <div style="min-height: 100%;">\n            <div id="hidden-dz-previews" style="display:none"></div>\n        </div>\n    </div>\n    \n\n    \x3c!--ko if: canvas--\x3e\n    <label class="control-label">\n        <span data-bind="text: $root.translations.selectedImageName"></span>\n    </label>\n    <div>\n        <input type="text" class="form-control input-lg" style="height: 36px;" data-bind="attr:{placeholder: $root.translations.imageCaption}, textInput: self.canvasLabel, valueUpdate: \'keyup\'">\n    </div>\n    \x3c!--/ko--\x3e\n    \n        \n    \n    <div class="install-buttons" style="display: inline-flex; justify-content: space-between;">\n        <div class="file-workbench-buttons">\n            <button class="btn btn-mint btn-md btn-labeled fa fa-pencil" data-bind="click: updateManifest, clickBubble: false, disable: !isCanvasDirty()">\n                <span data-bind="text: $root.translations.save"></span>\n            </button>\n            <button class="btn btn-warning btn-md btn-labeled fa fa-refresh" data-bind="click: reset, clickBubble: false, disable: !isCanvasDirty()">\n                <span data-bind="text: $root.translations.cancel"></span>\n            </button>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n<div>\n    <ul class="nav nav-tabs flex pad-no">\n        <li data-bind="if: shouldShowCreateService">\n            <div class="manifest-manager-nav-tab" data-bind="click: function(){createService(true); editService(false)}, css: { active: createService }">\n                <div class="tab-label">\n                    <span data-bind="text: $root.translations.createNewService"></span>\n                </div>\n            </div>\n        </li>\n        <li data-bind="if: shouldShowEditService">\n            <div class="manifest-manager-nav-tab" data-bind="click: function(){createService(false); editService(true)}, css: { active: editService }">\n                <div class="tab-label">\n                    <span data-bind="text: $root.translations.editService"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n\n<div class="manifest-manager" style="height: 100%;">\n\n\x3c!--ko if: createService --\x3e\n<div data-bind="dropzone: dropzoneOptions4create" class="file-select loader-select" style="height: 100%;">\n    <div style="display:flex; \n            flex-direction: column; \n            align-items: center;\n            justify-content: center;\n            height: 100%;">\n        <div class="manifest-manager-main-menu-circle loader-button">\n            <span><i style="color: #000" class="fa fa-cloud-upload r-select-icon"></i></span>\n        </div> \n        <h2>\n            <span data-bind="text: $root.translations.imageUploadCaption"></span>\n        </h2>\n        <h4>\n            <span data-bind="text: $root.translations.imageUploadInstruction"></span>\n        </h4>\n        <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">\n        <div style="display:flex; flex-direction: column;">\n            <div>\n                <div class="dropzone-photo-upload">\n                    <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-rr btn-labeled btn-lg fa fa-image fileinput-create-button dz-clickable" data-bind="css: uniqueidClass" role="button">\n                        <span data-bind="text: $root.translations.selectImages"></span>\n                    </div>\n                    <div style="min-height: 100%;">\n                        <div id="hidden-dz-create-previews" style="display:none"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <h5 class="rr-splash-description">\n            <span data-bind="text: $root.translations.imageServiceCreateDesc"></span>\n        </h5>\n        </div>\n</div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!--ko if: editService --\x3e\n<div class="file-select loader-select" style="height: 100%;">\n    <div style="display:flex; flex-direction: column; align-items: center;">\n        <div class="manifest-manager-main-menu-circle loader-button">\n            <span><i style="color: #000" class="fa fa-picture-o r-select-icon"></i></span>\n        </div> \n        <h2>\n            <span data-bind="text: $root.translations.editExistingImageService"></span>\n        </h2>\n        <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">\n        <div style="display:flex; flex-direction: column; width: 300px">\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n        </div>\n        <h5 class="rr-splash-description">\n            <span data-bind="text: $root.translations.imageServiceEditDesc"></span>\n        </h5>\n    </div>\n</div>\n</div>\n\x3c!--/ko--\x3e\n</div>\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n    <div>\n        <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected + \'...\'"></span>\n    </div>                 \n    <div>\n        <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n            \x3c!-- ko if: !expandGallery() --\x3e\n            <span data-bind="text: $root.translations.info"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: expandGallery() --\x3e\n            <span data-bind="text: $root.translations.close"></span>\n            \x3c!-- /ko --\x3e\n        </span>\n    </div>\n    <div class="iiif-gallery-sequence-label" style="padding:0 5px" data-bind="\n            if: shouldShowEditService,\n            click: toggleManifestEditor,\n        ">\n        <span data-bind="text: $root.translations.switchImageService"></span>\n    </div>\n    <div data-bind="if: renderContext() != \'manifest-workflow\'">\n        <div data-bind="dropzone: dropzoneOptions4create">\n            <div>\n            <div class="iiif-gallery-sequence-label fileinput-create-button dz-clickable" style="padding:0 5px" data-bind="css: uniqueidClass; dropzone: dropzoneOptions4create" role="button">\n                <span data-bind="text: $root.translations.createImageService"></span>\n            </div>\n            </div>\n            <div style="min-height: 100%;">\n                <div id="hidden-dz-create-previews" style="display:none"></div>\n            </div>\n        </div>\n    </div>\n    <div>\n        <span data-bind="text: $root.translations.filter"></span>\n        <div class="list-filter" data-bind="">\n            <input type="text" class="form-control" style="width: 100%;" data-bind="attr:{placeholder: $root.translations.filterImages + \'...\'}, textInput: filter">\n\n            \x3c!-- Clear Search --\x3e\n            <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n        </div>\n    </div>\n\n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n'},58051:function(e){e.exports="\n\x3c!-- ko component: {\n    name: 'map-widget',\n    params: {\n        config: configJSON,\n        node: null,\n        value: null,\n        type: 'report-header'\n    }\n} --\x3e\x3c!-- /ko --\x3e\n"},44465:function(e){e.exports='\n\n\n<div class="tabbed-workflow-step-body">\n    \x3c!-- ko with: $data.step --\x3e\n        <div class="workflow-step-loading-mask loading-mask" data-bind="visible: $data.loading() || $data.saving()"></div>\n\n        \x3c!--ko if: informationBoxData --\x3e\n        <div class="tabbed-workflow-step-information-box-container" data-bind="\n                css: {\n                    seen: informationBoxData().displayed,\n                    unseen: !informationBoxData().displayed,\n                }">\n            <div style="padding: 20px; padding-bottom: unset;">\n                <div class="tabbed-workflow-step-information-box">\n                    <h4 data-bind="text: informationBoxData().heading"></h4>\n                    <span data-bind="text: informationBoxData().text"></span>\n\n                    <div>\n                        <span class="workflow-information-box-toggle" data-bind="\n                                text: $root.translations.dismiss,\n                                click: toggleInformationBox\n                            " style="position: absolute;\n                                right: 20px;\n                                font-size: smaller;\n                                cursor: pointer;\n                                top: 20px;">\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        <div data-bind="css: componentBasedStepClass || \'workflow-component-based-step\'">\n            \x3c!-- ko foreach: { data: pageLayout(), as: \'layoutSection\'} --\x3e\n            <div class="workflow-component-based-step-wrapper" data-bind="style: { \'height\': $parent.pageLayout().length === 1 && \'100%\' }">\n                \x3c!-- ko if: layoutSection[0] --\x3e\n                <div style="padding: 2px;">\n                    <h4 style="font-weight: unset;" data-bind="text: layoutSection[0]"></h4>\n                </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: !$parent.loading() && !$parent.saving() --\x3e\n                    \x3c!-- ko foreach: { data: layoutSection[1], as: \'uniqueInstanceName\'} --\x3e\n                        \x3c!-- ko component: {\n                            name: \'workflow-component-abstract\',\n                            params: {\n                                component: $parents[1].workflowComponentAbstractLookup()[uniqueInstanceName],\n                                plugin: $parents[2].plugin,\n                            }\n                        } --\x3e\x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n</div>\n\n'},75851:function(e){e.exports='\n<div class="loading-mask" data-bind="visible: loading"></div>\n\n\x3c!-- card container --\x3e\n<div class="resource-instance-card-component-container">\n    <div class="resource-instance-card-component-toc">\n        <div class="create-instance-menu-header">\n            <span data-bind="text: $root.translations.dataThemes"></span>\n        </div>\n        \x3c!-- ko if: topCards().length --\x3e\n        \x3c!-- ko foreach: {data:topCards(), as: \'card\'} --\x3e\n        \x3c!-- ko if: card.model.visible()--\x3e\n        <div class="resource-instance-card-menu-item" data-bind="text: card.model.name(),\n                    click: function() {$parent.loadCard(card);},\n                    clickBubble: false,\n                    css: {\'selected\': card === $parent.card()}">\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div class="resource-instance-card-component-content">\n        <div class="create-instance-header">\n            <div class="new-instance-model-name">\n                <span data-bind="text: $root.translations.new"></span>\n                <span data-bind="text: graphName"></span>\n            </div>\n            <div class="close-new-step">\n                <button class="btn btn-labeled btn-lg fa fa-arrow-right btn-primary" data-bind="click: function(){close()}, clickBubble: false">\n                    <span data-bind="text: $root.translations.return"></span>\n                </button>\n            </div>\n        </div>\n        <div>\n            \x3c!-- ko if: tile() && card() --\x3e\n                \x3c!-- ko component: {\n                    name: cardComponentLookup[card().model.component_id()].componentname,\n                    params: {\n                        card: card(),\n                        tile: tile(),\n                        provisionalTileViewModel: provisionalTileViewModel,\n                        reviewer: reviewer,\n                        loading: loading,\n                        form: $data,\n                        pageVm: $root\n                    }\n                } --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n'},90295:function(e){e.exports='\n\n\n<div class="workbench-card-wrapper related-resources-graph-workbench" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'information\');\n}, css: {\n    \'active\': activeTab() === \'information\'\n}">\n    <i class="fa fa-info"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.info"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'search\');\n}, css: {\n    \'active\': activeTab() === \'search\'\n}">\n    <i class="fa fa-search"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.search"></span>\n</div>\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'legend\');\n}, css: {\n    \'active\': activeTab() === \'legend\'\n}">\n    <i class="fa fa-list"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.legend"></span>\n</div>\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko if: activeTab() === \'information\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.resourceInformation"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n\n<div class="related-resource-graph-information-content" data-bind="using: informationElement">\n    \x3c!--ko if: $data --\x3e\n    \x3c!--ko if: $parent.edgeInformation() --\x3e\n    <div class="edge-node-information" data-bind="event: {\n            mouseover: function() {\n                $parent.hoverElementId($parent.edgeInformation().source.id)\n            },\n            mouseout: function() {\n                $parent.hoverElementId(null);\n            }\n        }, css: {\'element-hover\': $parent.hoverElementId() === $parent.edgeInformation().source.id}">\n        <div class="edge-node-graph-color" data-bind="style: {backgroundColor: $parent.edgeInformation().sourceGraph.fillColor}"></div>\n        <div class="edge-node-title">\n            <div class="edge-node-display-name" data-bind="text: $parent.edgeInformation().source.displayname, click: function() {\n                $parent.informationElement($parent.edgeInformation().source);\n            }"></div>\n            <div class="edge-node-graph-name" data-bind="text: $parent.edgeInformation().sourceGraph.name"></div>\n        </div>\n    </div>\n    <div class="edge-relationship-information" data-bind="event: {\n            mouseover: function() {\n                $parent.hoverElementId($parent.edgeInformation().id)\n            },\n            mouseout: function() {\n                $parent.hoverElementId(null);\n            }\n        }, css: {\'element-hover\': $parent.hoverElementId() === $parent.edgeInformation().id}">\n        <div class="edge-relationship-arrow">\n            <div></div>\n        </div>\n        <div class="edge-relationship-details">\n            <div class="edge-relationship-prefix">\n                <span data-bind="text: $root.translations.hasRelationship"></span>\n            </div>\n            <div class="edge-relationship-label" data-bind="text: $parent.edgeInformation().label || $root.translations.relatedTo "></div>\n            <div class="edge-relationship-sufix">\n                <span data-bind="text: $root.translations.with"></span>\n            </div>\n        </div>\n    </div>\n    <div class="edge-node-information" data-bind="event: {\n            mouseover: function() {\n                $parent.hoverElementId($parent.edgeInformation().target.id)\n            },\n            mouseout: function() {\n                $parent.hoverElementId(null);\n            }\n        }, css: {\'element-hover\': $parent.hoverElementId() === $parent.edgeInformation().target.id}">\n        <div class="edge-node-graph-color" data-bind="style: {backgroundColor: $parent.edgeInformation().targetGraph.fillColor}"></div>\n        <div class="edge-node-title">\n            <div class="edge-node-display-name" data-bind="text: $parent.edgeInformation().target.displayname, click: function() {\n                $parent.informationElement($parent.edgeInformation().target);\n            }"></div>\n            <div class="edge-node-graph-name" data-bind="text: $parent.edgeInformation().targetGraph.name"></div>\n        </div>\n    </div>\n    \x3c!--/ko --\x3e\n    \x3c!--ko if: !$data.source --\x3e\n    <div class="edge-node-information node-display-name-header">\n        <div class="edge-node-graph-color" data-bind="style: {backgroundColor: $parent.informationGraph().fillColor}"></div>\n        <div class="edge-node-title">\n            <div class="edge-node-display-name" data-bind="text: displayname"></div>\n            <div class="edge-node-graph-name" data-bind="text: $parent.informationGraph().name"></div>\n            <div class="edge-node-links">\n                <span data-bind="click: $parent.viewInformationNodeReport">\n                    <i class="fa fa-info"></i>\n                    <span data-bind="text: $root.translations.report"></span>\n                </span>\n                &nbsp;&nbsp;|&nbsp;&nbsp;\n                <span data-bind="click: $parent.editInformationNode">\n                    <i class="fa fa-pencil"></i>\n                    <span data-bind="text: $root.translations.edit"></span>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="relationships-list-header">\n        <span data-bind="text: $root.translations.relationships"></span>\n    </div>\n    <div class="relationships-list-count">\n        <span data-bind="text: $parent.informationElementRelationships().length"></span> / <span data-bind="text: totalRelations"></span>\n        <span data-bind="text: $root.translations.relationshipsShown"></span>\n        \x3c!--ko if: $parent.informationElementRelationships().length !== totalRelations --\x3e\n        <a href="javascript:void(0);" data-bind="click: function() {\n            $parent.expandNode($data);\n        }">\n            <span data-bind="text: $root.translations.loadMore"></span>\n        </a>\n        \x3c!--/ko --\x3e\n    </div>\n    <div class="relationships-list" data-bind="foreach: $parent.informationElementRelationships">\n        <div class="relationships-list-item">\n            <span data-bind="text: label || \'Related to\', click: function() {\n                informationElement(edge);\n            }, event: {\n                mouseover: function() {\n                    hoverElementId(edge.id)\n                },\n                mouseout: function() {\n                    hoverElementId(null);\n                }\n            }, css: {\'element-hover\': hoverElementId() === edge.id}" class="relationships-list-item-type"></span>\n            <i class="relationships-list-icon fa fa-angle-right"></i>\n            <span class="relationships-list-item-name" data-bind="click: function() {\n                informationElement(node);\n            }, event: {\n                mouseover: function() {\n                    hoverElementId(node.id)\n                },\n                mouseout: function() {\n                    hoverElementId(null);\n                }\n            }, css: {\'element-hover\': hoverElementId() === node.id}">\n                <span data-bind="text: node.displayname"></span>\n            </span>\n        </div>\n    </div>\n    \x3c!--/ko --\x3e\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\n\x3c!--ko if: activeTab() === \'search\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.searchNetwork"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="related-resources-search-body">\n<div class="related-reasources-search-container">\n    <input type="text" class="form-control" data-bind="\n            attr: {placeholder: $root.translations.filter + \'...\'},\n            value: nodeSearchFilter, \n            valueUpdate: \'afterkeydown\'\n        ">\n    <span class="clear-node-search" data-bind="click: function() { nodeSearchFilter(\'\'); }, visible: nodeSearchFilter() !== \'\'"><i class="fa fa-times-circle"></i></span>\n</div>\n<div class="related-reasources-search-list" data-bind="foreach: searchNodes">\n    <div class="edge-node-information" data-bind="event: {\n            mouseover: function() {\n                $parent.hoverElementId($data.id)\n            },\n            mouseout: function() {\n                $parent.hoverElementId(null);\n            }\n        }, css: {\'element-hover\': $parent.hoverElementId() === $data.id}">\n        <div class="edge-node-graph-color" data-bind="style: {backgroundColor: graph.fillColor}"></div>\n        <div class="edge-node-title">\n            <div class="edge-node-display-name" data-bind="text: displayname, click: function() {\n                $parent.informationElement($data);\n            }"></div>\n            <div class="edge-node-graph-name" data-bind="text: graph.name"></div>\n            <div class="relationships-list-count shim">\n                <span data-bind="text: shownRelationsCount"></span> / <span data-bind="text: totalRelations"></span>\n                <span data-bind="text: $root.translations.relationshipsShown"></span>\n                \x3c!--ko if: shownRelationsCount() !== totalRelations --\x3e\n                <a href="javascript:void(0);" data-bind="click: function() {\n                    $parent.expandNode($data);\n                }">\n                    <span data-bind="text: $root.translations.loadMore"></span>\n                </a>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'analyze\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.analyzeNetwork"></span>\n    </h4>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'settings\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.settings"></span>\n    </h4>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'legend\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.legend"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="legend-listing-container" data-bind="foreach: legendEntries">\n    <div class="legend-listing related-resource-legend">\n        <div class="edge-node-information">\n            <div class="edge-node-graph-color" data-bind="style: {backgroundColor: fillColor}"></div>\n            <div class="edge-node-title">\n                <div class="edge-node-display-name" data-bind="text: name"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!--/ko --\x3e\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n<div class="related-resources-graph-controls">\n    <span class="ion-information-circled" data-bind="click: function() { selectionMode(\'information\'); }, css: {\n        \'active-graph-control\': selectionMode() === \'information\'\n    }"></span>\n    <span class="ion-plus" data-bind="click: function() { selectionMode(\'expand\'); }, css: {\n        \'active-graph-control\': selectionMode() === \'expand\'\n    }"></span>\n    <span class="ion-asterisk" data-bind="click: function() { selectionMode(\'focus\'); }, css: {\n        \'active-graph-control\': selectionMode() === \'focus\'\n    }"></span>\n    <span class="ion-eye-disabled" data-bind="click: function() { selectionMode(\'delete\'); }, css: {\n        \'active-graph-control\': selectionMode() === \'delete\'\n    }"></span>\n    <span class="ion-refresh" data-bind="click: refreshLayout"></span>\n</div>\n<div class="related-resources-graph-controls-instructions">\n\x3c!--ko if: selectionMode() === \'information\' --\x3e\n    <span data-bind="text: $root.translations.clickNodeInfo"></span>\n\x3c!--/ko --\x3e\n\x3c!--ko if: selectionMode() === \'expand\' --\x3e\n    <span data-bind="text: $root.translations.clickNodeRelationships"></span>\n\x3c!--/ko --\x3e\n\x3c!--ko if: selectionMode() === \'focus\' --\x3e\n    <span data-bind="text: $root.translations.clickNodeRefocus"></span>\n\x3c!--/ko --\x3e\n\x3c!--ko if: selectionMode() === \'delete\' --\x3e\n    <span data-bind="text: $root.translations.clickNodeRemove"></span>\n\x3c!--/ko --\x3e\n</div>\n\x3c!--ko if: cytoscapeConfig() --\x3e\n<div class="related-resources-graph-cytoscape" data-bind="cytoscape: {\n    afterRender: viz,\n    config: cytoscapeConfig\n}"></div>\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n'},28178:function(e){e.exports='\n\n\n\n\x3c!--ko if: loading() --\x3e\n<div class="loading-mask"></div>\n\x3c!--/ko--\x3e\n\x3c!-- ko ifnot: loading() --\x3e\n<div class="resource-report-abstract-container" data-bind="style: { height: $data.summary ? \'inherit\' : \'calc(100vh - 50px)\' }">\n    <div class="resource-component-abstract" data-bind="\n            component: { \n                name: $data.template().componentname,\n                params: {\n                    report: $data.report(),\n                    summary: $data.summary,\n                    configForm: $data.configForm,\n                    configType: $data.configType,\n                }\n            }\n        "></div>\n\n    \x3c!-- ko ifnot: $data.summary --\x3e\n    <footer style="background: #f8f8f8; \n            display: flex;\n            height: 50px;\n            justify-content: space-between;\n            align-items: center;\n            padding: 0 20px;">\n        <div data-bind="text: $root.translations.arches + \' \' + $data.version"></div>\n        <div>\n            <a href="http://archesproject.org" target="_blank">http://archesproject.org</a>\n        </div>\n    </footer>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!-- /ko --\x3e\n'},59197:function(e,t,n){var a='\n\n\n\n\x3c!--ko let: { self: $data }--\x3e\n<div class="flex">\n\n    <div class="facets-search-container" style="">\n\n        <div data-bind="visible: filter.facets().length === 0">\n            <div id="rr-splash" class="rr-splash">\n                \x3c!-- Image --\x3e\n                <div class="img-lg img-circle rr-splash-img-container">\n                    <img class="rr-splash-img" src="'+n(5797)(n(99836))+'" alt="Advanced Search">\n                </div>\n\n                \x3c!-- Splash Title --\x3e\n                <div class="rr-splash-title">\n                    <span data-bind="text: $root.translations.advancedSearch"></span>\n                </div>\n\n                \x3c!-- Splash Instructions --\x3e\n                <div class="rr-splash-description">\n                    <span data-bind="text: $root.translations.advancedSearchDescription"></span>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- ko foreach: filter.facets --\x3e\n\n        \x3c!-- ko if: $index  --\x3e\n        <div class="btn-group btn-group-sm facet-btn-group">\n            <button class="btn btn-warning btn-active-dark facet-btn" data-bind="css: {\'selected\': value.op() === \'and\'}, click: function () { value.op(\'and\'); }">\n                <span data-bind="text: $root.translations.and"></span>\n            </button>\n            <button class="btn btn-warning btn-active-dark facet-btn" data-bind="css: {\'selected\': value.op() === \'or\'}, click: function () { value.op(\'or\'); }">\n                <span data-bind="text: $root.translations.or"></span>\n            </button>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        <div class="faceted-search-card-container">\n            <div class="facet-name" data-bind="text: ko.unwrap(card.getGraph().name) + \' - \' + card.name"></div>\n            <div class="row facet-search-criteria">\n                \x3c!-- ko foreach: card.nodes --\x3e\n                <div class="facet-body">\n\n                    <div class="facet-label" data-bind="text: $data.label"></div>\n                    <div data-bind="component: {\n                        name: self.datatypelookup[datatype].configname,\n                        params: {\n                            search: true,\n                            filterValue: $parent.value[nodeid],\n                            node: $data,\n                            datatype: self.datatypelookup[datatype]\n                        }\n                    }">\n                    </div>\n\n                </div>\n                \x3c!-- /ko --\x3e\n\n                <div class="facet-search-button">\n                    <button class="btn btn-sm btn-primary" data-bind="click: function (facet) { self.filter.facets.remove(facet); }">\n                        <span data-bind="text: $root.translations.remove"></span>\n                    </button>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- Advanced Search Panel --\x3e\n    <div class="facets-container" style="">\n        <div class="list-group search-facets">\n            <div class="search-facet-item header">\n                <h4 class="search-facet-item-heading">\n                    <span data-bind="text: $root.translations.searchFacets"></span>\n                </h4>\n                <div class="list-filter">\n                    <input type="text" class="form-control" data-bind="\n                            attr:{placeholder: $root.translations.find + \'...\'},\n                            value: facetFilterText, \n                            valueUpdate: \'keyup\'\n                        ">\n                    \x3c!-- Clear Filter --\x3e\n                    <span class="clear-node-search" data-bind="click: function () { facetFilterText(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                </div>\n            </div>\n            \x3c!-- ko foreach: searchableGraphs --\x3e\n                \x3c!-- ko if: cards().length > 0  --\x3e\n                <div tabindex="0" class="search-facet-item disabled" data-bind="click: function () { collapsed(!collapsed()) }">\n                    <h4 class="search-facet-item-heading">\n                        <strong data-bind="text: name"></strong>\n                        <span><i class="fa report-expander print-hide" data-bind="css: {\'fa-angle-down\': !collapsed(), \'fa-angle-right\': collapsed()}"></i></span>\n                    </h4>\n                </div>\n                <div data-bind="visible: !collapsed()">\n                    \x3c!-- ko foreach: cards --\x3e\n                    <a href="#" class="search-facet-item" data-bind="click: addFacet">\n                        <h4 class="search-facet-item-heading" data-bind="text: name"></h4>\n                        <p class="list-group-item-text"></p>\n                    </a>\n                    \x3c!-- /ko --\x3e\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n';e.exports=a},61999:function(e){e.exports='\n\n<div class="workbench-card-wrapper">\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'filter\');\n}, css: {\n    \'active\': activeTab() === \'filter\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text">\n        <span data-bind="text: $root.translations.filter"></span>\n    </span>\n</div>\n\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'basemap\');\n        }, css: {\n            \'active\': activeTab() === \'basemap\'\n        }">\n            <i class="fa fa-globe"></i>\n            <span data-bind="text: $root.translations.basemap" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'overlays\');\n        }, css: {\n            \'active\': activeTab() === \'overlays\'\n        }">\n            <i class="fa fa-list"></i>\n            <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'legend\');\n        }, css: {\n            \'active\': activeTab() === \'legend\'\n        }">\n            <i class="fa fa-list-alt"></i>\n            <span data-bind="text: $root.translations.legend" class="map-sidebar-text"></span>\n        </div>\n        \n\n    </div>\n    \x3c!--ko if: activeTab() --\x3e\n        <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n            \n\x3c!--ko if: activeTab() === \'filter\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n            <span data-bind="text: $root.translations.mapSearch"></span>\n        </h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div class="workbench-card-sidepanel-body">\n    \x3c!-- ko if: geoJSONString() === undefined --\x3e\n    <div class="spatial-filter-container">\n\n        \x3c!-- Buffer Definition --\x3e\n        <div class="buffer-control form-control">\n            <h5 class="">\n                <span data-bind="text: $root.translations.buffer"></span>\n            </h5>\n            <div class="form-inline">\n                <label for="buffer-input">\n                    <span data-bind="text: $root.translations.distance"></span>\n                </label>\n                <input type="number" min="0.0" id="buffer-input" class="buffer-input" data-bind="\n                        attr: {placeholder: $root.translations.buffer},\n                        textInput: buffer\n                    ">\n                <select class="form-control" style="vertical-align: top;" data-bind="options: bufferUnits, optionsText:\'name\', optionsValue:\'val\', value: bufferUnit"></select>\n            </div>\n        </div>\n\n        \x3c!-- Geometry --\x3e\n        <div class="add-new-feature buffer-control" style="">\n            <h5 class="">\n                <span data-bind="text: $root.translations.selectAFilter"></span>\n            </h5>\n            <select data-bind="\n                    placeholder: $root.translations.drawA,\n                    value: selectedTool,\n                    valueAllowUnset: true,\n                    options: spatialFilterTypes,\n                    optionsText: \'title\',\n                    optionsValue: \'drawMode\',\n                    chosen: {\n                        \'width\': \'100%\',\n                        \'disable_search_threshold\': 10,\n                        \'allow_single_deselect\': true\n                    }\n                "></select>\n        </div>\n\n    </div>\n    \x3c!-- /ko--\x3e\n\n    \x3c!-- ko if: geoJSONString() !== undefined --\x3e\n    <div class="geojson-card">\n        <div class="geojson-editor" data-bind="codemirror: {\n            value: geoJSONString,\n            mode: { name: \'javascript\', json: true },\n            lineNumbers: true\n        }"></div>\n        \x3c!-- ko if: geoJSONErrors().length !== 0 --\x3e\n        <div class="geojson-error-list">\n            <span data-bind="text: $root.translations.geojsonErrors"></span>\n            <ul>\n                \x3c!-- ko foreach: geoJSONErrors() --\x3e\n                <li data-bind="text: message"></li>\n                \x3c!-- /ko--\x3e\n            </ul>\n        </div>\n        \x3c!-- /ko--\x3e\n        \n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-card-zoom-tool">\n        <a href="javascript:void(0);" data-bind="click: function(){\n            editGeoJSON(filter.feature_collection);}">\n            <i class="fa fa-pencil map-card-feature-edit"></i>\n            <span data-bind="text: $root.translations.editGeoJSON"></span>\n        </a>\n        |\n        <a href="javascript:void(0);" data-bind="click: fitToAggregationBounds">\n            <i class="fa fa-search map-card-feature-edit"></i>\n            <span data-bind="text: $root.translations.zoomToAllFeatures"></span>\n        </a>\n        |\n        <a href="javascript:void(0);" data-bind="click: clear">\n            <i class="fa fa-trash map-card-feature-edit"></i>\n            <span data-bind="text: $root.translations.clearFilter"></span>\n        </a>\n\n    </div>\n    </div>\n\n    \x3c!-- ko if: geoJSONString() !== undefined --\x3e\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: function () {\n            geoJSONString(undefined);\n        }">\n            <span data-bind="text: $root.translations.cancel"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-plus btn-mint" data-bind="css: {\n            disabled: geoJSONErrors().length !== 0\n        }, click: updateGeoJSON">\n            <span data-bind="text: $root.translations.acceptGeoJson"></span>\n        </button>\n    </div>\n    \x3c!-- /ko --\x3e\n\n\x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'basemap\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.basemaps"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n\n                <div class="workbench-card-sidepanel-body">\n                <div class="basemap-listing-container">\n                \x3c!--ko foreach: basemaps --\x3e\n                    <div class="basemap-listing" data-bind="\n                        click: $parent.activeBasemap,\n                        css: {\'active-basemap\': $data === $parent.activeBasemap()}\n                        ">\n                        <i data-bind="css: icon" class="layer-listing-icon"></i>\n                        <span data-bind="text: name"></span>\n                    </div>\n                \x3c!--/ko --\x3e\n                </div>\n                </div>\n\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'overlays\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.overlays"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="overlays-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="overlay-listing" data-bind="css: {\'active-overlay\': onMap}">\n                        <div class="overlay-name" data-bind="\n                            click: function() {\n                                onMap(!onMap());\n                                updateParent($parent);\n                            }\n                        ">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        <div class="relative">\n                            <div class="overlay-opacity-control">\n                                <i class="fa fa-adjust"></i>\n                                <div class="overlay-opacity-slider">\n                                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'legend\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.legend"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="legend-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="legend-listing" data-bind="css: {\'hidden\': !onMap()}">\n                        <div class="legend-name">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        \x3c!--ko if: legend --\x3e\n                        <div class="legend-content" data-bind="html: legend"></div>\n                        \x3c!--/ko --\x3e\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n            \n\n        </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container" data-bind="mapboxgl: {\n            mapOptions: mapOptions,\n            afterRender: setupMap\n        }">\n    </div>\n</div>\n'},72919:function(e){e.exports='<div id="paginator" data-bind="with: paginator">\n    <div class="text-center">\n        <ul class="pagination">\n            <li><a data-bind="css: {\'disabled\': !has_previous()}, click: $parent.newPage.bind($parent, previous_page_number())" href="#">«</a></li>\n            \x3c!-- ko foreach: { data: pages, as: \'page\' } --\x3e\n                \x3c!-- ko if: page --\x3e\n                <li class="page" data-bind="click: $parents[1].newPage.bind($parents[1]), css: {\'current active\': (page == $parent.current_page())}">\n                    <a href="#" data-bind="text: page, attr:{\'data-page\':page}"></a>\n                </li>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: page --\x3e\n                <li class="disabled"><a href="#">...</a></li>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            <li><a data-bind="css: { \'disabled\': !has_next()}, click: $parent.newPage.bind($parent, next_page_number())" href="#">»</a></li>\n        </ul>\n    </div>\n</div>\n'},80168:function(e){e.exports='\n<div class="resource-selector-button pull-right">\n    <div class="btn-group btn-group-xs">\n        <button class="btn btn-primary btn-active-primary dropdown-toggle" data-toggle="dropdown" type="button" aria-expanded="true">\n            <span data-bind="text: $root.translations.qaType"></span>\n            <i class="dropdown-caret fa fa-caret-down"></i>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right">\n            <li><a href="#" data-bind="click: selectProvisional.bind($data, null)">\n                <span data-bind="text: $root.translations.allEdits"></span>\n            </a></li>\n            \x3c!-- ko foreach: provisionalOptions --\x3e\n            <li><a href="#" data-bind="text: name, click: $parent.selectProvisional.bind($parent)"></a></li>\n            \x3c!-- /ko --\x3e\n        </ul>\n    </div>\n</div>'},48153:function(e,t,n){var a='\n\n<div data-bind="if: ready" class="related-resources-filter">\n    \x3c!--ko ifnot: ko.unwrap(options.searchResultsVm.selectedResourceId) --\x3e\n    <div style="padding-top:5px; width:100%; height: 100%; background-color: white;">\n    <div id="rr-splash" class="rr-splash" style="padding-top: 75px">\n        \x3c!-- Image --\x3e\n        <div class="img-lg img-circle rr-splash-img-container">\n            <img class="rr-splash-img" src="'+n(5797)(n(30953))+'" alt="Saved Search">\n        </div>\n\n        \x3c!-- Splash Title --\x3e\n        <div class="rr-splash-title">\n            <span data-bind="text: $root.translations.relatedResources"></span>\n        </div>\n\n        \x3c!-- Splash Instructions --\x3e\n        <div class="rr-splash-description">\n            <span data-bind="text: $root.translations.relatedResourcesFilterText"></span>\n        </div>\n    </div>\n</div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!--ko if: ko.unwrap(options.searchResultsVm.selectedResourceId) --\x3e\n    \x3c!-- ko component: {\n        name: \'related-resources-graph\',\n        params: {\n            resourceId: options.searchResultsVm.selectedResourceId\n        }\n    } --\x3e\x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n';e.exports=a},30994:function(e){e.exports='\n\n<div class="resource-selector-button pull-right">\n    <div class="btn-group btn-group-xs">\n        <button class="btn btn-primary btn-active-primary dropdown-toggle" data-toggle="dropdown" type="button" aria-expanded="true">\n            <span data-bind="text: $root.translations.resourceType"></span>\n            <i class="dropdown-caret fa fa-caret-down"></i>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right">\n            <li><a href="#" data-bind="click: selectModelType.bind($data, null)">\n                <span data-bind="text: $root.translations.allResources"></span>\n            </a></li>\n            \x3c!-- ko foreach: resourceModels --\x3e\n            <li><a href="#" data-bind="text: name.length > 55 ? name.substring(55, length) + \'...\' : name, click: $parent.selectModelType.bind($parent)"></a></li>\n            \x3c!-- /ko --\x3e\n        </ul>\n    </div>\n</div>'},95445:function(e,t,n){var a='\n\n\n\n<div class="search-container saved-search-container relative" style="overflow-y: scroll;">\n\n    <div data-bind="visible: items().length === 0">\n        <div id="rr-splash" class="rr-splash">\n            \x3c!-- Image --\x3e\n            <div class="img-lg img-circle rr-splash-img-container">\n                <img class="rr-splash-img" src="'+n(5797)(n(31848))+'" alt="Saved Search">\n            </div>\n\n            \x3c!-- Splash Title --\x3e\n            <div class="rr-splash-title">\n                <span data-bind="text: $root.translations.savedSearch"></span>\n            </div>\n\n            \x3c!-- Splash Instructions --\x3e\n            <div class="rr-splash-description">\n                <span data-bind="text: $root.translations.noSavedSearches"></span>\n            </div>\n        </div>\n    </div>\n\n    <div id="" class="saved-search-grid">\n        <div class="" data-bind="smartresize: {childclass: \'.ss-grid-item\'}, foreach: items">\n            \x3c!-- Saved Search Query --\x3e\n            <div class="ss-grid-item relative">\n                    <div class="search-caption-activeWrap">\n                        <div class="search-caption-alignCenter">\n                            <div class="search-caption-body">\n                                <div class="search-query">\n                                    <a class="search-query-link-captions" data-bind="click: function(){window.location.href = searchUrl; }"><i class="rounded-x fa fa-search"></i> <span data-bind="text: title"></span></a>\n                                    <div class="search-query-desc">\n                                        <span data-bind="html: subtitle"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                \x3c!-- ko if: image --\x3e    \n                <img class="img-responsive" alt="Image" data-bind="attr: {src: image}">\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n';e.exports=a},63721:function(e){e.exports='\n\n\n<div class="search-container time-search-container relative" style="overflow-y: scroll;">\n    <div class="filter-title">\n        <span data-bind="text: $root.translations.exportSearchResults"></span>\n    </div>\n    <hr class="title-underline">\n\n    <div class="search-export">\n        <div class="instruction">\n            <h2 class="">\n                <span data-bind="text: $root.translations.listItemOneFormat"></span>\n            </h2>\n            <h4 class="">\n                <span data-bind="text: $root.translations.listItemOneFormatText"></span>\n            </h4>\n        </div>\n        <div class="parameter">\n            <div>\n                <label data-bind="css: { \'active\': format() === \'tilecsv\' }, click: function () { format(\'tilecsv\') }" class="form-radio form-normal form-text">\n                    <input type="radio" name="stat-w-label" data-bind="checked: format() === \'tilecsv\'" value="true">\n                    <span data-bind="text: $root.translations.csv"></span>\n                </label>\n                \x3c!-- ko if: hasExportHtmlTemplates() --\x3e\n                <label data-bind="css: { \'active\': format() === \'html\', \'disabled\': (celeryRunning() !== \'True\' && total() > 10) }, click: function () { if((celeryRunning() === \'True\' || total() <= 10)) {format(\'html\')} }" class="form-radio form-normal form-text">\n                    <input type="radio" name="stat-w-label" data-bind="checked: format() === \'html\'" value="false">\n                    <span data-bind="text: $root.translations.html"></span>\n                </label>\n                \x3c!-- /ko --\x3e\n                <label data-bind="css: { \'active\': format() === \'shp\' }, click: function () { format(\'shp\') }" class="form-radio form-normal form-text">\n                    <input type="radio" name="stat-w-label" data-bind="checked: format() === \'shp\'" value="false">\n                    <span data-bind="text: $root.translations.shapefile"></span>\n                </label>\n\n                <label data-bind="css: { \'active\': format() === \'tilexl\', \'disabled\': !hasResourceTypeFilter() }, click: function () { if (hasResourceTypeFilter()) {format(\'tilexl\')} }" class="form-radio form-normal form-text">\n                    <input type="radio" name="stat-w-label" data-bind="checked: format() === \'tilexl\'" value="false">\n                    <span data-bind="text: $root.translations.tileExcel"></span>\n                </label>\n                \x3c!-- ko if: total() < 2 --\x3e\n                <label data-bind="css: { \'active\': format() === \'geojson\', \'disabled\': !hasResourceTypeFilter()}, click: function () { if (hasResourceTypeFilter()) {format(\'geojson\')} }" class="form-radio form-normal form-text">\n                    <input type="radio" name="stat-w-label" data-bind="checked: format() === \'geojson\'" value="false">\n                    <span data-bind="text: $root.translations.geojsonUrl"></span>\n                </label>\n                \x3c!-- ko if: format() === \'geojson\' && hasResourceTypeFilter --\x3e\n                <div data-bind="clipboard: geojsonUrl">\n                    <div style="padding: 5px 0px"><textarea style="width: 300px;" data-bind="value: geojsonUrl"></textarea></div>\n                    <button class="btn btn-shim btn-labeled btn-sm fa fa-clipboard btn-primary">\n                        <span data-bind="text: $root.translations.copyToClipboard"></span>\n                    </button>\n                </div>\n                \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\n        <div class="instruction">\n                <h2 class="">\n                    <span data-bind="text: $root.translations.listItemTwoCoordinatePrecision"></span>\n                </h2>\n                <h4 class="">\n                    <span data-bind="text: $root.translations.listItemTwoCoordinatePrecisionText"></span>\n                </h4>\n        </div>\n        <div class="parameter">\n            <input type="number" class="form-control input-md widget-input precision" data-bind="textInput: precision">\n        </div>\n        \n        <div class="instruction">\n            <h2 class="">\n                <span data-bind="text: $root.translations.listItemThreeReportLink"></span>\n            </h2>\n            <h4 class="">\n                <span data-bind="text: $root.translations.listItemThreeReportLinkText"></span>\n            </h4>\n        </div>\n        <div class="parameter">\n            <div data-bind="\n                    component: { \n                        name: \'views/components/simple-switch\', \n                        params: {\n                                value: reportlink, \n                                config:{ \n                                    label: $root.translations.includeReportLinkInExport,\n                                    subtitle: \'\'\n                                }\n                            }\n                        }\n                    "></div>\n        </div>\n        \x3c!-- ko if: ((total() > 2 && celeryRunning() === "True") || (format() === "html" && total() > 10 && celeryRunning() === "True")) && ("False" === "False" || "False" === "True" && "anonymous" !== "anonymous")--\x3e\n        <div>\n            <div class="instruction">\n                <h2>\n                    <span data-bind="text: $root.translations.listItemFourNameThisExport"></span>\n                </h2>\n            </div>\n            <div class="parameter">\n                <input type="" class="form-control input-md widget-input" data-bind="\n                        attr: {placeholder: $root.translations.archesExport},\n                        textInput: exportName\n                    ">\n            </div>\n        </div>\n        <div class="">\n            <div class="instruction">\n                    <h2 class="">\n                        <span data-bind="text: $root.translations.listItemFiveEmailAddress"></span>\n                    </h2>\n                    <h4 class="">\n                        <span data-bind="text: $root.translations.listItemFiveEmailAddressText"></span>\n                    </h4>\n            </div>\n            <div class="parameter">\n                <input type="" class="form-control input-md widget-input" data-bind="\n                        attr: {placeholder: $root.translations.noEmailSavedForUser},\n                        textInput: emailInput\n                    ">\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div data-bind="visible: ((total() > 2) && (celeryRunning() !== \'True\') || (format() === \'html\' && total() > 10 && celeryRunning() !== \'True\')), text: (\'Arches is currently running without Celery. Exports will be limited to 2 records. The html option is only allowed with a selection of up to 10 resources.\')"></div>\n    <div class="search-export download" data-bind="">\n        <button class="btn btn-lg btn-primary btn-active-primary" type="button" aria-expanded="true" data-bind="css: {disabled: (total() === 0) || (total() > 2 && celeryRunning() !== \'True\') || (format() === \'html\' && total() > 10 && celeryRunning() !== \'True\') },click: function(){if (format() === \'html\') { executeExport( 10 ) } else { executeExport( 2 ) }}"> \n            <span data-bind="text: $root.translations.download"></span>\n            <i class="fa fa-spin fa-spinner" data-bind="visible: downloadPending() === true"></i>\n        </button>\n    </div>\n    <div class="download-message" data-bind="text: result, fadeVisible: downloadStarted, delay:0, fade: 600">\n    </div>\n</div>\n'},87880:function(e){e.exports='\n\n\n\n<div class="search-result-details">\n    \x3c!--ko if: loading() --\x3e\n    <div class="loading-mask"></div>\n    \x3c!--/ko--\x3e\n\n    \x3c!-- ko ifnot: loading() --\x3e\n        \x3c!--ko if: report() --\x3e\n        <div class="resource-report" data-bind=\'component: {\n            name: "resource-report-abstract",\n            params: {\n                report: report(),\n                summary: true\n            }\n        }\'></div>\n        \x3c!--/ko--\x3e\n        \x3c!--ko ifnot: report() --\x3e\n        <div class="search-result-details-splash">\n            <div class="rr-splash">\n                \x3c!-- Image --\x3e\n                <div class="img-lg img-circle rr-splash-img-container">\n                    <i class="fa fa-info"></i>\n                </div>\n\n                \x3c!-- Splash Title --\x3e\n                <div class="rr-splash-title">\n                    <span data-bind="text: $root.translations.resourceDetails"></span>\n                </div>\n\n                \x3c!-- Splash Instructions --\x3e\n                <div class="rr-splash-description">\n                    <span data-bind="text: $root.translations.resourceDetailsText"></span>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n    \x3c!-- /ko --\x3e\n\n</div>\n'},85239:function(e){e.exports='\n\n\n\n<div id="search-results-list" data-bind="foreach: results, visible: true" style="display: none;">\n\n    <div class="search-listing" data-bind="event: { mouseover: mouseoverInstance, mouseout: mouseoverInstance(\'\')}, css: {\'selected\': selected()}">\n        <h3 class="search-listing-title" data-bind="css: {\'i18n-alt\': $parent.alternativelanguage}">\n            <a class="search-candidate-title" href="" data-bind="click: $parent.viewReport.bind($parent)">\n                <i class="search-listing-icon" data-bind="css: iconclass"></i> \n                <span data-bind="text: displayname"></span>\n            </a>\n        </h3>\n\n        <div class="search-listing-body" data-bind="html: displaydescription">\n        </div>\n\n        <div class="search-listing-footer">\n            <div style="flex-grow: 1;">\n                \x3c!--ko if: provisional_resource == \'true\' --\x3e\n                <a class="provisional-edits" href="">\n                    <i class="fa fa-exclamation-circle"></i>\n                    <span data-bind="text: $root.translations.provisional"></span>\n                </a>\n                \x3c!--/ko--\x3e\n\n                \x3c!--ko if: provisional_resource == \'partial\' && $parent.userIsReviewer --\x3e\n                <a class="provisional-edits" href="">\n                    <i class="fa fa-exclamation-circle"></i>\n                    <span data-bind="text: $root.translations.provisional"></span>\n                </a>\n                \x3c!--/ko--\x3e\n\n                \x3c!-- ko if: !!$parent.details --\x3e\n                <a class="search-candidate-link" href="" data-bind="click: showDetails">\n                    <i class="fa fa-info-circle"></i>\n                    <span data-bind="text: $root.translations.details"></span>\n                </a>\n                \x3c!-- /ko --\x3e\n\n                \x3c!--ko if: canEdit --\x3e\n                <a class="search-candidate-link" href="" data-bind="click: $parent.editResource.bind($parent)">\n                    <i class="ion-ios-refresh-empty"></i>\n                    <span data-bind="text: $root.translations.edit"></span>\n                </a>\n                \x3c!--/ko--\x3e\n                \n                \x3c!-- ko if: !!$parent.mapFilter --\x3e\n                <a class="search-candidate-link" href="" data-bind="visible: point, click: mapLinkClicked">\n                    <i class="fa fa-map-marker"></i>\n                    <span data-bind="text: $root.translations.map"></span>\n                </a>\n                \x3c!-- /ko --\x3e\n            </div>\n\n            <div>\n                \x3c!--ko ifnot: $root.resourceEditorContext --\x3e\n                    \x3c!--ko if: !!$parent.relatedResourcesManager && canRead --\x3e\n                    <a class="search-candidate-link" href="" data-bind="click: showrelated">\n                        <i class="fa fa-code-fork"></i>\n                        <span data-bind="text: $root.translations.relatedResources"></span>\n                    </a>\n                    \x3c!--/ko--\x3e\n                \x3c!--/ko--\x3e\n\n                \x3c!--ko if: $root.resourceEditorContext --\x3e\n                    \x3c!--ko if: relatable & $root.editingInstanceId != resourceinstanceid --\x3e\n                    <a class="search-candidate-link" href="" data-bind="click: function(val){relationshipcandidacy(val); showrelated()}">\n                        <i class="fa fa-code-fork"></i>\n                        <span data-bind="text: $root.translations.relateResource"></span>\n                    </a>\n                    \x3c!--/ko--\x3e\n                    \x3c!--ko if: relatable == false || $root.editingInstanceId == resourceinstanceid --\x3e\n                    <a class="search-candidate-link unrelatable-search-result" href="">\n                        <i class="fa fa-code-fork"></i>\n                        <span data-bind="text: $root.translations.cannotBeRelated"></span>\n                    </a>\n                    \x3c!--/ko--\x3e\n                \x3c!--/ko--\x3e\n            </div>\n        </div>\n    </div>\n\n</div>\n'},91573:function(e){e.exports="\n\n\n\x3c!-- Sort Results Selector--\x3e\n<select style=\"text-align-last:unset;\" data-bind=\"\n        value: filter, \n        options: [\n            {'id':'', 'name':$root.translations.unsorted}, \n            {'id':'asc', 'name':$root.translations.ascending}, \n            {'id':'desc', 'name':$root.translations.descending}\n        ], \n        chosen: { width: '100%', disable_search: true}, \n        optionsText: 'name', \n        optionsValue: 'id',\n    \"></select>\n\x3c!-- End Sort Results Selector--\x3e"},94705:function(e){e.exports='\n\n\x3c!-- Term Filter --\x3e\n<div><form autocomplete="off">\n    <input class="select2 resource_search_widget arches-select2" name="" style="width:100%;" data-bind="\n            attr: {placeholder: $root.translations.findAResource},\n            termSearch: {terms: filter.terms, language: language, tags: filter.tags}\n        ">\n    <select data-bind="options: languages, optionsText: function(item){return item.name + \' (\' + item.code + \')\'}, value: language, chosen:{width:\'100%\'}"></select></form>\n</div>\n\x3c!-- End Term Filter --\x3e\n'},61021:function(e){e.exports='\n<div class="search-container time-search-container">\n\n    <div class="filter-title">\n        <span data-bind="text: $root.translations.dateInterval"></span>\n        <div class="btn-group">\n            <button class="btn btn-primary btn-active-primary dropdown-toggle" data-toggle="dropdown" type="button" aria-expanded="true" data-bind="click: function () { clear(); }"> \n                <i class="fa fa-close"></i>\n                <span data-bind="text: $root.translations.clear"></span>\n            </button>\n        </div>\n    </div>\n    <hr class="title-underline">\n    <div id="calendar">\n\n        \x3c!-- Date Type --\x3e\n        <div class="calendar picker">\n            <h3 class="search-label">\n                <span data-bind="text: $root.translations.type"></span>\n            </h3>\n            <select id="" class="resources" tabindex="-1" data-bind="\n                    placeholder: $root.translations.dateType,\n                    value: filter.dateNodeId, \n                    chosen:{ width: \'100%\' }, attr: {id:dateDropdownEleId} \n                ">\n                <option value="" data-bind="text: $root.translations.searchAllDates"></option>\n                \x3c!-- ko foreach: { data: graph_models, as: \'graph\' } --\x3e\n                    <optgroup data-bind="if: (graph.isresource), attr: { label: graph.name }">\n                        \x3c!-- ko foreach: { data: $parent.date_nodes, as: \'node\' } --\x3e\n                            \x3c!-- ko if: graph.graphid === node.graph_id --\x3e\n                                <option data-bind="attr: { value: node.nodeid }, text: node.label"></option>\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </optgroup>\n                \x3c!-- /ko --\x3e\n            </select>\n        </div>\n\n        \x3c!-- Date Selector --\x3e\n        <div class="calendar picker">\n            <h3 class="search-label">\n                <span data-bind="text: $root.translations.within"></span>\n            </h3>\n            <select id="" class="resources" tabindex="-1" data-bind="\n                    attr: {placeholder: $root.translations.select},\n                    value: dateRangeType, \n                    chosen:{ width: \'100%\' },\n                    optionsText: \'text\',\n                    optionsValue: \'value\',\n                    options: [\n                        { text: $root.translations.customDateRange, value: \'custom\' },\n                        { text: $root.translations.today, value: \'today\' },\n                        { text: $root.translations.lastSevenDays, value: \'last-7\' },\n                        { text: $root.translations.lastThirtyDays, value: \'last-30\' },\n                        { text: $root.translations.thisWeek, value: \'this-week\' },\n                        { text: $root.translations.thisMonth, value: \'this-month\' },\n                        { text: $root.translations.thisQuarter, value: \'this-quarter\' },\n                        { text: $root.translations.thisYear, value: \'this-year\' },\n                    ],\n                "></select>\n        </div>\n\n    </div>\n\n    <div id="calendar">\n        \x3c!-- From Date --\x3e\n        <div class="calendar picker">\n            <h3 class="search-label">\n                <span data-bind="text: $root.translations.from"></span>\n            </h3>\n            <div id="search-from-c" class="hide-datepicker-time-option">\n                <input placeholder="" class="form-control input-md" data-bind="value: filter.fromDate, datepicker: {format: format, keepInvalid: true}, attr:{\'placeholder\': format}, disable: dateRangeType() !== \'custom\'">\n            </div>\n        </div>\n\n        \x3c!-- To Date --\x3e\n        <div class="calendar picker">\n            <h3 class="search-label">\n                <span data-bind="text: $root.translations.to"></span>\n            </h3>\n            <div id="search-from-b" class="hide-datepicker-time-option">\n                <input placeholder="" class="form-control input-md" data-bind="value: filter.toDate, datepicker: {format: format, keepInvalid: true}, attr:{\'placeholder\': format}, disable: dateRangeType() !== \'custom\'">\n            </div>\n        </div>\n    </div>\n\n    <h3 class="time-wheel-title">\n        <span data-bind="text: $root.translations.timeWheel"></span>\n    </h3>\n    <div class="time-wheel-instructions">\n        <span data-bind="text: \'(\' + $root.translations.timeWheelText + \')\'"></span>\n    </div>\n    <hr class="title-underline"><div class="sequence" data-bind="visible: loading">\n        <span data-bind="text: $root.translations.loadingTimeWheel + \'...\'"></span>\n    </div>\n    <div class="time-wheel-wrap relative" data-bind="timeWheel: { config: wheelConfig, selectedPeriod: selectedPeriod, breadCrumb: breadCrumb}, css:{\'time-wheel-loading-mask\': loading}">\n        <div class="sequence" data-bind="text: breadCrumb"></div>\n        <div class="chart svg-container"></div>\n    </div>\n\n</div>\n'},45832:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <div class="pad-hor columns option-input" data-bind="foreach: flatOptions">\n                <label class="form-checkbox form-normal form-primary form-text" data-bind="css: {\n                        \'active\': $parent.isOptionSelected($data),\n                        \'disabled\': $parent.disabled\n                    },\n                    click: $parent.toggleOptionSelection">\n                    <input type="checkbox" data-bind="checked: $parent.isOptionSelected($data)">\n                    <span data-bind="text:text"></span>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="form-group">\n        <div class="control-label">\n            <span data-bind="text: $root.translations.defaultValue"></span>\n        </div>\n        <div class="col-xs-12">\n            <div class="pad-hor columns checkbox-panel option-input-config" data-bind="foreach: flatOptions">\n                <label class="form-checkbox form-normal form-primary form-text" data-bind="css: {\n                        \'active\': $parent.isOptionSelected($data)\n                    },\n                    click: $parent.toggleOptionSelection">\n                    <input type="checkbox" data-bind="checked: $parent.isOptionSelected($data)">\n                    <span data-bind="text:text"></span>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},78881:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12 resource-instance-wrapper">\n            <input style="display:inline-block;" data-bind="\n                    value: value,\n                    disable: disabled,\n                    select2Query: {\n                        select2Config: select2Config\n                    }\n                ">\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\x3c!-- ko foreach: valueObjects --\x3e\n    <dd data-bind="text: name">\n    </dd>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: valueObjects().length === 0 --\x3e\n<dd>\n    <span data-bind="text: $root.translations.none"></span>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.placeholder"></span>\n    </div>\n    <div class="col-xs-12 pad-no crud-widget-container">\n        <input class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.placeholder},\n                value: placeholder, \n                valueUpdate: \'keyup\'\n            ">\n    </div>\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <div class="col-xs-12 resource-instance-wrapper">\n            <input style="display:inline-block;" data-bind="\n                    value: defaultValue,\n                    select2Query: {\n                        select2Config: select2Config\n                    }\n                ">\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},73379:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-labx mesel widget-input-label" for="" data-bind="text:label"></label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <div style="pad-hor">\n                <div class="input-group date">\n                    <input type="text" data-bind="value: value, placeholder: placeholder, disable: disabled, datepicker: {format: dateFormat, viewMode: viewMode, maxDate: maxDate, minDate: minDate}" class="form-control input-lg"><span class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></span>\n                </div>\n            </div>\n            \x3c!-- <input type="text" data-bind="datepicker: value, placeholder: placeholder" class="form-control input-lg widget-input"> --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\x3c!-- ko if: value() !== null --\x3e\n<dd data-bind="date: value(), dateFormat: dateFormat || $root.translations.noDateEntered"></dd>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: value() === null --\x3e\n<dd>\n    <span data-bind="text: $root.translations.none"></span>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.minimumDate"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="datetimepickermin" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.minimumDate},\n            value: minDate, \n            datepicker: {format: \'YYYY-MM-DD\', viewMode: viewMode, minDate: false, maxDate: false}\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.maximumDate"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="datetimepickermax" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.maximumDate},\n            value: maxDate, \n            datepicker: {format: \'YYYY-MM-DD\', viewMode: viewMode, minDate: false, maxDate: false}\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.viewMode"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <select type="" id="" data-bind="\n            attr: {placeholder: $root.translations.viewMode},\n            options:viewModeOptions, \n            optionsText:\'name\', \n            optionsValue:\'id\', \n            event: {change: onViewModeSelection}, \n            value: viewMode, \n            chosen: {width: \'100%\', disable_search: true}\n        "></select>\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div>\n    <div class="form-group col-xs-12 pad-no crud-widget-container">\n        <div style="pad-hor">\n            <div class="input-group date">\n                <input type="text" data-bind="value: defaultValue, placeholder: placeholder, datepicker: {format: dateFormat, viewMode: viewMode, maxDate: maxDate, minDate: minDate}" class="form-control input-md" style="height: 32px;"><span class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></span>\n            </div>\n        </div>\n    </div>\n    <div class="toggle-container">\n        <span class="switch switch-small" data-bind="css: {\'on\': getdefault}, click: setdefault"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="text: $root.translations.useDateOfDataEntry"></div>\n            </div>\n        <span class="arches-toggle-subtitle" data-bind="text: $root.translations.useDateOfDataEntryForDefaultValue"></span>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},37438:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    \x3c!-- ko if: node --\x3e\n    <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n    \x3c!-- /ko --\x3e\n    <div class="form-group">\n        <div class="widget-inline-tools-collapser" style="max-width: 600px;" data-bind=" click: function() {\n            showEDTFFormats(!showEDTFFormats());\n        }">\n            <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n            <span>\n                <i class="fa" data-bind="{\n                    css: {\n                        \'fa-caret-down\' : !showEDTFFormats(),\n                        \'fa-caret-up\' : showEDTFFormats(),\n                    }\n                }"></i>\n                <span data-bind="text: $root.translations.edtfFormats"></span>\n            </span>\n          </div>\n          <div class="form-horizontal" data-bind="if: showEDTFFormats">\n              <div class="edtf-style-tools-panel">\n                  <div class="widget-help-panel">\n                    <h2 class="">\n                        <span data-bind="text: $root.translations.edtfFormatsExpanded"></span>\n                    </h2>\n                    <h3 class="">\n                        <span data-bind="text: $root.translations.edtfFormatDescription"></span>\n                        <a class="" target="_blank" data-bind="attr: { href: \'https://www.loc.gov/standards/datetime\'}, click: function() { return true;}, clickBubble: false">\n                            <span data-bind="text: $root.translations.edtfDateSpecification"></span>\n                        </a>\n                    </h3>\n                    <h3 class="">\n                        <span data-bind="text: $root.translations.someCommonEncodings"></span>\n                    </h3>\n\n                    <dl class="">\n                        <dt class="">\n                            2021-04-12 \n                            <span class="text-thin" data-bind="text: $root.translations.dayPrecisionEncoding"></span>\n                        </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.dayPrecisionEncodingExplanation"></span>\n                        </dd>\n\n                        <dt class="">\n                            2021-04 \n                            <span class="text-thin" data-bind="text: $root.translations.monthPrecisionEncoding"></span>\n                        </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.monthPrecisionEncodingExplanation"></span>\n                        </dd>\n\n                        <dt class="">\n                            2021 \n                            <span class="text-thin" data-bind="text: $root.translations.yearPrecisionEncoding"></span>\n                        </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.yearPrecisionEncodingExplanation"></span>\n                        </dd>\n\n                        <dt class="">1964/2008 </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.timeIntervalYearPrecision"></span>\n                        </dd>\n\n                        <dt class="">2004-06/2006-08 </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.timeIntervalMonthPrecision"></span>\n                        </dd>\n\n                        <dt class="">2004-02-01/2005 </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.timeIntervalYearPrecision"></span>\n                        </dd>\n\n                        <dt class="">Y-100000 </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.negativeYearExplanation"></span>\n                        </dd>\n\n                        <dt class="">2001-21 </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.seasonFormatExplanation"></span>\n                        </dd>\n\n                        <dt class="">1984? </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.yearUncertain"></span>\n                        </dd>\n\n                        <dt class="">2004-06~ </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.yearMonthApproximatea"></span>\n                        </dd>\n\n                        <dt class="">2004-06-11% </dt>\n                        <dd class="mar-btm">\n                            <span data-bind="text: $root.translations.entireDateApproximate"></span>\n                        </dd>\n                    </dl>\n\n                  </div>\n              </div>\n          </div>\n        <div class="col-xs-12">\n            <input type="text" data-bind="textInput: value, attr: {placeholder: placeholder, disabled: disabled}" class="form-control input-lg widget-input">\n        </div>\n        <div class="col-xs-12" data-bind="if: value">\n            <label class="control-label widget-input-label" for="">\n                <span data-bind="text: $root.translations.preview"></span>\n            </label>\n            <div data-bind="text: transformedEdtf() ? transformedEdtf : $root.translations.notAValidEdtfFormat" style="margin-bottom:2px">\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.placeholder"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.placeholder},\n            textInput: placeholder\n        ">\n</div>\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.defaultValue},\n            textInput: defaultValue\n        ">\n</div>\n\n\x3c!-- /ko --\x3e\n'},29700:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12 dropzone" data-bind="dropzone: dropzoneOptions">\n            <div class="file-select-window" data-bind="visible: filesJSON().length === 0">\n                <div class="bord-top pad-ver file-select">\n                    <div style="padding: 5px">\n                        <h2>\n                            <span data-bind="text: $root.translations.uploadDocuments"></span>\n                        </h2>\n                        <h4>\n                            <span data-bind="text: $root.translations.dragAndDropFilesOnPanel"></span>\n                        </h4>\n                    </div>\n                    <button type="button" class="btn btn-lg btn-file-select fileinput-button dz-clickable" data-bind="css: uniqueidClass, disable: disabled">\n                        <i class="fa fa-file"></i>\n                        <span data-bind="text: $root.translations.selectFiles"></span>\n                    </button>\n                    <br>\n                    <div style="padding: 10px">\n                        <span data-bind="text: $root.translations.addingDocumentsOptional"></span>\n                        <br>\n                        <span data-bind="text: $root.translations.maxFileSizeWarning"></span>\n                        <span data-bind="text: maxFilesize() + \'MB.\'"></span>\n                    </div>\n\n                    \x3c!-- <div class="btn-group pull-right">\n                        <button id="dz-remove-btn" class="btn btn-danger cancel" type="reset" data-bind="click: reset">\n                            <i class="ion ion-close"></i>\n                        </button>\n                    </div> --\x3e\n                </div>\n                <div class="file-upload-footer">\n                    <span>\n                        <span data-bind="text: $root.translations.allowedDocumentFormats"></span>\n                        <span data-bind="text: (acceptedFiles() || $root.translations.any) + \'. \'"></span>\n                    </span>\n                </div>\n            </div>\n            <div data-bind="visible: filesJSON().length > 0">\n                \x3c!-- note that data-bind=visible must be in place (instead of ko if:) as DZ instantiates only once;\n                    elements with its class name must exist at time of init --\x3e\n                <h4>\n                    <span data-bind="text: $root.translations.uploadedFiles"></span>\n                </h4>\n                <div class="file-upload-options">\n                    \x3c!--ko if: filesJSON().length > 1--\x3e\n                    <input data-bind="\n                            attr: {placeholder: $root.translations.findAFile + \'...\'},\n                            textInput: filter\n                        " type="text" class="file-upload-filter">\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- Clear Search --\x3e\n                    <span class="file-upload-clear-filter" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n\n                    \x3c!-- ko if: filter() --\x3e\n                    <span data-bind="text: filteredList().length+\' out of \'+filesJSON().length+\' files match filter\'"></span>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: (!filter() || filter() == "") --\x3e\n                    <span data-bind="text: filesJSON().length + $root.translations.filesUploaded"></span>\n                    \x3c!-- /ko --\x3e\n                    <button type="button" class="btn btn-file-upload-reset" data-bind="click: reset">\n                        <span data-bind="text: $root.translations.deleteAllFiles"></span>\n                    </button>\n                    <button type="button" class="btn btn-file-upload-reset dropzone fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                        <span data-bind="text: $root.translations.addMoreFiles"></span>\n                    </button>\n                </div>\n            </div>\n            <div class="dz-previews" data-bind="css: uniqueidClass">\n            \x3c!-- ko if: !filter() --\x3e\n                \x3c!-- ko foreach: pagedList(filesJSON()) --\x3e\n                <div class="file-upload-card">\n                    <div class="media-body">\n                        <div class="media-block">\n                            <div class="media-left">\n                                <span><i class="fa fa-file fa-lg"></i></span>\n                            </div>\n                            <div class="media-body file-upload-card-detail">\n                                <div class="media-left">\n                                    <span class="text-main mar-no text-overflow" data-bind="text: name"></span>\n                                    \x3c!-- ko if: $data.error --\x3e\n                                    <span class="dz-error text-danger text-sm" data-bind="text: $root.translations.error"></span>\n                                    \x3c!-- /ko --\x3e\n                                    <span class="text-sm">\n                                        <a data-bind="attr: {href: ko.unwrap(url) ? $parent.getFileUrl(url) : content, download: name}, click: function(){return ko.unwrap(url) ? true : false}, clickBubble: false">\n                                            <span data-bind="text: ko.unwrap(url) ? $root.translations.download : $root.translations.unsaved"></span>\n                                        </a>\n                                    </span>\n                                </div>\n                                <div class="file-upload-card-detail-right">\n                                    <div class="media-right" data-bind="click: $parent.removeFile">\n                                        <button class="btn btn-xs btn-danger btn-file-cancel"><i class="ion ion-close"></i></button>\n                                    </div>\n                                    <div class="file-size-label">\n                                        <span class="text-sm" data-bind="html: $parent.formatSize($data)"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: filter() --\x3e\n                \x3c!-- ko foreach: pagedList(filteredList()) --\x3e\n                <div class="file-upload-card">\n                    <div class="media-body">\n                        <div class="media-block">\n                            <div class="media-left">\n                                <span><i class="fa fa-file fa-lg"></i></span>\n                            </div>\n                            <div class="media-body file-upload-card-detail">\n                                <div class="media-left">\n                                    <span class="text-main mar-no text-overflow" data-bind="text: name"></span>\n                                    \x3c!-- ko if: $data.error --\x3e\n                                    <span class="dz-error text-danger text-sm" data-bind="text: $root.translations.error"></span>\n                                    \x3c!-- /ko --\x3e\n                                    <span class="text-sm">\n                                        <a data-bind="attr: {href: ko.unwrap(url) ? $parent.getFileUrl(url) : content, download: name}, click: function(){return ko.unwrap(url) ? true : false}, clickBubble: false">\n                                            <span data-bind="text: ko.unwrap(url) ? $root.translations.download : $root.translations.unsaved"></span>\n                                        </a>\n                                    </span>\n                                </div>\n                                <div class="file-upload-card-detail-right">\n                                    <div class="media-right" data-bind="click: $parent.removeFile">\n                                        <button class="btn btn-xs btn-danger btn-file-cancel"><i class="ion ion-close"></i></button>\n                                    </div>\n                                    <div class="">\n                                        <span class="text-sm" data-bind="html: $parent.formatSize($data)"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            </div>\n            <div data-bind="style: {visibility: pageCtReached()}">\n                <select type="button" class="btn btn-file-upload-limit" data-bind="value: pageCt">\n                    <option value="5" data-bind="text: $root.translations.showFirstFiveFiles"></option>\n                    <option value="10" data-bind="text: $root.translations.showFirstTenFiles"></option>\n                    <option value="25" data-bind="text: $root.translations.showFirstTwentyFiveFiles"></option>\n                    <option value="100" data-bind="text: $root.translations.showAllFiles"></option>\n                </select>\n            </div>\n        </div>\n    </div>\n</div>\n\n<template id="file-widget-dz-preview"><span></span></template>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\n\x3c!-- ko if: uploadedFiles().length === 0 --\x3e\n<dd>\n    <span data-bind="text: $root.translations.none"></span>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko foreach: reportFiles() --\x3e\n<dd>\n    <a data-bind="attr: {href: $parent.getFileUrl(url)}" target="_blank">\n        <i class="ion ion-forward"></i>\n        <span data-bind="text: name"></span>\n    </a>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: reportImages().length > 0 --\x3e\n<dd>\n    <div id="report-image-grid" class="report-image-grid">\n        \x3c!-- ko foreach: reportImages() --\x3e\n        <div class="rp-image-grid-item">\n            <a id="" class="" target="_blank" data-bind="attr: {href: $parent.getFileUrl(url)}">\n                <img class="img-responsive" data-bind="attr: {src: $parent.getFileUrl(url), alt: name}">\n            </a>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: Number.isInteger(displayValue()) ? displayValue() + $root.translations.filesUploaded : displayValue()"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.acceptedFileTypes"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.exampleFileTypes},\n            value: acceptedFiles, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.maxFileSize"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.maxFileSize},\n            value: maxFilesize\n        ">\n</div>\n\n\n\x3c!-- /ko --\x3e\n'},9523:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            \n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: label"></h4>\n    </div>\n\n    <div style="margin-top:30px;">\n        <div class="new-provisional-edit-card-container">\n            <div class="card">\n                <div class="row widget-wrapper">\n                    <div class="form-group">\n                        <div class="col-xs-12">\n                            <div class="style-tools-collapser" data-bind=" click: function() {\n                                self.showStylingTools(!self.showStylingTools());\n                            }">\n                                <span data-bind="text: self.showStylingTools() ? $root.translations.hideStyleTools : $root.translations.showStyleTools"></span>\n                                <i class="fa" data-bind="{\n                                    css: {\n                                        \'fa-caret-down\' : !self.showStylingTools(),\n                                        \'fa-caret-up\' : self.showStylingTools(),\n                                    }\n                                }"></i>\n                            </div>\n                            <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                <div class="style-tools-panel">\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.lineColor"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <div class="colorpicker-component input-group">\n                                                <input class="form-control input-lg widget-input" data-bind="\n                                                        attr: {placeholder: $root.translations.lineColor},\n                                                        colorPicker: {color: self.lineColor, format:\'hex\'}\n                                                    ">\n                                                <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.fillColor"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <div class="colorpicker-component input-group">\n                                                <input class="form-control input-lg widget-input" data-bind="\n                                                        attr: {placeholder: $root.translations.fillColor},\n                                                        colorPicker: {color: self.fillColor, format:\'hex\'}\n                                                    ">\n                                                <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.lineWidth"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.lineOpacity"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.pointRadius"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label class="col-sm-4 control-label">\n                                            <span data-bind="text: $root.translations.fillOpacity"></span>\n                                        </label>\n                                        <div class="col-sm-8">\n                                            <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="map-card-feature-list">\n                                <div class="add-new-feature" data-bind="visible: !self.disableDrawing()">\n                                    <select data-bind="\n                                            placeholder: $root.translations.addANewFeature + \'...\',\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: $root.translations.mapAddPoint\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: $root.translations.mapAddLine\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: $root.translations.mapAddPolygon\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                </div>\n                                <div class="add-new-feature" data-bind="visible: self.disableDrawing">\n                                    <select data-bind="\n                                            placeholder: $root.translations.addANewFeature + \'...\',\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: $root.translations.mapAddPoint\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: $root.translations.mapAddLine\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: $root.translations.mapAddPolygon\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                \'disabled\': true,\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                </div>\n                            </div>\n                            <table class="table">\n                                <tbody>\n                                    \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                                    <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(feature); }">\n                                        <td>\n                                            <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                        </td>\n                                        <td class="map-card-feature-tool">\n                                            <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                <span data-bind="text: $root.translations.edit"></span>\n                                            </a>\n                                        </td>\n                                        <td class="map-card-feature-tool">\n                                            <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                <i class="fa fa-trash map-card-feature-delete"></i>\n                                                <span data-bind="text: $root.translations.delete"></span>\n                                            </a>\n                                        </td>\n                                    </tr>\n                                    \x3c!-- /ko --\x3e\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\x3c!-- ko if: canvasConfigs.length === 0 --\x3e\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: canvasConfigs.length > 0 --\x3e\n<div class="iiif-widget-report">\n\x3c!-- ko foreach: canvasConfigs --\x3e\n    <div class="iiif-leaflet" data-bind="leaflet: $data"></div>\n\x3c!-- /ko --\x3e\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue()"></span>\n<span data-bind="text: $root.translations.annotations"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultManifestUrl"></span>\n</div>\n<div class="col-xs-12 crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.enterManifestUrl},\n            textInput: defaultManifest\n        ">\n</div>\n\n\x3c!-- /ko --\x3e\n'},93360:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            \n\n<div class="workbench-card-wrapper">\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span data-bind="text: $root.translations.edit"></span>\n</div>\n\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'basemap\');\n        }, css: {\n            \'active\': activeTab() === \'basemap\'\n        }">\n            <i class="fa fa-globe"></i>\n            <span data-bind="text: $root.translations.basemap" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'overlays\');\n        }, css: {\n            \'active\': activeTab() === \'overlays\'\n        }">\n            <i class="fa fa-list"></i>\n            <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n        </div>\n        <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n            toggleTab(\'legend\');\n        }, css: {\n            \'active\': activeTab() === \'legend\'\n        }">\n            <i class="fa fa-list-alt"></i>\n            <span data-bind="text: $root.translations.legend" class="map-sidebar-text"></span>\n        </div>\n        \n\n    </div>\n    \x3c!--ko if: activeTab() --\x3e\n        <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n            \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: label"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div>\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: geoJSONString() !== undefined --\x3e\n            <div class="card">\n                <div class="geojson-editor" data-bind="codemirror: {\n                    value: geoJSONString,\n                    mode: { name: \'javascript\', json: true },\n                    lineNumbers: true\n                }"></div>\n                <div>\n                    <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times" data-bind="click: function () {\n                        geoJSONString(undefined);\n                    }">\n                        <span data-bind="text: $root.translations.cancel"></span>\n                    </button>\n                    <button class="btn btn-shim btn-labeled btn-lg fa fa-plus btn-mint" data-bind="css: {\n                        disabled: geoJSONErrors().length !== 0\n                    }, click: updateGeoJSON">\n                        <span data-bind="text: $root.translations.updateFeatures"></span>\n                    </button>\n                </div>\n                \x3c!-- ko if: geoJSONErrors().length !== 0 --\x3e\n                <div class="geojson-error-list">\n                    <span data-bind="text: $root.translations.geojsonErrors"></span>\n                    <ul>\n                        \x3c!-- ko foreach: geoJSONErrors() --\x3e\n                        <li data-bind="text: message"></li>\n                        \x3c!-- /ko--\x3e\n                    </ul>\n                </div>\n                \x3c!-- /ko--\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n\n            \n\n\x3c!-- ko if: coordinateEditing() --\x3e\n<div class="card map-coordinate-editor .fixed">\n    <div class="map-coordinate-editor-header">\n        <span data-bind="text: $root.translations.editCoordinates"></span>\n    </div>\n    <div class="map-coordinate-editor-crs-selector">\n        <dt>\n            <span data-bind="text: $root.translations.coordinateReference"></span>\n        </dt>\n        <select data-bind="\n            options: coordinateReferences,\n            optionsText: \'name\',\n            optionsValue: \'proj4\',\n            value: selectedCoordinateReference,\n            valueAllowUnset: false,\n            chosen: {\n                \'width\': \'210px\',\n                \'disable_search_threshold\': 10,\n                \'allow_single_deselect\': false\n            }\n        "></select>\n    </div>\n    <hr>\n    <div class="map-coordinate-editor-list" data-bind="sortable: {\n        data: coordinates\n    }">\n        <div class="map-coordinate-editor-pair">\n            \x3c!-- ko if: !$parent.hideNewCoordinates() --\x3e\n            <i class="fa fa-unsorted map-coordinate-editor-drag-handler"></i>\n            \x3c!-- /ko--\x3e\n            <span class="coordinate-entry-label">X:</span>\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[0]">\n            <span class="coordinate-entry-label">Y:</span>\n            \x3c!-- ko if: $parent.coordinates().length-1 === $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: $parent.focusLatestY, valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.coordinates().length-1 !== $index() --\x3e\n            <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: $data[1]">\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: $parent.allowDeleteCoordinates() --\x3e\n            <a href="javascript:void(0);" class="map-coordinate-editor-delete-button" data-bind="click: function() {\n                $parent.coordinates.remove($data);\n            }"><i class="fa fa-trash"></i></a>\n            \x3c!-- /ko--\x3e\n            <hr>\n        </div>\n    </div>\n    \x3c!-- ko if: !hideNewCoordinates() --\x3e\n    <div class="map-coordinate-editor-pair map-coordinate-editor-new-coordinates">\n        <i class="fa fa-plus"></i>\n        <span class="coordinate-entry-label">X:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="hasFocus: true, valueUpdate: \'keyup\', value: newX">\n        <span class="coordinate-entry-label">Y:</span>\n        <input type="number" step="any" class="coordinate-input form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: newY">\n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-coordinate-editor-button-container">\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-search btn-mint" data-bind="click: showCoordinateFeature">\n            <span data-bind="text: $root.translations.showFeature"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: function() {\n            self.coordinateEditing(false);\n        }">\n            <span data-bind="text: $root.translations.done"></span>\n        </button>\n    </div>\n</div>\n\x3c!-- /ko--\x3e\n\n\n            \n\n\n\x3c!-- ko if: bufferNodeId() --\x3e\n<div class="card">\n    <div class="add-buffer-feature-header">\n        <span data-bind="text: $root.translations.addBufferFeature"></span>\n    </div>\n    <div class="add-buffer-feature-input">\n        <div>\n            <span data-bind="text: $root.translations.distance"></span>\n        </div>\n        <input type="number" step="any" class="form-control input-lg widget-input" data-bind="valueUpdate: \'keyup\', value: bufferDistance">\n    </div>\n    <div class="add-buffer-feature-input">\n        <div>\n            <span data-bind="text: $root.translations.units"></span>\n        </div>\n        <select data-bind="\n            options: [{\n                text: $root.translations.meters,\n                value: \'m\'\n            }, {\n                text: $root.translations.feet,\n                value: \'ft\'\n            }],\n            optionsText: \'text\',\n            optionsValue: \'value\',\n            value: bufferUnits,\n            valueAllowUnset: false,\n            chosen: {\n                \'width\': \'100%\',\n                \'disable_search_threshold\': 10,\n                \'allow_single_deselect\': false\n            }\n        "></select>\n    </div>\n    \x3c!-- ko if: allowAddNew --\x3e\n    <div class="add-buffer-feature-input">\n        <input type="checkbox" data-bind="checked: bufferAddNew">\n        <span class="add-buffer-as-new-label">\n            <span data-bind="text: $root.translations.addAsNew"></span>\n            <span data-bind="text: card.model.get(\'name\')"></span>\n            <span>?</span>\n        </span>\n    </div>\n    \x3c!-- /ko--\x3e\n    <div class="map-coordinate-editor-button-container">\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-search btn-mint" data-bind="click: function() {\n            bufferNodeId(null);\n        }">\n            <span data-bind="text: $root.translations.cancel"></span>\n        </button>\n        <button class="btn btn-shim btn-labeled btn-lg fa fa-check btn-primary" data-bind="click: addBufferResult">\n            <span data-bind="text: $root.translations.addFeature"></span>\n        </button>\n    </div>\n</div>\n\x3c!-- /ko--\x3e\n\n\n\n            <div class="card" data-bind="visible: geoJSONString() === undefined && !coordinateEditing() && !bufferNodeId()">\n                <div class="row widget-wrapper">\n                    <div class="form-group">\n                        <div class="col-xs-12">\n                            <div class="map-card-feature-list">\n                                <div class="add-new-feature">\n                                    <select data-bind="\n                                            placeholder: $root.translations.addANewFeature + \'...\',\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: widget.drawTools,\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                </div>\n                                    <div class="map-data-drop-area" data-bind="event: {\n                                        dragover: dropZoneOverHandler,\n                                        drop: dropZoneHandler,\n                                        click: dropZoneClickHandler,\n                                        dragenter: dropZoneEnterHandler,\n                                        dragleave: dropZoneLeaveHandler,\n                                        dragend: dropZoneLeaveHandler\n                                    }">\n                                    <span data-bind="text: $root.translations.dragGeoJsonKml"></span>\n                                </div>\n                                <div class="hidden-file-input">\n                                    <input type="file" accept=".json,.geojson,.kml" data-bind="event: {\n                                        change: self.dropZoneFileSelected\n                                    }">\n                                </div>\n                                \x3c!-- ko if: self.featureLookup[widget.node_id()].dropErrors().length !== 0 --\x3e\n                                <div class="geojson-error-list">\n                                    <a href="javascript: void(0);" data-bind="click:function () {\n                                        self.featureLookup[widget.node_id()].dropErrors([]);\n                                    }">\n                                        <i class="fa fa-close"></i>\n                                    </a>\n                                    <span data-bind="text: $root.translations.followingErrorsOccurred"></span>\n                                    <ul>\n                                        \x3c!-- ko foreach: self.featureLookup[widget.node_id()].dropErrors() --\x3e\n                                        <li data-bind="text: message"></li>\n                                        \x3c!-- /ko--\x3e\n                                    </ul>\n                                </div>\n                                \x3c!-- /ko--\x3e\n                                <table class="table">\n                                    <tbody>\n                                        \x3c!-- ko foreach: {data: self.featureLookup[widget.node_id()].features, as: \'feature\'} --\x3e\n                                        <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.fitFeatures([feature]) }">\n                                            <td>\n                                                <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                            </td>\n                                            <td class="map-card-feature-tool">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature) }, clickBubble: false">\n                                                    <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                    <span data-bind="text: $root.translations.edit"></span>\n                                                </a>\n                                            </td>\n                                            <td class="map-card-feature-tool">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature) }, clickBubble: false">\n                                                    <i class="fa fa-trash map-card-feature-delete"></i>\n                                                    <span data-bind="text: $root.translations.delete"></span>\n                                                </a>\n                                            </td>\n                                        </tr>\n                                        \x3c!-- /ko --\x3e\n                                    </tbody>\n                                </table>\n                                <div class="map-card-zoom-tool">\n                                    <a href="javascript:void(0);" data-bind="click: function() {\n                                        self.editGeoJSON(self.featureLookup[widget.node_id()].features(), widget.node_id());\n                                    }">\n                                        <i class="fa fa-pencil map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.editGeoJson"></span>\n                                    </a>\n                                    |\n                                    \x3c!-- ko if: canEditCoordinates() --\x3e\n                                    <a href="javascript:void(0);" data-bind="click: function() {\n                                        self.coordinateEditing(true);\n                                    }">\n                                        <i class="fa fa-list map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.editCoordinates"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: !canEditCoordinates() --\x3e\n                                    <span>\n                                        <i class="fa fa-list map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.editCoordinates"></span>\n                                    </span>\n                                    \x3c!-- /ko --\x3e\n                                    |\n                                    \x3c!-- ko if: self.bufferFeature() --\x3e\n                                    <a href="javascript:void(0);" data-bind="click: function() {\n                                        self.bufferNodeId(widget.node_id());\n                                    }">\n                                        <i class="fa fa-list map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.addBuffer"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: !self.bufferFeature() --\x3e\n                                    <span>\n                                        <i class="fa fa-list map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.addBuffer"></span>\n                                    </span>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- ko if: self.featureLookup[widget.node_id()].features().length > 0 --\x3e\n                                    |\n                                    <a href="javascript:void(0);" data-bind="click: function() {\n                                        self.fitFeatures(self.featureLookup[widget.node_id()].features());\n                                    }">\n                                        <i class="fa fa-search map-card-feature-edit"></i>\n                                        <span data-bind="text: $root.translations.zoomToAll"></span>\n                                    </a>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'basemap\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.basemaps"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n\n                <div class="workbench-card-sidepanel-body">\n                <div class="basemap-listing-container">\n                \x3c!--ko foreach: basemaps --\x3e\n                    <div class="basemap-listing" data-bind="\n                        click: $parent.activeBasemap,\n                        css: {\'active-basemap\': $data === $parent.activeBasemap()}\n                        ">\n                        <i data-bind="css: icon" class="layer-listing-icon"></i>\n                        <span data-bind="text: name"></span>\n                    </div>\n                \x3c!--/ko --\x3e\n                </div>\n                </div>\n\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'overlays\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.overlays"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="overlays-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="overlay-listing" data-bind="css: {\'active-overlay\': onMap}">\n                        <div class="overlay-name" data-bind="\n                            click: function() {\n                                onMap(!onMap());\n                                updateParent($parent);\n                            }\n                        ">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        <div class="relative">\n                            <div class="overlay-opacity-control">\n                                <i class="fa fa-adjust"></i>\n                                <div class="overlay-opacity-slider">\n                                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: activeTab() === \'legend\' --\x3e\n                <div class="workbench-card-sidepanel-header-container">\n                    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n                        <span data-bind="text: $root.translations.legend"></span>\n                    </h4>\n                </div>\n                <div class="workbench-card-sidepanel-border"></div>\n                <div class="workbench-card-sidepanel-body">\n                <div class="legend-listing-container" data-bind="sortable: {\n                    data: overlays\n                }">\n                    <div class="legend-listing" data-bind="css: {\'hidden\': !onMap()}">\n                        <div class="legend-name">\n                            <i data-bind="css: icon" class="layer-listing-icon"></i>\n                            <span data-bind="text: name"></span>\n                        </div>\n                        \x3c!--ko if: legend --\x3e\n                        <div class="legend-content" data-bind="html: legend"></div>\n                        \x3c!--/ko --\x3e\n                    </div>\n                </div>\n                </div>\n            \x3c!--/ko --\x3e\n            \n\n        </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container" data-bind="mapboxgl: {\n            mapOptions: mapOptions,\n            afterRender: setupMap\n        }">\n    </div>\n</div>\n\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\x3c!-- ko if: summaryDetails.length === 0 --\x3e\n<dd>\n    <span data-bind="text: $root.translations.none"></span>\n</dd>\n\x3c!-- /ko --\x3e\n\x3c!-- ko ifnot: summaryDetails.length === 0  --\x3e\n<dd data-bind="foreach: summaryDetails">\n    <div style="margin-bottom:2px" data-bind="text: JSON.stringify($data.geometry)"></div>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue()"></span>\n<span data-bind="text: $root.translations.features"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.availableGeometryTypes"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input style="display:inline-block;" data-bind="select2Query: {\n            select2Config: {\n                clickBubble: true,\n                value: geometryTypeList,\n                multiple: true,\n                allowClear: true,\n                minimumInputLength: 0,\n                placeholder: $root.translations.availableGeometryTypes,\n                data: [{\n                    text: $root.translations.point,\n                    id: \'Point\'\n                }, {\n                    text: $root.translations.line,\n                    id: \'Line\'\n                }, {\n                    text: $root.translations.polygon,\n                    id: \'Polygon\'\n                }]\n            }\n        }">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.mapCenterLongitude"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.longitudeXCoordinate},\n            value: centerX, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.mapCenterLatitude"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.latitudeYCoordinate},\n            value: centerY, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultZoom"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" min="1" max="20" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.zoomLevel},\n            value: zoom, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n\n\x3c!-- /ko --\x3e\n'},48852:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12 resource-instance-wrapper">\n            <input style="width:30%; display:inline-block;" data-bind="\n                value: value,\n                select2Query: {\n                    select2Config: select2Config\n                }\n            ">\n\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd>\n    <a data-bind="attr: { href: \'#\' + value() }, text: displayValue"></a>\n</dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.placeholder"></span>\n    </div>\n    <div class="col-xs-12 pad-no crud-widget-container">\n        <div class="node-config-item">\n        <input class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.placeholder},\n                value: placeholder, \n                valueUpdate: \'keyup\'\n            ">\n        </div>\n        <div class="node-config-item">\n        <div class="control-label">\n            <span data-bind="text: $root.translations.dropdownFormat"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small" data-bind="css: {\'on\': displayOnlySelectedNode()}, click: toggleDisplayOnlySelected"><small></small></span>\n                    <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="text:$root.translations.showOnlySelectedNodeInDropdown"></div>\n                    </div>\n            <span class="arches-toggle-subtitle" data-bind="text:$root.translations.limitDropdownToWidgetNodes"></span>\n        </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},29783:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <div class="input-group" data-bind="style: {width: width}">\n            \x3c!-- ko if: prefix --\x3e\n            <span class="input-group-addon" data-bind="text: prefix"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: format --\x3e\n            <input type="text" data-bind="formattedNumber: value, format: format, attr: {placeholder: placeholder, max: max, min: min, step: step, disabled: disable}, style: {width: width}, valueUpdate: \'keyup\'" class="form-control input-lg widget-input">\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: format --\x3e\n            <input type="number" data-bind="value: value, attr: {placeholder: placeholder, max: max, min: min, step: step, disabled: disable}, style: {width: width}, valueUpdate: \'keyup\'" class="form-control input-lg widget-input">\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: suffix --\x3e\n            <span class="input-group-addon" data-bind="text: suffix"></span>\n            \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd>\n    <div class="number-widget-report">\n    \x3c!-- ko if: displayValue --\x3e\n    <span data-bind="text: prefix(), css: {\'number-prefix\': prefix()}"></span>\n        \x3c!-- ko if: format --\x3e\n        <span data-bind="formattedNumber: displayValue(), format: format || $root.translations.none"></span>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: format --\x3e\n        <span data-bind="text: displayValue()"></span>\n        \x3c!-- /ko --\x3e\n    <span data-bind="text: suffix(), css: {\'number-suffix\': suffix()}"></span>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko ifnot: displayValue --\x3e\n    <span data-bind="text: $root.translations.none"></span>\n    \x3c!-- /ko --\x3e\n    </div>\n</dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.placeholder"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.placeholder},\n            value: placeholder, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.min"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.min},\n            value: min, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.max"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.max},\n            value: max, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.increment"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.incrementSize},\n            value: step, \n            valueUpdate: \'keyup\', \n            disable: format\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.decimalPlaces"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.numberOfDecimalPlaces},\n            value: precision, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.prefix"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.fieldPrefix},\n            value: prefix, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.suffix"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.fieldSuffix},\n            value: suffix, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="number" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.defaultValue},\n            value: defaultValue, \n            valueUpdate: \'keyup\'\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.format"></span> \n    <a href="http://numeraljs.com/#format" target="_blank">\n        <span data-bind="text: \'(\' + $root.translations.viewValidFormats + \')\'"></span>\n    </a>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n  <input type="" id="" class="form-control input-md widget-input" data-bind="\n        attr: {placeholder: $root.translations.format},\n        value: format, \n        valueUpdate: \'keyup\'\n    ">\n</div>\n<div class="node-config-item">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.disabled"></span>\n    </div>\n    <div class="pad-no">\n        <div data-bind="\n                component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: uneditable, \n                        config:{\n                            label: $root.translations.disableEditing, \n                            subtitle: $root.translations.preventUsersFromEditingValue\n                        }\n                    }\n                }\n            "></div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},70654:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n  <div class="form-group">\n      <div style="display:flex; flex-direction: row"><div><p class="control-label widget-input-label" data-bind="text:label"></p></div><div>\n          \x3c!-- ko if: node --\x3e\n          <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n          \x3c!-- /ko --\x3e\n      </div></div>\n      <div class="col-xs-12">\n        <div style="pad-hor">\n        <label data-bind="css: { \'active\': value() === true, \'disabled\': disabled }, click: function(e){setValue(true)}" class="form-radio form-normal form-text">\n            <input type="radio" name="stat-w-label" data-bind="checked: value() === true"><span data-bind="text:node.config.trueLabel"></span>\n        </label>\n        <label data-bind="css: { \'active\': value() === false, \'disabled\': disabled }, click: function(e){setValue(false)}" class="form-radio form-normal form-text">\n            <input type="radio" name="stat-w-label" data-bind="checked: value() === false"><span data-bind="text:node.config.falseLabel"></span>\n        </label>\n     </div>\n   </div>\n  </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div class="col-xs-12" style="display:flex; flex-direction: column; height: 50px">\n  <div style="pad-hor">\n      <label data-bind="css: { \'active\': defaultValue() === true }, click: function(e){setDefaultValue(true)}" class="form-radio form-normal form-text">\n          <input type="radio" name="stat-w-label" data-bind="checked: defaultValue() === true"><span data-bind="text: node.config.trueLabel"></span>\n      </label>\n      <label data-bind="css: { \'active\': defaultValue() === false }, click: function(e){setDefaultValue(false)}" class="form-radio form-normal form-text">\n          <input type="radio" name="stat-w-label" data-bind="checked: defaultValue() === false"><span data-bind="text: node.config.falseLabel"></span>\n      </label>\n  </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},92890:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <div class="pad-hor columns option-input" data-bind="foreach: flatOptions">\n                <label class="form-radio form-normal form-text" data-bind="css: {\n                        \'active\': $parent.isOptionSelected($data),\n                        \'disabled\': $parent.disabled\n                    },\n                    click: function () {\n                        $parent.setOptionSelection($data, true);\n                    }">\n                    <input type="radio" data-bind="checked: $parent.value,\n                        attr: {\n                            value: id,\n                            name: $parent.node.nodeid\n                        }">\n                    <span data-bind="text: $data.text"></span>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.defaultValue"></span>\n    </div>\n    <div class="col-xs-12">\n        <div class="pad-hor columns radio-panel option-input-config" data-bind="foreach: flatOptions">\n            <label class="form-radio form-normal form-text" data-bind="css: {\n                    \'active\': $parent.isOptionSelected($data)\n                },\n                click: function () {\n                    $parent.setOptionSelection($data, true);\n                }">\n                <input type="radio" data-bind="checked: $parent.defaultValue,\n                    attr: {\n                        value: id,\n                        name: $parent.node.nodeid\n                    }">\n                <span data-bind="text: $data.text"></span>\n            </label>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n'},74013:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n\x3c!--ko let: {self: $data} --\x3e\n\x3c!-- ko ifnot: self.displayOntologyTable --\x3e\n<div class="row" style="margin: 0px;">\n    <div class="col-xs-12 resource-instance-wrapper">\n        <input style="width:30%; display:inline-block;" data-bind="\n                select2Query: {\n                    select2Config: select2Config\n                }\n            ">\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: self.displayOntologyTable --\x3e\n<div class="row widget-wrapper" data-bind="visible: !newResourceInstance()">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n\n        <div class="row" style="margin: 0px;">\n            <div class="col-xs-12 resource-instance-wrapper">\n                <input style="width:30%; display:inline-block;" data-bind="\n                        select2Query: {\n                            select2Config: select2Config\n                        }\n                    ">\n            </div>\n\n        </div>\n    </div>\n\n    <div class="rr-widget">\n        \x3c!-- ko if: !!value() && value().length > 5--\x3e\n        <div class="rr-widget-filter-panel">\n            <div class="list-filter">\n                <input type="text" class="form-control" style="width: 225px; height:28px;" data-bind="\n                        attr: {placeholder: $root.translations.filter + \'...\'}, \n                        textInput: filter\n                    ">\n                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\');}"><i class="fa fa-times-circle"></i></span>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: relationshipsInFilter().length > 0--\x3e\n        <div class="rr-table">\n            <div data-bind="foreach: relationshipsInFilter" style="display: flex; flex-direction: column;">\n                <div class="rr-table-row">\n                    <div class="rr-table-row-initial">\n                        <div class="rr-table-column icon-column">\n                            <button data-bind="click: function(){window.open($parent.resourceEditorUrl+ko.unwrap($data.resourceId))}, clickBubble: false">\n                                <i class="fa fa-pencil"></i>\n                            </button>\n                        </div>\n                        <div class="rr-table-column icon-column">\n                            <button data-bind="click: $parent.deleteRelationship, clickBubble: false">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </div>\n                        <div class="rr-table-column icon-column">\n                            <button data-bind="click:function(){self.reportResourceId(ko.unwrap($data.resourceId));}, clickBubble: false">\n                                <i class="fa fa-info-circle"></i>\n                            </button>\n                        </div>\n                        \x3c!-- ko if: self.node.config.graphs()[0].useOntologyRelationship --\x3e\n                        <div class="rr-table-column" style="flex-grow: 1; cursor: pointer;" data-bind="click: function() { self.toggleSelectedResourceRelationship($data); }, clickBubble: false">\n                            <div class="rr-table-instance-label" style="padding-left: 10px;">\n                                <i class="sm-icon-wrap" data-bind="css: $data.iconClass()"></i><span data-bind="text: $data.resourceName()"></span>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: self.node.config.graphs()[0].useOntologyRelationship --\x3e\n                        <div class="rr-table-column" style="flex-grow: 1; cursor: pointer;">\n                            <div class="rr-table-instance-label" style="padding-left: 10px;">\n                                <i class="sm-icon-wrap" data-bind="css: $data.iconClass()"></i><span data-bind="text: $data.resourceName()"></span>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    <div class="rr-table-row-panel" data-bind="visible: self.selectedResourceRelationship() === $data, if: self.selectedResourceRelationship() === $data, css: { \'rr-table-border\': self.selectedResourceRelationship() === $data} ">\n\n                        <div class="row">\n                            \x3c!-- Relationship from instance to rr --\x3e\n                            <div class="row" style="margin-bottom: 10px;">\n                                <label class="col-xs-12" style="font-weight: bold; text-align: left;">\n                                    <span data-bind="text: $root.translations.resourcesRelationshipTo"></span>\n                                    <span data-bind="text: $data.resourceName"></span>\n                                </label>\n\n                                <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                    \x3c!-- Instance name --\x3e\n                                    <span class="col-xs-12" style="text-align: left;" data-bind="text: self.resourceInstanceDisplayName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'">\n                                    </span>\n\n                                    \x3c!-- Property --\x3e\n                                    <span class="col-xs-12">\n                                        <input style="max-width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                                select2Query: {\n                                                    select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                        $data.ontologyProperty, \n                                                        self.rootOntologyClass, \n                                                        $data.ontologyClass(), \n                                                        $root.translations.selectAnOntologyProperty\n                                                    )\n                                                }\n                                            ">\n                                    </span>\n\n                                    \x3c!-- rr name --\x3e\n                                    <span class="col-xs-12" data-bind="text: $data.resourceName() + \' (\' + self.makeFriendly($data.ontologyClass()) + \')\'"></span>\n                                </div>\n                            </div>\n\n                            \x3c!-- Relationship from rr to instance --\x3e\n                            <div class="row">\n                                <label class="col-xs-12" style="font-weight: bold;">\n                                    <span data-bind="text: $data.resourceName"></span>\n                                    <span data-bind="text: $root.translations.relationshipToResource"></span>\n                                </label>\n\n                                <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                    \x3c!-- rr name --\x3e\n                                    <span class="col-xs-12" style="text-align: left;" data-bind="text: $data.resourceName() + \' (\' + self.makeFriendly($data.ontologyClass()) + \')\'">\n                                    </span>\n\n                                    \x3c!-- Property --\x3e\n                                    <span class="col-xs-12">\n                                        <input style="width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                                select2Query: {\n                                                    select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                        $data.inverseOntologyProperty, \n                                                        $data.ontologyClass(), \n                                                        self.rootOntologyClass, \n                                                        $root.translations.selectAnOntologyProperty\n                                                    )\n                                                }\n                                            ">\n                                    </span>\n\n                                    \x3c!-- Instance name --\x3e\n                                    <span class="col-xs-12" data-bind="text: self.resourceInstanceDisplayName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'">\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div data-bind="if: !!value() && value().hasOwnProperty(\'length\') && value().length > 1">\n        <div class="file-workbench-filecount" data-bind="text: value().length + $root.translations.relationships"></div>\n    </div>\n\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n<div class="create-resource-instance-card-component rr-table-pop" data-bind="with: newResourceInstance, style: {transform: !!newResourceInstance() ? \'translate(0,0)\' : \'translate(100%,0)\'}">\n    \x3c!-- ko component: {\n        name: \'related-instance-creator\',\n        params: {...$data, graphName: $parent.graphLookup[graphid].name}\n    } --\x3e\x3c!--/ko --\x3e\n</div>\n\n\n<div class="create-resource-instance-card-component rr-table-pop" data-bind="style: {transform: !!reportResourceId() ? \'translate(0,0)\' : \'translate(100%,0)\'}">\n    <div class="create-instance-header" style="display: flex; justify-content: space-between;">\n        <span data-bind="text: $root.translations.relatedResourceSummary"></span>\n\n        <div data-bind="click: function(){reportResourceId(null)}, clickBubble: false" class="close-new-step">\n            <button class="btn btn-labeled btn-lg fa fa-arrow-right btn-primary">\n                <span data-bind="text: $root.translations.return"></span>\n            </button>\n        </div>\n    </div>\n    <div class="create-instance-panel" data-bind="component: {\n        name: \'resource-report-abstract\',\n        params: {\n            resourceid: reportResourceId(),\n            summary: true,\n        }\n    }"></div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n\x3c!-- ko foreach: value --\x3e\n<dd>\n    <a data-bind="text: resourceName, attr: { href: $parent.resourceReportUrl+ko.unwrap(resourceId) }" target="_blank"></a>\n</dd>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: (!!value() && value().length === 0) || value() === null --\x3e\n<dd>\n    <span data-bind="text: $root.translations.none"></span>\n</dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.placeholder"></span>\n    </div>\n    <div class="col-xs-12 pad-no crud-widget-container">\n        <input class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.placeholder},\n                value: placeholder, \n                valueUpdate: \'keyup\'\n            ">\n    </div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.defaultValue"></span>\n    </div>\n    \x3c!--ko let: {self: $data} --\x3e\n    \x3c!-- ko ifnot: self.displayOntologyTable --\x3e\n    <div class="row" style="margin: 0px;">\n        <div class="col-xs-12 resource-instance-wrapper">\n            <input style="width:30%; display:inline-block;" data-bind="\n                    select2Query: {\n                        select2Config: select2Config\n                    }\n                ">\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: self.displayOntologyTable --\x3e\n    <div class="row widget-wrapper" data-bind="visible: !newResourceInstance()">\n        <div class="form-group">\n            <div class="row" style="margin: 0px;">\n                <div class="col-xs-12 resource-instance-wrapper">\n                    <input style="width:30%; display:inline-block;" data-bind="\n                  \n                            select2Query: {\n                                select2Config: select2Config\n                            }\n                        ">\n                </div>\n            </div>\n        </div>\n    \n        <div class="rr-widget">\n            \x3c!-- ko if: !!value() && value().length > 5--\x3e\n            <div class="rr-widget-filter-panel">\n                <div class="list-filter">\n                    <input type="text" class="form-control" style="width: 225px; height:28px;" data-bind="\n                            attr: {placeholder: $root.translations.filter + \'...\'},\n                            textInput: filter\n                        ">\n                    <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\');}"><i class="fa fa-times-circle"></i></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n    \n            \x3c!-- ko if: relationshipsInFilter().length > 0--\x3e\n            <div class="rr-table">\n                <div data-bind="foreach: relationshipsInFilter" style="display: flex; flex-direction: column;">\n                    <div class="rr-table-row">\n                        <div class="rr-table-row-initial">\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click: function(){window.open($parent.resourceEditorUrl+ko.unwrap($data.resourceId))}, clickBubble: false">\n                                    <i class="fa fa-pencil"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click: $parent.deleteRelationship, clickBubble: false">\n                                    <i class="fa fa-trash"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click:function(){self.reportResourceId(ko.unwrap($data.resourceId));}, clickBubble: false">\n                                    <i class="fa fa-info-circle"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column" style="flex-grow: 1; cursor: pointer;" data-bind="click: function() { self.toggleSelectedResourceRelationship($data); }, clickBubble: false">\n                                <div class="rr-table-instance-label" style="padding-left: 10px;" data-bind="text: $data.resourceName()">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="rr-table-row-panel" data-bind="visible: self.selectedResourceRelationship() === $data, if: self.selectedResourceRelationship() === $data, css: { \'rr-table-border\': self.selectedResourceRelationship() === $data} ">\n    \n                            <div class="row">\n                                \x3c!-- Relationship from instance to rr --\x3e\n                                <div class="row" style="margin-bottom: 10px;">\n                                    <label class="col-xs-12" style="font-weight: bold; text-align: left;">\n                                        <span data-bind="text: $root.translations.resourcesRelationshipTo"></span>\n                                        <span data-bind="text: $data.resourceName"></span>\n                                    </label>\n    \n                                    <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                        \x3c!-- Instance name --\x3e\n                                        <span class="col-xs-12" style="text-align: left;" data-bind="text: self.resourceInstanceDisplayName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'">\n                                        </span>\n    \n                                        \x3c!-- Property --\x3e\n                                        <span class="col-xs-12">\n                                            <input style="max-width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                                    select2Query: {\n                                                        select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                            $data.ontologyProperty, \n                                                            self.rootOntologyClass, \n                                                            $data.ontologyClass(), \n                                                            $root.translations.selectAnOntologyProperty\n                                                        )\n                                                    }\n                                                ">\n                                        </span>\n    \n                                        \x3c!-- rr name --\x3e\n                                        <span class="col-xs-12" data-bind="text: $data.resourceName() + \' (\' + self.makeFriendly($data.ontologyClass()) + \')\'"></span>\n                                    </div>\n                                </div>\n    \n                                \x3c!-- Relationship from rr to instance --\x3e\n                                <div class="row">\n                                    <label class="col-xs-12" style="font-weight: bold;">\n                                        <span data-bind="text: $data.resourceName"></span>\n                                        <span data-bind="text: $root.translations.relationshipToResource"></span>\n                                    </label>\n    \n                                    <div class="row" style="padding: 0px 12px; margin-bottom: 10px;">\n                                        \x3c!-- rr name --\x3e\n                                        <span class="col-xs-12" style="text-align: left;" data-bind="text: $data.resourceName() + \' (\' + self.makeFriendly($data.ontologyClass()) + \')\'">\n                                        </span>\n    \n                                        \x3c!-- Property --\x3e\n                                        <span class="col-xs-12">\n                                            <input style="width:100%; display:inline-block; margin: 3px 0px;" data-bind="\n                                                    select2Query: {\n                                                        select2Config: self.getSelect2ConfigForOntologyProperties(\n                                                            $data.inverseOntologyProperty, \n                                                            $data.ontologyClass(), \n                                                            self.rootOntologyClass, \n                                                            $root.translations.selectAnOntologyProperty\n                                                        )\n                                                    }\n                                                ">\n                                        </span>\n    \n                                        \x3c!-- Instance name --\x3e\n                                        <span class="col-xs-12" data-bind="text: self.resourceInstanceDisplayName + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'">\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    \n        <div data-bind="if: !!value() && value().hasOwnProperty(\'length\') && value().length > 1">\n            <div class="file-workbench-filecount" data-bind="text: value().length + $root.translations.relationships"></div>\n        </div>\n    \n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- /ko --\x3e\n'},34735:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <div class="widget-inline-tools-collapser" data-bind=" click: function() {\n            showi18nOptions(!showi18nOptions());\n        }">\n            <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n            <span>\n                <i class="fa" data-bind="{\n                    css: {\n                        \'fa-caret-down\' : !showi18nOptions(),\n                        \'fa-caret-up\' : showi18nOptions(),\n                    }\n                }"></i>\n                <span data-bind="text: $root.translations.languages"></span>\n            </span>\n        </div>\n        <div class="form-horizontal" data-bind="if: showi18nOptions">\n            <div class="i18n-style-tools-panel">\n                <div style="display: flex; flex-direction: column; max-width:600px">\n                    <label class="widget-input-label i18n-style-tools-label" for="lang_dd">\n                        <span data-bind="text: $root.translations.language"></span>\n                    </label>\n                    <select id="lang_dd" style="flex:1" name="language" data-bind="options: languages, optionsText: function(item){return item.name + \' (\' + item.code + \')\'}, value: currentLanguage, chosen: {width:\'100%\'}">\n                    </select>\n                    <label class="widget-input-label i18n-style-tools-label" for="lang_dir">\n                        <span data-bind="text: $root.translations.direction"></span>\n                    </label>\n                    <select id="lang_dir" style="flex:1" name="language" data-bind="\n                            value: currentDirection,\n                            chosen: {\'width\':\'100%\'},\n                            optionsText: \'text\',\n                            optionsValue: \'value\',\n                            options: [\n                                { text: $root.translations.leftToRight, value: \'ltr\' },\n                                { text: $root.translations.rightToLeft, value: \'rtl\' },\n                            ],\n                        "></select>\n                </div>\n            </div>\n        </div>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <textarea rows="10" cols="80" data-bind="\n                    ckeditor: currentText, \n                    language: currentLanguage.code, \n                    direction: currentDirection, \n                    placeholder: placeholder, \n                    ckeditorOptions: {},  \n                    valueUpdate: \'afterkeydown\', \n                    attr: {disabled: disabled}\n                "></textarea>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || (ko.unwrap(hideEmptyNodes) === true && !!ko.unwrap(currentText) ) --\x3e\n<dt data-bind="text: label"></dt>\n<dd data-bind="html: strippedValue || $root.translations.none"></dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n\x3c!-- ko if: displayValue() && currentLanguage() && displayValue()[currentLanguage().code] &&  displayValue()[currentLanguage().code][\'value\'] && !ko.unwrap(displayfullvalue) --\x3e\n<em>\n    <span data-bind="text: \'[\' + $root.translations.richText + \']\'"></span>\n</em>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: displayValue() && displayValue()[currentLanguage().code] &&  displayValue()[currentLanguage().code][\'value\'] && ko.unwrap(displayfullvalue) === true --\x3e\n<div data-bind="html: displayValue() && displayValue()[currentLanguage().code] &&  displayValue()[currentLanguage().code][\'value\'] ? strippedValue : $root.translations.none"></div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: !displayValue() || !displayValue()[currentLanguage().code] || !displayValue()[currentLanguage().code][\'value\'] --\x3e\n<span data-bind="text: $root.translations.none"></span>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.placeholder"></span>\n</div>\n\n<textarea rows="10" cols="80" class="form-control input-md widget-input" data-bind="\n        ckeditor: defaultText, \n        isConfigForm: true,\n        language: currentLanguage.code, \n        direction: currentDirection,\n        placeholder: placeholder,\n        ckeditorOptions: {},  \n        valueUpdate: \'afterkeydown\', \n        attr: {disabled: disabled}\n    "></textarea>\n\n\x3c!-- /ko --\x3e\n'},55420:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        <label class="control-label widget-input-label" data-bind="text:label">\n        </label>\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="col-xs-12">\n            <input style="display:inline-block;" data-bind="select2: {\n                    select2Config: {\n                        clickBubble: true,\n                        disabled: disabled,\n                        data: options,\n                        value: value,\n                        multiple: multiple,\n                        placeholder: placeholder,\n                        allowClear: true\n                    }\n                }">\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div>\n    <div class="control-label">\n        <span data-bind="text: $root.translations.placeholder"></span>\n    </div>\n    <div class="col-xs-12 pad-no crud-widget-container">\n        <input class="form-control input-md widget-input" data-bind="\n                attr: {placeholder: $root.translations.placeholder},\n                value: placeholder, \n                valueUpdate: \'keyup\'">\n    </div>\n    <div class="node-widget-label">\n        <div class="form-group">\n            <div class="control-label">\n                <span data-bind="text: $root.translations.defaultValue"></span>\n            </div>\n\n            <div class="col-xs-12">\n                <input style="display:inline-block;" data-bind="select2: {\n                        select2Config: {\n                            clickBubble: true,\n                            data: options,\n                            value: defaultValue,\n                            multiple: multiple,\n                            placeholder: $root.translations.selectDefaultValue,\n                            allowClear: true\n                        }\n                    }">\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},10675:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="toggle-container">\n    <span class="switch switch-small switch-widget" data-bind="css: {\'on\': getvalue() === true, \'null\': getvalue() === null, \'disabled\': disabled }, click: setvalue"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n            <div class="arches-toggle-sm" data-bind="text:label, css: {\'disabled\': disabled}"></div>\n                <div style="margin-top: -17px;">\n                \x3c!-- ko if: node --\x3e\n                <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n                \x3c!-- /ko --\x3e\n                </div>\n            </div>\n    <span class="arches-toggle-subtitle" data-bind="text: localizedSubtitle"></span>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() || $root.translations.none"></dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue() || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n  <span data-bind="text: $root.translations.subtitle"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n  <input type="" id="" class="form-control input-md widget-input" data-bind="value: localizedSubtitle, valueUpdate: \'keyup\'">\n</div>\n<div class="control-label">\n  <span data-bind="text: $root.translations.defaultValue"></span>\n</div>\n<div class="toggle-container">\n    <span class="switch switch-small switch-widget" data-bind="css: {\'on\': getdefault() === true, \'null\': getdefault() === null}, click: setdefault"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n            <div class="arches-toggle-sm" data-bind="text:label"></div>\n            </div>\n    <span class="arches-toggle-subtitle" data-bind="text: localizedSubtitle"></span>\n</div>\n\n\x3c!-- /ko --\x3e\n'},69238:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group" style="position: relative;">\n        <div style="max-width: 600px; position: relative">\n            <div class="widget-inline-tools-collapser" data-bind=" click: function() {\n                showi18nOptions(!showi18nOptions());\n            }">\n                <label class="control-label widget-input-label" for="" data-bind="text:label"></label>\n                <span>\n                    <i class="fa" data-bind="{\n                        css: {\n                            \'fa-caret-down\' : !showi18nOptions(),\n                            \'fa-caret-up\' : showi18nOptions(),\n                        }\n                    }"></i>\n                    <span data-bind="text: $root.translations.languages"></span>\n                </span>\n            </div>\n            <div class="form-horizontal" data-bind="if: showi18nOptions">\n                <div class="i18n-style-tools-panel">\n                    <div style="display: flex; flex-direction: column; max-width:600px">\n                        <label class="widget-input-label" for="lang_dd">\n                            <span data-bind="text: $root.translations.language"></span>\n                        </label>\n                        <select id="lang_dd" style="flex:1" name="language" data-bind="options: languages, optionsText: function(item){return item.name + \' (\' + item.code + \')\'}, value: currentLanguage, chosen: {width:\'100%\'}">\n                        </select>\n                        <label class="widget-input-label" for="lang_dir">\n                            <span data-bind="text: $root.translations.direction"></span>\n                        </label>\n                        <select id="lang_dir" style="flex:1" name="language" data-bind="\n                                value: currentDirection,\n                                chosen: {\'width\':\'100%\'},\n                                optionsText: \'text\',\n                                optionsValue: \'value\',\n                                options: [\n                                    { text: $root.translations.leftToRight, value: \'ltr\' },\n                                    { text: $root.translations.rightToLeft, value: \'rtl\' },\n                                ],\n                            "></select>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- ko if: node --\x3e\n            <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n            \x3c!-- /ko --\x3e\n            <div class="col-xs-12" style="display:flex;flex-wrap: wrap;flex-direction: column;">\n                <input type="text" style="flex:1" data-bind="textInput: currentText, attr: {placeholder: placeholder, maxlength: maxLength, disabled: disable, dir: currentDirection}" class="form-control input-lg widget-input">\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || (ko.unwrap(hideEmptyNodes) === true && !!ko.unwrap(currentText) ) --\x3e\n<dt data-bind="text: label"></dt>\n<dd data-bind="text: displayValue() && currentLanguage() && displayValue()[currentLanguage().code] && displayValue()[currentLanguage().code][\'value\'] ? displayValue()[currentLanguage().code][\'value\'] : $root.translations.none"></dd>\n\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<span data-bind="text: displayValue && displayValue() && currentLanguage() && displayValue()[currentLanguage().code] && displayValue()[currentLanguage().code][\'value\'] ? displayValue()[currentLanguage().code][\'value\'] : \'\' || $root.translations.none"></span>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.placeholder"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.placeholder},\n            textInput: placeholder\n        ">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.maxLength"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="\n            attr: {placeholder: $root.translations.maxLength},\n            textInput: maxLength\n        ">\n</div>\n<div class="form-group" style="position: relative;">\n    <div style="max-width: 600px; position: relative">\n    <div class="widget-inline-tools-collapser" data-bind=" click: function() {\n        showi18nOptions(!showi18nOptions());\n    }">\n        <label class="control-label widget-input-label" for="" data-bind="text: $root.translations.defaultValue"></label>\n        <span>\n            <i class="fa" data-bind="{\n                css: {\n                    \'fa-caret-down\' : !showi18nOptions(),\n                    \'fa-caret-up\' : showi18nOptions(),\n                }\n            }"></i>\n            <span data-bind="text: $root.translations.languages"></span>\n        </span>\n    </div>\n    <div class="form-horizontal" data-bind="if: showi18nOptions">\n        <div class="i18n-style-tools-panel">\n            <div style="display: flex; flex-direction: column; max-width:600px">\n                <label class="widget-input-label" for="lang_dd">\n                    <span data-bind="text: $root.translations.language"></span>\n                </label>\n                <select id="lang_dd" style="flex:1" name="language" data-bind="options: languages, optionsText: function(item){return item.name + \' (\' + item.code + \')\'}, value: currentDefaultLanguage, chosen: {width:\'100%\'}">\n                </select>\n                <label class="widget-input-label" for="lang_dir">\n                    <span data-bind="text: $root.translations.direction"></span>\n                </label>\n                <select id="lang_dir" style="flex:1" name="language" data-bind="\n                        value: currentDefaultDirection,\n                        chosen: {\'width\':\'100%\'},\n                        optionsText: \'text\',\n                        optionsValue: \'value\',\n                        options: [\n                            { text: $root.translations.leftToRight, value: \'ltr\' },\n                            { text: $root.translations.rightToLeft, value: \'rtl\' },\n                        ],\n                    "></select>\n            </div>\n        </div>\n    </div>\n    <div class="col-xs-12" style="display:flex;flex-wrap: wrap;flex-direction: column;">\n        <input type="text" style="flex:1" data-bind="textInput: currentDefaultText, attr: {placeholder: placeholder, maxlength: maxLength, disabled: disable, dir: currentDefaultDirection}" class="form-control input-lg widget-input">\n    </div>\n    </div>\n</div>\n<div class="node-config-item">\n    <div class="control-label">\n        <span data-bind="text: $root.translations.disabled"></span>\n    </div>\n    <div class="pad-no">\n        <div data-bind="\n                component: {\n                    name: \'views/components/simple-switch\',\n                    params: {\n                        value: uneditable,\n                        config:{label: $root.translations.disableEditing, subtitle: $root.translations.preventUsersFromEditingValue}\n                    }\n                }\n            "></div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},71578:function(e){e.exports='\n\n\n\x3c!-- ko if: !configForm  && state === \'form\' --\x3e\n\n<div class="row widget-wrapper">\n    <div class="form-group">\n        \x3c!-- ko if: node --\x3e\n        <i data-bind="css: {\'ion-asterisk widget-label-required\': node.isrequired}"></i>\n        \x3c!-- /ko --\x3e\n        <div class="control-label">\n            <label class="control-label widget-input-label" for="">\n                <span data-bind="text: $root.translations.linkText"></span>\n            </label>\n        </div>\n        <div class="col-xs-12">\n            <input type="string" data-bind="textInput: url_label, attr: {placeholder: url_label_placeholder}" class="form-control input-lg widget-input" style="margin-bottom: 5px">\n        </div>\n        <div class="control-label">\n            <label class="control-label widget-input-label" for="">\n                <span data-bind="text: $root.translations.urlForLink"></span>\n            </label>\n        </div>\n        <div class="col-xs-12">\n            <input type="string" data-bind="textInput: url, attr: {placeholder: url_placeholder}" class="form-control input-lg widget-input" style="margin-bottom: 5px">\n        </div>\n        <div class="col-xs-12">\n            <label class="control-label widget-input-label" for="">\n                <span data-bind="text: $root.translations.preview"></span>\n            </label>\n            <div style="margin-bottom:2px">\n                <a target="_blank" data-bind="attr: {href: url}, style: { color: link_color }">\n                    <span data-bind="text: urlPreviewText()"></span>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'report\' --\x3e\n\x3c!-- ko if: !ko.unwrap(hideEmptyNodes) || ko.unwrap(hideEmptyNodes) === true && displayValue() --\x3e\n\n<dt data-bind="text: label"></dt>\n<dd>\n    <div style="margin-bottom:2px">\n        <a data-bind="attr: {href: url}, style: { color: link_color }">\n            <span data-bind="text: urlPreviewText()"></span>\n        </a>\n    </div>\n</dd>\n\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !configForm  && state === \'display_value\' --\x3e\n\n<a data-bind="attr: {href: url}, style: { color: link_color }">\n    <span data-bind="text: urlPreviewText()"></span>\n</a>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: configForm --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.urlPlaceholder"></span>\n</div>\n<div class="col-xs-12 crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="textInput: url_placeholder">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.urlLabelPlaceholder"></span>\n</div>\n<div class="col-xs-12 crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="textInput: url_label_placeholder">\n</div>\n<div class="control-label">\n    <span data-bind="text: $root.translations.urlLinkColor"></span>\n</div>\n<div class="col-xs-12 crud-widget-container">\n    <input type="" id="" class="form-control input-md widget-input" data-bind="textInput: link_color">\n</div>\n\n\x3c!-- /ko --\x3e\n'},73070:function(e){e.exports='\n\n\n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n        \n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n        \n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n    <div class="workbench-card-container">\n    </div>\n    \n</div>\n</div>\n\n'},11656:function(e){e.exports='\n\n<div class="workflows-get-tile-value padded-workflow-step">\n    <div style="display:flex; justify-content: space-between;">\n        <h4>\n            <span data-bind="text: $root.translations.workflowComplete"></span>\n        </h4>\n        <div>\n            <a href="#" target="_self" type="button" class="btn btn-primary" data-bind="attr: { href: workflowUrl}">\n                <i class="fa fa-plus"></i>\n                <span data-bind="text: $root.translations.new"></span>\n            </a>\n            \x3c!-- ko if: resourceid --\x3e\n            <a href="#" target="_self" type="button" class="btn btn-primary" data-bind="attr: { href: resourceEditUrl}">\n                <i class="fa fa-pencil"></i>\n                <span data-bind="text: $root.translations.edit"></span>\n            </a>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n'},69811:function(e){e.exports='\n\n\x3c!-- ko let: { self: $data } --\x3e\n    \x3c!-- ko if: !loading() --\x3e\n    <div data-bind="" class="wf-multi-tile-step-container">\n        \x3c!-- ko if: tile() && card() --\x3e\n        <div class="wf-multi-tile-step-form">\n            <div data-bind="component: {\n                name: cardComponentLookup[card().model.component_id()].componentname,\n                params: {\n                    card: card(),\n                    tile: tile(),\n                    provisionalTileViewModel: provisionalTileViewModel,\n                    reviewer: reviewer,\n                    loading: loading,\n                    form: $data,\n                    pageVm: $root\n                }\n            }"></div>\n            <button class="btn btn-shim btn-labeled btn-lg fa fa-caret-right btn-mint wf-multi-tile-btn-complete" data-bind="click: function(){complete(true)}">\n                <span data-bind="text: $root.translations.continue"></span>\n            </button>\n        </div>\n        <div class="wf-multi-tile-step-list">\n            <div class="wf-multi-tile-step-list-container">\n                <h4 data-bind="text: (itemName())"></h4>\n            </div>\n            \x3c!-- ko if: card().tiles().length === 0 --\x3e\n            <div class="wf-multi-tile-step-list-empty">\n                <p data-bind="text: (\'No \'+itemName()+\' added yet. Add one or multiple \'+itemName()+\'.\')"></p>\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko foreach: {data: card().tiles, as: \'tile\'} --\x3e\n            <div class="wf-multi-tile-step-card">\n                <div class="wf-multi-tile-card-info">\n                    <div class="workflow-step-icon complete"><span><i class="fa fa-hashtag"></i></span></div>\n                    <div class="wf-multi-tile-card-info-details">\n                        \x3c!-- ko foreach: {data: $parent.card().widgets(), as: \'widget\'} --\x3e\n                            \x3c!-- ko component: {\n                                        name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                        params: {\n                                            config: widget.configJSON,\n                                            label: widget.label(),\n                                            node: widget.node,\n                                            value: $parent.data[widget.node_id()],\n                                            state: "report"\n                                        }\n                                    } --\x3e\x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n                <div class="wf-multi-tile-step-card-controls">\n                    <span>\n                        <i class="fa fa-times-circle"></i>\n                    </span>\n\n                    <span class="" data-bind="\n                            text: $root.translations.remove,\n                            click: function(){$parent.remove(tile)}\n                        "></span>\n\n                    <span>\n                        <i class="fa fa-pencil"></i>\n                    </span>\n                    \n                    <span data-bind="\n                            text: $root.translations.edit, \n                            click: function(){$parent.edit(tile);}\n                        "></span>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n'},45736:function(e){e.exports="\x3c!-- ko if: tile() && card() --\x3e\n    \x3c!-- ko component: {\n        name: cardComponentLookup[card().model.component_id()].componentname,\n        params: {\n            card: card(),\n            tile: tile(),\n            provisionalTileViewModel: provisionalTileViewModel,\n            reviewer: reviewer,\n            loading: loading,\n            form: $data,\n            pageVm: $root\n        }\n    } --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n"},22735:function(e){e.exports='\n\n<div style="display: flex; height: 100%;">\n    \x3c!-- ko with: $data.component --\x3e\n    <div class="workflow-component" style="width: 100%; height: inherit;">\n        \x3c!-- ko if: !loading() && !saving() && isStepActive() --\x3e\n        <div class="workflow-component-element" style="height: inherit; display: unset;" data-bind="component: {\n                name: componentData[\'componentName\'],\n                params: {\n                    ...componentData[\'parameters\'],\n                    form: $data,\n                    pageVm: $root,\n                    value: $data.value\n                }\n            }"></div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: componentData[\'tilesManaged\'] === "many" --\x3e\n        \x3c!-- ko if: dirty --\x3e\n            <div style="display: flex; justify-content: flex-end; padding: 0 18px;">\n                <button class="btn btn-workflow-tile btn-danger" style="margin-right: 8px;" data-bind="click: clearEditor">\n                    <span data-bind="text: $root.translations.clear"></span>\n                </button>\n\n                <button class="btn btn-workflow-tile btn-success" data-bind="{\n                        click: addOrUpdateTile,\n                        text: tileLoadedInEditor() ? \'Save\' : \'Add\'\n                    }"></button>\n            </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- ko if: componentData[\'tilesManaged\'] === "many" --\x3e\n        <div class="wf-step-multi-tile-container">\n            \n            <h4 data-bind="text: (itemName())"></h4>\n            \n\n            \x3c!-- ko if: !tiles() || tiles().length === 0 --\x3e\n            <div class="wf-multi-tile-step-list-empty">\n                <p data-bind="text: (\'No \'+itemName()+\' added yet. Add one or multiple \'+itemName()+\'.\')"></p>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            <div style="position: relative; overflow-y: scroll; flex: auto;">\n                <div style="position: absolute; left: 6px; right: 6px;">\n                    \x3c!-- ko foreach: {data: tiles(), as: \'tile\'} --\x3e\n                        <div class="wf-multi-tile-step-card">\n                            <div class="wf-multi-tile-card-info">\n                                <div class="workflow-step-icon complete"><span><i class="fa fa-hashtag"></i></span></div>\n                                <div class="wf-multi-tile-card-info-details">\n                                    \x3c!-- ko foreach: {data: tile.parent.widgets(), as: \'widget\'} --\x3e\n                                        \x3c!-- ko if: widget.visible --\x3e\n                                            \x3c!-- ko component: {\n                                                name: widget.widgetLookup[widget.get("widget_id")()].name,\n                                                params: {\n                                                    config: widget.configJSON,\n                                                    label: widget.label(),\n                                                    node: widget.node,\n                                                    value: tile.data[widget.node_id()],\n                                                    state: "report",\n                                                }\n                                            } --\x3e\x3c!-- /ko --\x3e\n                                        \x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                            <div class="wf-multi-tile-step-card-controls">\n                                <div data-bind="click: function(){$parent.removeTile(tile)}">\n                                    <i class="fa fa-times-circle"></i>\n                                    <span data-bind="text: $root.translations.remove"></span>\n\n                                </div>\n                                <div data-bind="click: function(){$parent.loadTileIntoEditor(tile)}">\n                                    <i class="fa fa-pencil"></i>\n                                    <span data-bind="text: $root.translations.edit"></span>\n                                </div>\n                            </div>\n                        </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n'},95963:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\n\x3c!-- Report Title Bar --\x3e\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: $root.translations.reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n\n            <div class="report-print-date" data-bind="component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: hideEmptyNodes, \n                        config:{ label: $root.translations.hideNullValues, subtitle: \'\'}\n                    }\n                }"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n    \n\n    \n    \x3c!--ko if: hasProvisionalData() && (editorContext === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEdits"></span></div>\n    \x3c!--/ko--\x3e\n\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko foreach: { data: report.cards, as: \'card\' } --\x3e\n                \x3c!-- ko if: $parent.hideEmptyNodes() === false || card.tiles().length > 0 --\x3e\n                \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                            state: \'report\',\n                            preview: $parent.report.preview,\n                            card: card,\n                            pageVm: {...$root, report: $parent.report},\n                            hideEmptyNodes: $parent.hideEmptyNodes\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \n    \n    \n    \n    <div class="rp-report-section relative report-related-resources">\n        <div class="rp-report-section-title">\n            <h4 class="rp-section-title"><span data-bind="text: $root.translations.relatedResources"></span></h4>\n        </div>\n        \n        \x3c!-- ko foreach: { data: Object.values(report.relatedResourcesLookup()), as: \'resourceData\' } --\x3e\n        \x3c!-- ko if: resourceData.totalRelatedResources > 0 || !$parent.hideEmptyNodes() --\x3e\n        <h5 class="rp-tile-title">\n            <span class="rp-tile-title-float" data-bind="text: resourceData.name"></span>\n        </h5>\n\n        <div class="rp-card-section">\n            \x3c!-- ko foreach: { data: resourceData.loadedRelatedResources(), as: \'relatedResource\' } --\x3e\n            <div class="rp-report-container-tile">\n                <div class="row rp-report-tile">\n                    <dl class="dl-horizontal">\n                        <dt><a data-bind="text: relatedResource.displayName, attr: {href: relatedResource.link}"></a></dt>\n                        \x3c!-- ko if: relatedResource.relationship --\x3e\n                        <dd data-bind="text: \'( \' + relatedResource.relationship + \' )\'"></dd>\n                        \x3c!-- /ko --\x3e\n                    </dl>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: resourceData.paginator() && resourceData.paginator().has_next --\x3e\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, false)">\n                <span data-bind="text: $root.translations.loadMore"></span>\n                <span data-bind="text: \'(\' + resourceData.remainingResources() + \')\'"></span>\n            </button>\n\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, true)">\n                <span data-bind="text: $root.translations.loadAll"></span>\n                <span data-bind="text: \'(\' + (resourceData.totalRelatedResources - resourceData.loadedRelatedResources().length) + \')\'"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n                \n            \x3c!--ko if: resourceData.totalRelatedResources === 0 --\x3e\t\n            <div class="rp-report-container-tile">\t\n                <div class="row rp-report-tile rp-no-data"><span data-bind="text: $root.translations.noRelationshipsAdded"></span></div>\t\n            </div>\t\n            \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e    \n    </div>  \n    \n\n    \n    \n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},42653:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\n\x3c!-- Report Title Bar --\x3e\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: $root.translations.reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n\n            <div class="report-print-date" data-bind="component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: hideEmptyNodes, \n                        config:{ label: $root.translations.hideNullValues, subtitle: \'\'}\n                    }\n                }"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n<div data-bind="carousel: { content: { name: \'carouselItemTemplate\', data: imgs } }"></div>\n\n<template id="carouselItemTemplate">\n</template>\n\n\n    \n    \x3c!--ko if: hasProvisionalData() && (editorContext === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEdits"></span></div>\n    \x3c!--/ko--\x3e\n\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko foreach: { data: report.cards, as: \'card\' } --\x3e\n                \x3c!-- ko if: $parent.hideEmptyNodes() === false || card.tiles().length > 0 --\x3e\n                \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                            state: \'report\',\n                            preview: $parent.report.preview,\n                            card: card,\n                            pageVm: {...$root, report: $parent.report},\n                            hideEmptyNodes: $parent.hideEmptyNodes\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \n    \n    \n    \n    <div class="rp-report-section relative report-related-resources">\n        <div class="rp-report-section-title">\n            <h4 class="rp-section-title"><span data-bind="text: $root.translations.relatedResources"></span></h4>\n        </div>\n        \n        \x3c!-- ko foreach: { data: Object.values(report.relatedResourcesLookup()), as: \'resourceData\' } --\x3e\n        \x3c!-- ko if: resourceData.totalRelatedResources > 0 || !$parent.hideEmptyNodes() --\x3e\n        <h5 class="rp-tile-title">\n            <span class="rp-tile-title-float" data-bind="text: resourceData.name"></span>\n        </h5>\n\n        <div class="rp-card-section">\n            \x3c!-- ko foreach: { data: resourceData.loadedRelatedResources(), as: \'relatedResource\' } --\x3e\n            <div class="rp-report-container-tile">\n                <div class="row rp-report-tile">\n                    <dl class="dl-horizontal">\n                        <dt><a data-bind="text: relatedResource.displayName, attr: {href: relatedResource.link}"></a></dt>\n                        \x3c!-- ko if: relatedResource.relationship --\x3e\n                        <dd data-bind="text: \'( \' + relatedResource.relationship + \' )\'"></dd>\n                        \x3c!-- /ko --\x3e\n                    </dl>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: resourceData.paginator() && resourceData.paginator().has_next --\x3e\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, false)">\n                <span data-bind="text: $root.translations.loadMore"></span>\n                <span data-bind="text: \'(\' + resourceData.remainingResources() + \')\'"></span>\n            </button>\n\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, true)">\n                <span data-bind="text: $root.translations.loadAll"></span>\n                <span data-bind="text: \'(\' + (resourceData.totalRelatedResources - resourceData.loadedRelatedResources().length) + \')\'"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n                \n            \x3c!--ko if: resourceData.totalRelatedResources === 0 --\x3e\t\n            <div class="rp-report-container-tile">\t\n                <div class="row rp-report-tile rp-no-data"><span data-bind="text: $root.translations.noRelationshipsAdded"></span></div>\t\n            </div>\t\n            \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e    \n    </div>  \n    \n\n    \n    \n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n<div class="control-label">\n    <span data-bind="text: $root.translations.includedImageNodes"></span>\n</div>\n<div class="col-xs-12 pad-no crud-widget-container">\n    <select class="design" multiple="multiple" data-bind="\n            placeholder: $root.translations.selectImageNodes,\n            selectedOptions: nodes, \n            options: nodeOptions, \n            optionsText: \'name\', \n            optionsValue: \'nodeid\', \n            chosen: {disable_search_threshold: 10, width: \'100%\'}\n        "></select>\n</div>\n\n\x3c!-- /ko --\x3e\n'},4020:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\n\x3c!-- Report Title Bar --\x3e\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: $root.translations.reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n\n            <div class="report-print-date" data-bind="component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: hideEmptyNodes, \n                        config:{ label: $root.translations.hideNullValues, subtitle: \'\'}\n                    }\n                }"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n<div>\n  \x3c!-- ko if: featureCount() > 0 || report.preview --\x3e\n  <div data-bind="component: {\n      name: \'report-header-map\',\n      params: $data\n  }" class="report-map-header-component"></div>\n  \x3c!-- /ko --\x3e\n</div>\n\n\n    \n    \x3c!--ko if: hasProvisionalData() && (editorContext === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEdits"></span></div>\n    \x3c!--/ko--\x3e\n\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko foreach: { data: report.cards, as: \'card\' } --\x3e\n                \x3c!-- ko if: $parent.hideEmptyNodes() === false || card.tiles().length > 0 --\x3e\n                \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                            state: \'report\',\n                            preview: $parent.report.preview,\n                            card: card,\n                            pageVm: {...$root, report: $parent.report},\n                            hideEmptyNodes: $parent.hideEmptyNodes\n                        }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \n    \n    \n    \n    <div class="rp-report-section relative report-related-resources">\n        <div class="rp-report-section-title">\n            <h4 class="rp-section-title"><span data-bind="text: $root.translations.relatedResources"></span></h4>\n        </div>\n        \n        \x3c!-- ko foreach: { data: Object.values(report.relatedResourcesLookup()), as: \'resourceData\' } --\x3e\n        \x3c!-- ko if: resourceData.totalRelatedResources > 0 || !$parent.hideEmptyNodes() --\x3e\n        <h5 class="rp-tile-title">\n            <span class="rp-tile-title-float" data-bind="text: resourceData.name"></span>\n        </h5>\n\n        <div class="rp-card-section">\n            \x3c!-- ko foreach: { data: resourceData.loadedRelatedResources(), as: \'relatedResource\' } --\x3e\n            <div class="rp-report-container-tile">\n                <div class="row rp-report-tile">\n                    <dl class="dl-horizontal">\n                        <dt><a data-bind="text: relatedResource.displayName, attr: {href: relatedResource.link}"></a></dt>\n                        \x3c!-- ko if: relatedResource.relationship --\x3e\n                        <dd data-bind="text: \'( \' + relatedResource.relationship + \' )\'"></dd>\n                        \x3c!-- /ko --\x3e\n                    </dl>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: resourceData.paginator() && resourceData.paginator().has_next --\x3e\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, false)">\n                <span data-bind="text: $root.translations.loadMore"></span>\n                <span data-bind="text: \'(\' + resourceData.remainingResources() + \')\'"></span>\n            </button>\n\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, true)">\n                <span data-bind="text: $root.translations.loadAll"></span>\n                <span data-bind="text: \'(\' + (resourceData.totalRelatedResources - resourceData.loadedRelatedResources().length) + \')\'"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n                \n            \x3c!--ko if: resourceData.totalRelatedResources === 0 --\x3e\t\n            <div class="rp-report-container-tile">\t\n                <div class="row rp-report-tile rp-no-data"><span data-bind="text: $root.translations.noRelationshipsAdded"></span></div>\t\n            </div>\t\n            \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e    \n    </div>  \n    \n\n    \n    \n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\x3c!-- ko component: {\n    name: \'map-widget\',\n    params: {\n        config: report.configJSON,\n        node: null,\n        value: null,\n        configForm: true,\n        type: "report-header",\n        graph: report.graph\n    }\n} --\x3e\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},69106:function(e){e.exports='\n\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\n\x3c!-- Report Title Bar --\x3e\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: $root.translations.reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n\n            <div class="report-print-date" data-bind="component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: hideEmptyNodes, \n                        config:{ label: $root.translations.hideNullValues, subtitle: \'\'}\n                    }\n                }"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n\x3c!-- ko if: tabs()[activeTabIndex()]  --\x3e\n<div>\n    <ul class="tabbed-report-tab-list">\n    \x3c!-- ko foreach: {data: tabs, as: \'tab\'}  --\x3e\n    <li data-bind="click: function(){ $parent.setActiveTab($index()) }, css: { \'active\': ko.unwrap($parent.activeTabIndex) === $index() }" class="report-tab">\n        <a><span><i data-bind="attr: {class: (\'fa \'+ ko.unwrap(tab.icon))}"></i></span></a>\n    </li>\n    \x3c!-- /ko --\x3e\n</ul>\n</div>\n<div class="tab-banner">\n    <div style="display: flex; flex-direction: row">\n        <span><i data-bind="class: report.get(\'iconclass\') || \'fa fa-file-o\'"></i></span>\n        \x3c!--ko if: report.get(\'displayname\')--\x3e\n        <span style="padding: 0 5px;" data-bind="text: report.get(\'displayname\') || \'(\' + $root.translations.resourceInstanceName + \')\'"></span>\n        \x3c!--/ko--\x3e\n        \x3c!--ko ifnot: report.get(\'displayname\')--\x3e\n        <span data-bind="text: \'(\' + $root.translations.resourceInstanceName + \')\'" style="padding: 0 5px"></span>\n        \x3c!--/ko--\x3e\n    </div>\n    <div><span data-bind="text: tabs()[activeTabIndex()].name"></span></div>\n</div>\n\x3c!-- ko if: tabs()[activeTabIndex()].header_component  --\x3e\n<div class="tabbed-report-header" data-bind="component: {\n    name: tabs()[activeTabIndex()].header_component,\n    params: $data\n}"></div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n    \n\n    \x3c!--ko if: hasProvisionalData() && (editorContext === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEdits"></span></div>\n    \x3c!--/ko--\x3e\n\n\n    \x3c!-- ko if: activeTabEmpty() && tabs()[activeTabIndex()].empty_component  --\x3e\n    <div class="tabbed-report-emptypanel" data-bind="component: {\n        name: tabs()[activeTabIndex()].empty_component,\n        params: $data\n    }"></div>\n    \x3c!--/ko--\x3e\n    \x3c!-- ko if: !tabs()[activeTabIndex()].empty_component || !activeTabEmpty()  --\x3e\n    <div class="rp-report-section relative rp-report-section-root">\n        \x3c!-- ko if: tabs()[activeTabIndex()].side_component  --\x3e\n        <div class="tabbed-report-sidepanel-wrapper">\n            <div class="tabbed-report-sidepanel" data-bind="component: {\n                name: tabs()[activeTabIndex()].side_component,\n                params: $data\n            }"></div>\n        </div>\n        \x3c!-- /ko --\x3e\n        <div class="rp-report-section-title" , data-bind="css: {\'tabbed-report-sidepanel-active\': tabs()[activeTabIndex()].side_component}">\n            \x3c!-- ko if: tabs()[activeTabIndex()].main_component  --\x3e\n            <div class="tabbed-report-sidepanel-wrapper">\n                <div class="tabbed-report-mainpanel" data-bind="component: {\n                    name: tabs()[activeTabIndex()].main_component,\n                    params: $data\n                }"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: tabs()[activeTabIndex()].main_component  --\x3e\n            \x3c!-- ko foreach: { data: activeCards(), as: \'card\' } --\x3e\n            \x3c!-- ko if: $parent.hideEmptyNodes() === false || card.tiles().length > 0 --\x3e\n                \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n                <div class="rp-card-section">\n                    \x3c!--ko if: card && card.alternateReportComponent --\x3e\n                    \x3c!--/ko --\x3e\n                    \x3c!--ko ifnot: card.model && card.alternateReportComponent --\x3e\n                        \x3c!-- ko component: {\n                            name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                            params: {\n                                state: \'report\',\n                                card: card,\n                                pageVm: {...$root, report: $parent.report},\n                                hideEmptyNodes: $parent.hideEmptyNodes\n                            }\n                        } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n\n    \n    \n    \n    <div class="rp-report-section relative report-related-resources">\n        <div class="rp-report-section-title">\n            <h4 class="rp-section-title"><span data-bind="text: $root.translations.relatedResources"></span></h4>\n        </div>\n        \n        \x3c!-- ko foreach: { data: Object.values(report.relatedResourcesLookup()), as: \'resourceData\' } --\x3e\n        \x3c!-- ko if: resourceData.totalRelatedResources > 0 || !$parent.hideEmptyNodes() --\x3e\n        <h5 class="rp-tile-title">\n            <span class="rp-tile-title-float" data-bind="text: resourceData.name"></span>\n        </h5>\n\n        <div class="rp-card-section">\n            \x3c!-- ko foreach: { data: resourceData.loadedRelatedResources(), as: \'relatedResource\' } --\x3e\n            <div class="rp-report-container-tile">\n                <div class="row rp-report-tile">\n                    <dl class="dl-horizontal">\n                        <dt><a data-bind="text: relatedResource.displayName, attr: {href: relatedResource.link}"></a></dt>\n                        \x3c!-- ko if: relatedResource.relationship --\x3e\n                        <dd data-bind="text: \'( \' + relatedResource.relationship + \' )\'"></dd>\n                        \x3c!-- /ko --\x3e\n                    </dl>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: resourceData.paginator() && resourceData.paginator().has_next --\x3e\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, false)">\n                <span data-bind="text: $root.translations.loadMore"></span>\n                <span data-bind="text: \'(\' + resourceData.remainingResources() + \')\'"></span>\n            </button>\n\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, true)">\n                <span data-bind="text: $root.translations.loadAll"></span>\n                <span data-bind="text: \'(\' + (resourceData.totalRelatedResources - resourceData.loadedRelatedResources().length) + \')\'"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n                \n            \x3c!--ko if: resourceData.totalRelatedResources === 0 --\x3e\t\n            <div class="rp-report-container-tile">\t\n                <div class="row rp-report-tile rp-no-data"><span data-bind="text: $root.translations.noRelationshipsAdded"></span></div>\t\n            </div>\t\n            \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e    \n    </div>  \n    \n\n    \n    \n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n<div style="display: flex; flex-direction: row">\n<div id="card-save-tile-btn" class="install-buttons">\n    <button id="" class="btn btn-shim btn-mint btn-labeled btn-md fa fa-plus" data-bind="click: addTab"><span data-bind="text: $root.translations.addTab"></span></button>\n</div>\n</div>\n<div data-bind="sortable: {\n    data: tabs,\n    as: \'tab\',\n    afterMove: moveTab\n}">\n<div class="report-tab-form" data-bind="click: function(){$parent.setActiveTab($index())}, css: {\'active\': ko.unwrap($parent.activeTabIndex) === $index()}">\n    <div style="display: flex; flex-direction: column">\n        <div class="report-tab-form-title">\n        <div data-bind="text: tab.name"></div>\n        <span data-bind="click: function(){$parent.removeTab(tab)}"><i class="fa fa-close"></i></span>\n        </div>\n        <div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                <input type="" data-bind="attr: {placeholder: $root.translations.tabName}" id="" class="form-control input-md widget-input" data-bind="textInput: tab.name">\n            </div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                \x3c!--ko if: $parent.icons().length > 0 --\x3e\n                <select class="design" data-bind="\n                        placeholder: $root.translations.selectTabIcon,\n                        value: tab.icon, \n                        options: $parent.icons(), \n                        optionsText: \'name\', \n                        optionsValue: \'cssclass\', \n                        chosen: {disable_search_threshold: 10, width: \'100%\'}\n                    "></select>\n                \x3c!-- <div class="design">\n                    <input class=""\n                    data-bind="select2Query: {\n                        select2Config: {\n                            clickBubble: true,\n                            disabled: false,\n                            data: {results: $parent.icons()},\n                            value: tab.icon,\n                            multiple: false,\n                            placeholder: \'Select tab icon\',\n                            allowClear: true\n                        }}">\n                    </div> --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                <select class="design" multiple="multiple" data-bind="\n                        placeholder: $root.translations.selectCardsInTab,\n                        selectedOptions: tab.nodegroup_ids, \n                        options: $parent.topcards, \n                        optionsText: \'name\', \n                        optionsValue: \'nodegroupid\', \n                        chosen: {disable_search_threshold: 10, width: \'100%\'}\n                    "></select>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},91566:function(e){e.exports='\n\n\n<div id="related-resources-drag-panel" style="height: calc(100vh - 102px);" class="search-container related-resources-container">\n\n\n    \x3c!-- Target --\x3e\n    \x3c!--ko if: openEditor() === false --\x3e\n    <div id="rr-manager-content-id" class="rr-drag-panel-target">\n\n        <div id="rr-splash" class="rr-splash">\n\n            \x3c!-- Image --\x3e\n            <div class="img-lg img-circle rr-splash-img-container">\n                <i class="fa fa-lock"></i>\n            </div>\n\n            \x3c!-- Splash Title --\x3e\n            <div class="rr-splash-title">\n                <span data-bind="text: $root.translations.resourceInstancePermissions"></span>\n            </div>\n\n\n            <button class="btn btn-shim btn-rr btn-labeled btn-lg fa fa-link" data-bind="click: function(){makeInstancePrivate()}">\n                <span data-bind="text: $root.translations.configureAccessToThisInstance"></span>\n            </button>\n\n            \x3c!-- Splash Instructions --\x3e\n            <div class="rr-splash-description">\n                <span data-bind="text: $root.translations.defineInstanceAccessPrivileges"></span>\n            </div>\n\n            \x3c!-- Help Hyperlink --\x3e\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: openEditor() --\x3e\n        <div class="permission-grid">\n            <div class="permission-header">\n                <h4>\n                    <span data-bind="text: $root.translations.setPermissionsForThisInstance"></span>\n                </h4>\n                <h5>\n                    <span data-bind="text: $root.translations.setInstancePermissionsText"></span>\n                </h5>\n            </div>\n            <div class="permission-control">\n                <div class="list-filter">\n                    <input type="text" class="form-control" style="width: 250px;" placeholder="filter table" data-bind="textInput: filter">\n                    <div class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></div>\n                </div>\n            </div>\n            <div class="permission-list">\n            <div class="applied-permissions">\n            \x3c!--ko if: filteredPermissions()  --\x3e\n            <div class="permission-list-table">\n                <div class="permissions-list-header">\n                    <div class="identities-column">\n                        <span data-bind="text: $root.translations.personGroup"></span>\n                    </div>\n                    <div class="permissions-column">\n                        <span data-bind="text: $root.translations.permissions"></span>\n                    </div>\n                </div>\n                <div class="permissions-list-table-body">\n                     \x3c!--ko foreach: filteredPermissions() --\x3e\n                        \x3c!--ko if: $data.creatorOrSuperUser --\x3e\n                        <div class="permissions-table-row">\n                            <div style="display: inline-flex">\n                                <div class="identities-column"><i style="color: #579ddb; padding: 0 5px" class="fa" data-bind="class: function(){return $data[\'type\']===\'user\' ? \'fa-user\' : \'fa-users\'}()"></i><span data-bind="text: $data[\'name\']"></span></div>\n                                <div class="permissions-column" data-bind="text: [$parent.permissionLabelLookup.view_resourceinstance,$parent.permissionLabelLookup.change_resourceinstance,$parent.permissionLabelLookup.delete_resourceinstance].join(\', \')"></div>\n                            </div>\n                        </div>\n                         \x3c!--/ko--\x3e\n                     \x3c!--/ko--\x3e\n                    \x3c!--ko foreach: filteredPermissions() --\x3e\n                    \x3c!--ko ifnot: $data.creatorOrSuperUser --\x3e\n                    <div class="permissions-table-row" data-bind="css: {selected: $data.selected()}">\n                        <div data-bind="click: function(){$data.selected(!$data.selected())}" style="display: inline-flex">\n                            <div class="identities-column"><i style="color: #579ddb; padding: 0 5px" class="fa" data-bind="class: function(){return $data[\'type\']===\'user\' ? \'fa-user\' : \'fa-users\'}()"></i><span data-bind="text: $data[\'name\']"></span></div>\n                            <div class="permissions-column" data-bind="text: $data.availablePermissions.filter(function(a){return !!a.selected()}).map(function(p){return $parent.permissionLabelLookup[p.codename]}).join(\', \')"></div>\n                        </div>\n                        \x3c!--ko if: selected--\x3e\n                        <div class="permission-selection-panel">\n                            <div class="identities-column"></div>\n                            \x3c!--ko if: $parent.instancePermissions()  --\x3e\n                            <div class="permissions-column">\n                                <div class="permissions-options">\n                                    \x3c!--ko foreach: $data.availablePermissions --\x3e\n                                    <div style="margin-right: 15px">\n                                    <label class="form-checkbox form-normal form-primary permission-option active" data-bind="css: {\n                                            \'active\': $data.selected\n                                        }, click: $data.selected.bind($data, !$data.selected())">\n                                        <input type="checkbox" data-bind="checked: $data.selected">\n                                        <i data-bind="css: $data.icon"></i> <span data-bind="text: $data.name.replace(\' resource\', \'\')"></span>\n                                    </label>\n                                    </div>\n                                    \x3c!--/ko--\x3e\n                                </div>\n                            </div>\n                            \x3c!--/ko--\x3e\n                        </div>\n                        \x3c!--/ko--\x3e\n                    </div>\n                    \x3c!--/ko--\x3e\n                    \x3c!--/ko--\x3e\n                </div>\n            </div>\n            \x3c!--/ko--\x3e\n            </div>\n            </div>\n            <div class="permissions-buttons mar-btm">\n                <button id="cc-delete-btn" class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times mar-rgt" data-bind="click: function(){revertPermissions()}, css: {\'disabled\': !dirty()}">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                <button id="cc-save-btn" class="btn btn-shim btn-primary btn-labeled btn-lg fa fa-check" data-bind="click: function(){updatePermissions()}, css: {\'disabled\': !dirty()}">\n                    <span data-bind="text: $root.translations.apply"></span>\n                </button>\n            </div>\n            <div class="remove-permissions-btn mar-btm" style="align-self: end">\n            <button id="cc-save-btn" class="btn btn-shim btn-warning btn-labeled btn-lg fa fa-unlock" data-bind="click: function(){makeInstancePublic()}">\n                <span data-bind="text: $root.translations.allowNormalAccess"></span>\n            </button>\n        </div>\n        </div>\n\n\n    \x3c!--/ko--\x3e\n</div>\n'},62972:function(e,t,n){var a=n(5797)(n(30953)),i=' \n \n\n\n\n\n\x3c!--ko let: {self: $data} --\x3e\n\x3c!--ko if: resourceEditorContext && displaySplash()--\x3e\n<div id="rr-splash" class="rr-splash">\n\n    \x3c!-- Image --\x3e\n    <div class="img-lg img-circle rr-splash-img-container">\n        <img class="rr-splash-img" src="'+a+'" alt="Resource Editor">\n    </div>\n\n    \x3c!-- Splash Title --\x3e\n    <div class="rr-splash-title">\n        <span data-bind="text: $root.translations.relatedResourcesEditor"></span>\n    </div>\n\n\n    <button class="btn btn-shim btn-rr btn-labeled btn-lg fa fa-link" data-bind="click: function(){displaySplash(false)}">\n        <span data-bind="text: $root.translations.addRelatedResources"></span>\n    </button>\n\n    \x3c!-- Splash Instructions --\x3e\n    <div class="rr-splash-description">\n        <span data-bind="text: $root.translations.relatedResourcesEditorDesc"></span>\n    </div>\n\n    \x3c!-- Help Hyperlink --\x3e\n    <div class="rr-splash-help-link" data-bind="click: function(){$parent.helpTemplate(\'report-manager-help\'); $parent.helpOpen(true);}">\n        <span data-bind="text: $root.translations.showMeHow"></span>\n    </div>\n</div>\n\x3c!--/ko--\x3e\n\n<div class="create-resource-instance-card-component rr-table-pop" data-bind="style: {transform: !!reportResourceId() ? \'translate(0,0)\' : \'translate(100%,0)\'}">\n    <div class="create-instance-header" style="display: flex; justify-content: space-between;">\n        <span data-bind="text: $root.translations.addRelatedResources"></span>\n        <div data-bind="click: function(){reportResourceId(null)}, clickBubble: false" class="close-new-step">\n            <button class="btn btn-labeled btn-lg fa fa-arrow-right btn-primary">\n                <span data-bind="text: $root.translations.return"></span>\n            </button>\n        </div>\n    </div>\n    <div class="create-instance-panel" data-bind="component: {\n        name: \'resource-report-abstract\',\n        params: {\n            resourceid: reportResourceId(),\n            summary: true,\n        }\n    }"></div>\n</div>\n\n\x3c!--ko if: !displaySplash()--\x3e\n\n<div class="rr-viewer-selector">\n    <div class="rr-viewer-selector-title" data-bind="click: function () { showGraph(false); },\n        css: {\'selected\': !showGraph(), \'disabled\': showGraph()\n    }">\n        <span data-bind="text: $root.translations.table"></span>\n    </div>\n    <div class="rr-viewer-selector-title" data-bind="click: function () { if (currentResource()){showGraph(true)}; },\n        css: {\'selected\': showGraph(), \'disabled\': !showGraph()\n    }">\n        <span data-bind="text: $root.translations.visualization"></span>\n    </div>\n</div>\n\n\n<div id="related-resources-drag-panel" style="overflow-y: hidden; position: relative;" class="search-container related-resources-container">\n\n    \x3c!-- Target --\x3e\n    <div id="rr-manager-content-id" class="rr-drag-panel-target" data-bind="style: {\'margin-bottom\': containerBottomMargin }">\n\n        \x3c!--ko if: resourceEditorContext && !showGraph() --\x3e\n        <div class="related-resources-header" data-bind="css: {\'open-graph\': showGraph() == true}, style: {height: resourceEditorContext === true ? \'55px\' : \'40px\'}">\n\n            <div class="editor-elements">\n                <div class="">\n                    <h2 class="">                        \n                        <span data-bind="text: $root.translations.relatedResources"></span>\n                    </h2>\n                    <h3 class="">\n                        <span data-bind="text: $root.translations.addRelationshipInstruction"></span>\n                    </h3>\n                    <div style="min-width: 300px;">\n                        <input style="display:inline-block;" data-bind="\n                            select2Query: {\n                                select2Config: select2Config\n                            }\n                        ">\n                    </div>\n                </div>\n\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n\n        <div data-bind="hidden: showGraph()">\n            \x3c!--ko if: resourceRelationships().length > 0 --\x3e\n            <div class="rr-table-border" style="padding: 3px; display: flex; border-bottom: none; background: #f2f2f2; height: 40px; padding-top: 5px; padding-left: 5px;">\n                <div class="list-filter">\n                    <input type="text" class="form-control" style="width: 300px; height: 28px" data-bind="\n                            attr: { placeholder: $root.translations.egText }, \n                            textInput: filter\n                        ">\n                    <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\');}"><i class="fa fa-times-circle"></i></span>\n                </div>\n                <span style="padding: 4px;" data-bind="if: totalRelationships() > 1">\n                    <span style="font-size: 13px;" class="file-workbench-filecount" data-bind="text: totalRelationships() + \' \' + $root.translations.resourceRelations"></span>\n                </span>\n            </div>\n\n            <div class="rr-table rr-summary-page">\n                <div data-bind="foreach:{ data: relationshipsInFilter, as: \'relationship\'}" style="display: flex; flex-direction: column;">\n                    <div class="rr-table-row">\n                        <div class="rr-table-row-initial">\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click: function(){window.open(resource.resourceinstanceid)}, clickBubble: false">\n                                    <i class="fa fa-pencil"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click: !!relationship.tileid() ?  self.updateTile.bind(self, {\'delete\':true}) : self.deleteRelationships.bind(self), clickBubble: false">\n                                    <i class="fa fa-trash"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column icon-column">\n                                <button data-bind="click:function(){self.reportResourceId(resource.resourceinstanceid);}, clickBubble: false">\n                                    <i class="fa fa-info-circle"></i>\n                                </button>\n                            </div>\n                            <div class="rr-table-column" style="flex-grow: 1;" data-bind="click: self.toggleSelectedResourceRelationship, clickBubble: false">\n                                <div class="rr-table-instance-label" style="padding-left: 10px;" data-bind="text: resource.displayname"></div>\n                            </div>\n                        </div>\n                        <div class="rr-table-row-panel" data-bind="if: self.selectedResourceRelationship() === relationship, visible:  self.selectedResourceRelationship() === relationship, css: { \'rr-table-border\': self.selectedResourceRelationship() === relationship} ">\n                            <div data-bind="if: !!relationship.tileid()">\n                                <div data-bind="text: $root.translations.nodeResourceRelationshipText"></div>\n                                <div class="widget-container" style="padding-left: 0px;">\n                                    \x3c!--ko if: self.graphIsSemantic --\x3e\n                                    \x3c!--ko if: self.currentResource().resourceinstanceid === relationship.resourceinstanceidfrom() --\x3e\n                                    <div class="row">\n                                        <label class="col-sm-12" style="font-weight: bold;">\n                                            <span class="" data-bind="text: self.currentResource().displayname + $root.translations.relationshipText + \' \' + resource.displayname"></span>\n                                        </label>\n                                    </div>\n                                    <div class="row">\n                                        <span class="col-sm-4" style="padding-right: 5px;text-align: right;" data-bind="text: self.currentResource().displayname + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'"></span>\n                                        <span class="col-sm-4">\n                                            <input style="width:30%; display:inline-block;" data-bind="\n                                                select2Query: {\n                                                    select2Config: self.getSelect2ConfigForOntologyProperties(relationship.relationshiptype, self.rootOntologyClass, relationship.resource.root_ontology_class, $root.translations.select-ontology-property)\n                                                }\n                                            ">\n                                        </span>\n                                        <span class="col-sm-4" style="padding-left: 5px;" data-bind="text: resource.displayname + \' (\' + self.makeFriendly(relationship.resource.root_ontology_class) + \')\'"></span>\n                                    </div>\n                                    <div class="row" style="margin-top: 20px;">\n                                        <label class="col-sm-12" style="font-weight: bold;">\n                                            <span data-bind="text: resource.displayname + $root.translations.relationshipText + \' \' + self.currentResource().displayname"></span>\n                                        </label>\n                                    </div>\n                                    <div class="row">\n                                        <span class="col-sm-4" style="padding-right: 5px; text-align: right;" data-bind="text: resource.displayname + \' (\' + self.makeFriendly(relationship.resource.root_ontology_class) + \')\'"></span>\n                                        <span class="col-sm-4">\n                                            <input style="width:30%; display:inline-block;" data-bind="\n                                                select2Query: {\n                                                    select2Config: self.getSelect2ConfigForOntologyProperties(relationship.inverserelationshiptype, relationship.resource.root_ontology_class, self.rootOntologyClass, $root.translations.select-ontology-property)\n                                                }\n                                            ">\n                                        </span>\n                                        <span class="col-sm-4" style="padding-left: 5px;" data-bind="text: self.currentResource().displayname + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'"></span>\n                                    </div>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!--ko if: self.currentResource().resourceinstanceid === relationship.resourceinstanceidto() --\x3e\n                                    <div class="row">\n                                        <label class="col-sm-12" style="font-weight: bold;">\n                                            <span data-bind="text: $root.translations.inverseRelationshipTo + \' \' + resource.displayname"></span></label>\n                                    </div>\n                                    <div class="row">\n                                        <span class="col-sm-4" style="padding-right: 5px; text-align: right;" data-bind="text: self.currentResource().displayname + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'"></span>\n                                        <span class="col-sm-4">\n                                            <input style="width:30%; display:inline-block;" data-bind="\n                                                select2Query: {\n                                                    select2Config: self.getSelect2ConfigForOntologyProperties(relationship.inverserelationshiptype, self.rootOntologyClass, relationship.resource.root_ontology_class, $root.translations.select-ontology-property)\n                                                }\n                                            ">\n                                        </span>\n                                        <span class="col-sm-4" style="padding-left: 5px;" data-bind="text: resource.displayname + \' (\' + self.makeFriendly(relationship.resource.root_ontology_class) + \')\'"></span>\n                                    </div>\n                                    <div class="row" style="margin-top: 20px;">\n                                        <label class="col-sm-12" style="font-weight: bold;">\n                                            <span data-bind="text: $root.translations.inverseRelationshipTo + \' \' + resource.displayname"></span>\n                                        </label>\n                                        </div>\n                                        <div class="row">\n                                            <span class="col-sm-4" style="padding-right: 5px; text-align: right;" data-bind="text: resource.displayname + \' (\' + self.makeFriendly(relationship.resource.root_ontology_class) + \')\'"></span>\n                                            <span class="col-sm-4">\n                                                <input style="width:30%; display:inline-block;" data-bind="\n                                                    select2Query: {\n                                                        select2Config: self.getSelect2ConfigForOntologyProperties(relationship.relationshiptype, relationship.resource.root_ontology_class, self.rootOntologyClass, $root.translations.select-ontology-property)\n                                                    }\n                                                ">\n                                            </span>\n                                        <span class="col-sm-4" style="padding-left: 5px;" data-bind="text: self.currentResource().displayname + \' (\' + self.makeFriendly(self.rootOntologyClass) + \')\'"></span>\n                                    </div>\n                                    \x3c!-- /ko --\x3e\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                                <div class="relation-properties-button">\n                                    <button class="btn btn-danger btn-labeled btn-lg fa fa-trash" data-bind="click:self.updateTile.bind(self, {\'delete\':true})">\n                                        <span data-bind="text: $root.translations.deleteThisEntry"></span>\n                                    </button>\n                                    \x3c!--ko if: self.graphIsSemantic --\x3e\n                                    <button class="btn btn-danger btn-labeled btn-lg fa fa-times" data-bind="click:relationship.reset, visible: relationship.dirty">\n                                        <span data-bind="text: $root.translations.cancelEdit"></span>\n                                    </button>\n                                    <button class="btn btn-mint btn-labeled btn-lg fa fa-cloud" data-bind="click:self.updateTile.bind(self, {\'delete\':false}), visible: relationship.dirty">\n                                        <span data-bind="text: $root.translations.save"></span>\n                                    </button>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n                            <div data-bind="ifnot: !!relationship.tileid()">\n                                <div data-bind="text: $root.translations.relationshipDesc"></div>\n                                <div class="row widget-container" style="padding-left: 0px;">\n                                    <div class="form-group">\n                                        <label class="col-xs-12 control-label widget-input-label" for="">\n                                            <span data-bind="text: $root.translations.relationship"></span>\n                                            <i class="ion-ios-checkmark-outline"></i></label>\n                                        <div class="col-xs-12">\n                                            <input style="width:30%; display:inline-block;" data-bind="select2: {\n                                                    select2Config: {\n                                                        clickBubble: true,\n                                                        data: self.relationshipTypes,\n                                                        value: relationship.relationshiptype,\n                                                        multiple: false,\n                                                        placeholder: self.relationshipTypePlaceholder\n                                                    }\n                                                }">\n                                        </div>\n                                    </div>\n                                </div>\n\n                                \x3c!--ko if: self.graphIsSemantic === false --\x3e\n                                <div class="row widget-container" style="padding-left: 0px;">\n                                    <div class="form-group">\n                                        <div class="relative">\n                                            <label class="col-xs-6 control-label widget-input-label" for="">\n                                                <span data-bind="text: $root.translations.fromDate"></span>\n                                                <i class="ion-ios-checkmark-outline"></i>\n                                            </label>\n                                            <label class="col-xs-6 control-label widget-input-label" for="">\n                                                <span data-bind="text: $root.translations.toDate"></span>\n                                                <i class="ion-ios-checkmark-outline"></i>\n                                            </label>\n                                        </div>\n\n                                        <div class="relative">\n                                            <div class="col-xs-6">\n                                                <input type="text" class="form-control input-lg widget-input" placeholder="date from" data-bind="datepicker: {format: \'YYYY-MM-DD\'}, value: relationship.datestarted">\n                                            </div>\n                                            <div class="col-xs-6">\n                                                <input type="text" class="form-control input-lg widget-input" placeholder="date to" data-bind="datepicker: {format: \'YYYY-MM-DD\'}, value: relationship.dateended">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="row widget-container" style="padding-left: 0px;">\n                                    <div class="form-group">\n                                        <div class="relative">\n                                            <label class="col-xs-12 control-label widget-input-label" for="">\n                                                <span data-bind="text: $root.translations.description"></span>\n                                                <i class="ion-ios-checkmark-outline"></i>\n                                            </label>\n                                        </div>\n\n                                        <div class="col-xs-12">\n                                            <input type="text" id="editor1" class="form-control input-lg widget-input" data-bind="textInput: relationship.notes">\n                                        </div>\n                                    </div>\n                                </div>\n                                \x3c!--/ko--\x3e\n\n                                <div class="relation-properties-button">\n                                    <button class="btn btn-danger btn-labeled btn-lg fa fa-trash" data-bind="click:self.deleteRelationships.bind(self)">\n                                        <span data-bind="text: $root.translations.deleteThisEntry"></span>\n                                    </button>\n                                    <button class="btn btn-danger btn-labeled btn-lg fa fa-times" data-bind="click:relationship.reset, visible: relationship.dirty">\n                                        <span data-bind="text: $root.translations.cancelEdit"></span>\n                                    </button>\n                                    <button class="btn btn-mint btn-labeled btn-lg fa fa-cloud" data-bind="click:self.saveRelationship.bind(self), visible: relationship.dirty">\n                                        <span data-bind="text: $root.translations.save"></span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n            \x3c!-- Pagination --\x3e\n            \x3c!-- ko if: paginator --\x3e\n            <div data-bind="with: paginator">\n                <div class="text-center">\n                    <ul class="pagination">\n                        <li><a data-bind="css: {\'disabled\': !has_previous()}, click: $parent.newPage.bind($parent, previous_page_number())" href="#">«</a></li>\n                        \x3c!-- ko foreach: { data: pages, as: \'page\' } --\x3e\n                        \x3c!-- ko if: page --\x3e\n                        <li class="page" data-bind="click: $parents[1].newPage.bind($parents[1]), css: {\'current active\': (page == $parent.current_page())}">\n                            <a href="#" data-bind="text: page, attr:{\'data-page\':page}"></a>\n                        </li>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: page --\x3e\n                        <li class="disabled"><a href="#">...</a></li>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                        <li><a data-bind="css: { \'disabled\': !has_next()}, click: $parent.newPage.bind($parent, next_page_number())" href="#">»</a></li>\n                    </ul>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- End Pagination --\x3e\n            \x3c!--/ko --\x3e\n\n            \x3c!--ko if: resourceRelationships().length === 0 --\x3e\n            <div class="rr-panel-note">\n                <span data-bind="text: $root.translations.noRelatedResourceText"></span>\n            </div>\n            \x3c!--/ko--\x3e\n        </div>\n\n\n        \x3c!--ko if: resourceEditorContext === undefined && !currentResource() --\x3e\n        <div id="rr-splash" class="rr-splash" style="margin: 50px 310px 0px 40px;">\n            \x3c!-- Image --\x3e\n            <div class="img-lg img-circle rr-splash-img-container">\n                <img class="rr-splash-img" src="'+a+'" alt="Saved Search">\n            </div>\n\n            \x3c!-- Splash Title --\x3e\n            <div class="rr-splash-title">\n                <span data-bind="text: $root.translations.relatedResources"></span>\n            </div>\n\n            \x3c!-- Splash Instructions --\x3e\n            <div class="rr-splash-description">\n                <span data-bind="text: $root.translations.relatedResourcesFilterText"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n    </div>\n\n    \x3c!--ko if: showGraph() --\x3e\n    <div class="related-resources-filter" style="height: calc(100vh - 80px)">\n        \x3c!-- ko component: {\n            name: \'related-resources-graph\',\n            params: {\n                resourceId: editingInstanceId\n            }\n        } --\x3e\x3c!-- /ko --\x3e\n    </div>\n    \x3c!--/ko--\x3e\n\n</div>\n\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n';e.exports=i},38096:function(e){e.exports='\n\n<div>\n    <div style="display: inline-flex; flex-direction: column; width: 100%;">\n        <div style="border: solid 1px #ddd">\n            <div class="iiif-leaflet" data-bind="leaflet: leafletConfig" style="height: 500px; width: 100%"></div>\n        </div>\n\n        <div style="width: 100%; padding-left: 10px;">\n            <table data-bind="datatable: annotationTableConfig" class="table table-striped" style="border-bottom: 1px solid #ddd;" width="100%">\n                <thead>\n                    <tr>\n                        <th>Region Name:</th>\n                        <th>Annotator</th>\n                    </tr>\n                </thead>\n                <tbody data-bind="foreach: {data: annotation.info, as: \'part\'}">\n                    <tr style="cursor: pointer" data-bind="\n                        css:\n                            {\'selected\': $parent.selectedAnnotationTileId() === part.tileId }, \n                        click: function() {\n                            $parent.highlightAnnotation(part.tileId);\n                        }">\n                        <td><div class="summary-value" data-bind="text: part.name"></div></td>\n                        <td><div class="summary-value" data-bind="text: part.annotator"></div></td>\n                    </tr>\n                <tbody>\n            </tbody></tbody></table>\n            <div class="final-step-section-block-item">\n                <div class="block-item files-metadata" style="display: inline-flex; color: #777;">\n                    <div class="" style="font-size: 13px; padding-right: 3px;" data-bind=\'text: "Regions of Interest: " + annotation.info.length\'></div>\n                </div>\n            </div>\n        </div>\n    </div>\n<div>\n</div></div>'},33993:function(e){e.exports='\n\n\x3c!--ko if: params.context === \'render\' --\x3e\n<div class="file-viewer chart-header">\n    <h3 data-bind="text: displayContent.name"></h3>\n</div>\n<div class="">\n    \x3c!--ko if: params.selected() --\x3e\n    <div class="preview file-viewer" style="position: relative;">\n        <div class="loading-mask" data-bind="visible: loading()"></div>\n        \x3c!--ko if: chartData --\x3e\n        <div class="chart" data-bind="plotly: {\n            data: chartData, \n            title: chartTitle, \n            titleSize: titleSize,\n            xAxisLabel: xAxisLabel,\n            xAxisLabelSize: xAxisLabelSize,\n            yAxisLabel: yAxisLabel,\n            yAxisLabelSize: yAxisLabelSize,\n            options: chartOptions,\n            seriesStyles: seriesStyles,\n            primarySeriesColor: primarySeriesColor,\n            seriesData: seriesData,\n            loading: loading\n        }"></div>\n        \x3c!--/ko--\x3e\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab\' --\x3e\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    fileViewer.toggleTab(\'file-context\');\n}, css: {\n    \'active\': fileViewer.activeTab() === \'file-context\'\n}">\n    <i class="fa fa-cog"></i>\n    <span class="map-sidebar-text">Config</span>\n</div>\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n        fileViewer.toggleTab(\'other-tab\');\n    }, css: {\n        \'active\': fileViewer.activeTab() === \'other-tab\'\n    }">\n    <i class="fa fa-bar-chart-o"></i>\n    <span class="map-sidebar-text">Data</span>\n</div>\n\x3c!--/ko--\x3e\n\n\n\x3c!--ko if: params.context === \'tab-contents\' --\x3e\n    \x3c!--ko if: fileViewer.activeTab() === \'file-context\' --\x3e\n    <div class="workbench-card-sidepanel-header-container file-workbench">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: fileViewer.hideSidePanel, text: \'Chart Configuration\'"></h4>\n    </div>\n    <div class="col-xs-12 pad-no crud-widget-container chart-config-panel">\n        <div class="row form-group widget-wrapper">\n            <div style="padding-top: 3px" class="control-label widget-input-label">Title Text and Font Size</div>\n            <div style="display: inline-flex">\n                <input style="margin-left: 5px" class="form-control input-lg widget-input" data-bind="textInput: chartTitle">\n                <input style="margin-left: 5px; width: 20%; padding-right: 5px;" class="form-control input-lg widget-input" type="number" data-bind="textInput: titleSize">\n            </div>\n        </div>\n        <div class="row form-group widget-wrapper">\n            <div style="padding-top: 3px" class="control-label widget-input-label">X Axis Label and Font Size</div>\n            <div style="display: inline-flex">\n                <input style="margin-left: 5px" class="form-control input-lg widget-input" data-bind="textInput: xAxisLabel">\n                <input style="margin-left: 5px; width: 20%; padding-right: 5px;" class="form-control input-lg widget-input" type="number" data-bind="textInput: xAxisLabelSize">\n            </div>\n        </div>\n        <div class="row form-group widget-wrapper">\n            <div style="padding-top: 3px" class="control-label widget-input-label">Y Axis Label and Font Size</div>\n            <div style="display: inline-flex">\n                <input style="margin-left: 5px" class="form-control input-lg widget-input" data-bind="textInput: yAxisLabel">\n                <input style="margin-left: 5px; width: 20%; padding-right: 5px;" class="form-control input-lg widget-input" type="number" data-bind="textInput: yAxisLabelSize">\n            </div>\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n    \x3c!--ko if: fileViewer.activeTab() === \'other-tab\' --\x3e\n    <div class="workbench-card-sidepanel-header-container file-workbench">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: fileViewer.hideSidePanel, text: \'Manage Series Data\'"></h4>\n    </div>\n    \n    \x3c!-- ko if: fileViewer --\x3e\n    <input style="display:inline-block; margin-top: 70px;" data-bind="select2Query: {\n        select2Config: {\n            clickBubble: false,\n            disabled: false,\n            data: compatibleSeries(),\n            value: stagedSeries,\n            closeOnSlect: false,\n            allowClear: true,\n            multiple: true,\n            placeholder: \'Available Series\'}}">\n    <div style="padding-top: 10px">\n        <button style="margin-right: 3px;" class="btn btn-lg btn-workbench btn-primary" data-bind="click: function(){addAllToChart()}, css: {\'disabled\':stagedSeries().length === 0}"><i class="fa fa-line-chart"></i> Add Series to Chart</button>\n    </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- <div class="file-workbench-filter series-data">\n        <h2 class="file-workbench-filter-header">File Filter</h2>\n        <input type="text" class="form-control" style="width: 100%; height:initial" placeholder="e.g.: .txt" data-bind="textInput: filter"></input>\n        <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n    </div> --\x3e\n\n    <div class="file-workbench-files" data-bind="visible: seriesData().length > 0">\n        \x3c!--ko foreach: fileViewer.card.tiles --\x3e\n            \x3c!--ko if: $parent.seriesData().filter(function(t){return t.tileid === $data.tileid}).length === 1; --\x3e\n            <div class="file-workbench-file chart-series-selector" data-bind="click: function(){$parent.toggleSelected($data)}, css: {\'selected-photo\': $parent.selectedSeriesTile() === $data}">\n                <div class="add-data-series">\n                    <i class="fa fa-times-circle" data-bind="click: function(){$parent.removeData(tileid)}"></i>\n                </div>\n                <div data-bind="text: $parent.fileViewer.getUrl($data).name"></div>\n            </div>\n            \x3c!--/ko--\x3e\n        \x3c!--/ko--\x3e\n    </div>\n    \x3c!--/ko--\x3e\n        \n    <div>\n        \x3c!-- ko if: seriesData().length >= 1 && selectedSeriesTile && fileViewer.activeTab() === \'other-tab\' --\x3e\n        <div class="chart-style-panel">\n            <h2>Style</h2>\n            <div class="row widget-container">\n\n                <div class="form-group">\n                    <div class="relative">\n                        <label class="col-xs-12 control-label widget-input-label"> Color </label>\n                    </div>\n\n                    <div class="colorpicker-component input-group">\n                        <input placeholder="Data Series Line Color" class="form-control input-lg widget-input" data-bind="colorPicker: {color: colorHolder, format:\'hex\'}">\n                        <span class="input-group-addon" data-bind="style: {background: colorHolder}"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!--/ko--\x3e\n\n'},59412:function(e){e.exports='\n\n\x3c!--ko if: params.context === \'render\' --\x3e\n<div class="">\n    \x3c!--ko if: params.selected() --\x3e\n    <div class="preview file-viewer" style="position: relative">\n        \x3c!--ko if: ko.unwrap(renderers).length && ko.unwrap(displayContent)--\x3e\n        <div class="loading-mask" data-bind="visible: loading()"></div>\n        <div data-bind="threePCD: {\n            clickBubble: true,\n            renderers: renderers,\n            scene: scene,\n            controls: controls,\n            displayContent: displayContent,\n            loader: loader,\n            loading: loading,\n            camera: camera}">\n        </div>\n        \x3c!--/ko--\x3e\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab\' --\x3e\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab-contents\' --\x3e\n\x3c!--/ko--\x3e\n\n'},70453:function(e){e.exports='\n\n\x3c!--ko if: params.context === \'render\' --\x3e\n<div class="">\n    \x3c!--ko if: params.selected() --\x3e\n    <div class="preview file-viewer" style="position: relative">\n        \x3c!--ko if: ko.unwrap(renderers).length && ko.unwrap(displayContent)--\x3e\n        <div class="loading-mask" data-bind="visible: loading()"></div>\n        <div data-bind="threePDB: {\n            clickBubble: false,\n            renderers: renderers,\n            scene: scene,\n            controls: controls,\n            displayContent: displayContent,\n            root: root,\n            loader: loader,\n            loading: loading,\n            camera: camera,\n            offset: offset}"></div>\n        \x3c!--/ko--\x3e\n    </div>\n    \x3c!--/ko--\x3e\n</div>\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab\' --\x3e\n\x3c!--/ko--\x3e\n\x3c!--ko if: params.context === \'tab-contents\' --\x3e\n\x3c!--/ko--\x3e\n\n'},23605:function(e){e.exports='\n\n\n\n<div class="file-chart-upload-panel">\n    <div class="gallery-controls new-tile">\n        <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n            <div class="file-select-window">\n                <div class="bord-top pad-ver file-select">\n                    <div class="" style="padding: 5px">\n                        <h2>Upload Files</h2>\n                        <h4>Drag & Drop your files onto this panel to upload</h4>\n                    </div>\n                    <button type="button" class="btn btn-lg btn-file-select fileinput-button dz-clickable" data-bind="css: uniqueidClass">\n                        <i class="fa fa-file"></i>\n                        <span>Select Files</span>\n                    </button>\n                    <br>\n                    <div style="padding: 10px">Adding files to this record is \n                        <span><strong>optional.</strong></span>\n                        <br>\n                        You may upload as many files as you wish; check with the site admin on the maximum file size.\n                    </div>\n\n                </div>\n                <div class="file-upload-footer">\n                    \x3c!-- ko if: acceptedFiles() !== null --\x3e\n                    <span data-bind="text: (\'The following file formats may be uploaded: \' + acceptedFiles())"></span>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !acceptedFiles() --\x3e\n                    <span>Images formatted as .jpg, .png files may be uploaded. Other formats may require a loader to view.</span>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n\n        </div>\n        <div style="min-height: 100%;">\n            <div id="hidden-dz-previews" style="display:none"></div>\n        </div>\n    </div>\n</div>'},74509:function(e){e.exports='\n\n<div style="height:0px">\n  <div class="row widget-container">\n    <div>\n      <h4>How does this function work?</h4>\n      <p>In the widget below, select a card/node that is of File-list datatype. When a tile is created for that card, this function will create a IIIF Manifest record in the database and a corresponding json file. Created IIIF Manifests will be selectable in a IIIF Annotation card. Ensure that Cantaloupe is running for this function to be successful.</p>\n    </div>\n    <div class="form-group">\n      <div class="relative">\n          <label class="col-xs-12 control-label widget-input-label"> Card Name</label>\n      </div>\n\n      <div class="col-xs-12">\n          \x3c!-- <select data-placeholder="Choose a card." multiple\n          data-bind="value: triggering_nodegroups, options: cards, optionsText: \'name\', optionsValue: \'nodegroup_id\', chosen: {width: \'100%\', allow_single_deselect: true, disable_search_threshold: 15},"></select> --\x3e\n\n          <select data-placeholder="Select a nodegroup" multiple="multiple" data-bind="chosen: {width: \'100%\'}, selectedOptions: triggering_nodegroups, options: cards, optionsText: \'name\', optionsValue: \'nodegroup_id\'"></select>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},3082:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},57223:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},14682:function(e){e.exports='<div class="workflow-select-plugin">\n    <div class="workflow-select-card-container">\n        \x3c!-- ko foreach: {data: workflows, as: \'workflow\'} --\x3e\n        <a data-bind="attr: {href: workflow.url, title: workflow.name}" href="#"><div data-bind="style: {\'background-color\': workflow.bgColor}" class="workflow-select-card">\n            <h4 class="workflow-select-title" data-bind="text: workflow.name"></h4>\n            <div data-bind="style: {\'background-color\': workflow.circleColor}" class="workflow-select-wf-circle">\n                <span><i data-bind="attr:{class: (\'fa \'+workflow.icon +\' workflow-select-wf-icon\')}"></i></span>\n            </div>\n            <p data-bind="text: workflow.desc" class="workflow-select-desc"></p>\n        </div></a>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n'},23841:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},33057:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},98222:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},59841:function(e){e.exports='\n\n\n<div class="workflow-plugin">\n    \x3c!-- ko if: ko.unwrap(activeStep) --\x3e\n    <div class="tabbed-workflow">\n\n        <div class="tabbed-workflow-title-bar">\n            <div class="workflow-name-container">\n                <div class="workflow-name" data-bind="text: workflowName() + \' Workflow\'">Insert Workflow Name</div>\n            </div>\n\n            <div class="workflow-top-control">\n                \x3c!-- ko if: (activeStep()._index === steps().length - 1) || isWorkflowFinished() --\x3e\n                <button data-bind="click: finishWorkflow" class="btn btn-success">\n                <i class="fa fa-check"></i>\n                <span class="verbose">\n                    Save and Complete Workflow\n                </span>\n                <span class="succinct">\n                    Complete\n                </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                <button data-bind="click: quitWorkflow" class="btn btn-danger">\n                    <i class="ion-android-cancel"></i>\n                    <span>\n                        Delete\n                    </span>\n                </button>\n            </div>\n        </div>\n        \n        <div class="workflow-nav-tab-container" data-bind="gallery: pan, duration: 400, thumbnailclass: \'workflow-nav-tabs\'">\n            <div class="workflow-tab-controls right" data-bind="click: function(){ updatePan(\'left\') }"><i class="fa fa-angle-left"></i></div>\n                <div class="workflow-nav-tabs">\n                    <ul class="nav nav-tabs workflow-nav-tab-list">\n                        \x3c!--ko foreach: {data: $data.steps(), as: \'step\'} --\x3e\n                            <li class="workflow-nav-tab-list-item" data-bind="\n                                    css: { active: step.active() },\n                                    container: \'.workflow-nav-tab-container\',\n                                    scrollDirection: \'horizontal\',\n                                    scrollTo: step.active(),\n                                ">\n                                <div class="workflow-nav-tab" data-bind="{\n                                        css: { \n                                            active: step.active(), \n                                            inactive: (\n                                                !step.active() \n                                                && (\n                                                    step.complete()\n                                                    || ( step._index <= $parent.furthestValidStepIndex() )\n                                                )\n\n                                            ),\n                                            disabled: (\n                                                !step.active() \n                                                && step._index > $parent.furthestValidStepIndex()\n                                            ),\n                                        },\n                                        click: function() { \n                                            if (\n                                                !step.active() \n                                                && step._index <= $parent.furthestValidStepIndex()\n                                            ) { \n                                                $parent.activeStep(step) \n                                            }\n                                        },\n                                    }">\n                                    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">\n                                        <span style="margin-right: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: $parent.activeStep()._index === 0,\n                                                },\n                                                visible: step.active() && step._index !== 0,\n                                            }">\n                                            <i class="fa fa-caret-left"></i>\n                                        </span>\n\n                                        <span style="font-size: 14px;" data-bind="text: ko.unwrap(step.title)"></span>\n\n                                        <span style="margin-left: 4px;" class="workflow-nav-tab-arrow" data-bind="{\n                                                css: {\n                                                    disabled: (\n                                                        ( $parent.activeStep() && $parent.activeStep().required() && !$parent.activeStep().complete() )\n                                                    ),\n                                                },\n                                                visible: step.active() && step._index !== $parent.steps().length - 1,\n                                            }">\n                                            <i class="fa fa-caret-right"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            <div class="workflow-tab-controls left" data-bind="click: function(){ updatePan(\'right\') }"><i class="fa fa-angle-right"></i></div>\n        </div>\n        <div class="workflow-step-title">\n            <h2>\n                <i class="fa fa-list-ol text-center icon-wrap bg-gray ep-graph-title-icon"></i>\n                <span data-bind="text: activeStep().title"></span>\n            </h2>\n        </div>\n        <div class="tabbed-workflow-step-container">\n            \x3c!-- ko component: {\n                name: \'workflow-step\',\n                params: {\n                    ...$data,\n                    step: $data.activeStep(),\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        </div>\n\n        <div class="tabbed-workflow-footer">\n\n            <div class="tabbed-workflow-footer-button-container">\n                \x3c!-- ko if: activeStep()._index > 0 --\x3e\n                <button class="btn btn-primary" data-bind="click: back">\n                    <i class="fa fa-caret-left"></i>\n                    <span class="verbose">\n                        Previous Step\n                    </span>\n                    <span class="succinct">\n                        Previous\n                    </span>\n                </button>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'undo\') && !activeStep().saveWithoutProgressing()  --\x3e\n                    <button class="btn btn-danger static-save-button" data-bind="{\n                            css: {\n                                disabled: !activeStep().hasUnsavedData(),\n                            },\n                            click: activeStep().undo\n                        }">\n                        <i class="fa fa-undo"></i>\n                        <span>\n                            Undo\n                        </span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !$data.hiddenWorkflowButtons().includes(\'save\') --\x3e\n                        \x3c!-- ko if: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.staticSaveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                        Save\n                                </span>\n                                <span class="succinct">\n                                    Save\n                                </span>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko ifnot: activeStep().saveWithoutProgressing() --\x3e\n                            <button class="btn btn-success" data-bind="\n                                    click: $data.saveActiveStep\n                                ">\n                                <i class="ion-android-cloud-done"></i>\n                                <span class="verbose">\n                                    Save and Continue\n                                </span>\n                                <span class="succinct">\n                                    Next\n                                </span>\n                                <i class="fa fa-caret-right"></i>\n                            </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $data.hiddenWorkflowButtons().includes(\'save\') || activeStep().saveWithoutProgressing() --\x3e\n                        \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                        <button class="btn btn-primary" data-bind="\n                                click: next,\n                                css: {\n                                    disabled: activeStep().required() && !activeStep().complete(),\n                                }\n                            ">\n                            <span class="verbose">\n                                Next Step\n                            </span>\n                            <span class="succinct">\n                                Next\n                            </span>\n                            <i class="fa fa-caret-right"></i>\n                        </button>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: activeStep().hasUnsavedData() --\x3e\n                    \x3c!-- ko if: activeStep()._index < steps().length - 1 --\x3e\n                    <button class="btn btn-primary" data-bind="\n                            click: next,\n                            css: {\n                                disabled: activeStep().required() && !activeStep().complete(),\n                            }\n                        ">\n                        <span class="verbose">\n                            Next Step\n                        </span>\n                        <span class="succinct">\n                            Next\n                        </span>\n                        <i class="fa fa-caret-right"></i>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n            <div class="step-metadata">\n                <div class="step-counter">\n                    <span style="padding-right: 2px;" data-bind="text:activeStep()[\'_index\'] + 1"></span>\n                    <span data-bind="text:\'/ \' + steps().length"></span>\n                    \n                </div>\n    \n                \x3c!--ko if: ko.unwrap(activeStep().informationBoxData) --\x3e\n                <div data-bind="{\n                        component: { \n                            name: \'views/components/simple-switch\', \n                            params: {\n                                value: activeStep().informationBoxData()[\'displayed\'], \n                                config:{\n                                    label: &quot;Show Step Information&quot;,\n                                    setvalue: activeStep().toggleInformationBox,\n                                    getvalue: activeStep().informationBoxData()[\'displayed\'],\n                                }\n                            }\n                        }\n                    }"></div>\n                \x3c!-- /ko --\x3e\n            </div>\n\n\n\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>'},94982:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Collection or Set:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents,\n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Project Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'projects\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.relatedProject)}, css: {\'fa-angle-double-right\': visible.relatedProject(), \'fa-angle-double-up\': !visible.relatedProject()}" class="fa toggle"></i> Related Projects</h2>\n                    <div class="afs-card-control" data-bind="if: cards[\'related project of collection\'] && relatedProject().length > 0">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile(cards[\'related project of collection\'])}"><i class="fa fa-mail-reply"></i> Edit Related Project</a>\n                    </div>\n                    <div class="afs-card-control" data-bind="if: cards[\'related project of collection\'] && relatedProject().length == 0">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile(cards[\'related project of collection\'])}"><i class="fa fa-mail-reply"></i> Add Related Project</a>\n                    </div>\n\n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.relatedProject" class="afs-report-collapsible-container pad-lft">\n                \n                        \x3c!-- ko ifnot: relatedProject().length --\x3e\n                        <div class="afs-nodata-note">No related project for this resource</div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: relatedProject().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div class="firstchild-container">\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cells pacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Project</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: relatedProject, dataTableOptions: relatedProjectTableConfig }">\n                                            <tr>\n                                                <td data-bind="text: displayname"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: link">\n                                                        <a data-bind="attr: { href: link }">\n                                                            <i class="fa fa-link"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Publication Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'publications\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.textualReference)}, css: {\'fa-angle-double-right\': visible.textualReference(), \'fa-angle-double-up\': !visible.textualReference()}" class="fa toggle"></i> Textual Reference</h2>\n                    <a data-bind="{if: cards[\'textual reference to collection\'], click: function(){addNewTile(cards[\'textual reference to collection\'])}}" class="afs-report-a"><i class="fa fa-mail-reply"></i> Add textual reference</a>\n\n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.textualReference" class="afs-report-collapsible-container pad-lft">\n\n                        \x3c!-- ko ifnot: textualReference().length --\x3e\n                        <div class="afs-nodata-note">No textual references for this collection</div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: textualReference().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div class="firstchild-container">\n                                <div class="afs-table">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr>\n                                                <th>Textual Source</th>\n                                                <th>Textual Reference Type</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: textualReference, dataTableOptions: textualReferenceTableConfig}">\n                                            <tr>\n                                                <td><a class="afs-table-link" data-bind="text: textualSource, attr: {href: textualSourceLink}"></a></td>                                                \n                                                <td data-bind="text: textualReferenceType"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: $parent.cards[\'textual reference to collection\']">\n                                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.cards[\'textual reference to collection\'])}">\n                                                            <i class="fa fa-mail-reply"></i>\n                                                        </a>\n                                                        <a data-bind="click:  function() {$parent.deleteTile(tileid, $parent.cards[\'textual reference to collection\'])}">\n                                                            <i class="fa fa-trash"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Events Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'events\'">                \n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: eventCards,\n                        events: eventEvents,\n                        dataConfig: eventDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- JSON Tab --\x3e\n           <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Collection/Set)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Collection/Set Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Type --\x3e \n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Collection/Set Type</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: typeSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There is no type for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: typeSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-value" data-bind="text: typeSummary().type"></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Related Project Tab --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Related Projects</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: relatedProjectSummary() && relatedProjectSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no related resources for this resource</h3>\n                \x3c!-- /ko --\x3e    \n                \x3c!-- ko if: relatedProjectSummary() && relatedProjectSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: relatedProjectSummary ">\n                    <div class="afs-block-value">\n                        <a data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\n                        \x3c!-- ko if: $index() < $parent.relatedProjectSummary().length - 1  --\x3e, \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e        \n            </div>\n        </div>\n        \x3c!-- Statement --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statement</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There is no statement for this resource</h3>\n                \x3c!-- /ko --\x3e    \n                \x3c!-- ko if: statementSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-attributes">\n                        <div class="afs-block-key">Statement: </div>\n                        <div class="afs-block-value" data-bind="text: statementSummary().content"></div>\n                    </div>\n                    <div class="afs-block-attributes pad-btm">\n                        <div class="afs-block-key">Type: </div>\n                        <div class="afs-block-value" data-bind="text: statementSummary().type"></div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},18869:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Digital Resource:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents,\n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>           \n             \x3c!-- Events Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'events\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: eventsCards,\n                        events: eventsEvents,\n                        dataConfig: eventsDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Information Carriers Tab --\x3e\n            <div data-bind="if: activeSection() === \'carriers\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.carriers)}, css: {\'fa-angle-double-right\': visible.files(), \'fa-angle-double-up\': !visible.files()}" class="fa toggle"></i> Files</h2>\n                    <span data-bind="if: cards[\'files of digital resource\'] && (!files().length || cards[\'files of digital resource\'].cardinality == \'n\')">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile(cards[\'files of digital resource\'])}"><i class="fa fa-mail-reply"></i> Add File</a>\n                    </span>\n                \n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.files" class="afs-report-collapsible-container pad-lft">\n                \n                        \x3c!-- ko ifnot: files().length --\x3e\n                        <div class="afs-nodata-note">No names for this resource</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: files().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div>\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Name</th>\n                                                <th class="min-tabletl">Metadata Exists</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: files, dataTableOptions: filesTable }">\n                                            <tr>\n                                                <td data-bind="text: name"></td>\n                                                <td data-bind="text: metadataExists"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: $parent.cards && $parent.cards[\'files of digital resource\']">\n                                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.cards[\'files of digital resource\'])}">\n                                                            <i class="fa fa-mail-reply"></i>\n                                                        </a>\n                                                        <a data-bind="click: $parent.deleteTile.bind($data, tileid, $parent.cards[\'files of digital resource\'])">\n                                                            <i class="fa fa-trash"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Substance Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards,\n                        additionalData: additionalData\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Aboutness Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'aboutness\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: aboutnessData\n                    }\n                }"></div>\n            </div>  \n            \x3c!-- Parthood Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData\n                    }\n                }"></div>\n            </div> \n            \x3c!-- Sethood Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'sethood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: sethoodData\n                    }\n                }"></div>\n            </div>   \n            \x3c!-- JSON Tab --\x3e\n           <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>\n\n                \n\n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Digital Resource)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Digital Resource Name</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no name for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statements --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementsSummary() && statementsSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: statementsSummary() && statementsSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statements</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementsSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td id="project-search-statement-content" data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},23836:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Group:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: eventCards,\n                        events: eventEvents,\n                        dataConfig: eventDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                \x3c!-- commented due to model discrepency in airtable\n                    <div data-bind="component: { \n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: sourceData,\n                    }\n                }"></div>--\x3e \n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Timeline Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents,\n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Group Members Tab --\x3e \n            <div class="afs-report-page" data-bind="if: activeSection() === \'members\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.groupMembers)}, css: {\'fa-angle-double-right\': visible.groupMembers(), \'fa-angle-double-up\': !visible.groupMembers()}" class="fa toggle"></i> Group Members</h2>\n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.groupMembers" class="afs-report-collapsible-container pad-lft">\n\n                        \x3c!-- ko ifnot: collectionOfGroupMembers().length --\x3e\n                        <div class="afs-nodata-note">No people or sub-groups associated with this group.</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: collectionOfGroupMembers().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div>\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Group Member</th>\n                                                <th class="min-tabletl">Type</th>\n                                                <th class="min-tabletl">Description</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: collectionOfGroupMembers, dataTableOptions: groupMemberTableConfig }">\n                                            <tr>\n                                                <td data-bind="text: displayname"></td>\n                                                <td data-bind="text: resourceType"></td>\n                                                <td data-bind="text: displaydescription" class="display-description"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: link">\n                                                        <a data-bind="attr: { href: link }">\n                                                            <i class="fa fa-link"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Larger Entities Tab --\x3e \n            <div class="afs-report-page" data-bind="if: activeSection() === \'entities\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.largerEntities)}, css: {\'fa-angle-double-right\': visible.largerEntities(), \'fa-angle-double-up\': !visible.largerEntities()}" class="fa toggle"></i> Larger Entities</h2>\n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.largerEntities" class="afs-report-collapsible-container pad-lft">\n\n                        \x3c!-- ko ifnot: collectionOfLargerEntities().length --\x3e\n                        <div class="afs-nodata-note">No larger entities associated with this group.</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: collectionOfLargerEntities().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div>\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Group Member</th>\n                                                <th class="min-tabletl">Type</th>\n                                                <th class="min-tabletl">Description</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: collectionOfLargerEntities, dataTableOptions: groupMemberTableConfig }">\n                                            <tr>\n                                                <td data-bind="text: displayname"></td>\n                                                <td data-bind="text: resourceType"></td>\n                                                <td data-bind="text: displaydescription" class="display-description"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: link">\n                                                        <a data-bind="attr: { href: link }">\n                                                            <i class="fa fa-link"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Location Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'location\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: locationData\n                    }\n                }"></div>\n            </div>      \n            \x3c!-- Communication Tab, unique to person --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'communication\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/communication\',\n                    params: {\n                        data: resource,\n                        cards: communicationCards\n                    }\n                }"></div>\n            </div>\n            \x3c!-- JSON Tab --\x3e\n            <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n                <div class="afs-flex-col" data-bind="component: {\n                    name: \'views/components/reports/scenes/json\',\n                    params: {\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Group)</span></h1>\n</div>\n\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Group Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Parent Group Tab --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Parent Groups</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: parentGroupSummary() && parentGroupSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no parent groups for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: parentGroupSummary() && parentGroupSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: parentGroupSummary ">\n                    <div class="afs-block-value">\n                        <a data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\n                        \x3c!-- ko if: $index() < $parent.parentGroupSummary().length - 1  --\x3e, \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Location Tab --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Residence or Associated Locations</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: locationSummary() && locationSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no residence / associated locations for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: locationSummary() && locationSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>locations</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: locationSummary, dataTableOptions: getTableConfig(1) }">\n                            <tr>\n                                <td><a class="afs-table-link" data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- professional activity --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Professional Activities</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: activitySummary() && activitySummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no professional activities for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: activitySummary() && activitySummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Type</th>\n                                <th>Technique</th>\n                                <th>Location</th>\n                                <th>Source Reference Work</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: activitySummary, dataTableOptions: getTableConfig(4) }">\n                            <tr>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: technique"></td>\n                                <td>\n                                    <div data-bind="foreach: locations ">\n                                        <a class="afs-table-link" data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\x3c!-- ko if: $index() < $parent.locations.length - 1  --\x3e, \x3c!-- /ko --\x3e\n                                    </div>\n                                </td>\n                                <td>\n                                    <div data-bind="foreach: sources ">\n                                        <a class="afs-table-link" data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\x3c!-- ko if: $index() < $parent.sources.length - 1  --\x3e, \x3c!-- /ko --\x3e\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div> \n        \x3c!-- Identifier --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Identifiers</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: identifierSummary() && identifierSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no identifiers for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: identifierSummary() && identifierSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Identifier</th>\n                                <th>Identifier Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: identifierSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},66779:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Instrument:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n                    }\n                }"></div>\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.textualReference)}, css: {\'fa-angle-double-right\': visible.textualReference(), \'fa-angle-double-up\': !visible.textualReference()}" class="fa toggle"></i> Textual Reference</h2>\n                    <span data-bind="if: textualReferenceCards && (!textualReference().length || textualReferenceCards.cardinality == \'n\')">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile(textualReferenceCards)}"><i class="fa fa-mail-reply"></i> Add Textual Reference</a>\n                    </span>\n                \n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.textualReference" class="afs-report-collapsible-container pad-lft">\n                \n                        \x3c!-- ko ifnot: textualReference().length --\x3e\n                        <div class="afs-nodata-note">No textual references for this resource</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: textualReference().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div class="firstchild-container">\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cells pacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th class="min-tabletl">Type</th>\n                                                <th>Source</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: textualReference, dataTableOptions: textualReferenceTableConfig }">\n                                            <tr>\n                                                <td data-bind="text: type"></td>\n                                                <td><a class="afs-block-value-url" data-bind="text: source, attr: {href: link}"></a></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: $parent.cards && $parent.textualReferenceCards">\n                                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.textualReferenceCards)}">\n                                                            <i class="fa fa-mail-reply"></i>\n                                                        </a>\n                                                        <a data-bind="click: $parent.deleteTile.bind($data, tileid, $parent.textualReferenceCards)">\n                                                            <i class="fa fa-trash"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n                \n            </div>\n           \x3c!-- Actor Tab --\x3e\n           <div class="afs-report-page" data-bind="if: activeSection() === \'actor-relations\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: actorData,\n                    }\n                }"></div>\n            </div>   \n            \x3c!-- Location Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'location\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: locationData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parent Instrument Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'component\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Instrument Configuration Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'instrument\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: sethoodData,\n                    }\n                }"></div>\n            </div>           \n            \x3c!-- JSON Tab --\x3e\n           <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>\n\n                \n\n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Instrument)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Name --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Name of Instrument</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: $data.getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Type of Instrument --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Type of Instrument</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: typeSummary() && typeSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no instrument type this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: typeSummary() && typeSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: typeSummary()">\n                    <div class="afs-block-value" data-bind="text: type"></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},67192:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Modification:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parameters & Outcomes Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parameters\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parameterData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Aboutness Tab --\x3e\n           <div class="afs-report-page" data-bind="if: activeSection() === \'aboutness\'">\n               <div data-bind="component: {\n                   name: \'views/components/reports/scenes/default\',\n                   params: {\n                       data: aboutnessData\n                   }\n               }"></div>\n           </div>\n            \x3c!-- Parthood Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Location Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'location\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: locationData\n                    }\n                }"></div>\n            </div>      \n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Substance Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards,\n                        dataConfig: substanceDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- JSON Tab --\x3e\n            <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n                <div class="afs-flex-col" data-bind="component: {\n                    name: \'views/components/reports/scenes/json\',\n                    params: {\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Modification)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Digital Resource Name</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no name for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statements --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementsSummary() && statementsSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: statementsSummary() && statementsSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statements</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementsSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td id="project-search-statement-content" data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},87381:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Observation:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: descriptionData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>            \n            \x3c!-- Parent Project Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Related Objects Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'objects\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.relatedObjects)}, css: {\'fa-angle-double-right\': visible.relatedObjects(), \'fa-angle-double-up\': !visible.relatedObjects()}" class="fa toggle"></i> Related Physical Things</h2>\n                      \n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.relatedObjects" class="afs-report-collapsible-container pad-lft">\n\n                        \x3c!-- ko ifnot: collectionOfRelatedObjects().length --\x3e\n                        <div class="afs-nodata-note">No objects related to this observation</div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: collectionOfRelatedObjects().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div class="firstchild-container">\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Object</th>\n                                                <th class="min-tabletl">Description</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: collectionOfRelatedObjects, dataTableOptions: relatedObjectsTableConfig }">\n                                            <tr>\n                                                <td data-bind="text: displayname"></td>\n                                                <td data-bind="text: displaydescription" class="display-description"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: link">\n                                                        <a data-bind="attr: { href: link }">\n                                                            <i class="fa fa-link"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: annotations.length > 0 --\x3e\n                        <div data-bind="foreach: annotations">\n                            <div data-bind="component: {\n                                name: \'views/components/reports/scenes/annotation-parts\',\n                                params: {\n                                    annotation: $data.annotation,\n                                    selectedAnnotationTileId: $data.selectedAnnotationTileId,\n                                    annotationTableHeader: $data.annotationTableHeader,\n                                    annotationTableConfig: $data.annotationTableConfig,\n                                }}"></div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Dates Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards,\n                        dataConfig: substanceDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Data Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'data\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: dataData,\n                    }\n                }"></div>\n            </div>  \n            \x3c!-- JSON Tab --\x3e\n           <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Observation)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Observation Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statement --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementSummary() && statementSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: statementSummary() && statementSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statement</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Object Observed --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Observed Objects</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: objectObservedSummary() && objectObservedSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no observed objects for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: objectObservedSummary() && objectObservedSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: objectObservedSummary ">\n                    <div class="afs-block-value"><a data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\x3c!-- ko if: $index() < $parent.objectObservedSummary().length - 1  --\x3e, \x3c!-- /ko --\x3e</div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Procedure --\x3e \n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Procedures</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: procedureSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There are no procedures for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: procedureSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-value"><a data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Person Carried out --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Persons Carrying Out Observation</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: personSummary() && personSummary().length--\x3e\n                <h3 class="afs-report-nodata-message">There are no persons for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: personSummary() && personSummary().length--\x3e\n                <div class="afs-report-data-block" data-bind="foreach: personSummary ">\n                    <div class="afs-block-value"><a data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\x3c!-- ko if: $index() < $parent.personSummary().length - 1  --\x3e, \x3c!-- /ko --\x3e</div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Timespan --\x3e \n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Timespan</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: timeSpanSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There are no timespans for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: timeSpanSummary() --\x3e\n                <div class="afs-table pad-btm">\n                    <table data-bind="datatable: timespanTableConfig" class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Earliest Begin</th>\n                                <th>Lastest Begin</th>\n                                <th>Earliest End</th>\n                                <th>Lastest End</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td data-bind="text: timeSpanSummary().earliestBegin"></td>\n                                <td data-bind="text: timeSpanSummary().lastestBegin"></td>\n                                <td data-bind="text: timeSpanSummary().earliestEnd"></td>\n                                <td data-bind="text: timeSpanSummary().lastestEnd"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},88651:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Period:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Period)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div data-bind="component: {\n            name: \'views/components/reports/scenes/name\',\n            params: {\n                data: resource,\n                cards: nameCards\n            }\n        }"></div>\n        \x3c!-- Description --\x3e\n        <div data-bind="component: {\n            name: \'views/components/reports/scenes/description\',\n            params: {\n                data: resource,\n                cards: descriptionCards,\n            }\n        }"></div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},48851:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Person:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents,\n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'events\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: eventCards,\n                        events: eventEvents,\n                        dataConfig: eventDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parthood Tab --\x3e \n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>          \n            \x3c!-- Communication Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'communication\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/communication\',\n                    params: {\n                        data: resource,\n                        cards: communicationCards\n                    }\n                }"></div>\n            </div>\n             \x3c!-- JSON Tab --\x3e\n             <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n                <div class="afs-flex-col" data-bind="component: {\n                    name: \'views/components/reports/scenes/json\',\n                    params: {\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Person)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Name of Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Group --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Group Person is a Member of</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: groupSummary() && groupSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">This resource is not a member of any groups</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: groupSummary() && groupSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: groupSummary ">\n                    <div class="afs-block-value" data-bind="text: group"></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Contact Info --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Contact Information for Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: contactSummary() && contactSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no contact information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: contactSummary() && contactSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Contact Information</th>\n                                <th>Contact Information Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: contactSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- External URI --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">External URI for Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: externalURISummary() && externalURISummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no External URI associated with this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: externalURISummary() && externalURISummary().length --\x3e\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>External URI</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: externalURISummary, dataTableOptions: getTableConfig(1) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Core Attributes: Nationality --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Core Attributes: Nationality of Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nationalitySummary() && nationalitySummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no nationality information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nationalitySummary() && nationalitySummary().length --\x3e\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Nationality</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nationalitySummary, dataTableOptions: getTableConfig(1) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Birth date --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Birth Event of Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: birthSummary() && birthSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no birth event for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: birthSummary() && birthSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr lass="afs-table-header">\n                                <th>Birth beginning of the beginning</th>\n                                <th>Birth end of the beginning</th>\n                                <th>Birth beginning of the end</th>\n                                <th>Birth end of the end</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: birthSummary, dataTableOptions: getTableConfig(4) }">\n                            <tr>\n                                <td data-bind="text: beginning_of_beginning"></td>\n                                <td data-bind="text: end_of_beginning"></td>\n                                <td data-bind="text: beginning_of_end"></td>\n                                <td data-bind="text: end_of_end"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Death date --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Death Event of Person</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: deathSummary() && deathSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no death event for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \n                \x3c!-- ko if: deathSummary() && deathSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr lass="afs-table-header">\n                                <th>Death beginning of the beginning</th>\n                                <th>Death end of the beginning</th>\n                                <th>Death beginning of the end</th>\n                                <th>Death end of the end</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: deathSummary, dataTableOptions: getTableConfig(4) }">\n                            <tr>\n                                <td data-bind="text: beginning_of_beginning"></td>\n                                <td data-bind="text: end_of_beginning"></td>\n                                <td data-bind="text: beginning_of_end"></td>\n                                <td data-bind="text: end_of_end"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},14886:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Physical Thing:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n\n                    }\n                }"></div>\n            </div>            \n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                        excludedTypes: physicalThingExcludedDescriptionTypes\n                    }\n                }"></div>\n            </div>            \n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents, \n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>\n\n            \x3c!-- Substance Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                        requestedTypes: physicalThingPhysicalDescriptionTypes\n                    }\n                }"></div>\n            </div>\n            \n            \x3c!-- Actor Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'actor-relations\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: actorData,\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                        requestedTypes: physicalThingProvenanceDescriptionTypes\n                    }\n                }"></div>\n            </div>\n\n            \x3c!-- Aboutness Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'aboutness\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: aboutnessData\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Location Tab --\x3e\n           <div class="afs-report-page" data-bind="if: activeSection() === \'location\'">\n               <div data-bind="component: {\n                   name: \'views/components/reports/scenes/default\',\n                   params: {\n                       data: locationData\n                   }\n               }"></div>\n           </div>            \n           \x3c!-- Parthood Tab --\x3e\n           <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n               <div data-bind="component: {\n                   name: \'views/components/reports/scenes/default\',\n                   params: {\n                       data: parthoodData,\n                   }\n               }"></div>\n               <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.parts)}, css: {\'fa-angle-double-right\': visible.parts(), \'fa-angle-double-up\': !visible.parts()}" class="fa toggle"></i> Parts</h2>\n                    <span data-bind="if: $data.cards && $data.cards[\'parts of object\']">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile($data.cards[\'parts of object\'])}"><i class="fa fa-mail-reply"></i> Add Part</a>\n                    </span>\n\n                    <div data-bind="visible: visible.parts" class="afs-report-collapsible-container pad-lft">\n                        \n                        \x3c!-- ko ifnot: Array.isArray(annotation.info) --\x3e\n                        <div class="afs-nodata-note">No parts for this resource</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: Array.isArray(annotation.info) --\x3e\n                        <div class="pad-top-sm" data-bind="with: annotation, as: \'annotation\', noChildContext: true">\n                            <div data-bind="component: {\n                                name: \'views/components/reports/scenes/annotation-parts\',\n                                params: {\n                                    annotation: annotation,\n                                    selectedAnnotationTileId: selectedAnnotationTileId,\n                                    annotationTableHeader: annotationTableHeader,\n                                    annotationTableConfig: annotationTableConfig,\n                                }}"></div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n           </div>\n           \x3c!-- Sethood Tab --\x3e\n           <div class="afs-report-page" data-bind="if: activeSection() === \'sethood\'">\n               <div data-bind="component: {\n                   name: \'views/components/reports/scenes/default\',\n                   params: {\n                       data: sethoodData,\n                   }\n               }"></div>\n               <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: setCards,\n                        events: setEvents, \n                        dataConfig: setDataConfig,\n                    }\n                }"></div>\n           </div>           \n           \x3c!-- JSON Tab --\x3e\n           <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>\n\n                \n\n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Physical Thing)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Object Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Image --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Images</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: imageSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There are no images associated with this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: imageSummary() --\x3e\n                <div class="afs-summary-report-image-grid" data-bind="dataTablesForEach: { data: imageSummary, dataTableOptions: getTableConfig(1) }">\n                    <div class="iiif-gallery-canvas-thumbnail">\n                        <img data-bind="attr: { src: thumbnail }">\n                        <label data-bind="text: displayname"></label>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statements --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementsSummary() && statementsSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: statementsSummary() && statementsSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statements</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementsSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td id="project-search-statement-content" data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Type of Physical Thing --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Object Type</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: typeSummary() && typeSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object type information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: typeSummary() && typeSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="dataTablesForEach: { data: typeSummary, dataTableOptions: $data.getTableConfig(1) }">\n                    <h3 class="" data-bind="text: type"></h3>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Identifier --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Object Identifiers</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: identifierSummary() && identifierSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object identifier information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: identifierSummary() && identifierSummary().length --\x3e\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Identifier</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: identifierSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Current Owner --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Ownership</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: ownerSummary() && ownerSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object ownership information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: ownerSummary() && ownerSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="dataTablesForEach: { data: ownerSummary, dataTableOptions: getTableConfig(1) }">\n                    <a class="afs-table-link" data-bind="click: function() {window.open(link);}, text: displayValue" href="javascript:void(0)"></a>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Dimensions --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Object Dimensions</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: dimensionsSummary() && dimensionsSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object dimension information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: dimensionsSummary() && dimensionsSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr lass="afs-table-header">\n                                <th>Dimension Type</th>\n                                <th>Value</th>\n                                <th>Unit</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: dimensionsSummary, dataTableOptions: getTableConfig(3) }">\n                            <tr>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: value"></td>\n                                <td data-bind="text: unit"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Creation Info --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Object Creation</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: creationSummary() && creationSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object creation information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: creationSummary() && creationSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr lass="afs-table-header">\n                                <th>Creator</th>\n                                <th>Creation Date</th>\n                                <th>Type</th>\n                                <th>Technique</th>\n                                <th>Location</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: creationSummary, dataTableOptions: getTableConfig(5) }">\n                            <tr>\n                                <td data-bind="text: creator"></td>\n                                <td data-bind="text: creationDate"></td>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: technique"></td>\n                                <td><a class="afs-table-link" data-bind="click: function() {window.open(locationLink);}, text: location" href="javascript:void(0)"></a></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- External URI --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Links</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: externalURISummary() && externalURISummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is no object link information for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: externalURISummary() && externalURISummary().length --\x3e\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>External URI</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: externalURISummary, dataTableOptions: getTableConfig(1) }">\n                            <tr>\n                                <td data-bind="text: displayValue"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},405:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\x3c!-- Custom Template Report Title Bar --\x3e\n<div class="relative">\n\n    \x3c!-- Title Block --\x3e\n    <div class="afs-report-toolbar">\n        <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Place:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n    </div>\n\n</div>\n\n\n\n\n\x3c!-- Link nav --\x3e\n<div class="afs-report-anchor-container">\n    <ol class="afs-report-anchors breadcrumb">\n        \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n        <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n        \x3c!-- /ko --\x3e\n    </ol>\n</div>\n<div class="afs-tabbed-report">\n    <div class="afs-tabbed-report-content">\n        \x3c!-- Names Tab --\x3e\n        <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n            <div data-bind="component: {\n                name: \'views/components/reports/scenes/name\',\n                params: {\n                    data: resource,\n                    cards: nameCards,\n                    dataConfig: nameDataConfig\n                }\n            }"></div>\n        </div>\n        \x3c!-- Description Tab --\x3e\n        <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n            <div data-bind="component: {\n                name: \'views/components/reports/scenes/description\',\n                params: {\n                    data: resource,\n                    cards: descriptionCards,\n                }\n            }"></div>\n        </div>\n        \x3c!-- Documentation Tab --\x3e\n        <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n            <div data-bind="component: {\n                name: \'views/components/reports/scenes/documentation\',\n                params: {\n                    data: resource,\n                    cards: documentationCards,\n                    dataConfig: documentationDataConfig,\n                }\n            }"></div>\n        </div>\n        \x3c!-- Parthood Tab --\x3e \n        <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n            <div data-bind="component: {\n                name: \'views/components/reports/scenes/default\',\n                params: {\n                    data: parthoodData,\n                }\n            }"></div>\n        </div>\n        \x3c!-- Location Tab --\x3e \n        <div class="afs-report-page" data-bind="if: activeSection() === \'location\'">\n            <div data-bind="component: {\n                name: \'views/components/reports/scenes/location\',\n                params: {\n                    geojson: geojson,\n                    resourceInstanceId: reportMetadata().resourceinstanceid,\n                    cards: locationCards,\n                }\n            }"></div>\n        </div>   \n         \x3c!-- JSON Tab --\x3e\n        <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n            <div class="afs-flex-col" data-bind="component: {\n                name: \'views/components/reports/scenes/json\',\n                params: {\n                    resourceInstanceId: reportMetadata().resourceinstanceid,\n                }\n            }"></div>\n        </div>\n    </div>\n</div>\n\n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Place)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Place Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: nameSummaryTableConfig }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Geospatial Definition --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Geospatial Definitions</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko if: geojson == \'--\' --\x3e\n                <h3 class="afs-report-nodata-message">There is no geospatial definition for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: geojson != \'--\' --\x3e\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/location\',\n                    params: {\n                        geojson: geojson,\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                        mapOnly: true,\n                    }\n                }"></div>    \n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},68666:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Project:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parameterData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parent Project Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Component Project Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'components\'">\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.childProjects)}, css: {\'fa-angle-double-right\': visible.childProjects(), \'fa-angle-double-up\': !visible.childProjects()}" class="fa toggle"></i> Child Projects</h2>\n                    \x3c!-- Collapsible content --\x3e\n                    <div data-bind="visible: visible.childProjects" class="afs-report-collapsible-container pad-lft">\n\n                        \x3c!-- ko ifnot: collectionOfChildProjects().length --\x3e\n                        <div class="afs-nodata-note">No child projects for this project</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: collectionOfChildProjects().length --\x3e\n                        <div class="afs-report-subsection">\n                            <div>\n                                <div class="afs-table pad-btm">\n                                    <table class="table table-striped" cellspacing="0" width="100%">\n                                        <thead>\n                                            <tr class="afs-table-header">\n                                                <th>Project</th>\n                                                <th class="min-tabletl">Description</th>\n                                                <th class="afs-table-control all"></th>\n                                            </tr>\n                                        </thead>\n                                        <tbody data-bind="dataTablesForEach: { data: collectionOfChildProjects, dataTableOptions: getTableConfig(3) }">\n                                            <tr>\n                                                <td data-bind="text: displayname"></td>\n                                                <td data-bind="text: displaydescription" class="display-description"></td>\n                                                <td class="afs-table-control">\n                                                    <div data-bind="if: link">\n                                                        <a data-bind="attr: { href: link }">\n                                                            <i class="fa fa-link"></i>\n                                                        </a>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Project Timeline Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards,\n                        dataConfig: substanceDataConfig\n                    }\n                }"></div>\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: temporalData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- JSON Tab --\x3e\n            <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n                <div class="afs-flex-col" data-bind="component: {\n                    name: \'views/components/reports/scenes/json\',\n                    params: {\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Project)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Name of Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Dates --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Dates of Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: datesSummary() && datesSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no dates for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: datesSummary() && datesSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr lass="afs-table-header">\n                                <th>Beginning of the beginning</th>\n                                <th>End of the beginning</th>\n                                <th>Beginning of the end</th>\n                                <th>End of the end</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: datesSummary, dataTableOptions: getTableConfig(4) }">\n                            <tr>\n                                <td data-bind="text: beginning_of_beginning"></td>\n                                <td data-bind="text: end_of_beginning"></td>\n                                <td data-bind="text: beginning_of_end"></td>\n                                <td data-bind="text: end_of_end"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Activity Type --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Activity Type of Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: activityTypeSummary() && activityTypeSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no activity types for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: activityTypeSummary() && activityTypeSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: activityTypeSummary ">\n                    <div class="afs-block-value" data-bind="text: content"></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Parent Project --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Parent Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: parentProjectSummary() && parentProjectSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There is not a parent project for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: parentProjectSummary() && parentProjectSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: parentProjectSummary ">\n                    <div class="afs-block-value"><a data-bind="click: function() {window.open(link);}, text: content" href="javascript:void(0)"></a></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Project Team --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Project Team</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: teamSummary() && teamSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no team members for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: teamSummary() && teamSummary().length --\x3e\n                <div class="afs-report-data-block" data-bind="foreach: teamSummary ">\n                    <div class="afs-block-value"><a data-bind="click: function() {window.open(link);}, text: content" href="javascript:void(0)"></a>\x3c!-- ko if: $index() < $parent.teamSummary().length - 1  --\x3e, \x3c!-- /ko --\x3e</div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statements --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements about Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementsSummary() && statementsSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: statementsSummary() && statementsSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statements</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementsSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td id="project-search-statement-content" data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Identifier --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Identifier for Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: identifierSummary() && identifierSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no identiers for this resource</h3>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: identifierSummary() && identifierSummary().length --\x3e\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Identifier</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: identifierSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},29529:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Provenance Activity:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n\n                    }\n                }"></div>\n            </div>\n            \x3c!-- documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div data-bind="component: {\n            name: \'views/components/reports/scenes/name\',\n            params: {\n                data: resource,\n                cards: nameCards,\n                dataConfig: nameDataConfig\n            }\n        }"></div>\n        \x3c!-- Description --\x3e\n        <div data-bind="component: {\n            name: \'views/components/reports/scenes/description\',\n            params: {\n                data: resource,\n                cards: descriptionCards,\n            }\n        }"></div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},54912:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Sampling Activity:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n\n                    }\n                }"></div>\n            </div>\n            \x3c!-- documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Temportal Relationship Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'temporal\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: temporalData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parthood Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Substance Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/substance\',\n                    params: {\n                        data: resource,\n                        cards: substanceCards,\n                        dataConfig: substanceDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parameters & Outcomes Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parameters\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parameterData,\n                    }\n                }"></div>\n                <div class="afs-report-section">\n                    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.parts)}, css: {\'fa-angle-double-right\': visible.parts(), \'fa-angle-double-up\': !visible.parts()}" class="fa toggle"></i> Parts</h2>\n                    <span data-bind="if: cards.parts">\n                        <a class="afs-report-a" data-bind="click: function(){addNewTile(cards.parts)}"><i class="fa fa-mail-reply"></i> Add Part</a>\n                    </span>\n\n                    <div data-bind="visible: visible.parts" class="afs-report-collapsible-container pad-lft">\n                        \n                        \x3c!-- ko ifnot: Array.isArray(annotation.info) --\x3e\n                        <div class="afs-nodata-note">No parts for this resource</div>\n                        \x3c!-- /ko --\x3e\n                        \n                        \x3c!-- ko if: Array.isArray(annotation.info) --\x3e\n                        <div data-bind="with: annotation, as: \'annotation\', noChildContext: true">\n                            <div data-bind="component: {\n                                name: \'views/components/reports/scenes/annotation-parts\',\n                                params: {\n                                    annotation: annotation,\n                                    selectedAnnotationTileId: selectedAnnotationTileId,\n                                    annotationTableHeader: annotationTableHeader,\n                                    annotationTableConfig: annotationTableConfig,\n                                }}"></div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            </div>\n            \x3c!-- JSON Tab --\x3e\n            <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n                <div class="afs-flex-col" data-bind="component: {\n                    name: \'views/components/reports/scenes/json\',\n                    params: {\n                        resourceInstanceId: reportMetadata().resourceinstanceid,\n                    }\n                }"></div>\n            </div>\n        </div>\n    </div>            \n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Sampling Activity)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Parent Project --\x3e \n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Parent Project</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: parentProjectSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There are no parent project for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: parentProjectSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-value">\n                        <a data-bind="click: function() {window.open(parentProjectSummary().link);}, text: parentProjectSummary().displayValue" href="javascript:void(0)"></a>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Activity Names</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() && nameSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no names for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() && nameSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th>Name Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: nameSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statement --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementSummary() && statementSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: statementSummary() && statementSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Type</th>\n                                <th>Statement</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: content"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- type --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Sampling Type</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: typeSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There is no type for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: typeSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-value" data-bind="text: typeSummary().displayValue"></div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},14671:function(e){e.exports='\n\n<div data-bind="foreach: {data: annotations, as: \'annotation\', noChildContext: true}">\n    <div style="border: solid 1px #ddd; height: 300px; width: 100%; margin: 10px">\n        <div class="iiif-leaflet" data-bind="leaflet: annotation.leafletConfig"></div>\n    </div>\n    \x3c!-- ko if: annotationTableConfig --\x3e\n    <table class="table table-striped" cellspacing="0" width="100%">\n        <thead data-bind="html: annotationTableHeader"></thead>\n        <tbody data-bind="dataTablesForEach: { data: annotation.info, as: \'part\', noChildContext: true, dataTableOptions: $parent.annotationTableConfig }">\n            <tr>\n                \x3c!-- ko if: getResourceLink(part.column1) --\x3e\n                <td>\n                    <a class="afs-block-value-url" data-bind="text: getNodeValue(part.column1), attr: {href: getResourceLink(part.column1)}"></a>\n                </td>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko ifnot: getResourceLink(part.column1) --\x3e\n                <td data-bind="text: part.column1"></td>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: part.column2 --\x3e\n                <td>\n                    <a class="afs-block-value-url" data-bind="text: getNodeValue(part.column2), attr: {href: getResourceLink(part.column2)}"></a>\n                </td>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: part.column3 --\x3e\n                <td>\n                    <a class="afs-block-value-url" data-bind="text: getNodeValue(part.column3), attr: {href: getResourceLink(part.column3)}"></a>\n                </td>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: part.column4 --\x3e\n                <td data-bind="text: part.column4"></td>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: part.column5 --\x3e\n                <td data-bind="text: part.column4"></td>\n                \x3c!-- /ko --\x3e\n                <td style="width: 110px;" class="afs-table-control">\n                    <div>\n                        <div style="display:inline" data-bind="if: annotation.card && annotation.card">\n                            <a style="display:inline" data-bind="click: function() {editTile(part.tileId, annotation.card)}">\n                                <i style="display:inline" class="fa fa-mail-reply"></i>\n                            </a>\n                            <a style="display:inline" data-bind="click: $parent.deleteTile.bind($data, part.tileId, annotation.card)">\n                                <i style="display:inline" class="fa fa-trash"></i>\n                            </a>\n                        </div>\n                        <a style="display:inline" data-bind="click: function(){selectedAnnotationTileId(part.tileId)}">\n                            <i class="fa fa-globe"></i>\n                        </a>\n                        <i style="display:inline" data-bind="visible: selectedAnnotationTileId() === part.tileId" class="fa fa-arrow-left"></i>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="final-step-section-block-item" style="margin-bottom: 60px;">\n        <div class="block-item files-metadata">\n            <div class="afs-summary-value" data-bind=\'text: "Regions of Interest: " + annotation.info().length\'></div>\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n<div>\n</div></div>'},40046:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.contactPoints)}, css: {\'fa-angle-double-right\': visible.contactPoints(), \'fa-angle-double-up\': !visible.contactPoints()}" class="fa toggle"></i> Contact Points</h2>\n    <span data-bind="if: cards && cards.contactPoints && (!Array.isArray(contactPoints())|| cards.contactPoints.cardinality == \'n\')">\n        <a class="afs-report-a" data-bind="click: function(){addNewTile(cards.contactPoints)}"><i class="fa fa-mail-reply"></i> Add Contact Point</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.contactPoints" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: Array.isArray(contactPoints()) && contactPoints().length --\x3e\n        <div class="afs-nodata-note">No contact points for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: Array.isArray(contactPoints()) && contactPoints().length --\x3e\n        <div class="afs-report-subsection">\n            <div>\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Contact Information</th>\n                                <th class="min-tabletl">Contact Information Type</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: contactPoints, dataTableOptions: contactPointsTableConfig }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards && $parent.cards.contactPoints">\n                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.cards.contactPoints)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.deleteTile.bind($data, tileid, $parent.cards.contactPoints)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},66145:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div class="afs-report-section" data-bind="foreach: {data: data().sections, as: \'section\', noChildContext: true}">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible[section.title])}, css: {\'fa-angle-double-right\': visible[section.title](), \'fa-angle-double-up\': !visible[section.title]()}" class="fa toggle"></i> <span data-bind="text: section.title"></span></h2>\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible[section.title]" class="afs-report-collapsible-container pad-lft">\n\n         \x3c!-- ko ifnot: section.data.length --\x3e\n         <div class="afs-nodata-note">No data for this section</div>\n         \x3c!-- /ko --\x3e\n         \n         \x3c!-- ko if: section.data.length --\x3e\n         <div class="afs-report-subsection">\n             <div>\n                 <div data-bind="foreach: {data: section.data, as: \'item\', noChildContext: true}" class="afs-report-subsection-item">\n                     <div class="afs-block-attributes pad-btm">\n                        <div data-bind="component: {\n                            name: \'views/components/reports/scenes/keyvalue\',\n                            params: {\n                                data: item,\n                                inline: true\n                            }\n                        }"></div>\n                         \n                     </div>\n                 </div>\n             </div>\n         </div>\n         \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},32925:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.statements)}, css: {\'fa-angle-double-right\': visible.statements(), \'fa-angle-double-up\': !visible.statements()}" class="fa toggle"></i> Statements</h2>\n    <span data-bind="if: cards.statement && (!statements().length || cards.statement.cardinality == \'n\')">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.statement)}"><i class="fa fa-mail-reply"></i> Add Statement</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.statements" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: statements().length --\x3e\n        <div class="afs-nodata-note">No statements for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: statements().length --\x3e\n        <div class="afs-report-subsection">\n            <div class="firstchild-container">\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Content</th>\n                                <th class="none">Type</th>\n                                <th class="none">Language</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statements, dataTableOptions: statementTableConfig }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: language"></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards && $parent.cards.statement">\n                                        <a data-bind="click: function() {$parent.edit(tileid, $parent.cards.statement)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.delete.bind($data, tileid, $parent.cards.statement)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},53101:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div data-bind="if: dataConfig.label" class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.label)}, css: {\'fa-angle-double-right\': visible.label(), \'fa-angle-double-up\': !visible.label()}" class="fa toggle"></i> Metadata</h2>\n    \n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.label" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: label() --\x3e\n        <div class="afs-nodata-note">No label for this resource</div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: label() --\x3e\n        <div class="afs-report-subsection">\n            <div class="firstchild-container">\n                <div class="afs-report-subsection-ite pad-top-sm">\n                    <div class="afs-block-attributes pad-btm">\n                        <h4 class="afs-block-key">Label: </h4>\n                        <div class="afs-block-value" data-bind="text: label"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n<div data-bind="if: digitalReferenceDisplay" class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.digitalReference)}, css: {\'fa-angle-double-right\': visible.digitalReference(), \'fa-angle-double-up\': !visible.digitalReference()}" class="fa toggle"></i> Digital Reference</h2>\n    <span data-bind="if: cards.digitalReference && (!digitalReference().length || cards.digitalReference.cardinality == \'n\')">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.digitalReference)}"><i class="fa fa-mail-reply"></i> Add Digital Reference</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.digitalReference" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: digitalReference().length --\x3e\n        <div class="afs-nodata-note">No digital references for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: digitalReference().length --\x3e\n        <div class="afs-report-subsection">\n            <div class="firstchild-container">\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cells pacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th class="min-tabletl">Type</th>\n                                <th>Source</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: digitalReference, dataTableOptions: digitalReferenceTableConfig }">\n                            <tr>\n                                <td data-bind="text: type"></td>\n                                <td><a class="afs-block-value-url" data-bind="text: source, attr: {href: link}"></a></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards && $parent.cards.digitalReference">\n                                        <a data-bind="click: function() {$parent.edit(tileid, $parent.cards.digitalReference)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.delete.bind($data, tileid, $parent.cards.digitalReference)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n<div data-bind="if: subjectOfDisplay" class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.subjectOf)}, css: {\'fa-angle-double-right\': visible.subjectOf(), \'fa-angle-double-up\': !visible.subjectOf()}" class="fa toggle"></i> Subject Of</h2>\n    <span data-bind="if: cards.subjectOf">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.subjectOf)}"><i class="fa fa-mail-reply"></i> Modify Subject Of</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.subjectOf" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: subjectOf().length --\x3e\n        <div class="afs-nodata-note">No digital references for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: subjectOf().length --\x3e\n        <div class="afs-report-subsection">\n            <div class="firstchild-container">\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cells pacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th class="min-tabletl">Name</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: subjectOf, dataTableOptions: subjectOfTableConfig }">\n                            <tr>\n                                <td><a class="afs-block-value-url" data-bind="text: display, attr: {href: link}"></a></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},38536:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div data-bind="foreach: {data: events, as: \'eventName\', noChildContext: true}" class="afs-report-section">\n    <div>\n        <i data-bind="click: function() {toggleVisibility(visible[eventName])}, css: {\'fa-angle-double-right\': visible[eventName](), \'fa-angle-double-up\': !visible[eventName]()}" class="fa toggle"></i>\n        <h2 class="afs-report-section-title" data-bind="text: eventName + \' Event\'" class="afs-report-section-title"></h2>\n        <span data-bind="if: cards[eventName] && cards[eventName].card && !cards[eventName].card.tiles().length,">\n            <a data-bind="{click:function(){addNewTile(cards[eventName].card)}}" class="afs-report-a">\n                <i class="fa fa-mail-reply"></i> Add Event\n            </a>\n        </span>\n        <span data-bind="if: cards[eventName] && cards[eventName].card && cards[eventName].card.tiles().length">\n            <a data-bind="{click:function(){addNewTile(cards[eventName].card)}}" class="afs-report-a">\n                <i class="fa fa-mail-reply"></i> Edit Event\n            </a>\n        </span>\n\n        <div data-bind="visible: visible[eventName]">\n            \x3c!-- ko if: eventDataArray[eventName].length === 0 || !eventDataArray[eventName].some(x => x !== undefined) --\x3e\n            <div class="afs-nodata-note">No events</div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- Show this div if there are event data --\x3e\n            \x3c!-- Event Block (one for each event) --\x3e\n            \x3c!-- ko if: eventDataArray[eventName].length > 0 && eventDataArray[eventName].some(x => x !== undefined) --\x3e\n            \n            \x3c!-- ko foreach: { data: eventDataArray[eventName], as: "eventData", noChildContext: true} --\x3e\n            \x3c!-- ko if: !!eventData && eventData.tileid --\x3e\n            <div class="afs-report-subsection">\n                <h2 class="afs-report-section-subtitle" style="display: block; margin-bottom: 5px;"><i data-bind="click: function() {toggleVisibility(eventData.visible)}, css: {\'fa-angle-double-right\': eventData.visible(), \'fa-angle-double-up\': !eventData.visible()}" class="fa toggle"></i> Event Summary <span data-bind="if: eventData.title">:</span> <span data-bind="text: eventData.title"></span><span></span></h2>\n\n                <div data-bind="visible: eventData.visible" class="afs-report-collapsible-container">\n                    \n                    <div class="afs-report-event-section afs-report-subsection-container">\n                        <div style="width:95%" data-bind="foreach: {data: eventData.metadata, as: \'item\'}" class="afs-report-subsection-two-column">\n                            <div class="afs-keyvalue" data-bind="component: {\n                                name: \'views/components/reports/scenes/keyvalue\',\n                                params: {\n                                    data: item,\n                                    inline: true\n                                }\n                            }"></div>\n                        </div>\n                    </div>\n                \n                    \x3c!-- Event First Generation Cards --\x3e\n                    \x3c!-- ko if: eventData.children.names --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Event Names</h5>\n                        <span data-bind="if: eventData.cards && eventData.cards.name">\n                            <a data-bind="click: function(){addNewTile(eventData.cards.name)}" class="afs-report-a">\n                                <i class="fa fa-mail-reply"></i> Add Event Name\n                            </a>\n                        </span>\n\n\n                        \x3c!-- ko ifnot: eventData.names().length --\x3e\n                        <div class="afs-nodata-note">No names for this event</div>\n                        \x3c!--/ko--\x3e\n\n                        \x3c!-- ko if: eventData.names().length --\x3e\n                        <div class="firstchild-container">\n                            \x3c!-- Names Table --\x3e\n                            <div class="afs-table" style="max-width: 100%">\n                                <table class="table table-striped" cellspacing="0" width="100%">\n                                    <thead>\n                                        <tr class="afs-table-header">\n                                            <th>Name</th>\n                                            <th class="min-tabletl">Type</th>\n                                            <th class="none">Language</th>\n                                            <th class="afs-table-control all"></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody data-bind="dataTablesForEach: { data: eventData.names, dataTableOptions: nameTableConfig }">\n                                        <tr>\n                                            <td data-bind="text: name"></td>\n                                            <td data-bind="text: type"></td>\n                                            <td data-bind="text: language"></td>\n                                            <td class="afs-table-control">\n                                                <div data-bind="if: eventData.cards && eventData.cards.name && eventData.cards.name.tiles().length">\n                                                    <a data-bind="click: function() {$parent.editTile(tileid, eventData.cards.name)}">\n                                                        <i class="fa fa-mail-reply"></i>\n                                                    </a>\n                                                    <a data-bind="click: $parent.deleteTile.bind($data, tileid, eventData.cards.name)">\n                                                        <i class="fa fa-trash"></i>\n                                                    </a>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                        \x3c!--/ko--\x3e\n                    </div>\n                    \x3c!-- /ko --\x3e\n                    \n                    \x3c!-- ko if: eventData.children.statements --\x3e\n                    \x3c!-- Event First Generation Cards --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Event Statements</h5>\n                        <a data-bind="if: eventData.cards && eventData.cards.statement, click: function(){addNewTile(eventData.cards.statement)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> Add Event Statement</a>\n                        \x3c!-- ko ifnot: eventData.statements().length --\x3e\n                        <div class="afs-nodata-note">No statements for this event</div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: eventData.statements().length --\x3e\n                        <div class="firstchild-container">\n                            \x3c!-- Statements Table --\x3e\n                            <div class="afs-table">\n                                <table class="table table-striped" cellspacing="0" width="100%">\n                                    <thead>\n                                        <tr class="afs-table-header">\n                                            <th>Statement</th>\n                                            <th class="none">Type</th>\n                                            <th class="none">Language</th>\n                                            <th class="none">Name of Statement</th>\n                                            <th class="afs-table-control all"></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody data-bind="dataTablesForEach: { data: eventData.statements, dataTableOptions: statementsTableConfig}">\n                                        <tr>\n                                            <td data-bind="text: content" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>\n                                            <td data-bind="text: type"></td>\n                                            <td data-bind="text: language"></td>\n                                            <td data-bind="text: name"></td>\n                                            <td class="afs-table-control">\n                                                <div data-bind="if: eventData.cards && eventData.cards.statement && eventData.cards.statement.tiles().length">\n                                                    <a data-bind="click: function() {$parent.editTile(tileid, eventData.cards.statement)}">\n                                                        <i class="fa fa-mail-reply"></i>\n                                                    </a>\n                                                    <a data-bind="click:$parent.deleteTile.bind($data, tileid, eventData.cards.statement)">\n                                                        <i class="fa fa-trash"></i>\n                                                    </a>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: eventData.children.identifiers --\x3e\n                    \x3c!-- Event First Generation Cards --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Event Identifiers</h5>\n                        <a data-bind="if: eventData.cards && eventData.cards.identifier, click: function(){addNewTile(eventData.cards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> Add Event Identifier</a>\n                        \x3c!-- ko ifnot: eventData.identifiers().length --\x3e\n                        <div class="afs-nodata-note">No identifiers for this event</div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: eventData.identifiers().length --\x3e\n                        <div class="firstchild-container">\n                            \x3c!-- Identifiers Table --\x3e\n                            <div class="afs-table">\n                                <table class="table table-striped" cellspacing="0" width="100%">\n                                    <thead>\n                                        <tr class="afs-table-header">\n                                            <th>Identifier</th>\n                                            <th>Type</th>\n                                            <th class="afs-table-control all"></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody data-bind="dataTablesForEach: { data: eventData.identifiers, dataTableOptions: identifierTableConfig}">\n                                        <tr>\n                                            <td data-bind="text: name"></td>\n                                            <td data-bind="text: type"></td>\n                                            <td class="afs-table-control">\n                                                <div data-bind="if: eventData.cards && eventData.cards.identifier && eventData.cards.identifier.tiles().length">\n                                                    <a data-bind="click: function() {$parent.editTile(tileid, eventData.cards.identifier)}">\n                                                        <i class="fa fa-mail-reply"></i>\n                                                    </a>\n                                                    <a data-bind="click: $parent.deleteTile.bind($data, tileid, eventData.cards.identifier)">\n                                                        <i class="fa fa-trash"></i>\n                                                    </a>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: eventData.children.timespan --\x3e\n                    \x3c!-- Event First Generation Cards --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Event Timespan</h5>\n                        <span data-bind="if: eventData.cards && eventData.cards.timespan">\n                            <a data-bind="click: function(){addNewTile(eventData.cards.timespan)}" class="afs-report-a">\n                                <i class="fa fa-mail-reply"></i> \n                                \x3c!-- ko if: eventData.timespan() --\x3e\n                                Edit Event Timespan\n                                \x3c!--/ko--\x3e\n                                \x3c!-- ko if: !eventData.timespan() --\x3e\n                                Add Event Timespan\n                                \x3c!--/ko--\x3e\n                            </a>\n                        </span>\n                        \x3c!-- Show this block if there\'s data --\x3e\n                        <div data-bind="component: {\n                            name: \'views/components/reports/scenes/keyvalue\',\n                            params: {\n                                data: {key: undefined, type: \'timespan\', value: eventData.timespan()},\n                            }\n                        }"></div>\n                    </div>\n                    \x3c!--/ko--\x3e\n\n                    \x3c!-- ko if: eventData.children.location --\x3e\n                    \x3c!-- Event First Generation Cards --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Event Location</h5>\n                        <span data-bind="if: eventData.cards && eventData.cards.location">\n                            <a data-bind="click: function(){addNewTile(eventData.cards.location)}" class="afs-report-a">\n                                <i class="fa fa-mail-reply"></i> Edit Event Location\n                            </a>\n                        </span>\n                        \x3c!-- Show this block if there\'s NO data --\x3e\n                        <div class="afs-nodata-note" style="display: none;">No timespan for this event</div>\n\n                        \x3c!-- Show this block if there\'s data --\x3e\n                        <div data-bind="component: {\n                            name: \'views/components/reports/scenes/keyvalue\',\n                            params: {\n                                data: {key: undefined, type: \'resource\', value: eventData.location()},\n                            }\n                        }"></div>\n                    </div>\n                    \x3c!--/ko--\x3e\n                </div>\n            </div>\n            <div data-bind="if: eventData.parts" class="afs-report-subsection">\n                <i data-bind="click: function() {toggleVisibility(visible[eventName].parts)}, css: {\'fa-angle-double-right\': visible[eventName].parts(), \'fa-angle-double-up\': !visible[eventName].parts()}" class="fa toggle"></i>\n                <h2 class="afs-report-section-subtitle">Event Parts</h2>\n                <a data-bind="if: cards[eventName] && cards[eventName].parts, click: function(){addNewTile(cards[eventName].parts)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> Add Part</a>\n                <div data-bind="if: visible[eventName].parts">\n                \x3c!-- ko ifnot: eventData.parts().length --\x3e\n                <div class="afs-nodata-note afs-top-card">No parts for this event</div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- Event Part --\x3e\n                \x3c!-- ko if: eventData.parts().length --\x3e\n                <div data-bind="foreach:{ data: eventData.parts, as: \'part\' }" class="part">\n                    <div>\n                        <h3><i data-bind="click: function(){$parent.toggleVisibility(visible)}" class="fa fa-angle-double-right"></i> Event Part <span data-bind="if: title">:</span> <span data-bind="text: title"></span></h3>\n                        <div class="afs-part-expanded" data-bind="visible: visible">\n                            <a data-bind="if: eventData.cards && eventData.cards.part, click: function(){$parent.editTile(tileid, eventData.cards.part)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> Edit this Part</a>\n            \n                            <div class="afs-report-event-section afs-report-collapsible-container">\n                                <div class="afs-report-subsection-container">\n                                    <div style="width:95%;" data-bind="foreach: {data: $data.metadata, as: \'item\' }" class="afs-report-subsection-two-column">\n                                        <div afs-report-subsection-two-column>  \n                                            <div class="afs-keyvalue" data-bind="component: {\n                                                name: \'views/components/reports/scenes/keyvalue\',\n                                                params: {\n                                                    data: item,\n                                                    inline: true\n                                                }\n                                            }">\n                                            </div>\n                                        </div>  \n                                    </div>\n                                </div>\n                            \n                                \x3c!-- Event First Generation Cards --\x3e\n                                <div class="afs-report-subsection-firstchild">\n                                    <h5>Event Part Names</h5>\n                                    <a data-bind="if: $data.cards && $data.cards.name, click: function(){$parent.addNewTile(cards.name)}" class="afs-report-a">\n                                        <i class="fa fa-mail-reply"></i>\n                                        \x3c!-- ko if: $data.names().length --\x3e\n                                        Edit Part Names\n                                        \x3c!--/ko--\x3e\n                                        \x3c!-- ko if: !$data.names().length --\x3e\n                                        Add Part Names\n                                        \x3c!--/ko--\x3e\n                                    </a>\n                                    \x3c!-- ko ifnot: $data.names().length --\x3e\n                                    <div class="afs-nodata-note">No names for this part</div>\n                                    \x3c!-- /ko --\x3e\n            \n                                    \x3c!-- ko if: $data.names().length --\x3e\n                                    <div class="firstchild-container">\n                                        \n                                        \x3c!-- Names Table --\x3e\n                                        <div class="afs-table" style="max-width: 100%;">\n                                            <table class="table table-striped" cellspacing="0" width="100%">\n                                                <thead>\n                                                    <tr class="afs-table-header">\n                                                        <th>Name</th>\n                                                        <th class="min-tabletl">Type</th>\n                                                        <th class="none">Language</th>\n                                                        <th class="afs-table-control all"></th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody data-bind="dataTablesForEach: { data: $data.names, dataTableOptions: $parent.nameTableConfig }">\n                                                    <tr>\n                                                        <td data-bind="text: name"></td>\n                                                        <td data-bind="text: type"></td>\n                                                        <td data-bind="text: language"></td>\n                                                        <td class="afs-table-control">\n                                                            <div data-bind="if: $parent.cards && $parent.cards.name && $parent.cards.name.tiles().length">\n                                                                <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.name)}">\n                                                                    <i class="fa fa-mail-reply"></i>\n                                                                </a>\n                                                                <a data-bind="click: $parents[1].deleteTile.bind($data, tileid, $parent.cards.name)">\n                                                                    <i class="fa fa-trash"></i>\n                                                                </a>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                                \n                                \x3c!-- Event First Generation Cards --\x3e\n                                <div class="afs-report-subsection-firstchild">\n                                    <h5>Event Part Statements</h5>\n                                    <a data-bind="if: $data.cards && $data.cards.statement, click: function(){$parent.addNewTile($data.cards.statement)}" class="afs-report-a">\n                                        <i class="fa fa-mail-reply"></i> \n                                        \x3c!-- ko if: $data.statements().length --\x3e\n                                        Edit Part Statement\n                                        \x3c!--/ko--\x3e\n                                        \x3c!-- ko if: !$data.statements().length --\x3e\n                                        Add Part Statement\n                                        \x3c!--/ko--\x3e\n                                    </a>\n                                    \n                                    \x3c!-- ko ifnot: $data.statements().length --\x3e\n                                    <div class="afs-nodata-note">No statements for this part</div>\n                                    \x3c!-- /ko --\x3e\n            \n                                    \x3c!-- ko if: $data.statements().length --\x3e\n                                    <div class="firstchild-container">\n                                        \x3c!-- Statements Table --\x3e\n                                        <div class="afs-table">\n                                            <table class="table table-striped" cellspacing="0" width="100%">\n                                                <thead>\n                                                    <tr class="afs-table-header">\n                                                        <th>Statement</th>\n                                                        <th class="none">Type</th>\n                                                        <th class="none">Language</th>\n                                                        <th class="none">Name of Statement</th>\n                                                        <th class="afs-table-control all"></th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody data-bind="dataTablesForEach: { data: statements, dataTableOptions: $parent.statementsTableConfig}">\n                                                    <tr>\n                                                        <td data-bind="text: content" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>\n                                                        <td data-bind="text: type"></td>\n                                                        <td data-bind="text: language"></td>\n                                                        <td data-bind="text: name"></td>\n                                                        <td class="afs-table-control">\n                                                            <div data-bind="if: $parent.cards && $parent.cards.statement && $parent.cards.statement.tiles().length">\n                                                                <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.statement)}">\n                                                                    <i class="fa fa-mail-reply"></i>\n                                                                </a>\n                                                                <a data-bind="click: $parents[1].deleteTile.bind($data, tileid, $parent.cards.statement)">\n                                                                    <i class="fa fa-trash"></i>\n                                                                </a>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n            \n                                \x3c!-- Event First Generation Cards --\x3e\n                                <div class="afs-report-subsection-firstchild">\n                                    <h5>Event Part Identifiers</h5>\n                                    <a data-bind="if: $data.cards && $data.cards.identifier, click: function(){$parent.addNewTile($data.cards.identifier)}" class="afs-report-a">\n                                        <i class="fa fa-mail-reply"></i>\n                                        \x3c!-- ko if: identifiers().length --\x3e\n                                        Edit Part Identifier\n                                        \x3c!--/ko--\x3e\n                                        \x3c!-- ko if: !identifiers().length --\x3e\n                                        Add Part Identifier\n                                        \x3c!--/ko--\x3e\n                                    </a>\n                                    \n                                    \x3c!-- ko ifnot: identifiers().length --\x3e\n                                    <div class="afs-nodata-note">No identifiers for this part</div>\n                                    \x3c!-- /ko--\x3e\n                                    \n                                    \x3c!-- ko if: identifiers().length --\x3e\n                                    <div class="firstchild-container">\n                                        \x3c!-- Identifiers Table --\x3e\n                                        <div class="afs-table">\n                                            <table class="table table-striped" cellspacing="0" width="100%">\n                                                <thead>\n                                                    <tr class="afs-table-header">\n                                                        <th>Identifier</th>\n                                                        <th>Type</th>\n                                                        <th class="afs-table-control all"></th>\n                                                    </tr>\n                                                </thead>\n                                                \n                                                <tbody data-bind="dataTablesForEach: { data: identifiers, dataTableOptions: $parent.identifierTableConfig}">\n                                                    <tr>\n                                                        <td data-bind="text: name"></td>\n                                                        <td data-bind="text: type"></td>\n                                                        <td class="afs-table-control">\n                                                            <div data-bind="if: $parent.cards && $parent.cards.identifier && $parent.cards.identifier.tiles().length">\n                                                                <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.identifier)}">\n                                                                    <i class="fa fa-mail-reply"></i>\n                                                                </a>\n                                                                <a data-bind="click: $parents[1].deleteTile.bind($data, tileid, $parent.cards.identifier)">\n                                                                    <i class="fa fa-trash"></i>\n                                                                </a>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                    \x3c!-- /ko --\x3e\n                                </div>\n            \n                                \x3c!-- Event First Generation Cards --\x3e\n                                <div class="afs-report-subsection-firstchild">\n                                    <h5>Event Part Timespan</h5>\n                                    <a data-bind="if: $data.cards && $data.cards.timespan, click: function(){$parent.addNewTile(cards.timespan)}" class="afs-report-a">\n                                        <i class="fa fa-mail-reply"></i>\n                                        \x3c!-- ko if: timespan() --\x3e\n                                        Edit Part Timespan\n                                        \x3c!--/ko--\x3e\n                                        \x3c!-- ko if: !timespan() --\x3e\n                                        Add Part Timespan\n                                        \x3c!--/ko--\x3e\n                                    </a>\n                                    \x3c!-- ko ifnot: timespan() --\x3e\n                                    <div class="afs-nodata-note">No timespan for this event</div>\n                                    \x3c!-- /ko --\x3e\n                                    \n                                    \x3c!-- ko if: timespan() --\x3e\n                                    \x3c!-- Show this block if there\'s data --\x3e\n                                    <div class="firstchild-container pad-top-sm">\n                                        <div class="afs-report-subsection-item flex">\n                                            <div class="afs-block-attributes timespan">\n                                                <h6 class="afs-block-key">Beginning of the beginning: </h6>\n                                                <div data-bind="text: timespan().beginningStart" class="afs-block-value"></div>\n                                            </div>\n                                            <div class="afs-block-attributes timespan">\n                                                <h6 class="afs-block-key">End of the beginning: </h6>\n                                                <div data-bind="text: timespan().beginningComplete" class="afs-block-value"></div>\n                                            </div>\n                                        </div>\n                                        <div class="afs-report-subsection-item flex" style="margin-top: -5px;">\n                                            <div class="afs-block-attributes timespan">\n                                                <h6 class="afs-block-key">Beginning of the end: </h6>\n                                                <div data-bind="text: timespan().endingStart" class="afs-block-value"></div>\n                                            </div>\n                                            <div class="afs-block-attributes timespan">\n                                                <h6 class="afs-block-key">End of the end: </h6>\n                                                <div data-bind="text: timespan().endingComplete" class="afs-block-value"></div>\n                                            </div>\n                                        </div>\n                                        <div class="afs-report-subsection-item flex column-order pad-top pad-btm">\n                                            <div class="afs-block-attributes">\n                                                <h6 class="afs-block-key">Name of event timespan: </h6>\n                                                <div data-bind="text: timespan().name" class="afs-block-value"></div>\n                                            </div>\n                                            <div class="afs-block-attributes">\n                                                <h6 class="afs-block-key">Duration: </h6>\n                                                <div data-bind="text: timespan().duration" class="afs-block-value"></div>\n                                            </div>\n                                            <div class="afs-block-attributes">\n                                                <h6 class="afs-block-key">Name of event duration: </h6>\n                                                <div data-bind="text: timespan().durationEventName" class="afs-block-value"></div>\n                                            </div>\n                                        </div>\n                                    </div> \n                                    \x3c!--/ko--\x3e\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},56291:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\x3c!-- JSON section --\x3e\n<div class="afs-report-section afs-flex-col">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.json)}, css: {\'fa-angle-double-right\': visible.json(), \'fa-angle-double-up\': !visible.json()}" class="fa toggle"></i> Resource JSON</h2>\n    \n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.json" class="afs-report-collapsible-container pad-lft">\n        <a href="#" class="afs-report-a" data-bind="click: function(){setSelectedJson(\'json\')}">\n            \x3c!-- ko if: selectedFormat() == \'json\' --\x3e\n            <i class="fa fa-arrow-down"></i> \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: selectedFormat() == \'json\' --\x3e\n            <i style="display:inline-block;width: 12px"></i> \n            \x3c!-- /ko --\x3e\n            JSON\n        </a>\n        <a href="#" class="afs-report-a" data-bind="click: function(){setSelectedJson(\'arches-json\')}">\n            \x3c!-- ko if: selectedFormat() == \'arches-json\' --\x3e\n            <i class="fa fa-arrow-down"></i> \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: selectedFormat() == \'arches-json\' --\x3e\n            <i style="display:inline-block;width: 12px"></i> \n            \x3c!-- /ko --\x3e\n            Arches JSON\n        </a>\n        <a href="#" class="afs-report-a" data-bind="click: function(){setSelectedJson(\'json-ld\')}">\n            \x3c!-- ko if: selectedFormat() == \'json-ld\' --\x3e\n            <i data-bind="if: (selectedFormat() == \'json-ld\')" class="fa fa-arrow-down"></i> \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: selectedFormat() == \'json-ld\' --\x3e\n            <i style="display:inline-block;width: 12px"></i> \n            \x3c!-- /ko --\x3e\n            JSON-LD\n        </a>\n    </div>\n    \x3c!-- Show this block if there is resource tile content --\x3e\n    <div data-bind="visible: visible.json" class="afs-report-subsection afs-flex-col">\n        <div class="afs-codemirror afs-flex-col">\n            <div style="overflow:auto; height:100%;" class="geojson-editor" data-bind="codemirror: {\n                value: selectedJSON,\n                viewportMargin: Infinity,\n                mode: { name: \'javascript\', json: codeMirrorJsonMode, jsonld: codeMirrorJsonLDMode },\n                lineNumbers: true\n            }"></div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},56795:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n \x3c!-- ko if: !inline && item.key --\x3e\n<div data-bind="ifnot: inline">\n    <h4 style="text-transform: capitalize;" data-bind="text: item.key" class="afs-block-key"></h4>\n    <div class="afs-card-control" data-bind="if: item.card">\n        <a class="afs-report-a" data-bind="click: function(){add(item.card)}"><i class="fa fa-mail-reply"></i> Edit <span style="text-transform: capitalize;" data-bind="text:item.key"></span></a>\n    </div>        \n </div>\n \x3c!-- /ko --\x3e\n\n \x3c!-- ko if: inline && !small && item.key --\x3e\n<h4 style="text-transform: capitalize;" data-bind="text: item.key" class="afs-block-key"></h4><span>:</span>\n\x3c!-- /ko --\x3e \n\n\x3c!-- ko if: inline && small && item.key --\x3e\n<h4 style="text-transform: capitalize;" data-bind="text: item.key" class="afs-block-key"></h4><span>:</span>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: !item.value && item.type != \'timespan\' --\x3e\n<div data-bind="style: { display: inline ? \'inline\': \'\' }" class="afs-block-value">--</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: item.type == \'kv\'--\x3e\n<div class="afs-block-value" data-bind="text: item.value"></div>\n\x3c!-- /ko --\x3e \n\n\x3c!-- ko if: item.type == \'href\'--\x3e\n<div class="afs-block-value"><a data-bind="text: item.value, attr: { href: item.href }"></a></div>\n\x3c!-- /ko --\x3e  \n\n\x3c!-- ko if: item.type == \'timespan\' --\x3e\n\x3c!-- ko if: item.value --\x3e\n<div class="firstchild-container">\n    <div class="afs-report-subsection-item flex">\n        <div class="afs-block-attributes timespan">\n            <h6 data-bind="product" class="afs-block-key">Beginning of the beginning: </h6>\n            <div data-bind="text: item.value.beginningStart" class="afs-block-value"></div>\n        </div>\n        <div class="afs-block-attributes timespan">\n            <h6 class="afs-block-key">End of the beginning: </h6>\n            <div data-bind="text: item.value.beginningComplete" class="afs-block-value">--</div>\n        </div>\n    </div>\n    <div class="afs-report-subsection-item flex" style="margin-top: -5px;">\n        <div class="afs-block-attributes timespan">\n            <h6 class="afs-block-key">Beginning of the end: </h6>\n            <div data-bind="text: item.value.endingStart" class="afs-block-value"></div>\n        </div>\n        <div class="afs-block-attributes timespan">\n            <h6 class="afs-block-key">End of the end: </h6>\n            <div data-bind="text:item.value.endingComplete" class="afs-block-value"></div>\n        </div>\n    </div>\n    <div class="afs-report-subsection-item flex column-order pad-top pad-btm">\n        <div class="afs-block-attributes">\n            <h6 class="afs-block-key">Name of event timespan: </h6>\n            <div data-bind="text: item.value.name" class="afs-block-value"></div>\n        </div>\n        <div class="afs-block-attributes">\n            <h6 class="afs-block-key">Duration: </h6>\n            <div data-bind="text: item.value.duration" class="afs-block-value"></div>\n        </div>\n        <div class="afs-block-attributes">\n            <h6 class="afs-block-key">Name of event duration: </h6>\n            <div data-bind="text: item.value.durationEventName" class="afs-block-value"></div>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko ifnot: item.value --\x3e\n<div class="afs-nodata-note pad-btm">No timespan available for this resource</div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: item.type == \'resource\'--\x3e\n    \x3c!-- ko if: item.value --\x3e\n        \x3c!-- ko if: item.value && Array.isArray(item.value) --\x3e\n            \x3c!-- ko foreach: {data: item, as: \'instance\', noChildContext: true}--\x3e\n                <span></span>\n                \x3c!-- ko if: Array.isArray(instance.value) --\x3e \n                <div data-bind="foreach: {data: instance.value, as: \'detail\', noChildContext: true}">\n                    <div data-bind="foreach: {data: detail.instance_details, as: \'nested_detail\', noChildContext: true}">\n                        <div class="afs-block-value"><a data-bind="text: $data.getNodeValue(nested_detail), attr: { href: $data.getResourceLink(nested_detail) }"></a>\x3c!-- ko if: $index() < detail.instance_details.length - 1  --\x3e, \x3c!-- /ko --\x3e</div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e \n\n                \x3c!-- ko ifnot: Array.isArray(instance.value) --\x3e \n                    \x3c!-- ko if: Array.isArray(instance.value.instance_details) --\x3e\n                    <div data-bind="foreach: {data: instance.value.instance_details, as: \'detail\', noChildContext: true}">\n                        <div class="afs-block-value"><a data-bind="text: $data.getNodeValue(detail), attr: { href: $data.getResourceLink(detail) }"></a>\x3c!-- ko if: $index() < instance.value.instance_details.length - 1 --\x3e, \x3c!-- /ko --\x3e</div>\n                    </div>\n                    \x3c!-- /ko --\x3e \n                    \x3c!-- ko ifnot: Array.isArray(instance.value.instance_details) --\x3e\n                    <div data-bind="style: { display: inline ? \'inline\': \'\' }" class="afs-block-value">--</div>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: item.value && !Array.isArray(item.value) --\x3e\n            \x3c!-- ko ifnot: item.value.instance_details --\x3e\n                <div data-bind="style: { display: inline ? \'inline\': \'\' }">\n                    <div class="afs-block-value">\n                        <a class="afs-block-value-url" data-bind="text: $data.getNodeValue(item.value), attr: { href: $data.getResourceLink(item.value) }"></a>\n                    </div>\n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: Array.isArray(item.value) --\x3e\n                \x3c!-- ko if: item.value.instance_details --\x3e\n                    \x3c!-- ko if: Array.isArray(item.value.instance_details) --\x3e\n                        <div data-bind="foreach: {data: item.value.instance_details, as: \'instance\', noChildContext: true}, style: { display: inline ? \'inline\': \'\' }">\n                            <div class="afs-block-value">\n                                <a class="afs-block-value-url" data-bind="text: $data.getNodeValue(instance), attr: { href: $data.getResourceLink(instance) }"></a>\x3c!-- ko if: $index() < item.value.instance_details.length - 1 --\x3e, \x3c!-- /ko --\x3e\n                            </div>\n                        </div>\n                    \x3c!-- /ko --\x3e \n                    \x3c!-- ko ifnot: Array.isArray(item.value.instance_details) --\x3e\n                    <div data-bind="style: { display: inline ? \'inline\': \'\' }" class="afs-block-value">--</div>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: inline --\x3e\n<div class="afs-card-control" data-bind="if: item.card">\n    <a class="afs-report-a" data-bind="click: function(){add(item.card)}"><i class="fa fa-mail-reply"></i> Edit <span style="text-transform: capitalize;" data-bind="text:item.key"></span></a>\n</div>\n\x3c!-- /ko --\x3e \n \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},25239:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\x3c!-- Geometry/Map --\x3e\n\x3c!-- ko ifnot: mapOnly --\x3e\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.geometry)}" class="fa fa-angle-double-right toggle"></i> Geospatial Coordinates</h2>\n    <a class="afs-report-a" data-bind="{if: cards && cards.locationGeometry && !geojson, click: function(){addNewTile(cards.locationGeometry)}}">\n        <i class="fa fa-mail-reply"></i> Add Geometry\n    </a>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.geometry" class="afs-report-collapsible-container pad-lft">\n\n        <div class="afs-report-subsection">\n            <h3><i data-bind="click: function() {toggleVisibility(visible.locality)}" class="fa fa-angle-double-right toggle"></i> Geometry</h3>\n            <a class="afs-report-a" data-bind="{if: cards.locationGeometry, click: function(){addNewTile(cards.locationGeometry)}}"><i class="fa fa-mail-reply"></i> Edit location</a>\n            <div data-bind="visible: visible.locality">\n                \x3c!-- ko ifnot: geojson --\x3e\n                <div class="afs-nodata-note afs-top-card">No geometry for this resource</div>\n                \x3c!-- /ko --\x3e \n        \n                \x3c!-- ko if: geojson --\x3e\n                <div class="afs-report-subsection-container no-flex">\n                    <div class="firstchild-container">\n                        <div class="afs-report-map">\n                            <div class="map-container" style="height:475px">\n                                <div class="map" style="height:475px" data-bind="component: {\n                                    name: \'arches-map\',\n                                    params: $data\n                                }">\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>   \n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\n        \x3c!-- Geometry Metadata --\x3e\n        <div class="afs-report-subsection" data-bind="if: geometryMetadata">\n            <h3><i data-bind="click: function() {togglekVisibility(visible.metadata)}" class="fa fa-angle-double-right toggle"></i> Geometry Metadata</h3>\n            \n            \x3c!-- Collapsible content --\x3e\n            <div data-bind="visible: visible.metadata" class="afs-report-collapsible-container">\n                \x3c!-- ko ifnot: false --\x3e\n                <div class="afs-nodata-note afs-top-card">No metadata for this resource</div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: false --\x3e   \n                <div class="afs-report-subsection-container multi-cards no-flex">\n\n                    \x3c!-- Record Authorization/Compilation/Update --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Record Edit History</h5>\n                        \n                        \x3c!-- ko ifnot: hasGeometryAuthorization(location.geometry) --\x3e\n                        <div class="afs-nodata-note">No authorization record for this resource</div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: hasGeometryAuthorization(location.geometry) --\x3e   \n                        <div class="firstchild-container" data-bind="{with: location.geometry}">\n                            <div class="afs-report-subsection-item flex">\n                                <div class="afs-block-attributes actor-name">\n                                    <h6 class="afs-block-key compressed">Record Reviewer: </h6>\n                                    <div data-bind="text: reviewer" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes timespan">\n                                    <h6 class="afs-block-key compressed">Review Date: </h6>\n                                    <div data-bind="text: reviewDate" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes">\n                                    <h6 class="afs-block-key compressed">Type of Review: </h6>\n                                    <div data-bind="text: reviewType" class="afs-block-value"></div>\n                                </div>\n                            </div>\n                            <div class="afs-report-subsection-item flex">\n                                <div class="afs-block-attributes actor-name">\n                                    <h6 class="afs-block-key compressed">Compiler: </h6>\n                                    <div data-bind="text: compiler" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes timespan">\n                                    <h6 class="afs-block-key compressed">Compile Date: </h6>\n                                    <div data-bind="text: compileDate" class="afs-block-value"></div>\n                                </div>\n                            </div>\n                            <div class="afs-report-subsection-item flex">\n                                <div class="afs-block-attributes actor-name">\n                                    <h6 class="afs-block-key compressed">Last Update: </h6>\n                                    <div data-bind="text: lastUpdateName" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes timespan">\n                                    <h6 class="afs-block-key compressed">Update Date: </h6>\n                                    <div data-bind="text: lastUpdate" class="afs-block-value"></div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e   \n                    </div>\n\n                    \x3c!-- Geometry Sources/Scale --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Record Sources/Scale</h5>\n\n                        \x3c!-- ko ifnot: hasGeometrySourcesScale(location.geometry) --\x3e\n                        <div class="afs-nodata-note" style="display: none;">No record sources/scale for this resource</div>\n                        \x3c!-- /ko --\x3e   \n\n                        \x3c!-- ko if: hasGeometrySourcesScale(location.geometry) --\x3e\n                        <div class="firstchild-container">\n                            <div class="afs-report-subsection-item flex column-order pad-btm" data-bind="{with: location.geometry}">\n                                <div class="afs-block-attributes">\n                                    <h6 class="afs-block-key compressed">Coordinate System: </h6>\n                                    <div data-bind="text: coordinateSystem" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes">\n                                    <h6 class="afs-block-key compressed">Basemap: </h6>\n                                    <div data-bind="text: basemap" class="afs-block-value"></div>\n                                </div>\n                                <div class="afs-block-attributes">\n                                    <h6 class="afs-block-key compressed">Capture Scale: </h6>\n                                    <div data-bind="text: captureScale" class="afs-block-value">--</div>\n                                </div>\n                                <div class="afs-block-attributes">\n                                    <h6 class="afs-block-key compressed">Accuracy: </h6>\n                                    <div data-bind="text: accuracy" class="afs-block-value"></div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e   \n                    </div>\n\n                    \x3c!-- Record Description --\x3e\n                    <div class="afs-report-subsection-firstchild">\n                        <h5>Description</h5>\n                        <a class="afs-report-a"><i class="fa fa-mail-reply"></i> Description</a>\n                        \n                        \x3c!-- ko ifnot: location.geometry.description --\x3e\n                        <div class="afs-nodata-note" style="display: none;">No description record for this resource</div>\n                        \x3c!-- /ko --\x3e   \n\n                        \x3c!-- ko ifnot: location.geometry.description --\x3e\n                        <div class="firstchild-container pad-btm">\n                            <div class="afs-report-subsection-item">\n                                <div data-bind="{with: location.geometry}" class="afs-block-attributes" style="margin-top: 5px;">\n                                    <h6 class="afs-block-key compressed">Metadata Description: </h6>\n                                    <div data-bind="text: description" class="afs-block-value"></div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- /ko --\x3e   \n                    </div>\n                </div>  \n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: mapOnly && geojson --\x3e\n<div class="afs-report-subsection-container no-flex">\n    <div class="firstchild-container">\n        <div class="afs-report-map">\n            <div class="map-container" style="height:475px">\n                <div class="map" style="height:475px" data-bind="component: {\n                    name: \'arches-map\',\n                    params: $data\n                }">\n                </div>\n            </div>\n        </div>\n\n    </div>   \n</div>\n\x3c!-- /ko --\x3e\n\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},74911:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.names)}, css: {\'fa-angle-double-right\': visible.names(), \'fa-angle-double-up\': !visible.names()}" class="fa toggle"></i> Names</h2>\n    <span data-bind="if: cards.name && (!names().length || cards.name.cardinality == \'n\')">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.name)}"><i class="fa fa-mail-reply"></i> Add Name</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.names" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: names().length --\x3e\n        <div class="afs-nodata-note">No names for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: names().length --\x3e\n        <div class="afs-report-subsection">\n            <div>\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th class="min-tabletl">Type</th>\n                                <th class="none">Language</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: names, dataTableOptions: nameTableConfig }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: language"></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards && $parent.cards.name">\n                                        <a data-bind="click: function() {$parent.edit(tileid, $parent.cards.name)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.delete.bind($data, tileid, $parent.cards.name)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.identifiers)}, css: {\'fa-angle-double-right\': visible.identifiers(), \'fa-angle-double-up\': !visible.identifiers()}" class="fa toggle"></i> Identifiers</h2>\n    <span data-bind="if: cards.identifier && (!identifiers().length || cards.identifier.cardinality == \'n\')">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.identifier)}"><i class="fa fa-mail-reply"></i> Add Identifier</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.identifiers" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: identifiers().length --\x3e\n        <div class="afs-nodata-note">No identifiers for this resource</div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: identifiers().length --\x3e\n        \n        <div class="afs-report-subsection">\n            <div>\n                <div class="afs-table">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Name</th>\n                                <th class="min-tabletl">Type</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: identifiers, dataTableOptions: identifierTableConfig }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards.identifier">\n                                        <a data-bind="click: function() {$parent.edit(tileid, $parent.cards.identifier)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.delete.bind($data, tileid, $parent.cards.identifier)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.classifications)}, css: {\'fa-angle-double-right\': visible.classifications(), \'fa-angle-double-up\': !visible.classifications()}" class="fa toggle"></i> Classification</h2>\n    \n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.classifications" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko if: type || exactMatch().length --\x3e\n        <div class="afs-report-subsection">\n            <div>\n                <div class="afs-report-subsection-item pad-btm-sm">\n                    <div data-bind="if: dataConfig.type">\n                        <div class="afs-block-attributes pad-btm-sm">\n                            <div>\n                                <h4 class="afs-block-key">Type: \n                                    <div class="afs-block-value" data-bind="text: type"></div>\n                                </h4>\n                                <div class="afs-card-control" data-bind="if: cards.type && type() != \'--\'">\n                                    <a class="afs-report-a" data-bind="click: function(){add(cards.type)}"><i class="fa fa-mail-reply"></i> Edit Type</a>\n                                </div>\n                                <div class="afs-card-control" data-bind="if: cards.type && type() == \'--\'">\n                                    <a class="afs-report-a" data-bind="click: function(){add(cards.type)}"><i class="fa fa-mail-reply"></i> Add Type</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-bind="if: dataConfig.exactMatch">\n                        <div class="afs-block-attributes">\n                            <div>\n                                <h4 class="afs-block-key">Exact Match: \n                                    <div class="afs-block-value">\n                                        \x3c!-- ko foreach: exactMatch --\x3e\n                                        <span data-bind="if: $data != \'--\'">\n                                            <a class="afs-block-value-url" data-bind="attr: {href: $data}">\n                                                <span data-bind="text: $data"></span><span data-bind="if: $index() !== $parent.exactMatch().length-1">,</span>\n                                            </a>\n                                        </span>\n                                        \x3c!-- /ko --\x3e\n                                        \x3c!-- ko if: exactMatch().length === 0 --\x3e\n                                        <span>--</span>\n                                        \x3c!-- /ko --\x3e\n                                    </div>\n                                </h4>\n                                <div class="afs-card-control" data-bind="if: cards.exactMatch && !exactMatch().length">\n                                    <a class="afs-report-a" data-bind="click: function(){add(cards.exactMatch)}"><i class="fa fa-mail-reply"></i> Add Exact Match</a>\n                                </div>\n                                <div class="afs-card-control" data-bind="if: cards.exactMatch && exactMatch().length">\n                                    <a class="afs-report-a" data-bind="click: function(){add(cards.exactMatch)}"><i class="fa fa-mail-reply"></i> Edit Exact Match</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n\n<div class="model-summary-report">\nDo not use - yet.\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},40146:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\x3c!-- ko if: dataConfig.dimension --\x3e\n<div class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.dimensions)}, css: {\'fa-angle-double-right\': visible.dimensions(), \'fa-angle-double-up\': !visible.dimensions()}" class="fa toggle"></i> Dimensions</h2>\n    <span data-bind="if: cards.dimension">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.dimension)}"><i class="fa fa-mail-reply"></i> Add Dimension</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.dimensions" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: dimensions().length --\x3e\n        <div class="afs-nodata-note">No dimensions for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: dimensions().length --\x3e\n        <div class="afs-report-subsection">\n            <div class="firstchild-container">\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Type</th>\n                                <th class="min-tabletl">Unit</th>\n                                <th class="min-medium">Value</th>\n                                <th class="none">Highest Possible Value</th>\n                                <th class="none">Lowest Possible Value</th>\n                                <th class="afs-table-control all"></th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: dimensions, dataTableOptions: dimensionTableConfig }">\n                            <tr>\n                                <td data-bind="text: type"></td>\n                                <td data-bind="text: unit"></td>\n                                <td data-bind="text: dimensionValue"></td>\n                                <td data-bind="text: highestValue"></td>\n                                <td data-bind="text: lowestValue"></td>\n                                <td class="afs-table-control">\n                                    <div data-bind="if: $parent.cards && $parent.cards.dimension">\n                                        <a data-bind="click: function() {$parent.edit(tileid, $parent.cards.dimension)}">\n                                            <i class="fa fa-mail-reply"></i>\n                                        </a>\n                                        <a data-bind="click: $parent.delete.bind($data, tileid, $parent.cards.dimension)">\n                                            <i class="fa fa-trash"></i>\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div><span></span>\n<div data-bind="if: additionalData" class="afs-report-section">\n    <h2 class="afs-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.additionalData)}, css: {\'fa-angle-double-right\': visible.additionalData(), \'fa-angle-double-up\': !visible.additionalData()}" class="fa toggle"></i> Additional Data</h2>\n    <span data-bind="if: cards.material">\n        <a class="afs-report-a" data-bind="click: function(){add(cards.material)}"><i class="fa fa-mail-reply"></i> Add Material</a>\n    </span>\n\n    \x3c!-- Collapsible content --\x3e\n    <div data-bind="visible: visible.additionalData" class="afs-report-collapsible-container pad-lft">\n\n        \x3c!-- ko ifnot: additionalData().length --\x3e\n        <div class="afs-nodata-note">No material for this resource</div>\n        \x3c!-- /ko --\x3e\n        \n        \x3c!-- ko if: additionalData().length --\x3e\n        <div class="afs-report-subsection">\n            <div>\n                <div data-bind="foreach: {data: additionalData, as: \'item\', noChildContext: true}" class="afs-report-subsection-ite">\n                    <div class="afs-block-attributes pad-btm">\n                        <div class="afs-keyvalue" data-bind="component: {\n                            name: \'views/components/reports/scenes/keyvalue\',\n                            params: {\n                                data: item,\n                                inline: true\n                            }\n                        }"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: dataConfig.timespan --\x3e\n<div data-bind="component: {\n    name: \'views/components/reports/scenes/default\',\n    params: {\n        data: timeSpanData,\n    }\n}"></div>\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},78287:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n    \n    \x3c!-- Custom Template Report Title Bar --\x3e\n    <div class="relative">\n\n        \x3c!-- Title Block --\x3e\n        <div class="afs-report-toolbar">\n            <h1 class="afs-report-toolbar-title"><span class="afs-report-name">Textual Work:</span><span data-bind="text: displayname" class="afs-report-instance-name"></span></h1>\n        </div>\n\n    </div>\n    \n\n    \n    \n    \x3c!-- Link nav --\x3e\n    <div class="afs-report-anchor-container">\n        <ol class="afs-report-anchors breadcrumb">\n            \x3c!-- ko foreach: {data: sections, as: \'section\'} --\x3e\n            <li data-bind="click: function(){$parent.activeSection(section.id)}, css: {active: $parent.activeSection() === section.id}, text: section.title" class="afs-report-a"></li>\n            \x3c!-- /ko --\x3e\n        </ol>\n    </div>\n    <div class="afs-tabbed-report">\n        <div class="afs-tabbed-report-content">\n            \x3c!-- Names Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'name\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/name\',\n                    params: {\n                        data: resource,\n                        cards: nameCards,\n                        dataConfig: nameDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Description Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'description\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/description\',\n                    params: {\n                        data: resource,\n                        cards: descriptionCards,\n                        dataConfig: descriptionDataConfig\n                    }\n                }"></div>\n            </div>\n            \x3c!-- documentation Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'documentation\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/documentation\',\n                    params: {\n                        data: resource,\n                        cards: documentationCards,\n                        dataConfig: documentationDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Existence Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'existence\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: existenceCards,\n                        events: existenceEvents,\n                        dataConfig: existenceDataConfig,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Substance Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'substance\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: substanceData,\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Event Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'event\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/existence\',\n                    params: {\n                        data: resource,\n                        cards: eventCards,\n                        events: eventEvents, \n                        dataConfig: eventDataConfig,\n                    }\n                }"></div>\n            </div>\n             \x3c!-- Aboutness Tab --\x3e\n             <div class="afs-report-page" data-bind="if: activeSection() === \'aboutness\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: aboutnessData\n                    }\n                }"></div>\n            </div>\n            \x3c!-- Parthood Tab --\x3e\n            <div class="afs-report-page" data-bind="if: activeSection() === \'parthood\'">\n                <div data-bind="component: {\n                    name: \'views/components/reports/scenes/default\',\n                    params: {\n                        data: parthoodData,\n                    }\n                }"></div>\n            </div>          \n            \x3c!-- JSON Tab --\x3e\n            <div class="afs-report-page afs-flex-col" data-bind="if: activeSection() === \'json\'">\n               <div class="afs-flex-col" data-bind="component: {\n                   name: \'views/components/reports/scenes/json\',\n                   params: {\n                       resourceInstanceId: reportMetadata().resourceinstanceid,\n                   }\n               }"></div>\n           </div>\n        </div>\n    </div>\n\n                \n\n    \n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="afs-summary-report-header">\n    <h1 class="afs-summary-report-title"><span data-bind="text: displayname" class="afs-report-instance-name"></span><span class="afs-report-name pad-lft-sm">(Textual Work)</span></h1>\n</div>\n<div class="model-summary-report">\n    <div class="afs-report-page">\n        \x3c!-- Names --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Textual Work Name</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: nameSummary() --\x3e\n                <h3 class="afs-report-nodata-message">There is no name for this resource</h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: nameSummary() --\x3e\n                <div class="afs-report-data-block">\n                    <div class="afs-block-attributes">\n                        <div class="afs-block-key">Name: </div>\n                        <div class="afs-block-value" data-bind="text: nameSummary().content"></div>\n                    </div>\n                    <div class="afs-block-attributes pad-btm">\n                        <div class="afs-block-key">Type: </div>\n                        <div class="afs-block-value" data-bind="text: nameSummary().type"></div>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- Statement --\x3e\n        <div class="afs-report-section">\n            <h2 class="afs-report-section-title">Statements</h2>\n            <div class="afs-report-subsection">\n                \x3c!-- ko ifnot: statementSummary() && statementSummary().length --\x3e\n                <h3 class="afs-report-nodata-message">There are no statements for this resource</h3>\n                \x3c!-- /ko --\x3e    \n                \x3c!-- ko if: statementSummary() && statementSummary().length --\x3e\n                <div class="afs-table pad-btm">\n                    <table class="table table-striped" cellspacing="0" width="100%">\n                        <thead>\n                            <tr class="afs-table-header">\n                                <th>Statement</th>\n                                <th>Type</th>\n                            </tr>\n                        </thead>\n                        <tbody data-bind="dataTablesForEach: { data: statementSummary, dataTableOptions: getTableConfig(2) }">\n                            <tr>\n                                <td data-bind="text: content"></td>\n                                <td data-bind="text: type"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},98908:function(e){e.exports='\n\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n\n\n\n\x3c!-- Report Title Bar --\x3e\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: $root.translations.reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n\n            <div class="report-print-date" data-bind="component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value: hideEmptyNodes, \n                        config:{ label: $root.translations.hideNullValues, subtitle: \'\'}\n                    }\n                }"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n\x3c!-- ko if: tabs()[activeTabIndex()]  --\x3e\n<div>\n    <ul class="tabbed-report-tab-list">\n    \x3c!-- ko foreach: {data: tabs, as: \'tab\'}  --\x3e\n    <li data-bind="click: function(){ $parent.setActiveTab($index()) }, css: { \'active\': ko.unwrap($parent.activeTabIndex) === $index() }" class="report-tab">\n        <a><span><i data-bind="attr: {class: (\'fa \'+ ko.unwrap(tab.icon))}"></i></span></a>\n    </li>\n    \x3c!-- /ko --\x3e\n</ul>\n</div>\n<div class="tab-banner">\n    <div style="display: flex; flex-direction: row">\n        <span><i data-bind="class: report.get(\'iconclass\') || \'fa fa-file-o\'"></i></span>\n        \x3c!--ko if: report.get(\'displayname\')--\x3e\n        <span style="padding: 0 5px;" data-bind="text: report.get(\'displayname\') || \'(\' + $root.translations.resourceInstanceName + \')\'"></span>\n        \x3c!--/ko--\x3e\n        \x3c!--ko ifnot: report.get(\'displayname\')--\x3e\n        <span data-bind="text: \'(\' + $root.translations.resourceInstanceName + \')\'" style="padding: 0 5px"></span>\n        \x3c!--/ko--\x3e\n    </div>\n    <div><span data-bind="text: tabs()[activeTabIndex()].name"></span></div>\n</div>\n\x3c!-- ko if: tabs()[activeTabIndex()].header_component  --\x3e\n<div class="tabbed-report-header" data-bind="component: {\n    name: tabs()[activeTabIndex()].header_component,\n    params: $data\n}"></div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n    \n\n    \x3c!--ko if: hasProvisionalData() && (editorContext === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEditsNotDisplayed"></span></div>\n    \x3c!--/ko--\x3e\n    \x3c!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) --\x3e\n    <div class="report-provisional-flag"><span data-bind="text: $root.translations.pendingProvisionalEdits"></span></div>\n    \x3c!--/ko--\x3e\n\n\n    \x3c!-- ko if: activeTabEmpty() && tabs()[activeTabIndex()].empty_component  --\x3e\n    <div class="tabbed-report-emptypanel" data-bind="component: {\n        name: tabs()[activeTabIndex()].empty_component,\n        params: $data\n    }"></div>\n    \x3c!--/ko--\x3e\n    \x3c!-- ko if: !tabs()[activeTabIndex()].empty_component || !activeTabEmpty()  --\x3e\n    <div class="rp-report-section relative rp-report-section-root">\n        \x3c!-- ko if: tabs()[activeTabIndex()].side_component  --\x3e\n        <div class="tabbed-report-sidepanel-wrapper">\n            <div class="tabbed-report-sidepanel" data-bind="component: {\n                name: tabs()[activeTabIndex()].side_component,\n                params: $data\n            }"></div>\n        </div>\n        \x3c!-- /ko --\x3e\n        <div class="rp-report-section-title" , data-bind="css: {\'tabbed-report-sidepanel-active\': tabs()[activeTabIndex()].side_component}">\n            \x3c!-- ko if: tabs()[activeTabIndex()].main_component  --\x3e\n            <div class="tabbed-report-sidepanel-wrapper">\n                <div class="tabbed-report-mainpanel" data-bind="component: {\n                    name: tabs()[activeTabIndex()].main_component,\n                    params: $data\n                }"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: tabs()[activeTabIndex()].main_component  --\x3e\n            \x3c!-- ko foreach: { data: activeCards(), as: \'card\' } --\x3e\n            \x3c!-- ko if: $parent.hideEmptyNodes() === false || card.tiles().length > 0 --\x3e\n                \x3c!-- ko if: $index() !== 0 --\x3e<hr class="rp-tile-separator">\x3c!-- /ko --\x3e\n                <div class="rp-card-section">\n                    \x3c!--ko if: card && card.alternateReportComponent --\x3e\n                    \x3c!--/ko --\x3e\n                    \x3c!--ko ifnot: card.model && card.alternateReportComponent --\x3e\n                        \x3c!-- ko component: {\n                            name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                            params: {\n                                state: \'report\',\n                                card: card,\n                                pageVm: {...$root, report: $parent.report},\n                                hideEmptyNodes: $parent.hideEmptyNodes\n                            }\n                        } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \x3c!--/ko--\x3e\n\n\n    \n    \n    \n    <div class="rp-report-section relative report-related-resources">\n        <div class="rp-report-section-title">\n            <h4 class="rp-section-title"><span data-bind="text: $root.translations.relatedResources"></span></h4>\n        </div>\n        \n        \x3c!-- ko foreach: { data: Object.values(report.relatedResourcesLookup()), as: \'resourceData\' } --\x3e\n        \x3c!-- ko if: resourceData.totalRelatedResources > 0 || !$parent.hideEmptyNodes() --\x3e\n        <h5 class="rp-tile-title">\n            <span class="rp-tile-title-float" data-bind="text: resourceData.name"></span>\n        </h5>\n\n        <div class="rp-card-section">\n            \x3c!-- ko foreach: { data: resourceData.loadedRelatedResources(), as: \'relatedResource\' } --\x3e\n            <div class="rp-report-container-tile">\n                <div class="row rp-report-tile">\n                    <dl class="dl-horizontal">\n                        <dt><a data-bind="text: relatedResource.displayName, attr: {href: relatedResource.link}"></a></dt>\n                        \x3c!-- ko if: relatedResource.relationship --\x3e\n                        <dd data-bind="text: \'( \' + relatedResource.relationship + \' )\'"></dd>\n                        \x3c!-- /ko --\x3e\n                    </dl>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: resourceData.paginator() && resourceData.paginator().has_next --\x3e\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, false)">\n                <span data-bind="text: $root.translations.loadMore"></span>\n                <span data-bind="text: \'(\' + resourceData.remainingResources() + \')\'"></span>\n            </button>\n\n            <button class="btn btn-primary" data-bind="click: $parent.report.getRelatedResources.bind($parent.report, true)">\n                <span data-bind="text: $root.translations.loadAll"></span>\n                <span data-bind="text: \'(\' + (resourceData.totalRelatedResources - resourceData.loadedRelatedResources().length) + \')\'"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n                \n            \x3c!--ko if: resourceData.totalRelatedResources === 0 --\x3e\t\n            <div class="rp-report-container-tile">\t\n                <div class="row rp-report-tile rp-no-data"><span data-bind="text: $root.translations.noRelationshipsAdded"></span></div>\t\n            </div>\t\n            \x3c!--/ko--\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e    \n    </div>  \n    \n\n    \n    \n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n\n<div class="model-summary-report">\n    <div>\n        <h2 class="summary-report-title">\n            <span data-bind="text: report.get(\'displayname\') "></span>\n            <a class="summary-report-link" href="javascript(void);" data-bind="text: TypeOfWorkName"></a>\n        </h2>\n    </div>\n\n    \x3c!-- Header --\x3e\n    <div class="summary-report-subtitle">\n        \x3c!--span>\n            <span class="subtitle-category">Created By:</span>\n            <span class="subtitle-value" data-bind="if: CreatedBy().length > 0">\n                <span data-bind="foreach: CreatedBy">\n                    <span data-bind="if: $index() > 0">, </span>\n                    <a target="_blank" data-bind="text: name, attr: { href: link }, click: function() { return true;}, clickBubble: false"></a>\n                </span>\n            </span>\n            <span class="subtitle-value-blank" data-bind="if: CreatedBy().length === 0">\n                No information\n            </span>\n        </span--\x3e\n        <span style="float: right; font-size: 13px;">Visual Work Type</span>\n    </div>\n\n    \x3c!-- Description --\x3e\n    <div class="summary-report-description">\n        <span class="subtitle-category">Visual Work Description:</span>\n        <span class="subtitle-value">\n            <span data-bind="if: description.length > 0">\n                <div data-bind="html: description"></div>\n            </span>\n            <span data-bind="if: description.length === 0">\n                No description available\n            </span>\n        </span>\n    </div>\n\n    \x3c!-- Related Activities --\x3e\n    <div class="summary-report-related-panel">\n        <div class="summary-report-related">\n            Depicts\n        </div>\n        <div data-bind="if: depictsPhysicalName().length > 0">\n            <div class="subtitle-value" data-bind="foreach: depictsPhysicalName">\n                <a class="summary-report-related-list" target="_blank" data-bind="text: name, attr: { href: link }, click: function() { return true;}, clickBubble: false"></a>\n            </div>\n        </div>\n        <span data-bind="if: depictsPhysicalName().length === 0">\n            No Physical Things Depicted\n        </span>\n    </div>\n\n    \x3c!-- Edit Button --\x3e\n    <div class="summary-report-editor-button">\n        <a class="btn btn-mint btn-labeled fa fa-edit text-right" target="_blank" data-bind="attr: { href: editorLink }, click: function() { return true;}, clickBubble: false">\n            Edit Resource\n        </a>\n    </div>\n</div>\n\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n<div style="display: flex; flex-direction: row">\n<div id="card-save-tile-btn" class="install-buttons">\n    <button id="" class="btn btn-shim btn-mint btn-labeled btn-md fa fa-plus" data-bind="click: addTab"><span data-bind="text: $root.translations.addTab"></span></button>\n</div>\n</div>\n<div data-bind="sortable: {\n    data: tabs,\n    as: \'tab\',\n    afterMove: moveTab\n}">\n<div class="report-tab-form" data-bind="click: function(){$parent.setActiveTab($index())}, css: {\'active\': ko.unwrap($parent.activeTabIndex) === $index()}">\n    <div style="display: flex; flex-direction: column">\n        <div class="report-tab-form-title">\n        <div data-bind="text: tab.name"></div>\n        <span data-bind="click: function(){$parent.removeTab(tab)}"><i class="fa fa-close"></i></span>\n        </div>\n        <div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                <input type="" data-bind="attr: {placeholder: $root.translations.tabName}" id="" class="form-control input-md widget-input" data-bind="textInput: tab.name">\n            </div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                \x3c!--ko if: $parent.icons().length > 0 --\x3e\n                <select class="design" data-bind="\n                        placeholder: $root.translations.selectTabIcon,\n                        value: tab.icon, \n                        options: $parent.icons(), \n                        optionsText: \'name\', \n                        optionsValue: \'cssclass\', \n                        chosen: {disable_search_threshold: 10, width: \'100%\'}\n                    "></select>\n                \x3c!-- <div class="design">\n                    <input class=""\n                    data-bind="select2Query: {\n                        select2Config: {\n                            clickBubble: true,\n                            disabled: false,\n                            data: {results: $parent.icons()},\n                            value: tab.icon,\n                            multiple: false,\n                            placeholder: \'Select tab icon\',\n                            allowClear: true\n                        }}">\n                    </div> --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n            <div class="col-xs-12 pad-nor" style="padding: 5px">\n                <select class="design" multiple="multiple" data-bind="\n                        placeholder: $root.translations.selectCardsInTab,\n                        selectedOptions: tab.nodegroup_ids, \n                        options: $parent.topcards, \n                        optionsText: \'name\', \n                        optionsValue: \'nodegroupid\', \n                        chosen: {disable_search_threshold: 10, width: \'100%\'}\n                    "></select>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n\x3c!-- /ko --\x3e\n'},28003:function(e){e.exports='\n\n\n<div class="loading-mask" data-bind="visible: $data.savingTile()"></div>\n<div class="afs-saving-message" data-bind="visible: $data.savingTile(), text: savingMessage"></div>\n\x3c!-- ko if: $data.hasExternalCardData() --\x3e\n    \x3c!-- ko with: $data, as: \'self\' --\x3e\n        \n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'dataset\');\n}, css: {\n    \'active\': activeTab() === \'dataset\'\n}">\n    <i class="fa fa-file"></i>\n    <span class="map-sidebar-text">Dataset</span>\n</div>\n\n\n\x3c!-- ko if: !$data.hideEditorTab() --\x3e\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\', \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\x3c!-- /ko --\x3e\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\n\x3c!-- ko if: $data.activeTab() === \'dataset\' --\x3e\n\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: \'Regions\'"></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n\n    \x3c!-- Popup modal for deleting a sample location --\x3e\n    <div class="afs-modal" data-bind="visible: showingAnalysisAreaDeleteModal">\n        <div class="afs-modal-content">\n            <h1>Delete Analysis Area</h1>\n            <p>Are you sure you want to delete the analysis area?</p>\n    \n            <div class="afs-modal-clearfix">\n                <button type="button" data-bind="click: showAnalysisAreaDeleteModal(false)" class="btn btn-success">\n                    Cancel</button>\n                <button type="button" data-bind="click: deleteAnalysisAreaInstance" class="btn btn-danger">\n                    Delete</button>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="css: card.model.cssclass">\n        <div class="new-provisional-edit-card-container">\n            <div class="card">\n\n                <div style="display: flex; gap: 10px">\n                    <button type="button" class="btn" style="background: #9490EE;\n                            color: #eee;" data-bind="\n                            click: $data.loadNewAnalysisAreaTile\n                        ">\n                        <i class="fa fa-folder"></i>\n                        <span>\n                            Add New Analysis Area\n                        </span>\n                    </button>\n                \n                    \x3c!-- ko if: analysisAreaInstances().length > 0 && !sampleListShowing() --\x3e\n                    <button type="button" class="btn" style="background: #9490EE;\n                            color: #eee;" data-bind="click: showSampleList">\n                        <i class="fa fa-folder"></i>\n                        <span>Return to Analysis Areas List</span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                <div style="overflow: hidden; height: 0px; transition: height .3s;" data-bind="style: {height: sampleListShowing() ? \'185px\': \'0px\'}">\n                    <h5>Region locations</h5>\n            \n                    <div style="margin-left: 5px; margin-right: 15px;">\n                        <input type="text" placeholder="filter..." style="width: 100%;\n                                height: 36px;\n                                border: 1px solid #ddd;\n                                margin-bottom: 3px;" data-bind="textInput: $data.analysisAreaFilterTerm">\n\n                        <div style="height: 100px;\n                                border: 1px solid #ddd;\n                                overflow-y: scroll;">\n                            <table style="display: flex;\n                                    flex-direction: column;\n                                    width: 100%;">\n                                <tbody class="dataset-table" style="display: flex;\n                                        flex-direction: column;">\n                                    \x3c!-- ko foreach: $data.filteredAnalysisAreaInstances --\x3e\n                                        <tr style="cursor: pointer;" data-bind="\n                                                click: function() { $parent.selectAnalysisAreaInstance($data); }\n                                                scrollTo: $parent.selectedAnalysisAreaInstance() && $parent.selectedAnalysisAreaInstance().tileid === $data.tileid,\n                                                style: {\n                                                    background: (function() {\n                                                        if ($parent.selectedAnalysisAreaInstance() && $parent.selectedAnalysisAreaInstance().tileid === $data.tileid) {\n                                                            return \'#afd7f7\';\n                                                        }\n                                                    })()\n                                                },\n                                            ">\n                                            \x3c!-- ko if: $data.isLocked() --\x3e\n                                            <td style="cursor: pointer; width: 30px;">\n                                                <a href="javascript:void(0);" data-bind="click: function() { $parent.viewAnalysisAreaInstance($data); }, clickBubble: false">\n                                                    <i class="fa fa-eye map-card-feature-edit"></i>\n                                                </a>\n                                            </td>\n                                            <td style="width: 30px;">\n                                                <a href="javascript:void(0);" style="cursor: unset;">\n                                                    <i class="fa fa-lock"></i>\n                                                </a>\n                                            </td>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko ifnot: $data.isLocked() --\x3e\n                                            <td style="cursor: pointer; width: 30px;">\n                                                <a href="javascript:void(0);" data-bind="click: function() { $parent.viewAnalysisAreaInstance($data); }, clickBubble: false">\n                                                    <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                </a>\n                                            </td>\n                                            <td style="cursor: pointer; width: 30px;">\n                                                <a href="javascript:void(0);" data-bind="click: function() { $parent.showAnalysisAreaDeleteModal($data); }, clickBubble: false">\n                                                    <i class="fa fa-trash map-card-feature-edit"></i>\n                                                </a>\n                                            </td>\n                                            \x3c!-- /ko --\x3e\n                                            <td class="afs-workflow-table-contents" data-bind="text: (function(){\n                                                    const partIdentifierAssignmentLabelNodeId = \'3e541cc6-859b-11ea-97eb-acde48001122\';\n                                                    return $parent.getStrValue($data.data[partIdentifierAssignmentLabelNodeId]) + \' [Region of \' + $parent.physicalThingName() + \']\';\n                                                })()"></td>\n                                        </tr>\n                                    \x3c!-- /ko --\x3e\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n\n                \n                    <form class="widgets afs-sample-location-form-widgets" data-bind="style: {opacity: $data.selectedAnalysisAreaInstance() && !sampleListShowing() ? \'1\' : \'0\'}">\n\n                        <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                            \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'annotation\' --\x3e\n                                <h5 class="analysis-areas-annotation-step-widget-title pad-top">\n                                    Location <span class="afs-workflow-required-tag">required</span>\n                                </h5>\n\n                                <div class="col-xs-12" style="width: 342px;">\n                                    <div class="style-tools-collapser" data-bind=" click: function() {\n                                        self.showStylingTools(!self.showStylingTools());\n                                    }">\n                                        <span data-bind="text: self.showStylingTools() ? \'Hide Style Tools\' : \'Show Style Tools\'"></span>\n                                        <i class="fa" data-bind="{\n                                            css: {\n                                                \'fa-caret-down\' : !self.showStylingTools(),\n                                                \'fa-caret-up\' : self.showStylingTools(),\n                                            }\n                                        }"></i>\n                                    </div>\n                                    <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                        <div class="style-tools-panel">\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Color</label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input placeholder="Line Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.lineColor, format:\'hex\'}">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Fill color</label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input placeholder="Fill Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.fillColor, format:\'hex\'}">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Width</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Opacity</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Point Radius</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Fill Opacity</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="map-card-feature-list">\n                                        <div class="add-new-feature" data-bind="{\n                                                visible: !self.disableDrawing() && \n                                                    (widget.config.multiFeature() || \n                                                    (!widget.config.multiFeature() && \n                                                        (self.selectedAnalysisAreaInstanceFeatures() === undefined || \n                                                        self.selectedAnalysisAreaInstanceFeatures().length < 1))),\n                                                click: self.clearEditedGeometries,\n                                            }">\n                                            <select data-placeholder="Add a new feature..." data-bind="\n                                                value: self.featureLookup[widget.node_id()].selectedTool,\n                                                valueAllowUnset: true,\n                                                options: [\n                                                    {\n                                                        value: \'\',\n                                                        text: \'\'\n                                                    },\n                                                    {\n                                                        value: \'draw_point\',\n                                                        text: \'Add point\'\n                                                    },\n                                                    {\n                                                        value: \'draw_line_string\',\n                                                        text: \'Add line\'\n                                                    },\n                                                    {\n                                                        value: \'draw_polygon\',\n                                                        text: \'Add polygon\'\n                                                    }\n                                                ],\n                                                optionsText: \'text\',\n                                                optionsValue: \'value\',\n                                                chosen: {\n                                                    \'width\': \'100%\',\n                                                    \'disable_search_threshold\': 10,\n                                                    \'allow_single_deselect\': true\n                                                }\n                                            "></select>\n                                        </div>\n                                        <div class="add-new-feature" data-bind="visible: self.disableDrawing">\n                                            <select data-placeholder="Add a new feature..." data-bind="\n                                                value: self.featureLookup[widget.node_id()].selectedTool,\n                                                valueAllowUnset: true,\n                                                options: [\n                                                    {\n                                                        value: \'\',\n                                                        text: \'\'\n                                                    },\n                                                    {\n                                                        value: \'draw_point\',\n                                                        text: \'Add point\'\n                                                    },\n                                                    {\n                                                        value: \'draw_line_string\',\n                                                        text: \'Add line\'\n                                                    },\n                                                    {\n                                                        value: \'draw_polygon\',\n                                                        text: \'Add polygon\'\n                                                    }\n                                                ],\n                                                optionsText: \'text\',\n                                                optionsValue: \'value\',\n                                                chosen: {\n                                                    disabled: true,\n                                                    \'width\': \'100%\',\n                                                    \'disable_search_threshold\': 10,\n                                                    \'allow_single_deselect\': true\n                                                }\n                                            "></select>\n                                        </div>\n                                    </div>\n                                    <table class="table">\n                                        <tbody>\n                                            \x3c!-- ko foreach: {data: self.selectedAnalysisAreaInstanceFeatures, as: \'feature\'} --\x3e\n                                            <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(ko.toJS(feature)); }">\n                                                <td>\n                                                    <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                                </td>\n                                                \x3c!-- ko ifnot: self.selectedAnalysisAreaInstance()?.isLocked --\x3e\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                        Edit\n                                                    </a>\n                                                </td>\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-trash map-card-feature-delete"></i>\n                                                        Delete\n                                                    </a>\n                                                </td>\n                                                \x3c!-- /ko --\x3e\n                                            </tr>\n                                            \x3c!-- /ko --\x3e\n                                        </tbody>\n                                    </table>\n                                </div>\n                            \x3c!-- /ko --\x3e\n                        </div>\n\n                        \x3c!-- ko if: $data.partIdentifierAssignmentLabelWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">\n                                Name for Region (Part) <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()].isrequired}"></i>\n\n                            <div class="afs-region-name" data-bind=\'\n                                    component: {\n                                        name: self.form.widgetLookup[$data.partIdentifierAssignmentLabelWidget().widget_id()].name,\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentLabelWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentLabelWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $parent.selectedAnalysisAreaInstance()?.isLocked,\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentLabelWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentLabelWidget().hovered,\n                                        "$data.partIdentifierAssignmentLabelWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentLabelWidget().selected() && self.preview) $data.partIdentifierAssignmentLabelWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentLabelWidget().visible\n                                \'></div>\n                            <div>\n                                <input disabled="disabled" type="text" style="padding-left: 20px; margin-left: 5px; margin-top: -5px; width: 342px; height: 36px;" data-bind="textInput: areaName">\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        \n                        \x3c!-- ko if: $data.partIdentifierAssignmentAnnotatorWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title pad-top">Annotator</h5>\n                            <i data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentAnnotatorWidget().node_id()].isrequired}"></i>\n\n                            <div class="afs-workflow-annotator" style="margin-left: -20px;" data-bind=\'\n                                    component: {\n                                        name: "views/components/resource-instance-nodevalue",\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentAnnotatorWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentAnnotatorWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentAnnotatorWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentAnnotatorWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $parent.selectedAnalysisAreaInstance()?.isLocked,\n                                            relatedResourceId: projectResourceId,\n                                            relatedNodeId: "dbaa2022-9ae7-11ea-ab62-dca90488358a",\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentAnnotatorWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentAnnotatorWidget().hovered,\n                                        "$data.partIdentifierAssignmentAnnotatorWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentAnnotatorWidget().selected() && self.preview) $data.partIdentifierAssignmentAnnotatorWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentAnnotatorWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentAnnotatorWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentAnnotatorWidget().visible\n                                \'></div>\n                        \x3c!-- /ko --\x3e\n                    </form>\n                \n\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="workbench-button-panel">\n    <button class="btn btn-success" data-bind="click: $data.saveAnalysisAreaTile, css: {disabled: !$data.tileDirty()}">\n        <i class="ion-android-cloud-done"></i>\n        <span>Save</span>\n    </button>\n    <button class="btn btn-danger" data-bind="click: $data.resetAnalysisAreasTile, css: {disabled: !$data.tileDirty()}">\n        <i class="ion-android-cancel}"></i>\n        <span>Cancel</span>\n    </button>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div data-bind="css: card.model.cssclass">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n        <div class="edit-message-container">\n            <span data-bind="text: $root.translations.showingEditsBy"></span>\n            <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n                <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n            </a>\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n            \x3c!-- /ko--\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n        <div class="edit-message-container approved">\n            <div>\n                <span data-bind="text: $root.translations.showingRecentApprovedEdits"></span>\n            </div>\n        </div>\n        \x3c!-- /ko--\x3e\n\n\n\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <div class="new-provisional-edits-list">\n                <div class="new-provisional-edits-header">\n                    <div class="new-provisional-edits-title">\n                        <span data-bind="text: $root.translations.provisionalEdits"></span>\n                    </div>\n                    <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                            provisionalTileViewModel.deleteAllProvisionalEdits();\n                        }">\n                        <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                    </div>\n                </div>\n                \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n                <div class="new-provisional-edit-entry" data-bind="css: {\n                        \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                    }, click: function(){\n                        $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                    }">\n                    <div class="title">\n                        <div class="field">\n                            <span data-bind="text : pe.username"></span>\n                        </div>\n                        <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                            $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                        }"></a>\n                    </div>\n                    <div class="field timestamp">\n                        <span data-bind="text : pe.displaydate">@</span>\n                        <span data-bind="text : pe.displaytimestamp"></span>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n            \x3c!-- /ko--\x3e\n\n            <div class="card">\n                \n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(true)\n                    }" style="cursor:pointer;">\n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n                <h5 data-bind="text: card.model.instructions"></h5>\n                \n                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                \n                    <form class="widgets afs-sample-location-form-widgets" data-bind="style: {opacity: $data.selectedAnalysisAreaInstance() && !sampleListShowing() ? \'1\' : \'0\'}">\n\n                        <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                            \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'annotation\' --\x3e\n                                <h5 class="analysis-areas-annotation-step-widget-title pad-top">\n                                    Location <span class="afs-workflow-required-tag">required</span>\n                                </h5>\n\n                                <div class="col-xs-12" style="width: 342px;">\n                                    <div class="style-tools-collapser" data-bind=" click: function() {\n                                        self.showStylingTools(!self.showStylingTools());\n                                    }">\n                                        <span data-bind="text: self.showStylingTools() ? \'Hide Style Tools\' : \'Show Style Tools\'"></span>\n                                        <i class="fa" data-bind="{\n                                            css: {\n                                                \'fa-caret-down\' : !self.showStylingTools(),\n                                                \'fa-caret-up\' : self.showStylingTools(),\n                                            }\n                                        }"></i>\n                                    </div>\n                                    <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                        <div class="style-tools-panel">\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Color</label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input placeholder="Line Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.lineColor, format:\'hex\'}">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Fill color</label>\n                                                <div class="col-sm-8">\n                                                    <div class="colorpicker-component input-group">\n                                                        <input placeholder="Fill Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.fillColor, format:\'hex\'}">\n                                                        <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Width</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Line Opacity</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Point Radius</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                                </div>\n                                            </div>\n                                            <div class="form-group">\n                                                <label class="col-sm-4 control-label">Fill Opacity</label>\n                                                <div class="col-sm-8">\n                                                    <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="map-card-feature-list">\n                                        <div class="add-new-feature" data-bind="{\n                                                visible: !self.disableDrawing() && \n                                                    (widget.config.multiFeature() || \n                                                    (!widget.config.multiFeature() && \n                                                        (self.selectedAnalysisAreaInstanceFeatures() === undefined || \n                                                        self.selectedAnalysisAreaInstanceFeatures().length < 1))),\n                                                click: self.clearEditedGeometries,\n                                            }">\n                                            <select data-placeholder="Add a new feature..." data-bind="\n                                                value: self.featureLookup[widget.node_id()].selectedTool,\n                                                valueAllowUnset: true,\n                                                options: [\n                                                    {\n                                                        value: \'\',\n                                                        text: \'\'\n                                                    },\n                                                    {\n                                                        value: \'draw_point\',\n                                                        text: \'Add point\'\n                                                    },\n                                                    {\n                                                        value: \'draw_line_string\',\n                                                        text: \'Add line\'\n                                                    },\n                                                    {\n                                                        value: \'draw_polygon\',\n                                                        text: \'Add polygon\'\n                                                    }\n                                                ],\n                                                optionsText: \'text\',\n                                                optionsValue: \'value\',\n                                                chosen: {\n                                                    \'width\': \'100%\',\n                                                    \'disable_search_threshold\': 10,\n                                                    \'allow_single_deselect\': true\n                                                }\n                                            "></select>\n                                        </div>\n                                        <div class="add-new-feature" data-bind="visible: self.disableDrawing">\n                                            <select data-placeholder="Add a new feature..." data-bind="\n                                                value: self.featureLookup[widget.node_id()].selectedTool,\n                                                valueAllowUnset: true,\n                                                options: [\n                                                    {\n                                                        value: \'\',\n                                                        text: \'\'\n                                                    },\n                                                    {\n                                                        value: \'draw_point\',\n                                                        text: \'Add point\'\n                                                    },\n                                                    {\n                                                        value: \'draw_line_string\',\n                                                        text: \'Add line\'\n                                                    },\n                                                    {\n                                                        value: \'draw_polygon\',\n                                                        text: \'Add polygon\'\n                                                    }\n                                                ],\n                                                optionsText: \'text\',\n                                                optionsValue: \'value\',\n                                                chosen: {\n                                                    disabled: true,\n                                                    \'width\': \'100%\',\n                                                    \'disable_search_threshold\': 10,\n                                                    \'allow_single_deselect\': true\n                                                }\n                                            "></select>\n                                        </div>\n                                    </div>\n                                    <table class="table">\n                                        <tbody>\n                                            \x3c!-- ko foreach: {data: self.selectedAnalysisAreaInstanceFeatures, as: \'feature\'} --\x3e\n                                            <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(ko.toJS(feature)); }">\n                                                <td>\n                                                    <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                                </td>\n                                                \x3c!-- ko ifnot: self.selectedAnalysisAreaInstance()?.isLocked --\x3e\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                        Edit\n                                                    </a>\n                                                </td>\n                                                <td class="map-card-feature-tool">\n                                                    <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                        <i class="fa fa-trash map-card-feature-delete"></i>\n                                                        Delete\n                                                    </a>\n                                                </td>\n                                                \x3c!-- /ko --\x3e\n                                            </tr>\n                                            \x3c!-- /ko --\x3e\n                                        </tbody>\n                                    </table>\n                                </div>\n                            \x3c!-- /ko --\x3e\n                        </div>\n\n                        \x3c!-- ko if: $data.partIdentifierAssignmentLabelWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">\n                                Name for Region (Part) <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()].isrequired}"></i>\n\n                            <div class="afs-region-name" data-bind=\'\n                                    component: {\n                                        name: self.form.widgetLookup[$data.partIdentifierAssignmentLabelWidget().widget_id()].name,\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentLabelWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentLabelWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $parent.selectedAnalysisAreaInstance()?.isLocked,\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentLabelWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentLabelWidget().hovered,\n                                        "$data.partIdentifierAssignmentLabelWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentLabelWidget().selected() && self.preview) $data.partIdentifierAssignmentLabelWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentLabelWidget().visible\n                                \'></div>\n                            <div>\n                                <input disabled="disabled" type="text" style="padding-left: 20px; margin-left: 5px; margin-top: -5px; width: 342px; height: 36px;" data-bind="textInput: areaName">\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        \n                        \x3c!-- ko if: $data.partIdentifierAssignmentAnnotatorWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title pad-top">Annotator</h5>\n                            <i data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentAnnotatorWidget().node_id()].isrequired}"></i>\n\n                            <div class="afs-workflow-annotator" style="margin-left: -20px;" data-bind=\'\n                                    component: {\n                                        name: "views/components/resource-instance-nodevalue",\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentAnnotatorWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentAnnotatorWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentAnnotatorWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentAnnotatorWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $parent.selectedAnalysisAreaInstance()?.isLocked,\n                                            relatedResourceId: projectResourceId,\n                                            relatedNodeId: "dbaa2022-9ae7-11ea-ab62-dca90488358a",\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentAnnotatorWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentAnnotatorWidget().hovered,\n                                        "$data.partIdentifierAssignmentAnnotatorWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentAnnotatorWidget().selected() && self.preview) $data.partIdentifierAssignmentAnnotatorWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentAnnotatorWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentAnnotatorWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentAnnotatorWidget().visible\n                                \'></div>\n                        \x3c!-- /ko --\x3e\n                    </form>\n                \n                \x3c!-- /ko --\x3e\n                \n<div class="workbench-button-panel">\n    <button class="btn btn-success" data-bind="click: $data.saveAnalysisAreaTile, css: {disabled: !$data.tileDirty()}">\n        <i class="ion-android-cloud-done"></i>\n        <span>Save</span>\n    </button>\n    <button class="btn btn-danger" data-bind="click: $data.resetAnalysisAreasTile, css: {disabled: !$data.tileDirty()}">\n        <i class="ion-android-cancel}"></i>\n        <span>Cancel</span>\n    </button>\n</div>\n\n\n                <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                    <div class="relative">\n                        <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                            card.model.get(\'helpactive\')(false);\n                        }"></a>\n                    </div>\n                    <div id="add-basemap-wizard-help-content">\n                        <div>\n                            <div class="panel-heading">\n                                <h3 class="panel-title help-panel-title" style="">\n                                    <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                </h3>\n                            </div>\n                            <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n            </div>\n        </div>\n    </div>\n\n\x3c!--/ko --\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n'},59579:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Related Project/Object</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectName.name + \':\'"></div>\n                    <a data-bind="attr: { href: urls.resource + \'/\' + reportVals.projectName.resourceid}" target="_blank">\n                        <div class="summary-value" data-bind="text: reportVals.projectName.value">\n                        </div>\n                    </a>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.parentObject.name + \':\'"></div>\n                    <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                        <div class="summary-value" data-bind="text: displayName">\n                        </div>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section" style="display: none;">\n        <h5 class="summary-value">Regions</h5>\n        \x3c!-- ko foreach: regionInstances --\x3e\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: $root.urls.resource + \'/\' + regionResource}" target="_blank">\n                    <div class="summary-value" data-bind="text: regionName">\n                    </div>\n                </a>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Region(s) of Interest</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.digitalReference.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.digitalReference.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        \x3c!-- ko foreach: {data: objectAnnotations, as: \'annotation\'} --\x3e\n        <div style="margin: -20px 0px 60px 0px;" data-bind="component: { name: \'views/components/annotation-summary\', params: {annotation: annotation}}"></div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},84458:function(e){e.exports='\n<div class="afs-image-service-instructions" style="padding-bottom: 8px;">\n    <p>\n        Select an existing image service for your object that you can use to draw the locations of your observations.\n        Or upload image(s) to create a new service.\n    </p>\n\n    \x3c!-- ko foreach: [...physicalThingDigitalReferencePreferredManifestResourceData(), ...physicalThingDigitalReferenceAlternateManifestResourceData()] --\x3e\n        <div class="afs-image-service-list-item">\n            <input type="radio" data-bind="{\n                    value: $data.displayname,\n                    checked: $parent.selectedPhysicalThingImageServiceName,\n                    disable: $parent.locked\n                }">\n            <label data-bind="\n                    text: $data.displayname,\n                    click: function() { $parent.selectedPhysicalThingImageServiceName($data.displayname) }\n                "></label>\n            <span class="iiif-gallery-canvas-thumbnail">\n                <img data-bind="attr: { src: $data.thumbnail }">\n            </span>\n        </div>\n    \x3c!-- /ko --\x3e\n</div>\n\n<button class="btn btn-success" style="margin-left: 28px;" data-bind="click: openManifestManager, disable: $parent.locked">\n    <i class="ion-android-cloud-done"></i>\n    <span>\n        Create new Image Service\n    </span>\n</button>\n\n<div class="afs-workflow-manifest-manager-container" style="position: fixed;\n        top: 50px;\n        left: 50px;\n        height: calc(100vh - 50px);\n        width: calc(100vw - 50px);\n        transition: all linear .3s;\n        z-index: 1;" data-bind="\n        style: {\n            transform: !isManifestManagerHidden() ? \'translate(0,0)\' : \'translate(100vw,0)\'\n        },\n        component: {\n            name: \'manifest-manager\',\n            params: {\n                summary: true,\n                shouldShowEditService: $data.shouldShowEditService,\n                manifestData: manifestData,\n                renderContext: \'manifest-workflow\'\n            }\n        }\n    "></div>\n\n<button class="btn btn-warning" style="position: fixed;\n        top: 55px;\n        left: calc(100vw - 261px);\n        height: 42px;\n        width: 180px;\n        transition: all linear .3s;\n        z-index: 1;" data-bind="\n        style: {\n            transform: !isManifestManagerHidden() ? \'translate(0,0)\' : \'translate(0,-100vh)\'\n        },\n        click: handleExitFromManifestManager\n    ">Return to Workflow</button>'},28693:function(e){e.exports='<div class="object-search-step">\n    <div class="workflow-search-panel">\n        <div class="search-bar">\n            <input data-bind="select2Query: {select2Config: targetResourceSelectConfig}">\n        </div>\n        <div class="workflow-search-count">\n            <div class="count-number" data-bind="text: totalResults()"></div><div>Physical Things</div>\n        </div>\n    </div>\n    <div class="workflow-search-results">\n        <div class="workflow-search-results-full-container">\n            <div class="workflow-search-list-container"> \n                <div class="workflow-search-list search-result-details">\n                    <div data-bind="css: {\'loading-mask\': reportDataLoading}">\n                        <div class="afs-project-search-result-details-container" data-bind="foreach: targetResources">\n                            <div class="search-result-item" data-bind="css: {\'selected-instance\': $parent.value().map(function(resource){return resource}).indexOf($data[\'_source\'][\'resourceinstanceid\']) >= 0},\n                            click: function(){$parent.updateTileData($data[\'_source\'][\'resourceinstanceid\'])}">\n                                <div style="display: inline-flex;justify-content: space-between; align-items: baseline; width: 100%;">\n                                    <div class="summary-report-title" data-bind="text: $parent.getStringValue($data._source.displayname)"></div>\n                                </div>\n                                <div class="summary-report-description" data-bind="html: $parent.stripTags($parent.getStringValue($data._source.displaydescription)) || \'No description\'"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="search-results-footer">\n                    <div style="width:100%">\n                        <div data-bind="component: {\n                            name: \'paging-filter\',\n                            params: {\n                                query,\n                                searchResults,\n                                filters,\n                            }\n                        }"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="wf-multi-tile-step-list" style="padding: 0px;">\n\n                <div style="padding: 24px 24px 0px 24px;">\n                \x3c!-- ko if: selectedResources().length === 0 && !dirty() --\x3e\n                <div class="wf-multi-tile-step-list-empty">\n                    <p>You have not added any Physical Things to this Collection/Set</p>\n                </div>\n                \x3c!--/ko --\x3e\n                \x3c!-- ko foreach: selectedResources --\x3e\n                <div class="wf-multi-tile-step-card">\n                    <div class="wf-multi-tile-card-info">\n                        \x3c!-- <div class="workflow-step-icon complete"><span><i class="fa fa-hashtag"></i></span></div> --\x3e\n                        <div class="wf-multi-tile-card-info-details">\n                            <dt data-bind="text: $data.displayname"></dt>\n                            <dd>\n                                <a data-bind="html: $parent.stripTags($data.displaydescription) || \'No description\'"></a>\n                            </dd>\n                        </div>\n                    </div>\n                    <div class="wf-multi-tile-step-card-controls">\n                        <span data-bind="click: function(){$parent.updateTileData($data.resourceinstanceid)}">\n                            <span>\n                                <i class="fa fa-times-circle"></i>\n                            </span>\n                            <span class="">\n                                Remove\n                            </span>\n                        </span>\n                    </div>\n                 </div>\n                \x3c!-- /ko --\x3e\n                </div>\n                \x3c!-- ko if: selectedResources().length > 0 || dirty() --\x3e\n                <div class="search-selection-controls">\n                    <div style="display: flex; justify-content: flex-end;">\n                        <button class="btn btn-md btn-mint" data-bind="visible: dirty, click: function(){submit()}, text: complete() === true ? \'Save\' : \'Save and Continue\'"></button>\n                        <button class="btn btn-md btn-mint" data-bind="visible: !dirty() && complete() === true, click: function(){next()}">Continue</button>\n                        <button class="btn btn-md btn-warning" style="margin-left: 8px" data-bind="visible: dirty, click: function(){resetTile()}">Reset</button>\n                    </div>                \n                </div>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n'},71984:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Created Resource Instance(s)</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                    <div class="summary-value" data-bind="text: displayName + \' (Project Resource Instance)\'">\n                    </div>\n                </a>\n                <a data-bind="attr: { href: urls.resource + \'/\' + collectionResourceId}" target="_blank">\n                    <div class="summary-value" data-bind="text: reportVals.collection.value + \' (Collection Resource Instance)\'">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Project Details</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.projectName.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectStatement.name + \':\'"></div>\n                    <div class="summary-value" data-bind="html: reportVals.projectStatement.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectTimespan.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.projectTimespan.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectTeam.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.projectTeam.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Used Physical Things</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                \x3c!-- ko foreach: collectionOfPhysThings --\x3e\n                <a class="summary-value" data-bind="clickBubble: false, attr: {href: $parent.urls.resource + \'/\' + resourceid}, text: name"></a>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Related Resource</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-value" data-bind="text: reportVals.collection.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},8036:function(e){e.exports='\n<div>\n    <div style="padding: 35px 60px 0px;">\n        <div class="widget-input-label">Project Name*</div>\n        <div style="margin-top: -20px;" data-bind="component: {\n            name: \'text-widget\',\n            params: {\n                renderContext: \'workflow\', \n                value: nameValue,\n            }\n        }"></div>\n        </div>\n    </div>\n    <div style="padding: 25px 60px 0px;">\n        <div class="widget-input-label">Project Activity Type</div>\n        <div style="margin-top: -20px;" data-bind="component: {\n            name: \'concept-radio-widget\',\n            params: {\n                node: {config: {rdmCollection: projectEventTypeRdmCollection }},\n                renderContext: \'workflow\', \n                value: typeValue,\n            }\n        }"></div>\n    </div>\n\n'},18489:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Project</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + projectResourceId}" target="_blank">\n                    <div class="summary-value" data-bind="text: projectName">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Related Collection</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                    <div class="summary-value" data-bind="text: collectionName">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Physical Things</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                \x3c!-- ko foreach: collectionOfParentPhysThings --\x3e\n                <a class="summary-value" data-bind="clickBubble: false, attr: {href: $parent.urls.resource + \'/\' + resourceid}, text: name"></a>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        <h5 class="summary-value">Child Physical Things</h5>\n        \x3c!-- ko ifnot: collectionOfChildPhysThings().length --\x3e\n        <div class="afs-nodata-note">No children of this physical thing</div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: collectionOfChildPhysThings().length --\x3e\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                \x3c!-- ko foreach: collectionOfChildPhysThings --\x3e\n                <a class="summary-value" data-bind="clickBubble: false, attr: {href: $parent.urls.resource + \'/\' + resourceid}, text: name"></a>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},9951:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Selected Resource Instance</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                    <div class="summary-value" data-bind="text: displayName + \' (Physical Thing Instance)\'">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Object</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.sampledObjectName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.sampledObjectName.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value" style="margin-bottom: -10px;">Files for Upload</h5>\n        \x3c!-- ko foreach: {data: fileLists, as: \'fileList\'} --\x3e\n        \x3c!-- ko if: fileList().length > 0 --\x3e\n        <h5 class="summary-value upload-dataset-name" data-bind="text: digitalResourceName || \'Unnamed Dataset (nothing to upload)\'"></h5>\n        <div style="margin-top: -20px">\n            \x3c!-- ko if: leafletConfig --\x3e\n            <div style="border: solid 1px #ddd">\n                <div class="iiif-leaflet" data-bind="leaflet: leafletConfig" style="height: 300px; width: 100%"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n            <div style="width: 100%; padding-left: 10px; padding-right: 10px; margin-bottom: 20px;">\n                <table data-bind="datatable: $parent.tableConfig" class="table table-striped" style="border-bottom: 1px solid #ddd" width="100%">\n                    <thead>\n                        <tr>\n                            <th>File Name:</th>\n                            <th>Interpretation</th>\n                            <th>File Parameters</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: {data: fileList, as: \'file\'}">\n                        <tr>\n                            <td><div class="summary-value" data-bind="text: file.name"></div></td>\n                            <td><div class="summary-value" data-bind="text: file.interpretation"></div></td>\n                            <td><div class="summary-value" data-bind="text: file.parameter"></div></td>\n                        </tr>\n                    <tbody>\n                </tbody></tbody></table>\n                <div class="final-step-section-block-item" style="margin-top: -15px;">\n                    <div style="display: inline-flex;">\n                        <div class="summary-label">Files: </div>\n                        <div class="summary-value" data-bind="text: fileList().length + \' files uploaded\'"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},3896:function(e){e.exports='\n\n\n<div>\n    <div class="upload-dataset-related-widget">\n        <h4>Related Datasets</h4>\n        <p style="padding-left: 26px; margin-top: -5px;">We found the following datasets for the object you selected</p>\n    </div>\n\n    <div style="padding: 5px; margin-bottom: 15px; width: 700px">\n        <div class="widget-input-label" style="margin-bottom: 5px;">Physical Thing*</div>\n        <div data-bind="component: {\n            name: \'resource-instance-select-widget\',\n            params: {\n                graphids: [\n                    \'9519cb4f-b25b-11e9-8c7b-a4d18cec433a\',\n                ],\n                renderContext: \'workflow\', \n                value: physicalThingResourceId,\n                disabled: false\n            }\n        }"></div>\n    </div>\n    <div class="col-xs-12" style="padding-left: 30px;">\n        \x3c!-- ko if: dataLoaded() === true --\x3e\n        <div class="pad-hor rows option-input" data-bind="foreach: relatedDigitalResources">\n            <label class="form-checkbox form-normal form-primary form-text" style="overflow: visible;" data-bind="css: {active: $data.selected} ">\n                <input type="checkbox" data-bind="checked: $data.selected">\n                <span data-bind="text:displayname"></span>\n            </label>\n        </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: !relatedDigitalResources().length != 0 && physicalThingResourceId() != undefined --\x3e\n        <div class="rows option-input">\n            <div style="margin-bottom: 10px; border: 1px solid #ddd; padding: 5px 15px; background-color: #fde9ad;color: #666;">\n                <span>\n                    This physical thing has no digital resources.  Select another or run through the upload dataset workflow.\n                </span>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n</div>'},62591:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Created or Modified Resource Instance</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                    <div class="summary-value" data-bind="text: displayName + \' (Sampling Activity Resource Instance)\'">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Related Project/Object</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.projectName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.projectName.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.sampledObjectName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.sampledObjectName.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value" style="margin-bottom: 10px;">Sampling Activity</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.samplingActivityName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.samplingActivityName.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.samplers.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.samplers.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.samplingDate.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.samplingDate.value"></div>\n                </div>\n                <div class="pad-top" style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.technique.name + \':\'"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-value" data-bind="html: reportVals.technique.value"></div>\n                </div>\n                <div class="pad-top" style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.motivation.name + \':\'"></div>\n                </div>\n                <div style="display: inline-flex;"></div>\n                    <div class="summary-value" data-bind="html: reportVals.motivation.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Sampling Locations</h5>\n        \x3c!-- ko foreach: sampleAnnotations --\x3e\n        <div style="display: inline-flex; flex-direction: column; padding-bottom: 25px;">\n            <div style="border: solid 1px #ddd">\n                <div class="iiif-leaflet" data-bind="leaflet: leafletConfig, click: function(){if ($parent.switchMap){$parent.switchMap($parent.map)}}" style="height: 500px; width: 100%;"></div>\n            </div>\n            <div style="width: 100%; padding-top: 10px;">\n                <table data-bind="datatable: $parent.tableConfig" class="table table-striped" width="100%" style="border-bottom: 1px solid #ddd; margin-bottom: 8px;">\n                    <thead>\n                        <tr>\n                            <th class="afs-worfklow-summary-table-header">Sample Name:</th>\n                            <th class="afs-worfklow-summary-table-header">Description</th>\n                            <th class="afs-worfklow-summary-table-header">Sampling Motivation</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: {data: samplingLocations, as: \'location\'}">\n                        <tr style="cursor: pointer" data-bind="\n                                css: {\'selected\': $parents[1].selectedAnnotationTileId() === location.tileId }, \n                                click: function() { $parents[1].highlightAnnotation(location.tileId); }\n                            ">\n                            <td><div class="summary-value" data-bind="text: location.samplingLocationName"></div></td>\n                            <td><div class="summary-value" data-bind="text: location.sampleDescription"></div></td>\n                            <td><div class="summary-value" data-bind="text: location.sampleMotivation"></div></td>\n                        </tr>\n                    <tbody>\n                </tbody></tbody></table>\n                <div class="final-step-section-block-item">\n                    <div style="display: inline-flex; padding-left: 5px; color: #777;">\n                        <div class="summary-label" style="font-size: 13px; padding-right: 3px;">Sampled locations:</div>\n                        <div class="summary-value" style="font-size: 13px;" data-bind="text: samplingLocations().length"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n\x3c!-- /ko --\x3e\n'},25894:function(e){e.exports='<div class="afs-image-service-instructions">\n    <p>\n        Select an existing image service for your object that you can use to draw the locations of your observations.\n        Or upload image(s) to create a new service.\n    </p>\n\n    \x3c!-- ko foreach: [...physicalThingDigitalReferencePreferredManifestResourceData(), ...physicalThingDigitalReferenceAlternateManifestResourceData()] --\x3e\n        <div class="afs-image-service-list-item">\n            <input type="radio" data-bind="{\n                    value: $data.displayname,\n                    checked: $parent.selectedPhysicalThingImageServiceName,\n                }">\n            <label data-bind="\n                    text: $data.displayname,\n                    click: function() { $parent.selectedPhysicalThingImageServiceName($data.displayname) }\n                "></label>\n            <span class="iiif-gallery-canvas-thumbnail">\n                <img data-bind="attr: { src: $data.thumbnail }">\n            </span>\n        </div>\n    \x3c!-- /ko --\x3e\n</div>\n\n<button class="btn btn-success" style="margin-left: 28px;" data-bind="click: openManifestManager">\n    <i class="ion-android-cloud-done"></i>\n    <span>\n        Create new Image Service\n    </span>\n</button>\n\n<div class="afs-workflow-manifest-manager-container" style="position: fixed;\n        top: 50px;\n        left: 50px;\n        height: calc(100vh - 50px);\n        width: calc(100vw - 50px);\n        transition: all linear .3s;\n        z-index: 1;" data-bind="\n        style: {\n            transform: !isManifestManagerHidden() ? \'translate(0,0)\' : \'translate(100vw,0)\'\n        },\n        component: {\n            name: \'manifest-manager\',\n            params: {\n                summary: true,\n                shouldShowEditService: $data.shouldShowEditService,\n                manifestData: manifestData,\n                renderContext: \'manifest-workflow\'\n            }\n        }\n    "></div>\n\n<button class="btn btn-warning" style="position: fixed;\n        top: 53px;\n        right: 6px;\n        height: 42px;\n        width: 180px;\n        transition: all linear .3s;\n        z-index: 1;" data-bind="\n        style: {\n            transform: !isManifestManagerHidden() ? \'translate(0,0)\' : \'translate(0,-100vh)\'\n        },\n        click: handleExitFromManifestManager\n    ">Return to Workflow</button>\n'},2129:function(e){e.exports='\n\n\n<div class="loading-mask" data-bind="visible: $data.savingTile()"></div>\n<div class="afs-saving-message" data-bind="visible: $data.savingTile(), text: savingMessage"></div>\n\x3c!-- ko if: $data.hasExternalCardData() --\x3e\n    \x3c!-- ko with: $data, as: \'self\' --\x3e\n        \n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n    <div class="workbench-card-sidebar-tab" data-bind="click: function() {\n        toggleTab(\'dataset\');\n    }, css: {\n        \'active\': activeTab() === \'dataset\'\n    }">\n        <i class="fa fa-file"></i>\n        <span class="map-sidebar-text">Dataset</span>\n    </div>\n\n\x3c!-- ko if: !$data.hideEditorTab() --\x3e\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'editor\');\n}, css: {\n    \'active\': activeTab() === \'editor\', \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text" data-bind="text: $root.translations.edit"></span>\n</div>\n\x3c!-- /ko --\x3e\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n    \x3c!-- ko if: $data.activeTab() === \'dataset\' --\x3e\n\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: \'Sample Details\'"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n    <div class="workbench-card-sidepanel-body">\n\n\n\n\n    <div data-bind="css: card.model.cssclass">\n        <div class="new-provisional-edit-card-container">\n            <div class="card">\n                <div style="display: flex; gap: 10px">\n                    <button type="button" class="btn" style="background: #9490EE;\n                            color: #eee;" data-bind="\n                            click: $data.loadNewSampleLocationTile\n                        ">\n                        <i class="fa fa-folder"></i>\n                        <span>\n                            Add New Sample\n                        </span>\n                    </button>\n\n                    \x3c!-- ko if: sampleLocationInstances().length > 0 && !sampleListShowing()--\x3e\n                    <button type="button" class="btn" style="background: #9490EE;\n                            color: #eee;" data-bind="click: showSampleList">\n                        <i class="fa fa-folder"></i>\n                        <span>Return to Samples List</span>\n                    </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                <div style="overflow: hidden; height: 0px; transition: height .3s;" data-bind="style: {height: sampleListShowing() ? \'185px\': \'0px\'}">\n                    <h5>Sample locations</h5>\n                \n                    <div style="margin-left: 5px; margin-right: 15px;">\n                        <input type="text" placeholder="filter..." style="width: 100%;\n                            height: 36px;\n                            border: 1px solid #ddd;\n                            margin-bottom: 3px;" data-bind="textInput: $data.sampleLocationFilterTerm">\n                \n                        <div style="height: 100px;border: 1px solid #ddd;overflow-y: scroll;"> \n                            <table style="display: flex;\n                                    flex-direction: column;\n                                    width: 100%;">\n                                <tbody class="dataset-table" style="display: flex;\n                                                        flex-direction: column;">\n                                    \x3c!-- ko foreach: $data.filteredSampleLocationInstances --\x3e\n                                    <tr style="cursor: pointer;" data-bind="\n                                            click: function() { $parent.selectSampleLocationInstance($data); },\n                                            scrollTo: $parent.selectedSampleLocationInstance() && $parent.selectedSampleLocationInstance().tileid === $data.tileid,\n                                            style: {\n                                                background: (function() {\n                                                    if ($parent.selectedSampleLocationInstance() && $parent.selectedSampleLocationInstance().tileid === $data.tileid) {\n                                                        return \'#afd7f7\';\n                                                    }\n                                            })()\n                                        },\n                                    ">\n                                        \x3c!-- ko if: $parent.samplingActivityResourceId != $data.samplingActivityResourceId() --\x3e\n                                        <td style="cursor: pointer; width: 30px;">\n                                            <a href="javascript:void(0);" data-bind="click: function() { $parent.viewSampleLocationInstance($data); }, clickBubble: false">\n                                                <i class="fa fa-eye map-card-feature-edit"></i>\n                                            </a>\n                                        </td>\n                                        <td style="width: 30px;">\n                                            <a href="javascript:void(0);" style="cursor: unset;">\n                                                <i class="fa fa-lock"></i>\n                                            </a>\n                                        </td>\n                                        \x3c!-- /ko --\x3e\n                                        \x3c!-- ko if: $parent.samplingActivityResourceId == $data.samplingActivityResourceId() --\x3e\n                                        <td style="cursor: pointer; width: 30px;">\n                                            <a href="javascript:void(0);" data-bind="click: function() { $parent.viewSampleLocationInstance($data); }, clickBubble: false">\n                                                <i class="fa fa-pencil map-card-feature-edit"></i>\n                                            </a>\n                                        </td>\n                                        <td style="cursor: pointer; width: 30px;">\n                                            <a href="javascript:void(0);" data-bind="click: function() { $parent.showSampleLocationDeleteModal($data); }, clickBubble: false">\n                                                <i class="fa fa-trash map-card-feature-edit"></i>\n                                            </a>\n                                        </td>\n                                        \x3c!-- /ko --\x3e\n\n                                        <td class="afs-workflow-table-contents" data-bind="text: (function(){\n                                            var partIdentifierAssignmentLabelNodeId = \'3e541cc6-859b-11ea-97eb-acde48001122\';\n                                            return ko.unwrap($data.data[partIdentifierAssignmentLabelNodeId][$parent.activeLanguage()][\'value\']) + \' [Sample of \' + $parent.physicalThingName + \']\';\n                                        })()" style="width: 100%"></td>\n                                    </tr>\n                                    \x3c!-- /ko --\x3e\n                                </tbody>\n                            </table>\n                        </div>\n                \n                    </div>\n                </div>\n\n                \n                    <form class="widgets afs-sample-location-form-widgets" data-bind="style: {opacity: $data.selectedSampleLocationInstance() !== undefined && !sampleListShowing() ? \'1\' : \'0\'}">\n                        \x3c!-- BEGIN geometry table --\x3e\n                        <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'annotation\' --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">\n                                Sample Location <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[widget.node_id()].isrequired}"></i>\n\n                            <div class="col-xs-12" style="width: 342px;">\n                                <div class="style-tools-collapser" data-bind=" click: function() {\n                                    self.showStylingTools(!self.showStylingTools());\n                                }">\n                                    <span data-bind="text: self.showStylingTools() ? \'Hide Style Tools\' : \'Show Style Tools\'"></span>\n                                    <i class="fa" data-bind="{\n                                        css: {\n                                            \'fa-caret-down\' : !self.showStylingTools(),\n                                            \'fa-caret-up\' : self.showStylingTools(),\n                                        }\n                                    }"></i>\n                                </div>\n                                <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                    <div class="style-tools-panel">\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Color</label>\n                                            <div class="col-sm-8">\n                                                <div class="colorpicker-component input-group">\n                                                    <input placeholder="Line Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.lineColor, format:\'hex\'}">\n                                                    <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Fill color</label>\n                                            <div class="col-sm-8">\n                                                <div class="colorpicker-component input-group">\n                                                    <input placeholder="Fill Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.fillColor, format:\'hex\'}">\n                                                    <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Width</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Opacity</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Point Radius</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Fill Opacity</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="map-card-feature-list">\n                                    <div class="add-new-feature" data-bind="\n                                            visible: !self.disableDrawing() && \n                                                    (widget.config.multiFeature() || \n                                                    (!widget.config.multiFeature() && \n                                                        (self.selectedSampleLocationInstanceFeatures() === undefined || \n                                                         self.selectedSampleLocationInstanceFeatures().length < 1))),\n                                            click: self.clearEditedGeometries,\n                                        ">\n                                        <select data-placeholder="Add a new feature..." data-bind="\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: \'Add point\'\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: \'Add line\'\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: \'Add polygon\'\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                    </div>\n                                    <div class="add-new-feature" data-bind="visible: !self.sampleLocationDisabled() && self.disableDrawing">\n                                        <select data-placeholder="Add a new feature..." data-bind="\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: \'Add point\'\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: \'Add line\'\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: \'Add polygon\'\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                disabled: true,\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                    </div>\n                                </div>\n                                <table class="table">\n                                    <tbody>\n                                        \x3c!-- ko foreach: {data: self.selectedSampleLocationInstanceFeatures, as: \'feature\'} --\x3e\n                                        <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(ko.toJS(feature)); }">\n                                            <td>\n                                                <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                            </td>\n                                            <td class="map-card-feature-tool" data-bind="visible: !self.sampleLocationDisabled()">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                    <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                    Edit\n                                                </a>\n                                            </td>\n                                            <td class="map-card-feature-tool" data-bind="visible: !self.sampleLocationDisabled()">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                    <i class="fa fa-trash map-card-feature-delete"></i>\n                                                    Delete\n                                                </a>\n                                            </td>\n                                        </tr>\n                                        \x3c!-- /ko --\x3e\n                                    </tbody>\n                                </table>\n                            </div>\n                        \x3c!-- /ko --\x3e\n                        </div>\n                        \x3c!-- END geometry table --\x3e\n\n                        \x3c!-- ko if: $data.partIdentifierAssignmentLabelWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title" style="margin-bottom: 5px;">\n                                Sample Name <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()].isrequired}"></i>\n                            <div class="afs-sample-name" data-bind=\'\n                                    component: {\n                                        name: self.form.widgetLookup[$data.partIdentifierAssignmentLabelWidget().widget_id()].name,\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentLabelWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentLabelWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $data.sampleLocationDisabled || (!self.card.isWritable && !self.preview),\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentLabelWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentLabelWidget().hovered,\n                                        "$data.partIdentifierAssignmentLabelWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentLabelWidget().selected() && self.preview) $data.partIdentifierAssignmentLabelWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentLabelWidget().visible\n                                \'></div>\n                            <div>\n                                <input class="afs-calculated-name" disabled="disabled" type="text" data-bind="textInput: sampleName">\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- BEGIN sample description --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">Sample Description</h5>\n                            <div class="afs-workflow-sample-desc" style="margin-left: -21px; margin-top: -18px;" data-bind=\'\n                                    component: {\n                                        name: "rich-text-widget",\n                                        params: {\n                                            renderContext: "workflow",\n                                            disabled: $data.sampleLocationDisabled,\n                                            value: $data.sampleDescriptionWidgetValue,\n                                        }\n                                    }, \n\n                                \'></div>\n                        \x3c!-- END sample description --\x3e\n\n                        \x3c!-- BEGIN motivation for sampling --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">Motivation for taking this sample</h5>\n                            <div class="afs-workflow-sample-desc" style="margin-left: -21px; margin-top: -18px;" data-bind=\'\n                                    component: {\n                                        name: "rich-text-widget",\n                                        params: {\n                                            renderContext: "workflow",\n                                            disabled: $data.sampleLocationDisabled,\n                                            value: $data.motivationForSamplingWidgetValue,\n                                        }\n                                    }, \n\n                                \'></div>\n                        \x3c!-- END motivation for sampling --\x3e\n                    </form>\n                \n\n\n            </div>\n        </div>\n    </div>\n    </div>\n    \n    <div class="workbench-button-panel">\n        <button class="btn btn-success" data-bind="click: $data.saveSampleLocationTile, css: {disabled: !$data.tileDirty()}">\n            <i class="ion-android-cloud-done"></i>\n            <span style="padding-left: 4px">Save</span>\n        </button>\n        <button class="btn btn-danger" data-bind="click: $data.resetSampleLocationTile, css: {disabled: !$data.tileDirty()}">\n            <i class="ion-android-cancel"></i>\n            <span style="padding-left: 4px">Cancel</span>\n        </button>\n    </div>\n    \n    \x3c!-- /ko --\x3e\n\n    \n\x3c!--ko if: activeTab() === \'editor\' --\x3e\n    <div class="workbench-card-sidepanel-header-container">\n        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: card.model.name"></h4>\n    </div>\n    <div class="workbench-card-sidepanel-border"></div>\n\n    <div data-bind="css: card.model.cssclass">\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.selectedProvisionalEdit() --\x3e\n        <div class="edit-message-container">\n            <span data-bind="text: $root.translations.showingEditsBy"></span>\n            <span class="edit-message-container-user" data-bind="text: provisionalTileViewModel.selectedProvisionalEdit().username() + \'.\'"></span>\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <a class="reset-authoritative" href="" data-bind="click: function(){provisionalTileViewModel.resetAuthoritative();}">\n                <span data-bind="text: $root.translations.returnToApprovedEdits"></span>\n            </a>\n            \x3c!-- /ko--\x3e\n            \x3c!-- ko if: provisionalTileViewModel.selectedProvisionalEdit().isfullyprovisional --\x3e\n            <span data-bind="text: $root.translations.newProvisionalContribution"></span>\n            \x3c!-- /ko--\x3e\n        </div>\n        \x3c!-- /ko--\x3e\n\n        \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 && !provisionalTileViewModel.selectedProvisionalEdit()--\x3e\n        <div class="edit-message-container approved">\n            <div>\n                <span data-bind="text: $root.translations.showingRecentApprovedEdits"></span>\n            </div>\n        </div>\n        \x3c!-- /ko--\x3e\n\n\n\n        <div class="new-provisional-edit-card-container">\n            \x3c!-- ko if: reviewer && provisionalTileViewModel.provisionaledits().length > 0 --\x3e\n            \x3c!-- ko if: !provisionalTileViewModel.tileIsFullyProvisional() --\x3e\n            <div class="new-provisional-edits-list">\n                <div class="new-provisional-edits-header">\n                    <div class="new-provisional-edits-title">\n                        <span data-bind="text: $root.translations.provisionalEdits"></span>\n                    </div>\n                    <div class="btn btn-shim btn-danger btn-labeled btn-xs fa fa-trash new-provisional-edits-delete-all" style="padding: 3px;" data-bind="click: function(){\n                            provisionalTileViewModel.deleteAllProvisionalEdits();\n                        }">\n                        <span data-bind="text: $root.translations.deleteAllEdits"></span>\n                    </div>\n                </div>\n                \x3c!-- ko foreach: { data: provisionalTileViewModel.provisionaledits(), as: \'pe\' } --\x3e\n                <div class="new-provisional-edit-entry" data-bind="css: {\n                        \'selected\': pe === $parent.provisionalTileViewModel.selectedProvisionalEdit()\n                    }, click: function(){\n                        $parent.provisionalTileViewModel.selectProvisionalEdit(pe);\n                    }">\n                    <div class="title">\n                        <div class="field">\n                            <span data-bind="text : pe.username"></span>\n                        </div>\n                        <a href="" class="field fa fa-times-circle new-delete-provisional-edit" data-bind="click : function(){\n                            $parent.provisionalTileViewModel.rejectProvisionalEdit(pe);\n                        }"></a>\n                    </div>\n                    <div class="field timestamp">\n                        <span data-bind="text : pe.displaydate">@</span>\n                        <span data-bind="text : pe.displaytimestamp"></span>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- /ko--\x3e\n            \x3c!-- /ko--\x3e\n\n            <div class="card">\n                \n                \x3c!-- ko if: card.model.helpenabled --\x3e\n                <span>\n                    <a class="pull-right card-help help editable-help" data-bind="click: function () {\n                        card.model.get(\'helpactive\')(true)\n                    }" style="cursor:pointer;">\n                        <span data-bind="text: $root.translations.help"></span>\n                        <i class="fa fa-question-circle"></i>\n                    </a>\n                </span>\n                \x3c!-- /ko --\x3e\n                <h5 data-bind="text: card.model.instructions"></h5>\n                \n                \x3c!-- ko if: card.widgets().length > 0 --\x3e\n                \n                    <form class="widgets afs-sample-location-form-widgets" data-bind="style: {opacity: $data.selectedSampleLocationInstance() !== undefined && !sampleListShowing() ? \'1\' : \'0\'}">\n                        \x3c!-- BEGIN geometry table --\x3e\n                        <div data-bind="foreach: {\n                            data:card.widgets, as: \'widget\'\n                        }">\n                        \x3c!-- ko if: ko.unwrap(self.form.nodeLookup[widget.node_id()].datatype) === \'annotation\' --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">\n                                Sample Location <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[widget.node_id()].isrequired}"></i>\n\n                            <div class="col-xs-12" style="width: 342px;">\n                                <div class="style-tools-collapser" data-bind=" click: function() {\n                                    self.showStylingTools(!self.showStylingTools());\n                                }">\n                                    <span data-bind="text: self.showStylingTools() ? \'Hide Style Tools\' : \'Show Style Tools\'"></span>\n                                    <i class="fa" data-bind="{\n                                        css: {\n                                            \'fa-caret-down\' : !self.showStylingTools(),\n                                            \'fa-caret-up\' : self.showStylingTools(),\n                                        }\n                                    }"></i>\n                                </div>\n                                <div class="form-horizontal" data-bind="if: self.showStylingTools">\n                                    <div class="style-tools-panel">\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Color</label>\n                                            <div class="col-sm-8">\n                                                <div class="colorpicker-component input-group">\n                                                    <input placeholder="Line Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.lineColor, format:\'hex\'}">\n                                                    <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.lineColor}"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Fill color</label>\n                                            <div class="col-sm-8">\n                                                <div class="colorpicker-component input-group">\n                                                    <input placeholder="Fill Color " class="form-control input-md widget-input" data-bind="colorPicker: {color: self.fillColor, format:\'hex\'}">\n                                                    <span class="input-group-addon style-tools-color-visualizer" data-bind="style: {background: self.fillColor}"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Width</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineWidth">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Line Opacity</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.lineOpacity">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Point Radius</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.pointRadius">\n                                            </div>\n                                        </div>\n                                        <div class="form-group">\n                                            <label class="col-sm-4 control-label">Fill Opacity</label>\n                                            <div class="col-sm-8">\n                                                <input type="number" placeholder="" class="form-control" data-bind="valueUpdate: \'keyup\', value: self.fillOpacity">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="map-card-feature-list">\n                                    <div class="add-new-feature" data-bind="\n                                            visible: !self.disableDrawing() && \n                                                    (widget.config.multiFeature() || \n                                                    (!widget.config.multiFeature() && \n                                                        (self.selectedSampleLocationInstanceFeatures() === undefined || \n                                                         self.selectedSampleLocationInstanceFeatures().length < 1))),\n                                            click: self.clearEditedGeometries,\n                                        ">\n                                        <select data-placeholder="Add a new feature..." data-bind="\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: \'Add point\'\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: \'Add line\'\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: \'Add polygon\'\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                    </div>\n                                    <div class="add-new-feature" data-bind="visible: !self.sampleLocationDisabled() && self.disableDrawing">\n                                        <select data-placeholder="Add a new feature..." data-bind="\n                                            value: self.featureLookup[widget.node_id()].selectedTool,\n                                            valueAllowUnset: true,\n                                            options: [\n                                                {\n                                                    value: \'\',\n                                                    text: \'\'\n                                                },\n                                                {\n                                                    value: \'draw_point\',\n                                                    text: \'Add point\'\n                                                },\n                                                {\n                                                    value: \'draw_line_string\',\n                                                    text: \'Add line\'\n                                                },\n                                                {\n                                                    value: \'draw_polygon\',\n                                                    text: \'Add polygon\'\n                                                }\n                                            ],\n                                            optionsText: \'text\',\n                                            optionsValue: \'value\',\n                                            chosen: {\n                                                disabled: true,\n                                                \'width\': \'100%\',\n                                                \'disable_search_threshold\': 10,\n                                                \'allow_single_deselect\': true\n                                            }\n                                        "></select>\n                                    </div>\n                                </div>\n                                <table class="table">\n                                    <tbody>\n                                        \x3c!-- ko foreach: {data: self.selectedSampleLocationInstanceFeatures, as: \'feature\'} --\x3e\n                                        <tr class="map-card-feature-item" data-bind="css: {\'active\': self.selectedFeatureIds().indexOf(feature.id) >= 0}, click: function() { self.showFeature(ko.toJS(feature)); }">\n                                            <td>\n                                                <span class="map-card-feature-name" data-bind="text: feature.geometry.type"></span>\n                                            </td>\n                                            <td class="map-card-feature-tool" data-bind="visible: !self.sampleLocationDisabled()">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.editFeature(feature); }, clickBubble: false">\n                                                    <i class="fa fa-pencil map-card-feature-edit"></i>\n                                                    Edit\n                                                </a>\n                                            </td>\n                                            <td class="map-card-feature-tool" data-bind="visible: !self.sampleLocationDisabled()">\n                                                <a href="javascript:void(0);" data-bind="click: function() { self.deleteFeature(feature); }, clickBubble: false">\n                                                    <i class="fa fa-trash map-card-feature-delete"></i>\n                                                    Delete\n                                                </a>\n                                            </td>\n                                        </tr>\n                                        \x3c!-- /ko --\x3e\n                                    </tbody>\n                                </table>\n                            </div>\n                        \x3c!-- /ko --\x3e\n                        </div>\n                        \x3c!-- END geometry table --\x3e\n\n                        \x3c!-- ko if: $data.partIdentifierAssignmentLabelWidget() --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title" style="margin-bottom: 5px;">\n                                Sample Name <span class="afs-workflow-required-tag">required</span>\n                            </h5>\n                            <i style="display: none;" data-bind="css: {\'ion-asterisk widget-label-required\': self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()].isrequired}"></i>\n                            <div class="afs-sample-name" data-bind=\'\n                                    component: {\n                                        name: self.form.widgetLookup[$data.partIdentifierAssignmentLabelWidget().widget_id()].name,\n                                        params: {\n                                            formData: self.physicalThingPartIdentifierAssignmentTile().formData,\n                                            tile: self.physicalThingPartIdentifierAssignmentTile(),\n                                            form: self.form,\n                                            config: $data.partIdentifierAssignmentLabelWidget().configJSON,\n                                            label: $data.partIdentifierAssignmentLabelWidget().label(),\n                                            value: self.physicalThingPartIdentifierAssignmentTile().data[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            node: self.form.nodeLookup[$data.partIdentifierAssignmentLabelWidget().node_id()],\n                                            expanded: self.expanded,\n                                            graph: self.form.graph,\n                                            type: "resource-editor",\n                                            disabled: $data.sampleLocationDisabled || (!self.card.isWritable && !self.preview),\n                                        }\n                                    }, \n                                    css:{\n                                        "active": $data.partIdentifierAssignmentLabelWidget().selected,\n                                        "hover": $data.partIdentifierAssignmentLabelWidget().hovered,\n                                        "$data.partIdentifierAssignmentLabelWidget()-preview": self.preview\n                                    }, \n                                    click: function(data, e) {\n                                        if (!$data.partIdentifierAssignmentLabelWidget().selected() && self.preview) $data.partIdentifierAssignmentLabelWidget().selected(true);\n                                    }, \n                                    event: {\n                                        mouseover: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(true);\n                                        },\n                                        mouseout: function(){\n                                            if (self.preview) $data.partIdentifierAssignmentLabelWidget().hovered(null);\n                                        }\n                                    }, \n                                    visible: $data.partIdentifierAssignmentLabelWidget().visible\n                                \'></div>\n                            <div>\n                                <input class="afs-calculated-name" disabled="disabled" type="text" data-bind="textInput: sampleName">\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- BEGIN sample description --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">Sample Description</h5>\n                            <div class="afs-workflow-sample-desc" style="margin-left: -21px; margin-top: -18px;" data-bind=\'\n                                    component: {\n                                        name: "rich-text-widget",\n                                        params: {\n                                            renderContext: "workflow",\n                                            disabled: $data.sampleLocationDisabled,\n                                            value: $data.sampleDescriptionWidgetValue,\n                                        }\n                                    }, \n\n                                \'></div>\n                        \x3c!-- END sample description --\x3e\n\n                        \x3c!-- BEGIN motivation for sampling --\x3e\n                            <h5 class="analysis-areas-annotation-step-widget-title">Motivation for taking this sample</h5>\n                            <div class="afs-workflow-sample-desc" style="margin-left: -21px; margin-top: -18px;" data-bind=\'\n                                    component: {\n                                        name: "rich-text-widget",\n                                        params: {\n                                            renderContext: "workflow",\n                                            disabled: $data.sampleLocationDisabled,\n                                            value: $data.motivationForSamplingWidgetValue,\n                                        }\n                                    }, \n\n                                \'></div>\n                        \x3c!-- END motivation for sampling --\x3e\n                    </form>\n                \n                \x3c!-- /ko --\x3e\n                \n    <div class="workbench-button-panel">\n        <button class="btn btn-success" data-bind="click: $data.saveSampleLocationTile, css: {disabled: !$data.tileDirty()}">\n            <i class="ion-android-cloud-done"></i>\n            <span style="padding-left: 4px">Save</span>\n        </button>\n        <button class="btn btn-danger" data-bind="click: $data.resetSampleLocationTile, css: {disabled: !$data.tileDirty()}">\n            <i class="ion-android-cancel"></i>\n            <span style="padding-left: 4px">Cancel</span>\n        </button>\n    </div>\n    \n\n                <aside id="card-help-panel" class="card-help-panel" style="display: none;" data-bind="visible: card.model.get(\'helpactive\')">\n                    <div class="relative">\n                        <a id="add-basemap-wizard-help-close" href="#" class="help-close fa fa-times fa-lg" style="" data-bind="click: function () {\n                            card.model.get(\'helpactive\')(false);\n                        }"></a>\n                    </div>\n                    <div id="add-basemap-wizard-help-content">\n                        <div>\n                            <div class="panel-heading">\n                                <h3 class="panel-title help-panel-title" style="">\n                                    <span data-bind="html: card.model.get(\'helptitle\')"></span>\n                                </h3>\n                            </div>\n                            <div class="panel-body" style="padding: 10px 10px 15px 10px;" data-bind="html: card.model.get(\'helptext\')">\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n            </div>\n        </div>\n    </div>\n\n\x3c!--/ko --\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\x3c!-- Popup modal for deleting a sample location --\x3e\n<div class="afs-modal" data-bind="visible: showingSampleLocationDeleteModal">\n    <div class="afs-modal-content">\n        <h1>Delete Sample</h1>\n        <p>Are you sure you want to delete the sample?</p>\n\n        <div class="afs-modal-clearfix">\n            <button type="button" data-bind="click: showSampleLocationDeleteModal(false)" class="btn btn-success">Cancel</button>\n            <button type="button" data-bind="click: deleteSampleLocation" class="btn btn-danger">Delete</button>\n        </div>\n    </div>\n</div>\n\n'},57254:function(e){e.exports='\n<div style="height: 100%; padding: 10px 24px;">\n    <div style="padding: 5px">\n        <div class="widget-input-label">Samplers</div>\n        <div data-bind="component: {\n            name: \'views/components/resource-instance-nodevalue\',\n            params: {\n                graphids: [\n                    \'f71f7b9c-b25b-11e9-901e-a4d18cec433a\',\n                ],\n                renderContext: \'workflow\', \n                multiple: true,\n                value: samplers,\n                relatedResourceId: projectValue,\n                relatedNodeId: \'dbaa2022-9ae7-11ea-ab62-dca90488358a\'\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px; margin-top: 25px;">\n        <div class="widget-input-label">Sampling Date</div>\n        <div style="margin: -25px 0px 0px 0px;" data-bind="component: {\n            name: \'datepicker-widget\',\n            params: {\n                node: {\'config\': {\'dateFormat\': \'YYYY-MM-DD\'}},\n                renderContext: \'workflow\', \n                value: samplingDate,\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px; margin-top: 0px;">\n        <div class="widget-input-label">Sampling Activity Type</div>\n        <div style="margin: -25px 0px 0px 0px;" data-bind="component: {\n            name: \'concept-select-widget\',\n            params: {\n                node: {\'config\': {\'rdmCollection\': \'6e3bd268-68bc-4464-aad0-82eabfd5a78f\'}},\n                renderContext: \'workflow\', \n                value: samplingType,\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px">\n        <div class="widget-input-label">Sampling Motivation (applies to this entire sampling activity)</div>\n        <div style="margin: -25px 0px 10px 0px;" data-bind="component: {\n            name: \'rich-text-widget\',\n            params: {\n                renderContext: \'workflow\', \n                value: samplingMotivation,\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px">\n        <div class="widget-input-label">Sampling Technique</div>\n        <div style="margin: -25px 0px 10px 0px;" data-bind="component: {\n            name: \'rich-text-widget\',\n            params: {\n                renderContext: \'workflow\', \n                value: samplingTechnique,\n            }\n        }"></div>\n    </div>\n    <div class="afs-experiment-name-block">\n        <div class="afs-experiment-name" data-bind="click: function(){showName(!showName())}, text: showName() ? \'Hide sampling activity name\' : \'Show sampling activity name\'"></div>\n        <div data-bind="visible: showName">\n            <div class="widget-input-label">Sampling Activity Name</div>\n            <div style="margin: -10px -5px;" data-bind="component: {\n                name: \'text-widget\',\n                params: {\n                    renderContext: \'workflow\', \n                    value: samplingName,\n                }\n            }"></div>\n        </div>\n    </div>\n    <div style="height: 50px;"></div>\n</div>'},25519:function(e){e.exports='\n<div style="height: 100%; padding: 10px 24px;">\n    <div style="padding: 5px">\n        <div class="widget-input-label">Project</div>\n        <div data-bind="component: {\n            name: \'resource-instance-select-widget\',\n            params: {\n                graphids: [\n                    projectGraphId,\n                ],\n                renderContext: \'workflow\', \n                value: projectValue,\n                disabled: locked,\n            }\n        }"></div>\n    </div>\n    \x3c!--ko if: termFilter() --\x3e\n    <div style="padding: 5px; margin-top: 15px;">\n        <div class="widget-input-label">\n            <span data-bind="if: datasetRoute == \'non-destructive\'">\n                Select an Object that has an Area of interest\n            </span>\n            <span data-bind="if: datasetRoute == \'destructive\'">\n                Select a Sample of interest\n            </span>\n        </div>\n        <div data-bind="component: {\n            name: \'resource-instance-select-widget\',\n            params: {\n                termFilter: termFilter(),\n                renderContext: \'workflow\', \n                value: physicalThingValue,\n                disabled: locked,\n            }\n        }"></div>\n    </div>\n    \x3c!--/ko--\x3e\n    \x3c!-- ko if: hasSetWithPhysicalThing() === false --\x3e\n    <div class="tabbed-workflow-step-information-box widget-input-label" style="text-align: center; margin-top: 16px; height:fit-content; background-color: #fde9ad;">\n        This project has no associated Objects. Your project must have an associated Object Collection with an Object before proceeding.\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: validateThing && isPhysicalThingValid() === false --\x3e\n    <div class="tabbed-workflow-step-information-box widget-input-label" style="text-align: center; margin-top: 16px; height:fit-content; background-color: #fde9ad;">\n        <span data-bind="if: datasetRoute == \'non-destructive\'">\n            You have to select an object with the analysis areas. Please complete the analysis area workflow or start the workflow over and select the sample dataset type.\n        </span>\n        <span data-bind="if: datasetRoute == \'destructive\'">\n            You have to select a sample. Please complete the sample taking workflow or start the workflow over and select the area dataset type.\n        </span>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>\n'},45325:function(e){e.exports='\n\n\n<div style="padding-left: 28px;">\n    <p style="margin-top: -9px; font-size: 14; color: #666;">\n        Select the option that describes your dataset:\n    </p>\n\n    <div style="display: flex;">\n        <input type="radio" id="non-destructive" value="non-destructive" name="dataset-type" data-bind="\n                checked: $data.value,\n                disable: $data.locked(),\n                cursor: $data.locked() ? \'default\' : \'pointer\';\n            " style="margin-top: 10px;\n                margin-right: 5px;">\n        <label for="non-destructive" data-bind="cursor: $data.locked() ? \'default\' : \'pointer\';">\n            <h5 class="afs-workflow-option">Data from a discrete area/region of interest</h5>\n            <p class="afs-workflow-option-instruction">\n                Choose this dataset type for any data resulting from a non-invasive technique and/or a minimally-invasive/minimally-destructive technique performed on a larger object but which does not consume the entire object/sample. This includes datasets from non-invasive techniques performed on removed samples.\n            </p>\n        </label>\n    </div>\n      \n    <div style="display: flex;">\n        <input type="radio" id="destructive" value="destructive" name="dataset-type" data-bind="\n                checked: $data.value,\n                disable: $data.locked(),\n                cursor: $data.locked() ? \'default\' : \'pointer\';\n            " style="margin-top: 10px;\n                margin-right: 5px;">\n        <label for="destructive" data-bind="cursor: $data.locked() ? \'default\' : \'pointer\';">\n            <h5 class="afs-workflow-option">Data from the consumption of the sample or object</h5>\n            <p class="afs-workflow-option-instruction">\n                Choose this dataset type for any data resulting from the full destruction of a sample or object.\n            </p>\n        </label>\n    </div>\n</div>'},70891:function(e){e.exports='\n\n\n<div class="loading-mask" data-bind="visible: loading"></div>\n<div class="afs-saving-message" data-bind="visible: loading, text: loadingMessage()"></div>\n\x3c!-- ko with: $data, as: \'self\' --\x3e\n    \n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function(){ if (digitalResources().length) {\n    toggleTab(\'edit\');\n}\n}, css: {\'disabled\': digitalResources().length === 0, \n    \'active\': activeTab() === \'edit\'\n}">\n    <i class="fa fa-pencil"></i>\n    <span class="map-sidebar-text">Dataset</span>\n</div>\n\n\n        \n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\n\x3c!--ko if: activeTab() === \'edit\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel, text: \'Dataset Details\'"></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n    <div data-bind="visible: showDatasetList">\n        <div class="file-workbench-filter">\n            <h2 class="file-workbench-filter-header">Datasets</h2>\n            <input type="text" class="form-control" style="width: 100%; height:initial" placeholder="e.g.: .txt" data-bind="textInput: digitalResourceFilter">\n            <span class="clear-node-search" data-bind="visible: digitalResourceFilter().length > 0, click: function() { digitalResourceFilter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n        </div>\n        <div class="file-workbench-files" style="max-height: 300px;height: auto;overflow-y:auto;">\n            \x3c!-- ko foreach: { data: filteredDigitalResources, as:\'digitalResource\'} --\x3e\n            <div class="file-workbench-file" style="display: inline-flex;" data-bind="click: function(ri){\n                    $parent.selectedDigitalResource(ri);\n                    $parent.showDatasetList(false);\n                    $parent.showFileList(true);\n                }, container: \'.file-workbench-files\'">\n                <i role="presentation" data-bind="class: \'fa fa-file\'"></i>\n                <div class="file-name" data-bind="text: digitalResource.resource.Name.Name_content[\'@display_value\']"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    <div data-bind="visible: showFileList">\n        <button class="btn" style="background: #9490EE;color: #eee;" data-bind=" click: function(){showDatasetList(true); showFileList(false)}">\n            <i class="fa fa-list" style="color: #eee"></i> Show Dataset List</button>\n        <div style="margin-top: 10px" data-bind="if: $parent.selectedDigitalResource()">\n            <span>Dataset:</span>\n            <span style="font-weight: bold" data-bind="text: $parent.selectedDigitalResource().displayname"></span>\n        </div>\n        <div class="file-workbench-filter" style="max-height: 300px;height: auto;overflow-y:auto;">\n            <h2 class="file-workbench-filter-header">Data Files</h2>\n            <input type="text" class="form-control" style="width: 100%; height:initial" placeholder="e.g.: .txt" data-bind="textInput: fileFilter">\n            <span class="clear-node-search" data-bind="visible: fileFilter().length > 0, click: function() { fileFilter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n        </div>\n        <div class="file-workbench-files" style="max-height: 300px;height: auto; overflow-y:auto;">\n            \x3c!-- ko foreach: { data: filteredFiles, as:\'file\'} --\x3e\n            <div class="file-workbench-file" style="display: inline-flex;" data-bind="click: function(f){\n                    $parent.selectedFile(f);\n                    $parent.showFileInfo(true);\n                    $parent.showFileList(false);\n                }, container: \'.file-workbench-files\'">\n                <i role="presentation" data-bind="class: \'fa fa-file\'"></i>\n                <div class="file-name" data-bind="text: file.file_details[0].name"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    <div data-bind="visible: showFileInfo">\n        <button class="btn" style="background: #9490EE;color: #eee;" data-bind=" click: function(){\n            showFileList(true); \n            showFileInfo(false); \n            selectedRenderer(undefined);\n            selectedFile(undefined);\n            selectedFileFormat(undefined);\n        }">\n            <i class="fa fa-list" style="color: #eee"></i> Show File List</button>\n        \n        <div style="margin-top: 10px" data-bind="if: $parent.selectedDigitalResource()">\n            <span>Dataset:</span>\n            <span style="font-weight: bold" data-bind="text: $parent.selectedDigitalResource()?.displayname"></span>\n        </div>\n        <div style="margin-top: 10px">\n            <span>File:</span>\n            <span style="font-weight: bold" data-bind="text: selectedFile()?.file_details[0].name"></span>\n        </div>\n        <div data-bind="visible: selectedFile()?.file_details?.[0] != undefined && (selectedFile().file_details[0].name.endsWith(\'txt\') || selectedFile().file_details[0].name.endsWith(\'dx\'))">\n            <div data-bind="hidden: currentRendererValid">\n                <div style="border: 1px solid #ddd; background-color: #F8735A; display: flex; color: #fff; padding: 10px 0px; align-items: center;">\n                    <i style="padding: 0px 10px;" role="presentation" class="fa fa-exclamation-triangle"></i>\n                    <div>The current renderer is not valid.  Please select a different renderer.</div>\n                </div>\n            </div>\n            <div class="format-select">\n                <input style="display:inline-block; margin-top: 70px;" data-bind="select2Query: {\n                    select2Config: {\n                        clickBubble: true,\n                        disabled: false,\n                        data: formats(),\n                        value: selectedFileFormat,\n                        allowClear: true,\n                        multiple: false,\n                        placeholder: \'Available Formats\'}}">\n            </div>\n        </div>\n        <div style="display: flex; flex-direction: column;">\n            <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: flex-end;">\n                <h2 class="file-workbench-filter-header">File Parameters</h2>\n            </div>\n            <textarea data-bind="textInput: fileStatementParameter" rows="4" class="form-control" style="width: 100%; height:initial" placeholder="e.g.: .txt"></textarea>\n        </div>\n\n        <div>\n            <h2 class="file-workbench-filter-header">File Interpretation</h2>\n            <textarea data-bind="textInput: fileStatementInterpretation" rows="4" class="form-control" style="width: 100%; height:initial" placeholder="e.g.: .txt"></textarea>\n        </div>\n    </div>\n</div>\n<div class="workbench-button-panel">\n    <button class="btn btn-success" data-bind="click: save, css: {disabled: !dirty()}"><i class="ion-android-cloud-done"></i> Save</button>\n    <button class="btn btn-danger" data-bind="click: reset, css: {disabled: !dirty()}"><i class="ion-android-cancel"></i> Cancel</button>\n</div>\n\n\x3c!-- /ko --\x3e\n\n\n\n        \n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko if: selectedFile --\x3e\n<div>\n    <div class="card-display-panel">\n        <div>\n            <div id="hidden-dz-previews"></div>\n            \x3c!-- ko if: selectedRenderer --\x3e\n            \x3c!-- ko component: {\n                    name: selectedRenderer().name,\n                    params: {\n                        // fileViewer: $data,\n                        //card: $parent.card,\n                        selected: selected,\n                        state: selectedRenderer().state,\n                        displayContent: displayContent,\n                        context: \'render\',\n                        params: $data,\n                        loading: $parent.loading\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n        </div>\n    </div>\n\n\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko ifnot: selectedFile --\x3e\n\x3c!-- ko if: activeTab() === \'edit\' --\x3e\n<div style="width: calc(100% - 400px); height: 100%; display: flex;justify-content:center; align-items:center;">\n    <div style="margin-bottom: 10px; border: 1px solid #ddd; padding: 15px; background-color: #f9f9f9;">\n        <span>Select a dataset and file to set and view interpretation and parameters.</span>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko ifnot: activeTab === \'edit\' --\x3e\n<div style="width: 100%; height: 100%; display: flex;justify-content:center; align-items:center;">\n    <div style="margin-bottom: 10px; border: 1px solid #ddd; padding: 15px; background-color: #f9f9f9;">\n        <span>Select a dataset and file to set and view interpretation and parameters.</span>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n</div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n'},77004:function(e){e.exports='\n<div style="height: 100%; padding: 10px 24px;">\n    <div style="padding: 5px; margin-bottom: 15px;">\n        <div class="widget-input-label" style="margin-bottom: 5px;">Instrument*</div>\n        <div data-bind="component: {\n            name: \'resource-instance-select-widget\',\n            params: {\n                graphids: [\n                    \'b6c819b8-99f6-11ea-a9b7-3af9d3b32b71\',\n                ],\n                renderContext: \'workflow\', \n                value: instrumentValue,\n                disabled: locked\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px;">\n        <div class="widget-input-label" style="margin-top: 10px;">Observation Date</div>\n        <div style="margin: -20px 0px 0px 0px;" data-bind="component: {\n            name: \'datepicker-widget\',\n            params: {\n                node: {\'config\': {\'dateFormat\': \'YYYY-MM-DD\'}},\n                renderContext: \'workflow\', \n                value: dateValue,\n                disabled: locked\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px; margin-bottom: 15px;">\n        <div class="widget-input-label" style="margin-bottom: 5px;">Procedure Used</div>\n        <div data-bind="component: {\n            name: \'resource-instance-select-widget\',\n            params: {\n                searchString: procedureSearchString,\n                graphids: [\n                    \'a7b1a7c5-b25b-11e9-8a4e-a4d18cec433a\',\n                ],\n                renderContext: \'workflow\',\n                allowInstanceCreation: true,\n                value: procedureValue,\n                disabled: locked\n            }\n        }"></div>\n    </div>\n    <div style="padding: 5px;">\n        <div class="widget-input-label">Instrument Parameters</div>\n        <div style="margin-top: -20px;" data-bind="component: {\n            name: \'rich-text-widget\',\n            params: {\n                renderContext: \'workflow\', \n                value: parameterValue,\n                disabled: locked\n            }\n        }"></div>\n    </div>\n    <div style="padding-bottom: 50px;" class="afs-experiment-name-block">\n        <div class="afs-experiment-name" data-bind="click: function(){showName(!showName())}, text: showName() ? \'Hide experiment name\' : \'Show experiment name\'"></div>\n        <div data-bind="visible: showName">\n            <div class="widget-input-label">Observation Name</div>\n            <div>\n                <input type="text" style="padding-left: 15px; width: 90%; height: 36px;" data-bind="textInput: nameValue, attr: {disabled: locked}">\n            </div>\n        </div>\n    </div>\n</div>\n'},59806:function(e){e.exports='\n\n\n<div class="loading-mask" data-bind="visible: loading"></div>\n<div class="afs-saving-message" data-bind="visible: loading, text: loadingMessage()"></div>\n\x3c!-- ko with: $data, as: \'self\' --\x3e\n    \n<div class="workbench-card-wrapper" data-bind="class: ko.unwrap($data.workbenchWrapperClass)">\n    \x3c!-- ko if: showTabs --\x3e\n    <div class="workbench-card-sidebar">\n        \n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'dataset\');\n}, css: {\n    \'active\': activeTab() === \'dataset\'\n}">\n    <i class="fa fa-book"></i>\n    <span class="map-sidebar-text">Dataset</span>\n</div>\n\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'imageTools\');\n}, css: {\n    \'active\': activeTab() === \'imageTools\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-image"></i>\n    <span data-bind="text: $root.translations.image" class="map-sidebar-text"></span>\n</div>\n<div class="workbench-card-sidebar-tab" data-bind="click: function() {\n    toggleTab(\'annotations\');\n}, css: {\n    \'active\': activeTab() === \'annotations\',\n    \'disabled\': !canvas() || expandGallery()\n}">\n    <i class="fa fa-list"></i>\n    <span data-bind="text: $root.translations.overlays" class="map-sidebar-text"></span>\n</div>\n\n\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!--ko if: activeTab() --\x3e\n    <div class="workbench-card-sidepanel" data-bind="css:{\'expanded\': expandSidePanel()}">\n        \n\x3c!--ko foreach: { data: [$data], as: \'self\' }--\x3e\n\x3c!--ko if: activeTab() === \'dataset\'--\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">Manage Dataset</h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n\n    \x3c!-- endif --\x3e\n\n    <div class="iiif-image-tools upload-dataset-select-dataset-files">\n        \x3c!--ko if: annotations().length > 0--\x3e\n        <div style="width:100%; display: flex;">\n            <button class="btn" style="background: #9490EE;color: #fff;" data-bind="visible: self.showDatasetDetails, click: function(){self.showDatasetDetails(false)}">\n                <i class="fa fa-list" style="color: #fff"></i> Show Sampled Area List</button>\n        </div>\n\n        <div style="margin-top:10px" data-bind="visible: !self.showDatasetDetails()">\n            <label class="control-label">Sampled Locations</label>\n            <div style="margin-bottom: 10px; border: 1px solid rgb(221, 221, 221); padding: 5px; background-color: rgb(249, 249, 249);">\n                <span>Select a location or area to upload or view files.</span>\n            </div>\n            <input type="text" class="form-control" style="width: 100%;" placeholder="Filter" data-bind="textInput: partFilter">\n        </div>\n        <div class="panel">\n            <div style="margin-top: 10px">\n                <div data-bind="visible: !self.showDatasetDetails()">\n                    <div id="parts-panel" data-bind="foreach: {data: parts, as: \'part\'}">\n                        \x3c!--ko if: self.partFilter() === "" || part.displayname.toLowerCase().includes(self.partFilter().toLowerCase()) --\x3e\n                        <div class="panel">\n                            <a role="button" data-parent="#parts-panel" aria-expanded="false" data-bind="click: function(){ $parent.showDatasetDetails(true); $parent.selectedPart(part); }, attr: { href: \'#\' + part.tileid, \'aria-expanded\': $index == 0 ? \'true\' : \'false\' }">\n                                <div style="height: 25px; padding: 10px;display: flex; align-items:center;" class="file-workbench-file">\n                                    <span style="flex: 1" class="file-name manifest-manager-canvas-name" data-bind="text: part.displayname + \' (\' + part.type + \')\'"></span>\n                                    <div data-bind="visible: !part.hasCurrentObservation()">\n                                        <i class="fa fa-lock" style="color: black"></i>\n                                    </div>\n                                    <div data-bind="visible: part.hasCurrentObservation() && part.datasetId()">\n                                        (<span data-bind="text: ko.unwrap(part?.datasetFiles)?.length"></span> <span data-bind="visible: ko.unwrap(part?.datasetFiles)?.length === 1">new file</span><span data-bind="visible: ko.unwrap(part?.datasetFiles)?.length !== 1">new files</span>)\n                                    </div>\n                                </div>\n  \n                            </a>\n                            \n                        </div>\n                        \x3c!--/ko--\x3e\n                    </div>\n                </div>\n\n                <div data-bind="visible: self.showDatasetDetails">\n\n                    <div class="format-select" data-bind="visible: selectedPartHasCurrentObservation() && selectedPartDefaultFormat() == undefined">\n                        <input style="display:inline-block; margin-top: 70px;" data-bind="select2Query: {\n                            select2Config: {\n                                clickBubble: true,\n                                disabled: false,\n                                data: formats(),\n                                value: selectedPartDefaultFormat,\n                                allowClear: true,\n                                multiple: false,\n                                placeholder: \'Choose a Default Text File Format\'}}">\n                    </div>\n                    <div style="margin-bottom: 10px" data-bind="visible: selectedPartDefaultFormat() != undefined">\n                        <span>Default Text File Format:</span>\n                        <span style="font-weight: bold" data-bind="text: formats().find((x) => x.id == ko.unwrap(selectedPartDefaultFormat))?.text"></span>\n                    </div>\n                    <div style="margin-bottom: 10px; border: 1px solid #ddd; padding: 5px; background-color: #f9f9f9;" data-bind="visible: selectedPartDefaultFormat() != undefined">\n                        <span>Supported image files and PDF files are automatically detected and displayed.</span>\n                    </div>\n                    <div data-bind="visible: selectedPartDefaultFormat() != undefined || !selectedPartHasCurrentObservation()">\n                        <div class="dataset-name">\n                            <label class="control-label">Dataset Name</label>\n                            <div style="display: flex">\n                                <input style="flex: 1;" type="text" class="form-control" placeholder="Dataset name" data-bind="enable: self.selectedPartHasCurrentObservation(), textInput: selectedPart().datasetName">\n                                <button style="margin: 0px 5px" class="btn btn-md btn-mint" data-bind="visible: (self.showDatasetDetails() && selectedPart()?.nameDirty()), click: function(){$parent.saveFiles(); }" style="">Save</button>\n                            </div>\n                            <div style="display: flex;">\n                                <input class="afs-calculated-datasetname" style="flex: 1" disabled="disabled" type="text" data-bind="textInput: selectedPartHasCurrentObservation() ? selectedPart().calcDatasetName : selectedPart().datasetName">\n                            </div>\n                        </div>\n                        <div class="dropzone-photo-upload" style="height: 80px;" data-bind="visible: selectedPartHasCurrentObservation(), dropzone: dropzoneOptions">\n                            <div class="file-workbench-links">\n                                <a class="upload-dataset-files dz-clickable" data-bind="css: uniqueidClass">\n                                    <span>Drag or </span><span class="text-bold">click here </span><span>to upload files</span>\n                                </a>\n                            </div>\n                            <div style="min-height: 100%;">\n                                <div id="hidden-dz-previews" style="display:none"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="panel-collapse collapse" data-bind="visible: ko.unwrap(selectedPart().datasetFiles).length; attr: { id: selectedPart().tileid }, css: { in: $index() == 0}">\n                        <label class="control-label" style="padding-top: 5px;">Files in Dataset</label>\n                        <div class="file-workbench-files" data-bind="foreach: {data: selectedPart().datasetFiles, as: \'file\'}">\n                            <div class="file-workbench-file" style="display: flex;" data-bind="css: {staged: false}">\n                                <div style="flex: 1">\n                                    <i data-bind="visible: self.selectedPartHasCurrentObservation(), click: function(){self.selectedPartHasCurrentObservation() ? $parent.deleteFile(file): console.log(\'no\')}" class="fa fa-trash" style="color: black"></i>\n                                    <span class="file-name manifest-manager-canvas-name" data-bind="text: file.name"></span>\n                                </div>\n                                <div data-bind="visible: !self.selectedPartHasCurrentObservation()">\n                                    <i class="fa fa-lock" style="color: black"></i>\n                                </div>\n                            </div>\n                        </div>\n                        <div><span data-bind="text: ko.unwrap(selectedPart().datasetFiles).length"></span> files loaded</div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n    </div>\n\n    <div class="iiif-image-tools upload-dataset-select-dataset-files" style="margin-top: -20px;" data-bind="if: self.selectedPartHasCurrentObservation()">\n        \x3c!--ko if: files().length > 0 && selectedPart() --\x3e\n        <label class="control-label">Available Files</label>\n        <div class="file-workbench-files" data-bind="foreach: {data: files, as: \'file\'}">\n            <div class="file-workbench-file" data-bind="css: {staged: false}">\n                <i class="fa fa-upload" data-bind="value: file, click: function(){$parent.addFileToPart(file)}"></i>\n                <span class="file-name manifest-manager-canvas-name" data-bind="text: file.name, click: function(){$parent.addFileToPart(file)}, clickBubble: false"></span>\n            </div>\n        </div>\n        \x3c!--/ko--\x3e\n\n    </div>\n</div>\n\n\n\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n\n\x3c!--ko if: activeTab() === \'imageTools\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="\n            text: $root.translations.imageTools,\n            click: hideSidePanel\n        "></h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="iiif-image-tools">\n    <div data-bind="if: showModeSelector" class="layout">\n        <div>\n            <span data-bind="text: $root.translations.panelLayout"></span>\n        </div>\n        <div class="mode-selector">\n            <div data-bind="click: function(){ compareMode(false); return true; }, css: { selected: !compareMode() }">\n                <div class="selector-button"></div>\n                <input name="panelGroup" value="single" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.singlePanel"></span>\n            </div>\n            <div data-bind="click: function(){ compareMode(true); return true; }, css: { selected: compareMode() }">\n                <div>\n                    <div class="selector-button"></div>\n                    <div class="selector-button"></div>\n                </div>\n                <input name="panelGroup" value="double" type="radio" data-bind="checked: panelRadio">\n                <span data-bind="text: $root.translations.doublePanel"></span>\n            </div>\n        </div>\n\n        <div class="panel-selector">\n            <span data-bind="text: $root.translations.selectedPanelLayout"></span>\n            <div class="selector">\n                <div data-bind="css: { selected: selectPrimaryPanel() }">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}" class="primary">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                </div>\n                <div data-bind="css: { selected: !selectPrimaryPanel() }, if: compareMode()">\n                    <div class="secondary" data-bind="click: function(){selectPrimaryPanel(false)}">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div data-bind="if: showModeSelector" style="width: 96%; margin: 20px 0px;">\n        <input class="form-control input-lg widget-input" data-bind="value: imageToolSelector,\n            select2Query: {\n                select2Config: imageToolConfig\n            }">\n    </div>\n\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-lightbulb-o"></i>\n            <span data-bind="text: $root.translations.brightness"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: brightness"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-adjust"></i>\n            <span data-bind="text: $root.translations.contrast"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: contrast"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-eyedropper"></i>\n            <span data-bind="text: $root.translations.saturation"></span>\n        </div>\n        <div class="iiif-image-tool-slider-wrap">\n            <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n        </div>\n        <div class="iiif-image-tool-value">\n            <span data-bind="text: saturation"></span>%\n        </div>\n    </div>\n    <div class="iiif-image-tool-slider">\n        <div class="iiif-image-tool-label">\n            <i class="fa fa-image"></i>\n            <span data-bind="text: $root.translations.greyscale"></span>\n        </div>\n        <div class="toggle-container">\n            <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n            <div style="display:flex; flex-direction:row;">\n                <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                    <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="install-buttons">\n        <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: resetImageSettings">\n            <span data-bind="text: $root.translations.resetToDefaults"></span>\n        </button>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\x3c!--ko if: activeTab() === \'annotations\' --\x3e\n<div class="workbench-card-sidepanel-header-container">\n    <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">\n        <span data-bind="text: $root.translations.annotationOverlays"></span>\n    </h4>\n</div>\n<div class="workbench-card-sidepanel-border"></div>\n<div class="workbench-card-sidepanel-body">\n<div class="overlays-listing-container" data-bind="sortable: {\n    data: annotationNodes\n}">\n    <div class="overlay-listing" data-bind="css: {\'active-overlay\': active}">\n        <div class="overlay-name" data-bind="\n            click: function() {\n                active(!active());\n            }\n        ">\n            <i data-bind="css: icon" class="layer-listing-icon"></i>\n            <span data-bind="text: name"></span>\n        </div>\n        <div class="relative">\n            <div class="overlay-opacity-control">\n                <i class="fa fa-adjust"></i>\n                <div class="overlay-opacity-slider">\n                    <input type="range" min="0" max="100" step="1" data-bind="value: opacity, valueUpdate: \'input\'">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\x3c!--/ko --\x3e\n\n\n    </div>\n    \x3c!--/ko --\x3e\n    <div class="workbench-card-container-wrapper" data-bind="css: {\n        \'workbench-card-container-sidepanel-active\': activeTab(), \'wide\': showTabs() === false\n    }">\n    \n\x3c!-- ko foreach: { data: [$data], as: \'self\' } --\x3e\n\x3c!--ko if: ko.unwrap(self.mainMenu) --\x3e\n\n\n\x3c!--/ko--\x3e\n\x3c!--ko if: !ko.unwrap(self.mainMenu) --\x3e\n<div class="workbench-card-container" data-bind="css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery\n    }">\n\n    <div class="iiif-leaflet" data-bind="leaflet: leafletConfig">\n        <div class="split-controls left" data-bind="if: secondaryCanvas">\n            <div style="width: 200px">\n                <input class="form-control input-lg widget-input" data-bind="value: canvas(),\n                    select2Query: {\n                        select2Config: leftSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'left\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n        <div class="split-controls right" data-bind="if: secondaryCanvas">\n            <div style="width: 200px;">\n                <input class="form-control input-lg widget-input" data-bind="value: secondaryCanvas(),\n                    select2Query: {\n                        select2Config: rightSideSelectConfig\n                    }">\n            </div>\n            <div class="button" data-bind="click: imagePropertyUpdate.bind($data,\'right\')">\n                <i class="fa fa-picture-o"></i>\n            </div>\n        </div>\n    </div>\n    <div class="image-tools-floating" data-bind="style: {display: showImageModifiers() ? \'inherit\': \'none\'}, css: {left: floatingLocation() == \'left\', right: floatingLocation() == \'right\', sidepanel: activeTab()}">\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-lightbulb-o"></i>\n                <span data-bind="text: $root.translations.brightness"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: brightness, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: brightness"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-adjust"></i>\n                <span data-bind="text: $root.translations.contrast"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: contrast, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: contrast"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-eyedropper"></i>\n                <span data-bind="text: $root.translations.saturation"></span>\n            </div>\n            <div class="iiif-image-tool-slider-wrap">\n                <input type="range" min="0" max="200" step="1" data-bind="value: saturation, valueUpdate: \'input\'">\n            </div>\n            <div class="iiif-image-tool-value">\n                <span data-bind="text: saturation"></span>%\n            </div>\n        </div>\n        <div class="iiif-image-tool-slider">\n            <div class="iiif-image-tool-label">\n                <i class="fa fa-image"></i>\n                <span data-bind="text: $root.translations.greyscale"></span>\n            </div>\n            <div class="toggle-container">\n                <span class="switch switch-small switch-widget" data-bind="css: {\'on\': greyscale()}, click: function() { greyscale(!greyscale()); }"><small></small></span>\n                <div style="display:flex; flex-direction:row;">\n                    <div class="arches-toggle-sm" data-bind="click: function() { greyscale(!greyscale()); }">\n                        <span data-bind="text: $root.translations.displayAsGreyscale"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="show-gallery-control" data-bind="click: toggleGallery, css: {\n        \'gallery-visible\': showGallery,\n        \'gallery-expanded\': expandGallery,\n    }">\n    <h3>\n        <span data-bind="text: $root.translations.showGallery"></span>\n    </h3>\n</div>\n\x3c!--ko let: {canvasClick: canvasClick, getCanvasService: getCanvasService, selectedCanvas: selectPrimaryPanel() ? canvas: secondaryCanvas, getAnnotationCount: getAnnotationCount} --\x3e\n<div class="iiif-viewer-gallery" data-bind="css: {\n        \'gallery-expanded\': expandGallery\n    }">\n    \x3c!--ko if: showGallery() --\x3e\n    <div class="iiif-gallery-content">\n\n        \x3c!--ko if: manifestData() --\x3e\n        <div class="panel-controls">\n            <div class="hide-gallery-control" data-bind="click: toggleGallery">\n                <span data-bind="text: $root.translations.hideGallery"></span>\n            </div>\n            <div data-bind="if: showModeSelector" class="mode-selector">\n                <div>\n                    <span data-bind="text: $root.translations.panels"></span>\n                </div>\n                <div class="mode-selector-buttons">\n                    <div class="single-panel" data-bind="click: function(){compareMode(false)}, css: {selected: !compareMode()}">\n                        <div></div>\n                    </div>\n                    <div class="two-panel" data-bind="click: function(){compareMode(true)}, css: {selected: compareMode()}">\n                        <div></div>\n                        <div></div>\n                    </div>\n                </div>\n                <div class="panel-selector-buttons">\n                    <div data-bind="click: function(){selectPrimaryPanel(true)}, css: { selected: selectPrimaryPanel() }">\n                        <span data-bind="text: $root.translations.panelOne"></span>\n                    </div>\n                    <div data-bind="click: function(){selectPrimaryPanel(false)}, css: { selected: !selectPrimaryPanel(), hide: !compareMode() }">\n                        <span data-bind="text: $root.translations.panelTwo"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: expandGallery() && manifestData() --\x3e\n        <div class="manifest-details">\n            <h3>\n                <span data-bind="text: manifestName"></span>\n            </h3>\n\n            <h4>\n                <span data-bind="html: manifestDescription"></span>\n            </h4>\n\n            <div class="manifest-details-list" data-bind="foreach: manifestMetadata">\n                <dt class="manifest-metadata-title" data-bind="text: label"></dt>\n                \x3c!--ko foreach: Array.isArray(value) ? value : [value] --\x3e\n                <dd class="manifest-metadata-value" data-bind="html: $data"></dd>\n                \x3c!--/ko --\x3e\n            </div>\n            <h4 class="manifest-attribution-key" data-bind="text: manifestAttribution"></h4>\n            \x3c!-- ko if: showLogo --\x3e\n            <img class="manifest-logo" data-bind="attr: {src: manifestLogo()}">\n            \x3c!-- /ko --\x3e\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!--ko if: editManifest() --\x3e\n        <div class="manifest-editor">\n            <div class="manifest-editor-label">\n                <span data-bind="text: $root.translations.selectAManifest + \':\'"></span>\n            </div>\n            <div class="manifest-editor-input">\n                <input class="form-control input-lg widget-input" data-bind="value: manifest,\n                    select2Query: {\n                        select2Config: manifestSelectConfig\n                    }">\n            </div>\n\n            <div class="install-buttons">\n                <button class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-pencil" data-bind="click: getManifestData,\n                    disabled: manifestLoading(),\n                    css: { \'disabled\': manifestLoading() }\n                ">\n                    <span data-bind="text: $root.translations.loadManifest"></span>\n                </button>\n                \x3c!--ko if: manifestData() --\x3e\n                <button class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-refresh" data-bind="click: toggleManifestEditor">\n                    <span data-bind="text: $root.translations.cancel"></span>\n                </button>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestLoading() --\x3e\n                <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n                \x3c!--ko if: manifestError() --\x3e\n                <span data-bind="text: console.log(manifestError())"></span>\n                <span class="manifest-editor-error" data-bind="text: $root.translations.errorLoadingManifest + \'...\'"></span>\n                \x3c!--/ko --\x3e\n            </div>\n        </div>\n\n\n        \x3c!--/ko --\x3e\n        \x3c!--ko if: !editManifest() --\x3e\n            \x3c!--ko if: manifestLoading() --\x3e\n            <span class="manifest-editor-loading" data-bind="text: $root.translations.loadingManifest + \'...\'"></span>\n            \x3c!--/ko --\x3e\n            \x3c!--ko if: !manifestLoading() --\x3e\n            <div class="iiif-gallery-panel" style="overflow-x: auto;">\n                <div class="iiif-gallery-header" style="display:flex">\n                    <div style="display: flex; align-items: center">\n                        \n                        <div>\n                            <span class="iiif-gallery-manifest-label" data-bind="text: manifestData() ? manifestName() : $root.translations.noManifestSelected"></span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="click: function(){expandGallery(!expandGallery())}">\n                                \x3c!-- ko if: !expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.info"></span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: expandGallery() --\x3e\n                                    <span data-bind="text: $root.translations.close"></span>\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        </div>\n                        <div>\n                            <span class="iiif-gallery-sequence-label" data-bind="\n                                    text: $root.translations.switchImageService,\n                                    click: toggleManifestEditor\n                                "></span>\n                        </div>\n                        <div>\n                            <span data-bind="text: $root.translations.filter"></span>\n                            <div class="list-filter" data-bind="">\n                                <input type="text" class="form-control" style="width: 100%;" data-bind="\n                                        textInput: filter,\n                                        attr: {placeholder: $root.translations.filterImages + \'...\'}\n                                    ">\n                                \x3c!-- Clear Search --\x3e\n                                <span class="clear-node-search" data-bind="visible: filter().length > 0, click: function() { filter(\'\'); }"><i class="fa fa-times-circle"></i></span>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div class="iiif-gallery-sequence">\n                    <div class="iiif-gallery-sequence-canvases" data-bind="foreach: canvases">\n                        <div style="display: inline-block;">\n                            <div class="iiif-gallery-canvas" data-bind="click: function() {\n                                canvasClick($data);\n                            },\n                            visible: label.toLowerCase().includes(self.filter().toLowerCase()),\n                            css: {\n                                active: getCanvasService($data) === selectedCanvas(),\n                                annotated: getAnnotationCount(getCanvasService($data))\n                            }">\n                                <div style="text-align:center" class="iiif-gallery-canvas-thumbnail">\n                                    <img data-bind="attr: { src: $data.thumbnail || \'/static/img/photo_missing.png\', title: $data.label}">\n                                </div>\n                                <div style="text-align:center;" class="iiif-gallery-canvas-label">\n                                    <span data-bind="text: label"></span>\n                                    <span class="annotation-count">\n                                        \x3c!--ko if: getAnnotationCount(getCanvasService($data)) --\x3e\n                                        <span data-bind="text: getAnnotationCount(getCanvasService($data))"></span>\n                                        <span data-bind="text: $root.translations.annotations"></span>\n                                        \x3c!--/ko --\x3e\n                                        \x3c!--ko if: !getAnnotationCount(getCanvasService($data)) --\x3e\n                                        &nbsp;\n                                        \x3c!--/ko --\x3e\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!--/ko --\x3e\n        \x3c!--/ko --\x3e\n    </div>\n    \x3c!--/ko --\x3e\n</div>\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\x3c!--/ko --\x3e\n\n</div>\n</div>\n\n\x3c!-- /ko --\x3e\n\n'},78960:function(e){e.exports='\n\x3c!-- ko if: loading() === false --\x3e\n<div class="final-step">\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Created or Modified Resource Instance</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <a data-bind="attr: { href: urls.resource + \'/\' + resourceid}" target="_blank">\n                    <div class="summary-value" data-bind="text: reportVals.observationName.value + \' (Observation Resource Instance)\'">\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Related Project/Object</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.project.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.project.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.usedObject.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.usedObject.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="afs-final-step-section">\n        <h5 class="summary-value">Observation Details</h5>\n        <div class="afs-final-step-block">\n            <div style="display: flex; flex-direction: column;">\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.usedInstrument.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.usedInstrument.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.usedProcess.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.usedProcess.value"></div>\n                </div>\n                <div style="display: inline-flex;">\n                    <div class="summary-label" data-bind="text: reportVals.observationName.name + \':\'"></div>\n                    <div class="summary-value" data-bind="text: reportVals.observationName.value"></div>\n                </div>\n                <div class="pad-top">\n                    <div class="summary-label" data-bind="text: reportVals.statement.name + \':\'"></div>\n                    <div class="summary-value" data-bind="html: reportVals.statement.value"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="afs-final-step-section">\n        <h5 class="summary-value" style="margin-bottom: -10px;">Files for Upload</h5>\n        \x3c!-- ko foreach: {data: fileLists, as: \'fileList\'} --\x3e\n        \x3c!-- ko if: fileList().length > 0 --\x3e\n        <h5 class="summary-value upload-dataset-name" data-bind="text: digitalResourceName || \'Unnamed Dataset (nothing to upload)\'"></h5>\n        <div style="margin-top: -20px">\n            \x3c!-- ko if: $parent.hasAnnotatedParts --\x3e\n            <div style="border: solid 1px #ddd">\n                <div class="iiif-leaflet" data-bind="leaflet: leafletConfig" style="height: 300px; width: 100%"></div>\n            </div>\n            \x3c!-- /ko --\x3e\n            <div style="width: 100%; padding-left: 10px; padding-right: 10px; margin-bottom: 20px;">\n                <table data-bind="datatable: $parent.tableConfig" class="table table-striped" style="border-bottom: 1px solid #ddd" width="100%">\n                    <thead>\n                        <tr>\n                            <th>File Name:</th>\n                            <th>Interpretation</th>\n                            <th>File Parameters</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: {data: fileList, as: \'file\'}">\n                        <tr>\n                            <td><div class="summary-value" data-bind="text: file.name"></div></td>\n                            <td><div class="summary-value" data-bind="text: file.interpretation"></div></td>\n                            <td><div class="summary-value" data-bind="text: file.parameter"></div></td>\n                        </tr>\n                    <tbody>\n                </tbody></tbody></table>\n                <div class="final-step-section-block-item" style="margin-top: -15px;">\n                    <div style="display: inline-flex;">\n                        <div class="summary-label">Files: </div>\n                        <div class="summary-value" data-bind="text: fileList().length + \' files uploaded\'"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'},13329:function(e){e.exports='\n\n\n\n\n\n\n\n\n\n\n\n<div class="loading-mask" data-bind="visible: loading"></div>\n<div class="afs-saving-message" data-bind="visible: loading, text: loadingMessage()"></div>\n<div class="file-workbench-filter" style="padding-left: 46px;  padding-right: 46px; display:flex; flex-direction: column">\n    <div class="dataset-name" style="flex-grow: 1;">\n        <label class="control-label">Dataset Name</label>\n        <input type="text" class="form-control" style="width: 50%; height:initial" data-bind="textInput: datasetName">\n        <div>\n            <input class="afs-calculated-datasetname" disabled="disabled" type="text" style="width: 50%;" data-bind="textInput: calcDatasetName">\n        </div>\n\n    </div>\n    <div style="padding-left: 20px;">\n        \x3c!-- ko if: dirty --\x3e\n        <button class="btn btn-shim btn-danger btn-labeled btn-sm fa fa-times" data-bind="click: reset">Cancel</button>\n        <button class="btn btn-shim btn-labeled btn-sm fa fa-plus btn-mint" data-bind="click: saveFiles">Save</button>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div class="format-select" style="width: 50%" data-bind="visible: defaultFormat() == undefined">\n        <input style="display:inline-block;" data-bind="select2Query: {\n            select2Config: {\n                clickBubble: true,\n                disabled: false,\n                data: formats(),\n                value: defaultFormat,\n                allowClear: true,\n                multiple: false,\n                placeholder: \'Available Formats\'}}">\n    </div>\n    <div style="margin-bottom: 10px" data-bind="visible: defaultFormat() != undefined">\n        <span>Default Text File Format:</span>\n        <span style="font-weight: bold" data-bind="text: formats().find((x) => x.id == ko.unwrap(defaultFormat))?.text"></span>\n    </div>\n    <div style="margin-bottom: 10px; border: 1px solid #ddd; padding: 5px; background-color: #f9f9f9; width: 50%" data-bind="visible: defaultFormat() != undefined">\n        <span>Supported image files and PDF files are automatically detected and displayed.</span>\n    </div>\n</div>\n\n<div class="file-chart-upload-panel" data-bind="visible: defaultFormat() != undefined">\n    \x3c!-- ko if: files().length === 0 --\x3e\n    <div class="gallery-controls new-tile">\n        <div class="dropzone-photo-upload" data-bind="dropzone: dropzoneOptions">\n            <div class="file-select-window">\n                <div class="bord-top pad-ver file-select">\n                    <div class="" style="padding: 5px">\n                        <h2>Upload Files</h2>\n                        <h4>Drag & Drop your files onto this panel to upload</h4>\n                    </div>\n                    <button type="button" class="btn btn-lg btn-file-select upload-dataset-files dz-clickable" data-bind="css: uniqueidClass">\n                        <i class="fa fa-file"></i>\n                        <span>Select Files</span>\n                    </button>\n                    <br>\n                    <div style="padding: 10px">Adding files to this record is \n                        <span><strong>optional.</strong></span>\n                        <br>\n                        You may upload as many files as you wish; check with the site admin on the maximum file size.\n                    </div>\n\n                </div>\n                <div class="file-upload-footer">\n                    <span></span>\n                </div>\n            </div>\n\n        </div>\n        <div class="dropzone" style="min-height: 100%; display:none;">\n            <div id="hidden-dz-previews" class="dropzone-previews" data-bind="css: uniqueidClass"></div>\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n      \n    \x3c!-- ko if: files().length > 0 --\x3e\n    \n    <div style="background-color: white; padding: 45px;">\n        <div class="dropzone-photo-upload" style="background: #fafafa; border: dashed 1px purple; padding: 40px; text-align: center;" data-bind="dropzone: dropzoneOptions">\n            <div class="file-workbench-links">\n                <a class="upload-dataset-files dz-clickable" data-bind="css: uniqueidClass">\n                    <span>Drag or </span><span class="text-bold">click here </span>\n                    <span>to upload more files</span>\n                </a>\n            </div>\n            <div style="min-height: 100%;">\n                <div id="hidden-dz-previews" style="display:none"></div>\n            </div>\n        </div>\n        <div class="file-workbench-files" style="display: flex; flex-direction: column; height: 485px; border: solid 1px lightgrey; padding: 20px;">\n            \n            \x3c!-- ko foreach: {data: files, as: \'file\'} --\x3e\n                <div class="file-workbench-file">\n                    <div style="display: flex; flex-direction: row; min-width: 500px; padding: 5px;">\n                        <div style="flex: 1">\n                            <i data-bind="click: function(){$parent.deleteFile(file)}" class="fa fa-trash" style="color: black"></i>\n                            <span class="file-name manifest-manager-canvas-name" data-bind="text: file.name"></span>\n                        </div>\n                    </div>\n                </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n</div>\n'},23614:function(e){e.exports='\n\x3c!-- ko if: !$data.configForm --\x3e\n\x3c!-- ko if: !$data.summary --\x3e\n\n<div class="thematic-report-container">\n    \n\n\n\n\n\n\n\x3c!-- Report Content --\x3e\n<div class="rp-report-container-preview">\n\n    \n<div class="thematic-nav-tab-container">\n    <ul class="nav nav-tabs thematic-nav-tab-list">\n        \x3c!-- ko foreach: TAB_DATA --\x3e\n            <li class="thematic-nav-tab-list-item" data-bind="\n                    container: \'.thematic-nav-tab-container\',\n                    scrollDirection: \'horizontal\',\n                    scrollTo: $index() === $parent.activeTabIndex(),\n                ">\n                <div class="thematic-nav-tab" data-bind="{\n                        css: { active: $index() === $parent.activeTabIndex() },\n                        click: function() { \n                            if (\n                                $index() !== $parent.activeTabIndex() \n                            ) { \n                                $parent.activeTabIndex($index()); \n                            }\n                        },\n                    }">\n                    <div style="display: flex; \n                            flex-direction: row; \n                            justify-content: center; \n                            align-items: center;">\n                        <span style="font-size: 14px;" data-bind="text: $data.title"></span>\n                    </div>\n                </div>\n            </li>\n        \x3c!-- /ko --\x3e\n    </ul>\n</div>\n\n\n    \n<div class="thematic-report-body-container">\n    \x3c!-- ko if: !loading() --\x3e\n    <div class="thematic-report-body">\n        \x3c!-- ko if: activeTab() --\x3e\n            \x3c!-- ko with: activeTab() --\x3e\n                \x3c!-- ko foreach: sections() --\x3e\n                    \x3c!-- ko if: $data.resourceInstanceData.length || !$parents[1].emptyReportSectionsHidden() --\x3e\n                        <div class="thematic-report-section" data-bind="style: { \'border-bottom\': $data.resourceInstanceData.length ? \'1px solid #ddd\' : \'none\' }">\n                            <div class="thematic-report-section-title-container">\n                                \x3c!-- ko if: $data[\'hasPlusSign\'] --\x3e\n                                <button style="border: none;">\n                                    <i class="fa fa-plus"></i>\n                                </button>\n                                \x3c!-- /ko --\x3e\n\n                                <div class="thematic-report-section-title">\n                                    <h5 data-bind="text: sectionTitle"></h5>\n                                </div>\n                            </div>\n\n                            \x3c!-- ko if: $data.resourceInstanceData.length --\x3e\n\n                                \x3c!-- ko if: $data.childNodeInformation --\x3e\n                                <table style="margin: 12px 0;">\n                                    <thead class="thematic-report-table-head">\n                                        <tr>\n                                            <th style="border-right: 1px solid #ddd;">\n                                                \x3c!-- dummy <th> for button heading --\x3e\n                                            </th>\n                                            \n                                            \x3c!-- ko foreach: $data.childNodeInformation --\x3e\n                                                <th data-bind="text: columnName"></th>\n                                            \x3c!-- /ko --\x3e\n                                        </tr>\n                                    </thead>\n                                    <tbody class="thematic-report-table-body">\n                                        \x3c!-- ko foreach: $data.resourceInstanceData --\x3e\n                                        <tr>\n                                            <td class="thematic-report-table-body-button-container">\n                                                <button>\n                                                    <i class="fa fa-wrench"></i>\n                                                </button>\n                                                <button>\n                                                    <i class="fa fa-trash"></i>\n                                                </button>\n                                            </td>\n                                            \x3c!-- ko foreach: $parent.childNodeInformation --\x3e\n                                                <td data-bind="text: $parents[2].getResourceInstanceNodeData($data.nodeId, $parent)[VALUE]"></td>\n                                            \x3c!-- /ko --\x3e\n                                        </tr>\n                                        \x3c!-- /ko --\x3e\n                                    </tbody>\n                                </table>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko ifnot: $data.childNodeInformation --\x3e\n                                <table style="margin: 12px 0; width: fit-content;">\n                                    <tbody class="thematic-report-table-body">\n                                        \x3c!-- ko foreach: $data.resourceInstanceData --\x3e\n                                            <tr>\n                                                <td class="thematic-report-table-body-button-container">\n                                                    <button>\n                                                        <i class="fa fa-wrench"></i>\n                                                    </button>\n                                                    <button>\n                                                        <i class="fa fa-trash"></i>\n                                                    </button>\n                                                </td>\n                                                <td data-bind="text: $data[VALUE]"></td>\n                                            </tr>\n                                        \x3c!-- /ko --\x3e\n                                    </tbody>\n                                </table>\n                                \x3c!-- /ko --\x3e\n\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko ifnot: $data.resourceInstanceData.length --\x3e\n                            <div style="padding: 8px 0px">\n                                <span>No data has been added yet.</span>\n                            </div>\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- /ko --\x3e\n</div>\n\n    \n    \n    \n\n\n    \n<div class="thematic-report-footer">\n    <div style="display: flex;">\n        <div class="tab-counter">\n            <span style="padding-right: 2px;" data-bind="text: activeTabIndex() + 1"></span>\n            <span data-bind="text:`/ ${TAB_DATA.length}`"></span>\n            \n        </div>\n\n        <div data-bind="{\n                component: { \n                    name: \'views/components/simple-switch\', \n                    params: {\n                        value:  emptyReportSectionsHidden, \n                        config:{\n                            label: \'Hide empty report sections\',\n                            setvalue: toggleEmptyReportSections,\n                            getvalue: emptyReportSectionsHidden,\n                        }\n                    }\n                }\n            }"></div>\n    </div>\n\n</div>\n\n</div>\n\n</div>\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: $data.summary --\x3e\n\n<div class="relative report-title-bar">\n\n    \x3c!-- Title Block --\x3e\n    <div class="report-toolbar-preview ep-form-toolbar">\n        <h4 class="report-toolbar-title"><span data-bind="text: report.get(\'name\')"></span> - <span data-bind="text: report.get(\'displayname\') "></span></h4>\n\n        \x3c!-- Tools --\x3e\n        <div class="ep-form-toolbar-tools mar-no flex">\n            <p class="report-print-date">\n                <span data-bind="text: reportDate"></span>\n                <span data-bind="text: reportDate"></span>\n            </p>\n        </div>\n    </div>\n</div>\n\n<div class="rp-report-container-preview">\n    <div class="rp-report-section relative rp-report-section-root">\n        <div class="rp-report-section-title">\n            \x3c!-- ko if: report.cards.length > 0 --\x3e\n                \x3c!--ko let: { card: report.cards[0] }--\x3e\n                <div class="rp-card-section">\n                    \x3c!-- ko component: {\n                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,\n                        params: {\n                        state: \'report\',\n                        preview: report.preview,\n                        card: card,\n                        pageVm: $root\n                    }\n                    } --\x3e \x3c!-- /ko --\x3e\n                </div>\n                \x3c!--/ko--\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n\n\x3c!-- /ko --\x3e\n\x3c!-- end of not configForm --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- ko if: $data.configForm && ($data.configType === \'header\') --\x3e\n\n\n\x3c!-- /ko --\x3e\n'},87870:function(e,t,n){"use strict";e.exports=n.p+"e61d5db689dc74712132.png"},30953:function(e,t,n){"use strict";e.exports=n.p+"d6d876ba34a7c86e64d0.png"},31848:function(e,t,n){"use strict";e.exports=n.p+"0caab1fe468bdb6380cd.png"},99836:function(e,t,n){"use strict";e.exports=n.p+"c12d7b13b8f44ddc0bb9.png"}}]);